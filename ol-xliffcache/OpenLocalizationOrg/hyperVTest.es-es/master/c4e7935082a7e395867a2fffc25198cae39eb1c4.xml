{
  "nodes": [
    {
      "pos": [
        27,
        99
      ],
      "content": "Set up a virtual machine as an IPython Notebook server | Microsoft Azure"
    },
    {
      "pos": [
        118,
        231
      ],
      "content": "Set up an Azure Virtual Machine for use in a data science environment with IPython Server for advanced analytics."
    },
    {
      "pos": [
        574,
        658
      ],
      "content": "Set up an Azure virtual machine as an IPython Notebook server for advanced analytics"
    },
    {
      "pos": [
        660,
        1212
      ],
      "content": "This topic shows how to provision and configure an Azure virtual machine for advanced analytics that can to be used as part of a data science environment. The Windows virtual machine is configured with supporting tools such as such as IPython Notebook, Azure Storage Explorer, AzCopy, as well as other utilities that are useful for advanced analytics projects. Azure Storage Explorer and AzCopy, for example, provide convenient ways to upload data to Azure blob storage from your local machine or to download it to your local machine from blob storage.",
      "nodes": [
        {
          "content": "This topic shows how to provision and configure an Azure virtual machine for advanced analytics that can to be used as part of a data science environment.",
          "pos": [
            0,
            154
          ]
        },
        {
          "content": "The Windows virtual machine is configured with supporting tools such as such as IPython Notebook, Azure Storage Explorer, AzCopy, as well as other utilities that are useful for advanced analytics projects.",
          "pos": [
            155,
            360
          ]
        },
        {
          "content": "Azure Storage Explorer and AzCopy, for example, provide convenient ways to upload data to Azure blob storage from your local machine or to download it to your local machine from blob storage.",
          "pos": [
            361,
            552
          ]
        }
      ]
    },
    {
      "pos": [
        1241,
        1295
      ],
      "content": "Step 1: Create a general purpose Azure virtual machine"
    },
    {
      "pos": [
        1297,
        1532
      ],
      "content": "If you already have an Azure virtual machine and just want to set up an IPython Notebook server on it, you can skip this step and proceed to <bpt id=\"p1\">[</bpt>Step 2: Add an endpoint for IPython Notebooks to an existing virtual machine<ept id=\"p1\">](#add-endpoint)</ept>."
    },
    {
      "pos": [
        1534,
        1859
      ],
      "content": "Before starting the process of creating a virtual machine on Azure, you need to determine the size of the machine that is needed to process the data for their project. Smaller machines have less memory and fewer CPU cores than larger machines, but they are also less expensive. For a list of machine types and prices, see the",
      "nodes": [
        {
          "content": "Before starting the process of creating a virtual machine on Azure, you need to determine the size of the machine that is needed to process the data for their project.",
          "pos": [
            0,
            167
          ]
        },
        {
          "content": "Smaller machines have less memory and fewer CPU cores than larger machines, but they are also less expensive.",
          "pos": [
            168,
            277
          ]
        },
        {
          "content": "For a list of machine types and prices, see the",
          "pos": [
            278,
            325
          ]
        }
      ]
    },
    {
      "pos": [
        1947,
        1971
      ],
      "content": "Virtual Machines Pricing"
    },
    {
      "pos": [
        1977,
        1981
      ],
      "content": "page"
    },
    {
      "pos": [
        1986,
        2209
      ],
      "content": "Log in to <ph id=\"ph2\">&lt;a href=\"https://manage.windowsazure.com\" target=\"_blank\"&gt;</ph>Azure Classic Portal<ph id=\"ph3\">&lt;/a&gt;</ph>, and click <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept><ph id=\"ph4\"/> in the bottom left corner. A window will pop up. Select <bpt id=\"p3\">**</bpt>COMPUTE<ept id=\"p3\">**</ept><ph id=\"ph5\"/> -&gt; <bpt id=\"p4\">**</bpt>VIRTUAL MACHINE<ept id=\"p4\">**</ept><ph id=\"ph6\"/> -&gt; <bpt id=\"p5\">**</bpt>FROM GALLERY<ept id=\"p5\">**</ept>.",
      "nodes": [
        {
          "content": "Log in to <ph id=\"ph2\">&lt;a href=\"https://manage.windowsazure.com\" target=\"_blank\"&gt;</ph>Azure Classic Portal<ph id=\"ph3\">&lt;/a&gt;</ph>, and click <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept><ph id=\"ph4\"/> in the bottom left corner.",
          "pos": [
            0,
            238
          ]
        },
        {
          "content": "A window will pop up.",
          "pos": [
            239,
            260
          ]
        },
        {
          "content": "Select <bpt id=\"p3\">**</bpt>COMPUTE<ept id=\"p3\">**</ept><ph id=\"ph5\"/> -&gt; <bpt id=\"p4\">**</bpt>VIRTUAL MACHINE<ept id=\"p4\">**</ept><ph id=\"ph6\"/> -&gt; <bpt id=\"p5\">**</bpt>FROM GALLERY<ept id=\"p5\">**</ept>.",
          "pos": [
            261,
            471
          ]
        }
      ]
    },
    {
      "pos": [
        2215,
        2238
      ],
      "content": "<ph id=\"ph7\">![</ph>Create workspace<ph id=\"ph8\">][24]</ph>"
    },
    {
      "pos": [
        2243,
        2278
      ],
      "content": "Choose one of the following images:"
    },
    {
      "pos": [
        2286,
        2319
      ],
      "content": "Windows Server 2012 R2 Datacenter"
    },
    {
      "pos": [
        2326,
        2387
      ],
      "content": "Windows Server Essentials Experience (Windows Server 2012 R2)"
    },
    {
      "pos": [
        2393,
        2483
      ],
      "content": "Then, click the arrow pointing right at the lower right to go the next configuration page."
    },
    {
      "pos": [
        2489,
        2512
      ],
      "content": "<ph id=\"ph9\">![</ph>Create workspace<ph id=\"ph10\">][25]</ph>"
    },
    {
      "pos": [
        2517,
        2894
      ],
      "content": "Enter a name for the virtual machine you want to create, select the size of the machine (Default: A3) based on the size of the data the machine is going to process and how powerful you want the machine to be (memory size and the number of compute cores), enter a user name and password for the machine. Then, click the arrow pointing right to go to the next configuration page.",
      "nodes": [
        {
          "content": "Enter a name for the virtual machine you want to create, select the size of the machine (Default: A3) based on the size of the data the machine is going to process and how powerful you want the machine to be (memory size and the number of compute cores), enter a user name and password for the machine.",
          "pos": [
            0,
            302
          ]
        },
        {
          "content": "Then, click the arrow pointing right to go to the next configuration page.",
          "pos": [
            303,
            377
          ]
        }
      ]
    },
    {
      "pos": [
        2900,
        2923
      ],
      "content": "<ph id=\"ph11\">![</ph>Create workspace<ph id=\"ph12\">][26]</ph>"
    },
    {
      "pos": [
        2928,
        3686
      ],
      "content": "Select the <bpt id=\"p6\">**</bpt>REGION/AFFINITY GROUP/VIRTUAL NETWORK<ept id=\"p6\">**</ept><ph id=\"ph13\"/> that contains the <bpt id=\"p7\">**</bpt>STORAGE ACCOUNT<ept id=\"p7\">**</ept><ph id=\"ph14\"/> that you are planning to use for this virtual machine, and then select that storage account. Add an endpoint at the bottom in the <bpt id=\"p8\">**</bpt>ENDPOINTS<ept id=\"p8\">**</ept><ph id=\"ph15\"/>  field by entering the name of the endpoint (\"IPython\" here). You can choose any string as the <bpt id=\"p9\">**</bpt>NAME<ept id=\"p9\">**</ept><ph id=\"ph16\"/> of the end point, and any integer between 0 and 65536 that is <bpt id=\"p10\">**</bpt>available<ept id=\"p10\">**</ept><ph id=\"ph17\"/> as the <bpt id=\"p11\">**</bpt>PUBLIC PORT<ept id=\"p11\">**</ept>. The <bpt id=\"p12\">**</bpt>PRIVATE PORT<ept id=\"p12\">**</ept><ph id=\"ph18\"/> has to be <bpt id=\"p13\">**</bpt>9999<ept id=\"p13\">**</ept>. Users should <bpt id=\"p14\">**</bpt>avoid<ept id=\"p14\">**</ept><ph id=\"ph19\"/> using public ports that have already been assigned for internet services. <ph id=\"ph20\">&lt;a href=\"http://www.chebucto.ns.ca/~rakerman/port-table.html\" target=\"_blank\"&gt;</ph>Ports for Internet Services<ph id=\"ph21\">&lt;/a&gt;</ph><ph id=\"ph22\"/> provides a list of ports that have been assigned and should be avoided.",
      "nodes": [
        {
          "content": "Select the <bpt id=\"p6\">**</bpt>REGION/AFFINITY GROUP/VIRTUAL NETWORK<ept id=\"p6\">**</ept><ph id=\"ph13\"/> that contains the <bpt id=\"p7\">**</bpt>STORAGE ACCOUNT<ept id=\"p7\">**</ept><ph id=\"ph14\"/> that you are planning to use for this virtual machine, and then select that storage account.",
          "pos": [
            0,
            289
          ]
        },
        {
          "content": "Add an endpoint at the bottom in the <bpt id=\"p8\">**</bpt>ENDPOINTS<ept id=\"p8\">**</ept><ph id=\"ph15\"/>  field by entering the name of the endpoint (\"IPython\" here).",
          "pos": [
            290,
            455
          ]
        },
        {
          "content": "You can choose any string as the <bpt id=\"p9\">**</bpt>NAME<ept id=\"p9\">**</ept><ph id=\"ph16\"/> of the end point, and any integer between 0 and 65536 that is <bpt id=\"p10\">**</bpt>available<ept id=\"p10\">**</ept><ph id=\"ph17\"/> as the <bpt id=\"p11\">**</bpt>PUBLIC PORT<ept id=\"p11\">**</ept>.",
          "pos": [
            456,
            745
          ]
        },
        {
          "content": "The <bpt id=\"p12\">**</bpt>PRIVATE PORT<ept id=\"p12\">**</ept><ph id=\"ph18\"/> has to be <bpt id=\"p13\">**</bpt>9999<ept id=\"p13\">**</ept>.",
          "pos": [
            746,
            881
          ]
        },
        {
          "content": "Users should <bpt id=\"p14\">**</bpt>avoid<ept id=\"p14\">**</ept><ph id=\"ph19\"/> using public ports that have already been assigned for internet services.",
          "pos": [
            882,
            1033
          ]
        },
        {
          "content": "<ph id=\"ph20\">&lt;a href=\"http://www.chebucto.ns.ca/~rakerman/port-table.html\" target=\"_blank\"&gt;</ph>Ports for Internet Services<ph id=\"ph21\">&lt;/a&gt;</ph><ph id=\"ph22\"/> provides a list of ports that have been assigned and should be avoided.",
          "pos": [
            1034,
            1280
          ]
        }
      ]
    },
    {
      "pos": [
        3692,
        3715
      ],
      "content": "<ph id=\"ph23\">![</ph>Create workspace<ph id=\"ph24\">][27]</ph>"
    },
    {
      "pos": [
        3720,
        3791
      ],
      "content": "Click the check mark to start the virtual machine provisioning process."
    },
    {
      "pos": [
        3797,
        3820
      ],
      "content": "<ph id=\"ph25\">![</ph>Create workspace<ph id=\"ph26\">][28]</ph>"
    },
    {
      "pos": [
        3823,
        4001
      ],
      "content": "It may take 15-25 minutes to complete the virtual machine provisioning process. After the virtual machine has been created, the status of this machine should show as <bpt id=\"p15\">**</bpt>Running<ept id=\"p15\">**</ept>.",
      "nodes": [
        {
          "content": "It may take 15-25 minutes to complete the virtual machine provisioning process.",
          "pos": [
            0,
            79
          ]
        },
        {
          "content": "After the virtual machine has been created, the status of this machine should show as <bpt id=\"p15\">**</bpt>Running<ept id=\"p15\">**</ept>.",
          "pos": [
            80,
            218
          ]
        }
      ]
    },
    {
      "pos": [
        4003,
        4026
      ],
      "content": "<ph id=\"ph27\">![</ph>Create workspace<ph id=\"ph28\">][29]</ph>"
    },
    {
      "pos": [
        4058,
        4134
      ],
      "content": "Step 2: Add an endpoint for IPython Notebooks to an existing virtual machine"
    },
    {
      "pos": [
        4136,
        4303
      ],
      "content": "If you created the virtual machine by following the instructions in Step 1, then the endpoint for IPython Notebook has already been added and this step can be skipped."
    },
    {
      "pos": [
        4305,
        4693
      ],
      "content": "If the virtual machine already exists, and you need to add an endpoint for IPython Notebook that you will install in Step 3 below, first log into Azure Classic Portal, select the virtual machine, and add the endpoint for IPython Notebook server. The following figure contains a screen shot of the portal after the endpoint for IPython Notebook has been added to a Windows virtual machine.",
      "nodes": [
        {
          "content": "If the virtual machine already exists, and you need to add an endpoint for IPython Notebook that you will install in Step 3 below, first log into Azure Classic Portal, select the virtual machine, and add the endpoint for IPython Notebook server.",
          "pos": [
            0,
            245
          ]
        },
        {
          "content": "The following figure contains a screen shot of the portal after the endpoint for IPython Notebook has been added to a Windows virtual machine.",
          "pos": [
            246,
            388
          ]
        }
      ]
    },
    {
      "pos": [
        4695,
        4718
      ],
      "content": "<ph id=\"ph29\">![</ph>Create workspace<ph id=\"ph30\">][17]</ph>"
    },
    {
      "pos": [
        4750,
        4809
      ],
      "content": "Step 3: Install IPython Notebook and other supporting tools"
    },
    {
      "pos": [
        4811,
        5176
      ],
      "content": "After the virtual machine is created, use Remote Desktop Protocol (RDP) to log on to the Windows virtual machine. For instructions, see <bpt id=\"p16\">[</bpt>How to Log on to a Virtual Machine Running Windows Server<ept id=\"p16\">](../virtual-machines-log-on-windows-server.md)</ept>. Open the <bpt id=\"p17\">**</bpt>Command Prompt<ept id=\"p17\">**</ept><ph id=\"ph31\"/> (<bpt id=\"p18\">**</bpt>Not the Powershell command window<ept id=\"p18\">**</ept>) as an <bpt id=\"p19\">**</bpt>Administrator<ept id=\"p19\">**</ept><ph id=\"ph32\"/> and run the following command.",
      "nodes": [
        {
          "content": "After the virtual machine is created, use Remote Desktop Protocol (RDP) to log on to the Windows virtual machine.",
          "pos": [
            0,
            113
          ]
        },
        {
          "content": "For instructions, see <bpt id=\"p16\">[</bpt>How to Log on to a Virtual Machine Running Windows Server<ept id=\"p16\">](../virtual-machines-log-on-windows-server.md)</ept>.",
          "pos": [
            114,
            282
          ]
        },
        {
          "content": "Open the <bpt id=\"p17\">**</bpt>Command Prompt<ept id=\"p17\">**</ept><ph id=\"ph31\"/> (<bpt id=\"p18\">**</bpt>Not the Powershell command window<ept id=\"p18\">**</ept>) as an <bpt id=\"p19\">**</bpt>Administrator<ept id=\"p19\">**</ept><ph id=\"ph32\"/> and run the following command.",
          "pos": [
            283,
            555
          ]
        }
      ]
    },
    {
      "pos": [
        5449,
        5610
      ],
      "content": "When the installation completes, the IPython Notebook server is launched automatically in the <bpt id=\"p20\">*</bpt>C:\\\\Users\\\\\\&lt;user name\\&gt;\\\\Documents\\\\IPython Notebooks<ept id=\"p20\">*</ept><ph id=\"ph33\"/> directory."
    },
    {
      "pos": [
        5612,
        5785
      ],
      "content": "When prompted, enter a password for the IPython Notebook and the password of the machine administrator. This enables the IPython Notebook to run as a service on the machine.",
      "nodes": [
        {
          "content": "When prompted, enter a password for the IPython Notebook and the password of the machine administrator.",
          "pos": [
            0,
            103
          ]
        },
        {
          "content": "This enables the IPython Notebook to run as a service on the machine.",
          "pos": [
            104,
            173
          ]
        }
      ]
    },
    {
      "pos": [
        5811,
        5862
      ],
      "content": "Step 4: Access IPython Notebooks from a web browser"
    },
    {
      "pos": [
        5863,
        6142
      ],
      "content": "To access the IPython Notebook server, open a web browser, and input <bpt id=\"p21\">*</bpt>https://&amp;#60;virtual machine DNS name&gt;:&amp;#60;public port number&gt;<ept id=\"p21\">*</ept><ph id=\"ph34\"/> in the URL text box. Here, the <bpt id=\"p22\">*</bpt>&amp;#60;public port number&gt;<ept id=\"p22\">*</ept><ph id=\"ph35\"/> should  be the port number you specified when the IPython Notebook endpoint was added.",
      "nodes": [
        {
          "content": "To access the IPython Notebook server, open a web browser, and input <bpt id=\"p21\">*</bpt>https://&amp;#60;virtual machine DNS name&gt;:&amp;#60;public port number&gt;<ept id=\"p21\">*</ept><ph id=\"ph34\"/> in the URL text box.",
          "pos": [
            0,
            224
          ]
        },
        {
          "content": "Here, the <bpt id=\"p22\">*</bpt>&amp;#60;public port number&gt;<ept id=\"p22\">*</ept><ph id=\"ph35\"/> should  be the port number you specified when the IPython Notebook endpoint was added.",
          "pos": [
            225,
            410
          ]
        }
      ]
    },
    {
      "pos": [
        6145,
        6396
      ],
      "content": "The <bpt id=\"p23\">*</bpt>&amp;#60;virtual machine DNS name&gt;<ept id=\"p23\">*</ept><ph id=\"ph36\"/> can be found at the Classic Portal of Azure. After logging in to the Classic Portal, click <bpt id=\"p24\">**</bpt>VIRTUAL MACHINES<ept id=\"p24\">**</ept>, select the machine you created, and then select <bpt id=\"p25\">**</bpt>DASHBOARD<ept id=\"p25\">**</ept>, the DNS name will be shown as follows:",
      "nodes": [
        {
          "content": "The <bpt id=\"p23\">*</bpt>&amp;#60;virtual machine DNS name&gt;<ept id=\"p23\">*</ept><ph id=\"ph36\"/> can be found at the Classic Portal of Azure.",
          "pos": [
            0,
            143
          ]
        },
        {
          "content": "After logging in to the Classic Portal, click <bpt id=\"p24\">**</bpt>VIRTUAL MACHINES<ept id=\"p24\">**</ept>, select the machine you created, and then select <bpt id=\"p25\">**</bpt>DASHBOARD<ept id=\"p25\">**</ept>, the DNS name will be shown as follows:",
          "pos": [
            144,
            393
          ]
        }
      ]
    },
    {
      "pos": [
        6398,
        6421
      ],
      "content": "<ph id=\"ph37\">![</ph>Create workspace<ph id=\"ph38\">][19]</ph>"
    },
    {
      "pos": [
        6423,
        6867
      ],
      "content": "You will encounter a warning stating that <bpt id=\"p26\">_</bpt>There is a problem with this website's security certificate<ept id=\"p26\">_</ept><ph id=\"ph39\"/> (Internet Explorer) or <bpt id=\"p27\">_</bpt>Your connection is not private<ept id=\"p27\">_</ept><ph id=\"ph40\"/> (Chrome), as shown in the following figures. Click <bpt id=\"p28\">**</bpt>Continue to this website (not recommended)<ept id=\"p28\">**</ept><ph id=\"ph41\"/> (Internet Explorer) or <bpt id=\"p29\">**</bpt>Advanced<ept id=\"p29\">**</ept><ph id=\"ph42\"/> and then <bpt id=\"p30\">*</bpt><bpt id=\"p31\">*</bpt>Proceed to &amp;#60;<ept id=\"p31\">*</ept>DNS Name<ept id=\"p30\">*</ept>&gt; (unsafe)** (Chrome) to continue. Then input the password you specified earlier to access the IPython Notebooks.",
      "nodes": [
        {
          "content": "You will encounter a warning stating that <bpt id=\"p26\">_</bpt>There is a problem with this website's security certificate<ept id=\"p26\">_</ept><ph id=\"ph39\"/> (Internet Explorer) or <bpt id=\"p27\">_</bpt>Your connection is not private<ept id=\"p27\">_</ept><ph id=\"ph40\"/> (Chrome), as shown in the following figures.",
          "pos": [
            0,
            314
          ]
        },
        {
          "content": "Click <bpt id=\"p28\">**</bpt>Continue to this website (not recommended)<ept id=\"p28\">**</ept><ph id=\"ph41\"/> (Internet Explorer) or <bpt id=\"p29\">**</bpt>Advanced<ept id=\"p29\">**</ept><ph id=\"ph42\"/> and then <bpt id=\"p30\">*</bpt><bpt id=\"p31\">*</bpt>Proceed to &amp;#60;<ept id=\"p31\">*</ept>DNS Name<ept id=\"p30\">*</ept>&gt; (unsafe)** (Chrome) to continue.",
          "pos": [
            315,
            672
          ]
        },
        {
          "content": "Then input the password you specified earlier to access the IPython Notebooks.",
          "pos": [
            673,
            751
          ]
        }
      ]
    },
    {
      "pos": [
        6869,
        6911
      ],
      "content": "Internet Explorer:\n<ph id=\"ph43\">![</ph>Create workspace<ph id=\"ph44\">][20]</ph>"
    },
    {
      "pos": [
        6913,
        6944
      ],
      "content": "Chrome:\n<ph id=\"ph45\">![</ph>Create workspace<ph id=\"ph46\">][21]</ph>"
    },
    {
      "pos": [
        6946,
        7611
      ],
      "content": "After you log on to the IPython Notebook, a directory <bpt id=\"p32\">*</bpt>DataScienceSamples<ept id=\"p32\">*</ept><ph id=\"ph47\"/> will show on the browser. This directory contains sample IPython Notebooks that are shared by Microsoft to help users conduct data science tasks. These sample IPython Notebooks are checked out from <bpt id=\"p33\">[</bpt><bpt id=\"p34\">**</bpt>Github repository<ept id=\"p34\">**</ept><ept id=\"p33\">](https://github.com/Azure/Azure-MachineLearning-DataScience/tree/master/Misc/DataScienceProcess/iPythonNotebooks)</ept><ph id=\"ph48\"/> to the virtual machines during the IPython Notebook server set up process. Microsoft maintains and updates this repository frequently. Users may visit the Github repository to get the most recently updated sample IPython Notebooks.\n<ph id=\"ph49\">![</ph>Create workspace<ph id=\"ph50\">][18]</ph>",
      "nodes": [
        {
          "content": "After you log on to the IPython Notebook, a directory <bpt id=\"p32\">*</bpt>DataScienceSamples<ept id=\"p32\">*</ept><ph id=\"ph47\"/> will show on the browser.",
          "pos": [
            0,
            155
          ]
        },
        {
          "content": "This directory contains sample IPython Notebooks that are shared by Microsoft to help users conduct data science tasks.",
          "pos": [
            156,
            275
          ]
        },
        {
          "content": "These sample IPython Notebooks are checked out from <bpt id=\"p33\">[</bpt><bpt id=\"p34\">**</bpt>Github repository<ept id=\"p34\">**</ept><ept id=\"p33\">](https://github.com/Azure/Azure-MachineLearning-DataScience/tree/master/Misc/DataScienceProcess/iPythonNotebooks)</ept><ph id=\"ph48\"/> to the virtual machines during the IPython Notebook server set up process.",
          "pos": [
            276,
            634
          ]
        },
        {
          "content": "Microsoft maintains and updates this repository frequently.",
          "pos": [
            635,
            694
          ]
        },
        {
          "content": "Users may visit the Github repository to get the most recently updated sample IPython Notebooks.",
          "pos": [
            695,
            791
          ]
        },
        {
          "content": "<ph id=\"ph49\">![</ph>Create workspace<ph id=\"ph50\">][18]</ph>",
          "pos": [
            792,
            853
          ]
        }
      ]
    },
    {
      "pos": [
        7637,
        7732
      ],
      "content": "Step 5: Upload an existing IPython Notebook from a local machine to the IPython Notebook server"
    },
    {
      "pos": [
        7734,
        8367
      ],
      "content": "IPython Notebooks provide an easy way for users to upload an existing IPython Notebook on their local machines to the IPython Notebook server on the virtual machines. After users log on to the IPython Notebook in a web browser, click into the <bpt id=\"p35\">**</bpt>directory<ept id=\"p35\">**</ept><ph id=\"ph51\"/> that the IPython Notebook will be uploaded to. Then, select an IPython Notebook .ipynb file to upload from the local machine in the <bpt id=\"p36\">**</bpt>File Explorer<ept id=\"p36\">**</ept>, and drag and drop it to the IPython Notebook directory on the web browser. Click the <bpt id=\"p37\">**</bpt>Upload<ept id=\"p37\">**</ept><ph id=\"ph52\"/> button, to upload the .ipynb file to the IPython Notebook server. Other users can then start using it in from their web browsers.",
      "nodes": [
        {
          "content": "IPython Notebooks provide an easy way for users to upload an existing IPython Notebook on their local machines to the IPython Notebook server on the virtual machines.",
          "pos": [
            0,
            166
          ]
        },
        {
          "content": "After users log on to the IPython Notebook in a web browser, click into the <bpt id=\"p35\">**</bpt>directory<ept id=\"p35\">**</ept><ph id=\"ph51\"/> that the IPython Notebook will be uploaded to.",
          "pos": [
            167,
            358
          ]
        },
        {
          "content": "Then, select an IPython Notebook .ipynb file to upload from the local machine in the <bpt id=\"p36\">**</bpt>File Explorer<ept id=\"p36\">**</ept>, and drag and drop it to the IPython Notebook directory on the web browser.",
          "pos": [
            359,
            577
          ]
        },
        {
          "content": "Click the <bpt id=\"p37\">**</bpt>Upload<ept id=\"p37\">**</ept><ph id=\"ph52\"/> button, to upload the .ipynb file to the IPython Notebook server.",
          "pos": [
            578,
            719
          ]
        },
        {
          "content": "Other users can then start using it in from their web browsers.",
          "pos": [
            720,
            783
          ]
        }
      ]
    },
    {
      "pos": [
        8369,
        8392
      ],
      "content": "<ph id=\"ph53\">![</ph>Create workspace<ph id=\"ph54\">][22]</ph>"
    },
    {
      "pos": [
        8394,
        8417
      ],
      "content": "<ph id=\"ph55\">![</ph>Create workspace<ph id=\"ph56\">][23]</ph>"
    },
    {
      "pos": [
        8420,
        8422
      ],
      "content": "##"
    },
    {
      "pos": [
        8445,
        8501
      ],
      "content": "Shutdown and de-allocate virtual machine when not in use"
    },
    {
      "pos": [
        8503,
        8716
      ],
      "content": "Azure Virtual Machines are priced as <bpt id=\"p38\">**</bpt>pay only for what you use<ept id=\"p38\">**</ept>. To ensure that you are not being billed when not using your virtual machine, it has to be in the <bpt id=\"p39\">**</bpt>Stopped (Deallocated)<ept id=\"p39\">**</ept><ph id=\"ph57\"/> state when not in use.",
      "nodes": [
        {
          "content": "Azure Virtual Machines are priced as <bpt id=\"p38\">**</bpt>pay only for what you use<ept id=\"p38\">**</ept>.",
          "pos": [
            0,
            107
          ]
        },
        {
          "content": "To ensure that you are not being billed when not using your virtual machine, it has to be in the <bpt id=\"p39\">**</bpt>Stopped (Deallocated)<ept id=\"p39\">**</ept><ph id=\"ph57\"/> state when not in use.",
          "pos": [
            108,
            308
          ]
        }
      ]
    },
    {
      "pos": [
        8720,
        9137
      ],
      "content": "<ph id=\"ph58\">[AZURE.NOTE]</ph><ph id=\"ph59\"/> If you shut down the virtual machine from inside the VM (using Windows power options), the VM is stopped but remains allocated. To ensure you do not continue to be billed, always stop virtual machines from the <bpt id=\"p40\">[</bpt>Azure Classic Portal<ept id=\"p40\">](http://manage.windowsazure.com/)</ept>. You can also stop the VM through Powershell by calling <bpt id=\"p41\">**</bpt>ShutdownRoleOperation<ept id=\"p41\">**</ept><ph id=\"ph60\"/> with \"PostShutdownAction\" equal to \"StoppedDeallocated\".",
      "nodes": [
        {
          "content": "<ph id=\"ph58\">[AZURE.NOTE]</ph><ph id=\"ph59\"/> If you shut down the virtual machine from inside the VM (using Windows power options), the VM is stopped but remains allocated.",
          "pos": [
            0,
            174
          ]
        },
        {
          "content": "To ensure you do not continue to be billed, always stop virtual machines from the <bpt id=\"p40\">[</bpt>Azure Classic Portal<ept id=\"p40\">](http://manage.windowsazure.com/)</ept>.",
          "pos": [
            175,
            353
          ]
        },
        {
          "content": "You can also stop the VM through Powershell by calling <bpt id=\"p41\">**</bpt>ShutdownRoleOperation<ept id=\"p41\">**</ept><ph id=\"ph60\"/> with \"PostShutdownAction\" equal to \"StoppedDeallocated\".",
          "pos": [
            354,
            546
          ]
        }
      ]
    },
    {
      "pos": [
        9139,
        9186
      ],
      "content": "To shutdown and deallocate the virtual machine:"
    },
    {
      "pos": [
        9191,
        9280
      ],
      "content": "Log in to the <bpt id=\"p42\">[</bpt>Azure Classic Portal<ept id=\"p42\">](http://manage.windowsazure.com/)</ept><ph id=\"ph61\"/> using your account."
    },
    {
      "pos": [
        9287,
        9344
      ],
      "content": "Select <bpt id=\"p43\">**</bpt>VIRTUAL MACHINES<ept id=\"p43\">**</ept><ph id=\"ph62\"/> from the left navigation bar."
    },
    {
      "pos": [
        9349,
        9458
      ],
      "content": "In the list of virtual machines, click on the name of your virtual machine then go to the <bpt id=\"p44\">**</bpt>DASHBOARD<ept id=\"p44\">**</ept><ph id=\"ph63\"/> page."
    },
    {
      "pos": [
        9463,
        9509
      ],
      "content": "At the bottom of the page, click <bpt id=\"p45\">**</bpt>SHUTDOWN<ept id=\"p45\">**</ept>."
    },
    {
      "pos": [
        9511,
        9529
      ],
      "content": "<ph id=\"ph64\">![</ph>VM Shutdown<ph id=\"ph65\">][15]</ph>"
    },
    {
      "pos": [
        9531,
        9667
      ],
      "content": "The virtual machine will be deallocated but not deleted. You may restart your virtual machine at any time from the Azure Classic Portal.",
      "nodes": [
        {
          "content": "The virtual machine will be deallocated but not deleted.",
          "pos": [
            0,
            56
          ]
        },
        {
          "content": "You may restart your virtual machine at any time from the Azure Classic Portal.",
          "pos": [
            57,
            136
          ]
        }
      ]
    },
    {
      "pos": [
        9672,
        9715
      ],
      "content": "Your Azure VM is ready to use: what's next?"
    },
    {
      "pos": [
        9717,
        10005
      ],
      "content": "Your virtual machine is now ready to use in your data science exercises. The virtual machine is also ready for use as an IPython Notebook server for the exploration and processing of data, and other tasks in conjunction with Azure Machine Learning and the Cortana Analytics Process (CAP).",
      "nodes": [
        {
          "content": "Your virtual machine is now ready to use in your data science exercises.",
          "pos": [
            0,
            72
          ]
        },
        {
          "content": "The virtual machine is also ready for use as an IPython Notebook server for the exploration and processing of data, and other tasks in conjunction with Azure Machine Learning and the Cortana Analytics Process (CAP).",
          "pos": [
            73,
            288
          ]
        }
      ]
    },
    {
      "pos": [
        10007,
        10351
      ],
      "content": "The next steps in the Advanced Analytics Process and Technology are mapped in the <bpt id=\"p46\">[</bpt>Learning Guide: Advanced data processing in Azure<ept id=\"p46\">](machine-learning-data-science-advanced-data-processing.md)</ept><ph id=\"ph66\"/> and may include steps that move data into HDInsight, process and sample it there in preparation for learning from the data with Azure Machine Learning."
    }
  ],
  "content": "<properties\n    pageTitle=\"Set up a virtual machine as an IPython Notebook server | Microsoft Azure\"\n    description=\"Set up an Azure Virtual Machine for use in a data science environment with IPython Server for advanced analytics.\"\n    services=\"machine-learning\"\n    documentationCenter=\"\"\n    authors=\"bradsev\"\n    manager=\"paulettm\"\n    editor=\"cgronlun\"  />\n\n<tags\n    ms.service=\"machine-learning\"\n    ms.workload=\"data-services\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"02/08/2016\"\n    ms.author=\"mohabib;xibingao;bradsev\" />\n\n# Set up an Azure virtual machine as an IPython Notebook server for advanced analytics\n\nThis topic shows how to provision and configure an Azure virtual machine for advanced analytics that can to be used as part of a data science environment. The Windows virtual machine is configured with supporting tools such as such as IPython Notebook, Azure Storage Explorer, AzCopy, as well as other utilities that are useful for advanced analytics projects. Azure Storage Explorer and AzCopy, for example, provide convenient ways to upload data to Azure blob storage from your local machine or to download it to your local machine from blob storage.\n\n## <a name=\"create-vm\"></a>Step 1: Create a general purpose Azure virtual machine\n\nIf you already have an Azure virtual machine and just want to set up an IPython Notebook server on it, you can skip this step and proceed to [Step 2: Add an endpoint for IPython Notebooks to an existing virtual machine](#add-endpoint).\n\nBefore starting the process of creating a virtual machine on Azure, you need to determine the size of the machine that is needed to process the data for their project. Smaller machines have less memory and fewer CPU cores than larger machines, but they are also less expensive. For a list of machine types and prices, see the <a href=\"http://azure.microsoft.com/pricing/details/virtual-machines/\" target=\"_blank\">Virtual Machines Pricing </a> page\n\n1. Log in to <a href=\"https://manage.windowsazure.com\" target=\"_blank\">Azure Classic Portal</a>, and click **New** in the bottom left corner. A window will pop up. Select **COMPUTE** -> **VIRTUAL MACHINE** -> **FROM GALLERY**.\n\n    ![Create workspace][24]\n\n2. Choose one of the following images:\n\n    * Windows Server 2012 R2 Datacenter\n    * Windows Server Essentials Experience (Windows Server 2012 R2)\n\n    Then, click the arrow pointing right at the lower right to go the next configuration page.\n\n    ![Create workspace][25]\n\n3. Enter a name for the virtual machine you want to create, select the size of the machine (Default: A3) based on the size of the data the machine is going to process and how powerful you want the machine to be (memory size and the number of compute cores), enter a user name and password for the machine. Then, click the arrow pointing right to go to the next configuration page.\n\n    ![Create workspace][26]\n\n4. Select the **REGION/AFFINITY GROUP/VIRTUAL NETWORK** that contains the **STORAGE ACCOUNT** that you are planning to use for this virtual machine, and then select that storage account. Add an endpoint at the bottom in the **ENDPOINTS**  field by entering the name of the endpoint (\"IPython\" here). You can choose any string as the **NAME** of the end point, and any integer between 0 and 65536 that is **available** as the **PUBLIC PORT**. The **PRIVATE PORT** has to be **9999**. Users should **avoid** using public ports that have already been assigned for internet services. <a href=\"http://www.chebucto.ns.ca/~rakerman/port-table.html\" target=\"_blank\">Ports for Internet Services</a> provides a list of ports that have been assigned and should be avoided.\n\n    ![Create workspace][27]\n\n5. Click the check mark to start the virtual machine provisioning process.\n\n    ![Create workspace][28]\n\n\nIt may take 15-25 minutes to complete the virtual machine provisioning process. After the virtual machine has been created, the status of this machine should show as **Running**.\n\n![Create workspace][29]\n\n## <a name=\"add-endpoint\"></a>Step 2: Add an endpoint for IPython Notebooks to an existing virtual machine\n\nIf you created the virtual machine by following the instructions in Step 1, then the endpoint for IPython Notebook has already been added and this step can be skipped.\n\nIf the virtual machine already exists, and you need to add an endpoint for IPython Notebook that you will install in Step 3 below, first log into Azure Classic Portal, select the virtual machine, and add the endpoint for IPython Notebook server. The following figure contains a screen shot of the portal after the endpoint for IPython Notebook has been added to a Windows virtual machine.\n\n![Create workspace][17]\n\n## <a name=\"run-commands\"></a>Step 3: Install IPython Notebook and other supporting tools\n\nAfter the virtual machine is created, use Remote Desktop Protocol (RDP) to log on to the Windows virtual machine. For instructions, see [How to Log on to a Virtual Machine Running Windows Server](../virtual-machines-log-on-windows-server.md). Open the **Command Prompt** (**Not the Powershell command window**) as an **Administrator** and run the following command.\n\n    set script='https://raw.githubusercontent.com/Azure/Azure-MachineLearning-DataScience/master/Misc/MachineSetup/Azure_VM_Setup_Windows.ps1'\n\n    @powershell -NoProfile -ExecutionPolicy unrestricted -Command \"iex ((new-object net.webclient).DownloadString(%script%))\"\n\nWhen the installation completes, the IPython Notebook server is launched automatically in the *C:\\\\Users\\\\\\<user name\\>\\\\Documents\\\\IPython Notebooks* directory.\n\nWhen prompted, enter a password for the IPython Notebook and the password of the machine administrator. This enables the IPython Notebook to run as a service on the machine.\n\n## <a name=\"access\"></a>Step 4: Access IPython Notebooks from a web browser\nTo access the IPython Notebook server, open a web browser, and input *https://&#60;virtual machine DNS name>:&#60;public port number>* in the URL text box. Here, the *&#60;public port number>* should  be the port number you specified when the IPython Notebook endpoint was added. \n\nThe *&#60;virtual machine DNS name>* can be found at the Classic Portal of Azure. After logging in to the Classic Portal, click **VIRTUAL MACHINES**, select the machine you created, and then select **DASHBOARD**, the DNS name will be shown as follows:\n\n![Create workspace][19]\n\nYou will encounter a warning stating that _There is a problem with this website's security certificate_ (Internet Explorer) or _Your connection is not private_ (Chrome), as shown in the following figures. Click **Continue to this website (not recommended)** (Internet Explorer) or **Advanced** and then **Proceed to &#60;*DNS Name*> (unsafe)** (Chrome) to continue. Then input the password you specified earlier to access the IPython Notebooks.\n\nInternet Explorer:\n![Create workspace][20]\n\nChrome:\n![Create workspace][21]\n\nAfter you log on to the IPython Notebook, a directory *DataScienceSamples* will show on the browser. This directory contains sample IPython Notebooks that are shared by Microsoft to help users conduct data science tasks. These sample IPython Notebooks are checked out from [**Github repository**](https://github.com/Azure/Azure-MachineLearning-DataScience/tree/master/Misc/DataScienceProcess/iPythonNotebooks) to the virtual machines during the IPython Notebook server set up process. Microsoft maintains and updates this repository frequently. Users may visit the Github repository to get the most recently updated sample IPython Notebooks.\n![Create workspace][18]\n\n## <a name=\"upload\"></a>Step 5: Upload an existing IPython Notebook from a local machine to the IPython Notebook server\n\nIPython Notebooks provide an easy way for users to upload an existing IPython Notebook on their local machines to the IPython Notebook server on the virtual machines. After users log on to the IPython Notebook in a web browser, click into the **directory** that the IPython Notebook will be uploaded to. Then, select an IPython Notebook .ipynb file to upload from the local machine in the **File Explorer**, and drag and drop it to the IPython Notebook directory on the web browser. Click the **Upload** button, to upload the .ipynb file to the IPython Notebook server. Other users can then start using it in from their web browsers.\n\n![Create workspace][22]\n\n![Create workspace][23]\n\n\n##<a name=\"shutdown\"></a>Shutdown and de-allocate virtual machine when not in use\n\nAzure Virtual Machines are priced as **pay only for what you use**. To ensure that you are not being billed when not using your virtual machine, it has to be in the **Stopped (Deallocated)** state when not in use.\n\n> [AZURE.NOTE] If you shut down the virtual machine from inside the VM (using Windows power options), the VM is stopped but remains allocated. To ensure you do not continue to be billed, always stop virtual machines from the [Azure Classic Portal](http://manage.windowsazure.com/). You can also stop the VM through Powershell by calling **ShutdownRoleOperation** with \"PostShutdownAction\" equal to \"StoppedDeallocated\".\n\nTo shutdown and deallocate the virtual machine:\n\n1. Log in to the [Azure Classic Portal](http://manage.windowsazure.com/) using your account.  \n\n2. Select **VIRTUAL MACHINES** from the left navigation bar.\n\n3. In the list of virtual machines, click on the name of your virtual machine then go to the **DASHBOARD** page.\n\n4. At the bottom of the page, click **SHUTDOWN**.\n\n![VM Shutdown][15]\n\nThe virtual machine will be deallocated but not deleted. You may restart your virtual machine at any time from the Azure Classic Portal.\n\n## Your Azure VM is ready to use: what's next?\n\nYour virtual machine is now ready to use in your data science exercises. The virtual machine is also ready for use as an IPython Notebook server for the exploration and processing of data, and other tasks in conjunction with Azure Machine Learning and the Cortana Analytics Process (CAP).\n\nThe next steps in the Advanced Analytics Process and Technology are mapped in the [Learning Guide: Advanced data processing in Azure](machine-learning-data-science-advanced-data-processing.md) and may include steps that move data into HDInsight, process and sample it there in preparation for learning from the data with Azure Machine Learning.\n\n\n[15]: ./media/machine-learning-data-science-setup-virtual-machine/vmshutdown.png\n[17]: ./media/machine-learning-data-science-setup-virtual-machine/add-endpoints-after-creation.png\n[18]: ./media/machine-learning-data-science-setup-virtual-machine/sample-ipnbs.png\n[19]: ./media/machine-learning-data-science-setup-virtual-machine/dns-name-and-host-name.png\n[20]: ./media/machine-learning-data-science-setup-virtual-machine/browser-warning-ie.png\n[21]: ./media/machine-learning-data-science-setup-virtual-machine/browser-warning.png\n[22]: ./media/machine-learning-data-science-setup-virtual-machine/upload-ipnb-1.png\n[23]: ./media/machine-learning-data-science-setup-virtual-machine/upload-ipnb-2.png\n[24]: ./media/machine-learning-data-science-setup-virtual-machine/create-virtual-machine-1.png\n[25]: ./media/machine-learning-data-science-setup-virtual-machine/create-virtual-machine-2.png\n[26]: ./media/machine-learning-data-science-setup-virtual-machine/create-virtual-machine-3.png\n[27]: ./media/machine-learning-data-science-setup-virtual-machine/create-virtual-machine-4.png\n[28]: ./media/machine-learning-data-science-setup-virtual-machine/create-virtual-machine-5.png\n[29]: ./media/machine-learning-data-science-setup-virtual-machine/create-virtual-machine-6.png\n \n"
}