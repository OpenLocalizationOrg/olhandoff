{
  "nodes": [
    {
      "pos": [
        26,
        115
      ],
      "content": "Create Windows-based Hadoop clusters in HDInsight using Azure PowerShell| Microsoft Azure"
    },
    {
      "pos": [
        134,
        209
      ],
      "content": "Learn how to create clusters for Azure HDInsight by using Azure PowerShell."
    },
    {
      "pos": [
        520,
        592
      ],
      "content": "Create Windows-based Hadoop clusters in HDInsight using Azure PowerShell"
    },
    {
      "pos": [
        683,
        1021
      ],
      "content": "Learn how to create HDInsight clusters using Azure PowerShell. Azure PowerShell is a module that provides cmdlets to manage Azure with Windows PowerShell. For other cluster creation tools and features click the tab select on the top of this page or see <bpt id=\"p1\">[</bpt>Cluster creation methods<ept id=\"p1\">](hdinsight-provision-clusters.md#cluster-creation-methods)</ept>.",
      "nodes": [
        {
          "content": "Learn how to create HDInsight clusters using Azure PowerShell.",
          "pos": [
            0,
            62
          ]
        },
        {
          "content": "Azure PowerShell is a module that provides cmdlets to manage Azure with Windows PowerShell.",
          "pos": [
            63,
            154
          ]
        },
        {
          "content": "For other cluster creation tools and features click the tab select on the top of this page or see <bpt id=\"p1\">[</bpt>Cluster creation methods<ept id=\"p1\">](hdinsight-provision-clusters.md#cluster-creation-methods)</ept>.",
          "pos": [
            155,
            376
          ]
        }
      ]
    },
    {
      "pos": [
        1027,
        1041
      ],
      "content": "Prerequisites:"
    },
    {
      "pos": [
        1043,
        1122
      ],
      "content": "Before you begin the instructions in this article, you must have the following:"
    },
    {
      "pos": [
        1126,
        1277
      ],
      "content": "Azure subscription. See <bpt id=\"p2\">[</bpt>Get Azure free trial<ept id=\"p2\">](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/)</ept>.",
      "nodes": [
        {
          "content": "Azure subscription.",
          "pos": [
            0,
            19
          ]
        },
        {
          "content": "See <bpt id=\"p2\">[</bpt>Get Azure free trial<ept id=\"p2\">](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/)</ept>.",
          "pos": [
            20,
            189
          ]
        }
      ]
    },
    {
      "pos": [
        1280,
        1414
      ],
      "content": "Azure PowerShell.  See <bpt id=\"p3\">[</bpt>Install Azure PowerShell 1.0<ept id=\"p3\">](hdinsight-administer-use-powershell.md#install-azure-powershell-10-and-greater)</ept>.",
      "nodes": [
        {
          "content": "Azure PowerShell.",
          "pos": [
            0,
            17
          ]
        },
        {
          "content": "See <bpt id=\"p3\">[</bpt>Install Azure PowerShell 1.0<ept id=\"p3\">](hdinsight-administer-use-powershell.md#install-azure-powershell-10-and-greater)</ept>.",
          "pos": [
            19,
            172
          ]
        }
      ]
    },
    {
      "pos": [
        1421,
        1436
      ],
      "content": "Create clusters"
    },
    {
      "pos": [
        1437,
        2156
      ],
      "content": "Azure PowerShell is a powerful scripting environment that you can use to control and automate the deployment and management of your workloads in Azure. This section provides instructions on how to create an HDInsight cluster by using Azure PowerShell. For information on configuring a workstation to run HDInsight Windows PowerShell cmdlets, see <bpt id=\"p4\">[</bpt>Install and configure Azure PowerShell<ept id=\"p4\">](../powershell-install-configure.md)</ept>. For more information on using Azure PowerShell with HDInsight, see <bpt id=\"p5\">[</bpt>Administer HDInsight using PowerShell<ept id=\"p5\">](hdinsight-administer-use-powershell.md)</ept>. For the list of the HDInsight Windows PowerShell cmdlets, see <bpt id=\"p6\">[</bpt>HDInsight cmdlet reference<ept id=\"p6\">](https://msdn.microsoft.com/library/azure/dn858087.aspx)</ept>.",
      "nodes": [
        {
          "content": "Azure PowerShell is a powerful scripting environment that you can use to control and automate the deployment and management of your workloads in Azure.",
          "pos": [
            0,
            151
          ]
        },
        {
          "content": "This section provides instructions on how to create an HDInsight cluster by using Azure PowerShell.",
          "pos": [
            152,
            251
          ]
        },
        {
          "content": "For information on configuring a workstation to run HDInsight Windows PowerShell cmdlets, see <bpt id=\"p4\">[</bpt>Install and configure Azure PowerShell<ept id=\"p4\">](../powershell-install-configure.md)</ept>.",
          "pos": [
            252,
            461
          ]
        },
        {
          "content": "For more information on using Azure PowerShell with HDInsight, see <bpt id=\"p5\">[</bpt>Administer HDInsight using PowerShell<ept id=\"p5\">](hdinsight-administer-use-powershell.md)</ept>.",
          "pos": [
            462,
            647
          ]
        },
        {
          "content": "For the list of the HDInsight Windows PowerShell cmdlets, see <bpt id=\"p6\">[</bpt>HDInsight cmdlet reference<ept id=\"p6\">](https://msdn.microsoft.com/library/azure/dn858087.aspx)</ept>.",
          "pos": [
            648,
            833
          ]
        }
      ]
    },
    {
      "pos": [
        2159,
        2252
      ],
      "content": "The following procedures are needed to create an HDInsight cluster by using Azure PowerShell:"
    },
    {
      "pos": [
        5664,
        5698
      ],
      "content": "Create clusters using ARM template"
    },
    {
      "pos": [
        5700,
        5927
      ],
      "content": "You can use Azure PowerShell to deploy an ARM template which creates an HDInsight cluster.  See <bpt id=\"p7\">[</bpt>Call templates using Azure PowerShell<ept id=\"p7\">](hdinsight-hadoop-create-windows-clusters-arm-templates.md#call-templates-using-powershell)</ept>.",
      "nodes": [
        {
          "content": "You can use Azure PowerShell to deploy an ARM template which creates an HDInsight cluster.",
          "pos": [
            0,
            90
          ]
        },
        {
          "content": "See <bpt id=\"p7\">[</bpt>Call templates using Azure PowerShell<ept id=\"p7\">](hdinsight-hadoop-create-windows-clusters-arm-templates.md#call-templates-using-powershell)</ept>.",
          "pos": [
            92,
            265
          ]
        }
      ]
    },
    {
      "pos": [
        5931,
        5949
      ],
      "content": "Customize clusters"
    },
    {
      "pos": [
        5953,
        6074
      ],
      "content": "See <bpt id=\"p8\">[</bpt>Customize HDInsight clusters using Bootstrap<ept id=\"p8\">](hdinsight-hadoop-customize-cluster-bootstrap.md#use-azure-powershell)</ept>."
    },
    {
      "pos": [
        6077,
        6221
      ],
      "content": "See <bpt id=\"p9\">[</bpt>Customize Windows-based HDInsight clusters using Script Action<ept id=\"p9\">](hdinsight-hadoop-customize-cluster.md#call-scripts-using-azure-powershell)</ept>."
    },
    {
      "pos": [
        6226,
        6236
      ],
      "content": "Next steps"
    },
    {
      "pos": [
        6237,
        6358
      ],
      "content": "In this article, you have learned several ways to create an HDInsight cluster. To learn more, see the following articles:",
      "nodes": [
        {
          "content": "In this article, you have learned several ways to create an HDInsight cluster.",
          "pos": [
            0,
            78
          ]
        },
        {
          "content": "To learn more, see the following articles:",
          "pos": [
            79,
            121
          ]
        }
      ]
    },
    {
      "pos": [
        6362,
        6501
      ],
      "content": "<bpt id=\"p10\">[</bpt>Get started with Azure HDInsight<ept id=\"p10\">](hdinsight-hadoop-linux-tutorial-get-started.md)</ept><ph id=\"ph3\"/> - Learn how to start working with your HDInsight cluster"
    },
    {
      "pos": [
        6504,
        6648
      ],
      "content": "<bpt id=\"p11\">[</bpt>Submit Hadoop jobs programmatically<ept id=\"p11\">](hdinsight-submit-hadoop-jobs-programmatically.md)</ept><ph id=\"ph4\"/> - Learn how to programmatically submit jobs to HDInsight"
    },
    {
      "pos": [
        6651,
        6806
      ],
      "content": "<bpt id=\"p12\">[</bpt>Manage Hadoop clusters in HDInsight using PowerShell<ept id=\"p12\">](hdinsight-administer-use-powershell.md)</ept><ph id=\"ph5\"/> - Learn how to work with HDInsight by using Azure PowerShell"
    },
    {
      "pos": [
        6809,
        6903
      ],
      "content": "<bpt id=\"p13\">[</bpt>Azure HDInsight SDK documentation<ept id=\"p13\">] [hdinsight-sdk-documentation]</ept><ph id=\"ph6\"/> - Discover the HDInsight SDK"
    }
  ],
  "content": "<properties\n   pageTitle=\"Create Windows-based Hadoop clusters in HDInsight using Azure PowerShell| Microsoft Azure\"\n    description=\"Learn how to create clusters for Azure HDInsight by using Azure PowerShell.\"\n   services=\"hdinsight\"\n   documentationCenter=\"\"\n   tags=\"azure-portal\"\n   authors=\"mumian\"\n   manager=\"paulettm\"\n   editor=\"cgronlun\"/>\n\n<tags\n   ms.service=\"hdinsight\"\n   ms.devlang=\"na\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"na\"\n   ms.workload=\"big-data\"\n   ms.date=\"01/04/2016\"\n   ms.author=\"jgao\"/>\n\n# Create Windows-based Hadoop clusters in HDInsight using Azure PowerShell\n\n[AZURE.INCLUDE [selector](../../includes/hdinsight-create-windows-cluster-selector.md)]\n\nLearn how to create HDInsight clusters using Azure PowerShell. Azure PowerShell is a module that provides cmdlets to manage Azure with Windows PowerShell. For other cluster creation tools and features click the tab select on the top of this page or see [Cluster creation methods](hdinsight-provision-clusters.md#cluster-creation-methods).\n\n\n###Prerequisites:\n\nBefore you begin the instructions in this article, you must have the following:\n\n- Azure subscription. See [Get Azure free trial](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).\n- Azure PowerShell.  See [Install Azure PowerShell 1.0](hdinsight-administer-use-powershell.md#install-azure-powershell-10-and-greater).\n\n\n\n## Create clusters\nAzure PowerShell is a powerful scripting environment that you can use to control and automate the deployment and management of your workloads in Azure. This section provides instructions on how to create an HDInsight cluster by using Azure PowerShell. For information on configuring a workstation to run HDInsight Windows PowerShell cmdlets, see [Install and configure Azure PowerShell](../powershell-install-configure.md). For more information on using Azure PowerShell with HDInsight, see [Administer HDInsight using PowerShell](hdinsight-administer-use-powershell.md). For the list of the HDInsight Windows PowerShell cmdlets, see [HDInsight cmdlet reference](https://msdn.microsoft.com/library/azure/dn858087.aspx).\n\n\nThe following procedures are needed to create an HDInsight cluster by using Azure PowerShell:\n\n    ####################################\n    # Set these variables\n    ####################################\n    #region - used for creating Azure service names\n    $nameToken = \"<Enter an Alias>\" \n    #endregion\n\n    #region - cluster user accounts\n    $httpUserName = \"admin\"  #HDInsight cluster username\n    $httpPassword = \"<Enter a Password>\"\n    #endregion\n\n    ###########################################\n    # Service names and varialbes\n    ###########################################\n    #region - service names\n    $namePrefix = $nameToken.ToLower() + (Get-Date -Format \"MMdd\")\n\n    $resourceGroupName = $namePrefix + \"rg\"\n    $hdinsightClusterName = $namePrefix + \"hdi\"\n    $defaultStorageAccountName = $namePrefix + \"store\"\n    $defaultBlobContainerName = $hdinsightClusterName\n\n    $location = \"East US 2\"\n    $clusterSizeInNodes = 1\n    #endregion\n\n    # Treat all errors as terminating\n    $ErrorActionPreference = \"Stop\"\n\n    ###########################################\n    # Connect to Azure\n    ###########################################\n    #region - Connect to Azure subscription\n    Write-Host \"`nConnecting to your Azure subscription ...\" -ForegroundColor Green\n    try{Get-AzureRmContext}\n    catch{Login-AzureRmAccount}\n    #endregion\n\n    ###########################################\n    # Create the resource group\n    ###########################################\n    New-AzureRmResourceGroup -Name $resourceGroupName -Location $location\n\n    ###########################################\n    # Preapre default storage account and container\n    ###########################################\n    New-AzureRmStorageAccount `\n        -ResourceGroupName $resourceGroupName `\n        -Name $defaultStorageAccountName `\n        -Type Standard_GRS `\n        -Location $location\n\n    $defaultStorageAccountKey = Get-AzureRmStorageAccountKey `\n                                    -ResourceGroupName $resourceGroupName `\n                                    -Name $defaultStorageAccountName |  %{ $_.Key1 }\n    $defaultStorageContext = New-AzureStorageContext `\n                                    -StorageAccountName $defaultStorageAccountName `\n                                    -StorageAccountKey $defaultStorageAccountKey\n    New-AzureStorageContainer `\n        -Name $hdinsightClusterName ` #use the cluster name as the container name\n        -Context $defaultStorageContext \n\n    ###########################################\n    # Create the cluster\n    ###########################################\n\n    $httpPW = ConvertTo-SecureString -String $httpPassword -AsPlainText -Force\n    $httpCredential = New-Object System.Management.Automation.PSCredential($httpUserName,$httpPW)\n\n    New-AzureRmHDInsightCluster `\n        -ResourceGroupName $resourceGroupName `\n        -ClusterName $hdinsightClusterName `\n        -Location $location `\n        -ClusterSizeInNodes $clusterSizeInNodes `\n        -ClusterType Hadoop `\n        -OSType Windows `\n        -Version \"3.2\" `\n        -HttpCredential $httpCredential `\n        -DefaultStorageAccountName \"$defaultStorageAccountName.blob.core.windows.net\" `\n        -DefaultStorageAccountKey $defaultStorageAccountKey `\n        -DefaultStorageContainer $hdinsightClusterName \n\n    ####################################\n    # Verify the cluster\n    ####################################\n    Get-AzureRmHDInsightCluster -ClusterName $hdinsightClusterName \n\n## Create clusters using ARM template\n\nYou can use Azure PowerShell to deploy an ARM template which creates an HDInsight cluster.  See [Call templates using Azure PowerShell](hdinsight-hadoop-create-windows-clusters-arm-templates.md#call-templates-using-powershell).\n\n##Customize clusters\n\n- See [Customize HDInsight clusters using Bootstrap](hdinsight-hadoop-customize-cluster-bootstrap.md#use-azure-powershell).\n- See [Customize Windows-based HDInsight clusters using Script Action](hdinsight-hadoop-customize-cluster.md#call-scripts-using-azure-powershell).\n\n\n##Next steps\nIn this article, you have learned several ways to create an HDInsight cluster. To learn more, see the following articles:\n\n* [Get started with Azure HDInsight](hdinsight-hadoop-linux-tutorial-get-started.md) - Learn how to start working with your HDInsight cluster\n* [Submit Hadoop jobs programmatically](hdinsight-submit-hadoop-jobs-programmatically.md) - Learn how to programmatically submit jobs to HDInsight\n* [Manage Hadoop clusters in HDInsight using PowerShell](hdinsight-administer-use-powershell.md) - Learn how to work with HDInsight by using Azure PowerShell\n* [Azure HDInsight SDK documentation] [hdinsight-sdk-documentation] - Discover the HDInsight SDK\n\n\n\n\n[hdinsight-sdk-documentation]: http://msdn.microsoft.com/library/dn479185.aspx\n[azure-preview-portal]: https://manage.windowsazure.com\n[connectionmanager]: http://msdn.microsoft.com/library/mt146773(v=sql.120).aspx\n[ssispack]: http://msdn.microsoft.com/library/mt146770(v=sql.120).aspx\n[ssisclustercreate]: http://msdn.microsoft.com/library/mt146774(v=sql.120).aspx\n[ssisclusterdelete]: http://msdn.microsoft.com/library/mt146778(v=sql.120).aspx\n"
}