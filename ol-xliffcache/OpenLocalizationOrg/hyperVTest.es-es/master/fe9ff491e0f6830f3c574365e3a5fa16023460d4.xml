{
  "nodes": [
    {
      "pos": [
        26,
        110
      ],
      "content": "Deploy and manage Apache Storm topologies on Linux-based HDInsight | Microsoft Azure"
    },
    {
      "pos": [
        128,
        279
      ],
      "content": "Learn how to deploy, monitor and manage Apache Storm topologies using the Storm Dashboard on Linux-based HDInsight. Use Hadoop tools for Visual Studio.",
      "nodes": [
        {
          "content": "Learn how to deploy, monitor and manage Apache Storm topologies using the Storm Dashboard on Linux-based HDInsight.",
          "pos": [
            0,
            115
          ]
        },
        {
          "content": "Use Hadoop tools for Visual Studio.",
          "pos": [
            116,
            151
          ]
        }
      ]
    },
    {
      "pos": [
        575,
        641
      ],
      "content": "Deploy and manage Apache Storm topologies on Linux-based HDInsight"
    },
    {
      "pos": [
        643,
        773
      ],
      "content": "In this document, learn the basics of managing and monitoring Storm topologies running on Linux-based Storm on HDInsight clusters."
    },
    {
      "pos": [
        777,
        1072
      ],
      "content": "<ph id=\"ph2\">[AZURE.IMPORTANT]</ph><ph id=\"ph3\"/> The steps in this article require a Linux-based Storm on HDInsight cluster. For information on deploying and monitoring topologies on Windows-based HDInsight, see <bpt id=\"p1\">[</bpt>Deploy and manage Apache Storm topologies on Windows-based HDInsight<ept id=\"p1\">](hdinsight-storm-deploy-monitor-topology.md)</ept>",
      "nodes": [
        {
          "content": "<ph id=\"ph2\">[AZURE.IMPORTANT]</ph><ph id=\"ph3\"/> The steps in this article require a Linux-based Storm on HDInsight cluster.",
          "pos": [
            0,
            125
          ]
        },
        {
          "content": "For information on deploying and monitoring topologies on Windows-based HDInsight, see <bpt id=\"p1\">[</bpt>Deploy and manage Apache Storm topologies on Windows-based HDInsight<ept id=\"p1\">](hdinsight-storm-deploy-monitor-topology.md)</ept>",
          "pos": [
            126,
            365
          ]
        }
      ]
    },
    {
      "pos": [
        1077,
        1090
      ],
      "content": "Prerequisites"
    },
    {
      "pos": [
        1094,
        1274
      ],
      "content": "<bpt id=\"p2\">**</bpt>A Linux-based Storm on HDInsight cluster<ept id=\"p2\">**</ept>: see <bpt id=\"p3\">[</bpt>Get started with Apache Storm on HDInsight<ept id=\"p3\">](hdinsight-apache-storm-tutorial-get-started-linux.md)</ept><ph id=\"ph4\"/> for steps on creating a cluster"
    },
    {
      "pos": [
        1278,
        1388
      ],
      "content": "<bpt id=\"p4\">**</bpt>Familiarity with SSH and SCP<ept id=\"p4\">**</ept>: For more information on using SSH and SCP with HDInsight, see the following:"
    },
    {
      "pos": [
        1395,
        1543
      ],
      "content": "<bpt id=\"p5\">**</bpt>Linux, Unix or OS X clients<ept id=\"p5\">**</ept>: See <bpt id=\"p6\">[</bpt>Use SSH with Linux-based Hadoop on HDInsight from Linux, OS X or Unix<ept id=\"p6\">](hdinsight-hadoop-linux-use-ssh-unix.md)</ept>"
    },
    {
      "pos": [
        1550,
        1677
      ],
      "content": "<bpt id=\"p7\">**</bpt>Windows clients<ept id=\"p7\">**</ept>: See <bpt id=\"p8\">[</bpt>Use SSH with Linux-based Hadoop on HDInsight from Windows<ept id=\"p8\">](hdinsight-hadoop-linux-use-ssh-windows.md)</ept>"
    },
    {
      "pos": [
        1681,
        1912
      ],
      "content": "<bpt id=\"p9\">**</bpt>An SCP client<ept id=\"p9\">**</ept>: This is provided with all Linux, Unix, and OS X systems. For Windows clients, we recommend PSCP, which is available from the <bpt id=\"p10\">[</bpt>PuTTY download page<ept id=\"p10\">](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)</ept>.",
      "nodes": [
        {
          "content": "<bpt id=\"p9\">**</bpt>An SCP client<ept id=\"p9\">**</ept>: This is provided with all Linux, Unix, and OS X systems.",
          "pos": [
            0,
            113
          ]
        },
        {
          "content": "For Windows clients, we recommend PSCP, which is available from the <bpt id=\"p10\">[</bpt>PuTTY download page<ept id=\"p10\">](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)</ept>.",
          "pos": [
            114,
            309
          ]
        }
      ]
    },
    {
      "pos": [
        1917,
        1939
      ],
      "content": "Start a Storm topology"
    },
    {
      "pos": [
        1944,
        2099
      ],
      "content": "Use SSH to connect to the HDInsight cluster. Replace <bpt id=\"p11\">**</bpt>USERNAME<ept id=\"p11\">**</ept><ph id=\"ph5\"/> the the name of your SSH login. Replace <bpt id=\"p12\">**</bpt>CLUSTERNAME<ept id=\"p12\">**</ept><ph id=\"ph6\"/> with your HDInsight cluster name:",
      "nodes": [
        {
          "content": "Use SSH to connect to the HDInsight cluster.",
          "pos": [
            0,
            44
          ]
        },
        {
          "content": "Replace <bpt id=\"p11\">**</bpt>USERNAME<ept id=\"p11\">**</ept><ph id=\"ph5\"/> the the name of your SSH login.",
          "pos": [
            45,
            151
          ]
        },
        {
          "content": "Replace <bpt id=\"p12\">**</bpt>CLUSTERNAME<ept id=\"p12\">**</ept><ph id=\"ph6\"/> with your HDInsight cluster name:",
          "pos": [
            152,
            263
          ]
        }
      ]
    },
    {
      "pos": [
        2162,
        2262
      ],
      "content": "For more information on using SSH to connect to your HDInsight cluster, see the following documents:"
    },
    {
      "pos": [
        2578,
        2633
      ],
      "content": "Use the following command to start an example topology:"
    },
    {
      "pos": [
        2807,
        2961
      ],
      "content": "This will start the example WordCount topology on the cluster. It will randomly generate sentences and count the occurrance of each word in the sentences.",
      "nodes": [
        {
          "content": "This will start the example WordCount topology on the cluster.",
          "pos": [
            0,
            62
          ]
        },
        {
          "content": "It will randomly generate sentences and count the occurrance of each word in the sentences.",
          "pos": [
            63,
            154
          ]
        }
      ]
    },
    {
      "pos": [
        2969,
        3289
      ],
      "content": "<ph id=\"ph7\">[AZURE.NOTE]</ph><ph id=\"ph8\"/> When submitting topology to the cluster, you must first copy the jar file containing the cluster before using the <ph id=\"ph9\">`storm`</ph><ph id=\"ph10\"/> command. This can be accomplished using the <ph id=\"ph11\">`scp`</ph><ph id=\"ph12\"/> command from the client where the file exists. For example, <ph id=\"ph13\">`scp FILENAME.jar USERNAME@CLUSTERNAME-ssh.azurehdinsight.net:FILENAME.jar`</ph>",
      "nodes": [
        {
          "content": "<ph id=\"ph7\">[AZURE.NOTE]</ph><ph id=\"ph8\"/> When submitting topology to the cluster, you must first copy the jar file containing the cluster before using the <ph id=\"ph9\">`storm`</ph><ph id=\"ph10\"/> command.",
          "pos": [
            0,
            208
          ]
        },
        {
          "content": "This can be accomplished using the <ph id=\"ph11\">`scp`</ph><ph id=\"ph12\"/> command from the client where the file exists.",
          "pos": [
            209,
            330
          ]
        },
        {
          "content": "For example, <ph id=\"ph13\">`scp FILENAME.jar USERNAME@CLUSTERNAME-ssh.azurehdinsight.net:FILENAME.jar`</ph>",
          "pos": [
            331,
            438
          ]
        }
      ]
    },
    {
      "pos": [
        3302,
        3454
      ],
      "content": "The WordCount example, and other storm starter examples, are already included on your cluster at <ph id=\"ph14\">`/usr/hdp/current/storm-client/contrib/storm-starter/`</ph>."
    },
    {
      "pos": [
        3458,
        3500
      ],
      "content": "Monitor and manage using the storm command"
    },
    {
      "pos": [
        3502,
        3682
      ],
      "content": "The <ph id=\"ph15\">`storm`</ph><ph id=\"ph16\"/> utility allows you to work with running topologies from the command line. The following is a list of commonly used commands. Use <ph id=\"ph17\">`storm -h`</ph><ph id=\"ph18\"/> for a full list of commands.",
      "nodes": [
        {
          "content": "The <ph id=\"ph15\">`storm`</ph><ph id=\"ph16\"/> utility allows you to work with running topologies from the command line.",
          "pos": [
            0,
            119
          ]
        },
        {
          "content": "The following is a list of commonly used commands.",
          "pos": [
            120,
            170
          ]
        },
        {
          "content": "Use <ph id=\"ph17\">`storm -h`</ph><ph id=\"ph18\"/> for a full list of commands.",
          "pos": [
            171,
            248
          ]
        }
      ]
    },
    {
      "pos": [
        3687,
        3702
      ],
      "content": "List topologies"
    },
    {
      "pos": [
        3704,
        3761
      ],
      "content": "Use the following command to list all running topologies:"
    },
    {
      "pos": [
        3783,
        3837
      ],
      "content": "This will return information similar to the following:"
    },
    {
      "pos": [
        4051,
        4076
      ],
      "content": "Deactivate and reactivate"
    },
    {
      "pos": [
        4078,
        4194
      ],
      "content": "Deactivating a topology pauses it until it is killed or reactivated. Use the following to deactivate and reactivate:",
      "nodes": [
        {
          "content": "Deactivating a topology pauses it until it is killed or reactivated.",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "Use the following to deactivate and reactivate:",
          "pos": [
            69,
            116
          ]
        }
      ]
    },
    {
      "pos": [
        4271,
        4294
      ],
      "content": "Kill a running topology"
    },
    {
      "pos": [
        4296,
        4411
      ],
      "content": "Storm topologies, once started, will continue running until stopped. To stop a topology, use the following command:",
      "nodes": [
        {
          "content": "Storm topologies, once started, will continue running until stopped.",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "To stop a topology, use the following command:",
          "pos": [
            69,
            115
          ]
        }
      ]
    },
    {
      "pos": [
        4445,
        4454
      ],
      "content": "Rebalance"
    },
    {
      "pos": [
        4456,
        4675
      ],
      "content": "Rebalancing a topology allows the system to revise the parallelism of the topology. For example, if you have resized the cluster to add more notes, rebalancing will allow a running topology to make use of the new nodes.",
      "nodes": [
        {
          "content": "Rebalancing a topology allows the system to revise the parallelism of the topology.",
          "pos": [
            0,
            83
          ]
        },
        {
          "content": "For example, if you have resized the cluster to add more notes, rebalancing will allow a running topology to make use of the new nodes.",
          "pos": [
            84,
            219
          ]
        }
      ]
    },
    {
      "pos": [
        4679,
        5000
      ],
      "content": "<ph id=\"ph19\">[AZURE.WARNING]</ph><ph id=\"ph20\"/> Rebalancing a topology first deactivates the topology, then redistributes workers evenly across the cluster, then finally returns the topology to the state it was in before rebalancing occurred. So if the topology was active, it will become active again. If it was deactivated, it will remain deactivated.",
      "nodes": [
        {
          "content": "<ph id=\"ph19\">[AZURE.WARNING]</ph><ph id=\"ph20\"/> Rebalancing a topology first deactivates the topology, then redistributes workers evenly across the cluster, then finally returns the topology to the state it was in before rebalancing occurred.",
          "pos": [
            0,
            244
          ]
        },
        {
          "content": "So if the topology was active, it will become active again.",
          "pos": [
            245,
            304
          ]
        },
        {
          "content": "If it was deactivated, it will remain deactivated.",
          "pos": [
            305,
            355
          ]
        }
      ]
    },
    {
      "pos": [
        5038,
        5075
      ],
      "content": "Monitor and manage using the Storm UI"
    },
    {
      "pos": [
        5077,
        5345
      ],
      "content": "The Storm UI provides a web interface for working with running topologies, and is included on your HDInsight cluster. To view the Storm UI, use a web browser to open <bpt id=\"p13\">__</bpt>https://CLUSTERNAME.azurehdinsight.net/stormui<ept id=\"p13\">__</ept>, where <bpt id=\"p14\">__</bpt>CLUSTERNAME<ept id=\"p14\">__</ept><ph id=\"ph21\"/> is the name of your cluster.",
      "nodes": [
        {
          "content": "The Storm UI provides a web interface for working with running topologies, and is included on your HDInsight cluster.",
          "pos": [
            0,
            117
          ]
        },
        {
          "content": "To view the Storm UI, use a web browser to open <bpt id=\"p13\">__</bpt>https://CLUSTERNAME.azurehdinsight.net/stormui<ept id=\"p13\">__</ept>, where <bpt id=\"p14\">__</bpt>CLUSTERNAME<ept id=\"p14\">__</ept><ph id=\"ph21\"/> is the name of your cluster.",
          "pos": [
            118,
            363
          ]
        }
      ]
    },
    {
      "pos": [
        5349,
        5501
      ],
      "content": "<ph id=\"ph22\">[AZURE.NOTE]</ph><ph id=\"ph23\"/> If asked to provide a user name and password, enter the cluster administrator (admin) and password that you used when creating the cluster."
    },
    {
      "pos": [
        5508,
        5517
      ],
      "content": "Main page"
    },
    {
      "pos": [
        5519,
        5584
      ],
      "content": "The main page of the Storm UI provides the following information:"
    },
    {
      "pos": [
        5587,
        5650
      ],
      "content": "<bpt id=\"p15\">**</bpt>Cluster summary<ept id=\"p15\">**</ept>: Basic information about the Storm cluster."
    },
    {
      "pos": [
        5653,
        5786
      ],
      "content": "<bpt id=\"p16\">**</bpt>Topology summary<ept id=\"p16\">**</ept>: A list of running topologies. Use the links in this section to view more information about specific topologies.",
      "nodes": [
        {
          "content": "<bpt id=\"p16\">**</bpt>Topology summary<ept id=\"p16\">**</ept>: A list of running topologies.",
          "pos": [
            0,
            91
          ]
        },
        {
          "content": "Use the links in this section to view more information about specific topologies.",
          "pos": [
            92,
            173
          ]
        }
      ]
    },
    {
      "pos": [
        5789,
        5852
      ],
      "content": "<bpt id=\"p17\">**</bpt>Supervisor summary<ept id=\"p17\">**</ept>: Information about the Storm supervisor."
    },
    {
      "pos": [
        5855,
        5918
      ],
      "content": "<bpt id=\"p18\">**</bpt>Nimbus configuration<ept id=\"p18\">**</ept>: Nimbus configuration for the cluster."
    },
    {
      "pos": [
        5924,
        5940
      ],
      "content": "Topology summary"
    },
    {
      "pos": [
        5942,
        6051
      ],
      "content": "Selecting a link from the <bpt id=\"p19\">**</bpt>Topology summary<ept id=\"p19\">**</ept><ph id=\"ph24\"/> section displays the following information about the topology:"
    },
    {
      "pos": [
        6054,
        6113
      ],
      "content": "<bpt id=\"p20\">**</bpt>Topology summary<ept id=\"p20\">**</ept>: Basic information about the topology."
    },
    {
      "pos": [
        6116,
        6195
      ],
      "content": "<bpt id=\"p21\">**</bpt>Topology actions<ept id=\"p21\">**</ept>: Management actions that you can perform for the topology."
    },
    {
      "pos": [
        6200,
        6259
      ],
      "content": "<bpt id=\"p22\">**</bpt>Activate<ept id=\"p22\">**</ept>: Resumes processing of a deactivated topology."
    },
    {
      "pos": [
        6264,
        6306
      ],
      "content": "<bpt id=\"p23\">**</bpt>Deactivate<ept id=\"p23\">**</ept>: Pauses a running topology."
    },
    {
      "pos": [
        6311,
        6589
      ],
      "content": "<bpt id=\"p24\">**</bpt>Rebalance<ept id=\"p24\">**</ept>: Adjusts the parallelism of the topology. You should rebalance running topologies after you have changed the number of nodes in the cluster. This allows the topology to adjust parallelism to compensate for the increased or decreased number of nodes in the cluster.",
      "nodes": [
        {
          "content": "<bpt id=\"p24\">**</bpt>Rebalance<ept id=\"p24\">**</ept>: Adjusts the parallelism of the topology.",
          "pos": [
            0,
            95
          ]
        },
        {
          "content": "You should rebalance running topologies after you have changed the number of nodes in the cluster.",
          "pos": [
            96,
            194
          ]
        },
        {
          "content": "This allows the topology to adjust parallelism to compensate for the increased or decreased number of nodes in the cluster.",
          "pos": [
            195,
            318
          ]
        }
      ]
    },
    {
      "pos": [
        6597,
        6796
      ],
      "content": "For more information, see <ph id=\"ph25\">&lt;a href=\"http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html\" target=\"_blank\"&gt;</ph>Understanding the parallelism of a Storm topology<ph id=\"ph26\">&lt;/a&gt;</ph>."
    },
    {
      "pos": [
        6802,
        6868
      ],
      "content": "<bpt id=\"p25\">**</bpt>Kill<ept id=\"p25\">**</ept>: Terminates a Storm topology after the specified timeout."
    },
    {
      "pos": [
        6872,
        7021
      ],
      "content": "<bpt id=\"p26\">**</bpt>Topology stats<ept id=\"p26\">**</ept>: Statistics about the topology. Use the links in the <bpt id=\"p27\">**</bpt>Window<ept id=\"p27\">**</ept><ph id=\"ph27\"/> column to set the timeframe for the remaining entries on the page.",
      "nodes": [
        {
          "content": "<bpt id=\"p26\">**</bpt>Topology stats<ept id=\"p26\">**</ept>: Statistics about the topology.",
          "pos": [
            0,
            90
          ]
        },
        {
          "content": "Use the links in the <bpt id=\"p27\">**</bpt>Window<ept id=\"p27\">**</ept><ph id=\"ph27\"/> column to set the timeframe for the remaining entries on the page.",
          "pos": [
            91,
            244
          ]
        }
      ]
    },
    {
      "pos": [
        7024,
        7146
      ],
      "content": "<bpt id=\"p28\">**</bpt>Spouts<ept id=\"p28\">**</ept>: The spouts used by the topology. Use the links in this section to view more information about specific spouts.",
      "nodes": [
        {
          "content": "<bpt id=\"p28\">**</bpt>Spouts<ept id=\"p28\">**</ept>: The spouts used by the topology.",
          "pos": [
            0,
            84
          ]
        },
        {
          "content": "Use the links in this section to view more information about specific spouts.",
          "pos": [
            85,
            162
          ]
        }
      ]
    },
    {
      "pos": [
        7149,
        7268
      ],
      "content": "<bpt id=\"p29\">**</bpt>Bolts<ept id=\"p29\">**</ept>: The bolts used by the topology. Use the links in this section to view more information about specific bolts.",
      "nodes": [
        {
          "content": "<bpt id=\"p29\">**</bpt>Bolts<ept id=\"p29\">**</ept>: The bolts used by the topology.",
          "pos": [
            0,
            82
          ]
        },
        {
          "content": "Use the links in this section to view more information about specific bolts.",
          "pos": [
            83,
            159
          ]
        }
      ]
    },
    {
      "pos": [
        7271,
        7342
      ],
      "content": "<bpt id=\"p30\">**</bpt>Topology configuration<ept id=\"p30\">**</ept>: The configuration of the selected topology."
    },
    {
      "pos": [
        7348,
        7370
      ],
      "content": "Spout and Bolt summary"
    },
    {
      "pos": [
        7372,
        7491
      ],
      "content": "Selecting a spout from the <bpt id=\"p31\">**</bpt>Spouts<ept id=\"p31\">**</ept><ph id=\"ph28\"/> or <bpt id=\"p32\">**</bpt>Bolts<ept id=\"p32\">**</ept><ph id=\"ph29\"/> sections displays the following information about the selected item:"
    },
    {
      "pos": [
        7494,
        7559
      ],
      "content": "<bpt id=\"p33\">**</bpt>Component summary<ept id=\"p33\">**</ept>: Basic information about the spout or bolt."
    },
    {
      "pos": [
        7562,
        7718
      ],
      "content": "<bpt id=\"p34\">**</bpt>Spout/Bolt stats<ept id=\"p34\">**</ept>: Statistics about the spout or bolt. Use the links in the <bpt id=\"p35\">**</bpt>Window<ept id=\"p35\">**</ept><ph id=\"ph30\"/> column to set the timeframe for the remaining entries on the page.",
      "nodes": [
        {
          "content": "<bpt id=\"p34\">**</bpt>Spout/Bolt stats<ept id=\"p34\">**</ept>: Statistics about the spout or bolt.",
          "pos": [
            0,
            97
          ]
        },
        {
          "content": "Use the links in the <bpt id=\"p35\">**</bpt>Window<ept id=\"p35\">**</ept><ph id=\"ph30\"/> column to set the timeframe for the remaining entries on the page.",
          "pos": [
            98,
            251
          ]
        }
      ]
    },
    {
      "pos": [
        7721,
        7807
      ],
      "content": "<bpt id=\"p36\">**</bpt>Input stats<ept id=\"p36\">**</ept><ph id=\"ph31\"/> (bolt only): Information about the input streams consumed by the bolt."
    },
    {
      "pos": [
        7810,
        7888
      ],
      "content": "<bpt id=\"p37\">**</bpt>Output stats<ept id=\"p37\">**</ept>: Information about the streams emitted by this spout or bolt."
    },
    {
      "pos": [
        7891,
        8077
      ],
      "content": "<bpt id=\"p38\">**</bpt>Executors<ept id=\"p38\">**</ept>: Information about the instances of the spout or bolt. Select the <bpt id=\"p39\">**</bpt>Port<ept id=\"p39\">**</ept><ph id=\"ph32\"/> entry for a specific executor to view a log of diagnostic information produced for this instance.",
      "nodes": [
        {
          "content": "<bpt id=\"p38\">**</bpt>Executors<ept id=\"p38\">**</ept>: Information about the instances of the spout or bolt.",
          "pos": [
            0,
            108
          ]
        },
        {
          "content": "Select the <bpt id=\"p39\">**</bpt>Port<ept id=\"p39\">**</ept><ph id=\"ph32\"/> entry for a specific executor to view a log of diagnostic information produced for this instance.",
          "pos": [
            109,
            281
          ]
        }
      ]
    },
    {
      "pos": [
        8080,
        8137
      ],
      "content": "<bpt id=\"p40\">**</bpt>Errors<ept id=\"p40\">**</ept>: Any error information for this spout or bolt."
    },
    {
      "pos": [
        8142,
        8150
      ],
      "content": "REST API"
    },
    {
      "pos": [
        8152,
        8381
      ],
      "content": "The Storm UI is built on top of the REST API, so you can perform similar management and monitoring functionality by using the REST API. You can use the REST API to create custom tools for managing and monitoring Storm topologies.",
      "nodes": [
        {
          "content": "The Storm UI is built on top of the REST API, so you can perform similar management and monitoring functionality by using the REST API.",
          "pos": [
            0,
            135
          ]
        },
        {
          "content": "You can use the REST API to create custom tools for managing and monitoring Storm topologies.",
          "pos": [
            136,
            229
          ]
        }
      ]
    },
    {
      "pos": [
        8383,
        8600
      ],
      "content": "For more information, see <bpt id=\"p41\">[</bpt>Storm UI REST API<ept id=\"p41\">](https://github.com/apache/storm/blob/master/docs/documentation/ui-rest-api.md)</ept>. The following information is specific to using the REST API with Apache Storm on HDInsight.",
      "nodes": [
        {
          "content": "For more information, see <bpt id=\"p41\">[</bpt>Storm UI REST API<ept id=\"p41\">](https://github.com/apache/storm/blob/master/docs/documentation/ui-rest-api.md)</ept>.",
          "pos": [
            0,
            165
          ]
        },
        {
          "content": "The following information is specific to using the REST API with Apache Storm on HDInsight.",
          "pos": [
            166,
            257
          ]
        }
      ]
    },
    {
      "pos": [
        8604,
        8968
      ],
      "content": "<ph id=\"ph33\">[AZURE.IMPORTANT]</ph><ph id=\"ph34\"/> The Storm REST API is not publicly available over the internet, and must be accessed using an SSH tunnel to the HDInsight cluster head node. For information on creating and using an SSH tunnel, see <bpt id=\"p42\">[</bpt>Use SSH Tunneling to access Ambari web UI, ResourceManager, JobHistory, NameNode, Oozie, and other web UI's<ept id=\"p42\">](hdinsight-linux-ambari-ssh-tunnel.md)</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph33\">[AZURE.IMPORTANT]</ph><ph id=\"ph34\"/> The Storm REST API is not publicly available over the internet, and must be accessed using an SSH tunnel to the HDInsight cluster head node.",
          "pos": [
            0,
            192
          ]
        },
        {
          "content": "For information on creating and using an SSH tunnel, see <bpt id=\"p42\">[</bpt>Use SSH Tunneling to access Ambari web UI, ResourceManager, JobHistory, NameNode, Oozie, and other web UI's<ept id=\"p42\">](hdinsight-linux-ambari-ssh-tunnel.md)</ept>.",
          "pos": [
            193,
            438
          ]
        }
      ]
    },
    {
      "pos": [
        8974,
        8982
      ],
      "content": "Base URI"
    },
    {
      "pos": [
        8984,
        9217
      ],
      "content": "The base URI for the REST API on Linux-based HDInsight clusters is available on the head node at <bpt id=\"p43\">**</bpt>https://HEADNODEFQDN:8744/api/v1/<ept id=\"p43\">**</ept>; however, the domain name of the head node is generated during cluster creation and is not static."
    },
    {
      "pos": [
        9219,
        9323
      ],
      "content": "You can find the fully qualified domain name (FQDN) for the cluster head node in several different ways:"
    },
    {
      "pos": [
        9327,
        9417
      ],
      "content": "<bpt id=\"p44\">__</bpt>From an SSH session<ept id=\"p44\">__</ept>: Use the command <ph id=\"ph35\">`headnode -f`</ph><ph id=\"ph36\"/> from an SSH session to the cluster."
    },
    {
      "pos": [
        9420,
        9661
      ],
      "content": "<bpt id=\"p45\">__</bpt>From Ambari Web<ept id=\"p45\">__</ept>: Select <bpt id=\"p46\">__</bpt>Services<ept id=\"p46\">__</ept><ph id=\"ph37\"/> from the top of the page, then select <bpt id=\"p47\">__</bpt>Storm<ept id=\"p47\">__</ept>. From the <bpt id=\"p48\">__</bpt>Summary<ept id=\"p48\">__</ept><ph id=\"ph38\"/> tab, select <bpt id=\"p49\">__</bpt>Storm UI Server<ept id=\"p49\">__</ept>. The FQDN of the node that the Storm UI and REST API is running on will be at the top of the page.",
      "nodes": [
        {
          "content": "<bpt id=\"p45\">__</bpt>From Ambari Web<ept id=\"p45\">__</ept>: Select <bpt id=\"p46\">__</bpt>Services<ept id=\"p46\">__</ept><ph id=\"ph37\"/> from the top of the page, then select <bpt id=\"p47\">__</bpt>Storm<ept id=\"p47\">__</ept>.",
          "pos": [
            0,
            224
          ]
        },
        {
          "content": "From the <bpt id=\"p48\">__</bpt>Summary<ept id=\"p48\">__</ept><ph id=\"ph38\"/> tab, select <bpt id=\"p49\">__</bpt>Storm UI Server<ept id=\"p49\">__</ept>.",
          "pos": [
            225,
            373
          ]
        },
        {
          "content": "The FQDN of the node that the Storm UI and REST API is running on will be at the top of the page.",
          "pos": [
            374,
            471
          ]
        }
      ]
    },
    {
      "pos": [
        9664,
        10110
      ],
      "content": "<bpt id=\"p50\">__</bpt>From Ambari REST API<ept id=\"p50\">__</ept>: Use the command <ph id=\"ph39\">`curl -u admin:PASSWORD -G \"https://CLUSTERNAME\n.azurehdinsight.net/api/v1/clusters/CLUSTERNAME/services/STORM/components/STORM_UI_SERVER\"`</ph><ph id=\"ph40\"/> to retrieve information about the node that the Storm UI and REST API are running on. Replace <bpt id=\"p51\">__</bpt>PASSWORD<ept id=\"p51\">__</ept><ph id=\"ph41\"/> with the admin password for the cluster. Replace <bpt id=\"p52\">__</bpt>CLUSTERNAME<ept id=\"p52\">__</ept><ph id=\"ph42\"/> with the cluster name. In the response, the \"host_name\" entry contains the FQDN of the node.",
      "nodes": [
        {
          "content": "<bpt id=\"p50\">__</bpt>From Ambari REST API<ept id=\"p50\">__</ept>: Use the command <ph id=\"ph39\">`curl -u admin:PASSWORD -G \"https://CLUSTERNAME\n.azurehdinsight.net/api/v1/clusters/CLUSTERNAME/services/STORM/components/STORM_UI_SERVER\"`</ph><ph id=\"ph40\"/> to retrieve information about the node that the Storm UI and REST API are running on.",
          "pos": [
            0,
            341
          ]
        },
        {
          "content": "Replace <bpt id=\"p51\">__</bpt>PASSWORD<ept id=\"p51\">__</ept><ph id=\"ph41\"/> with the admin password for the cluster.",
          "pos": [
            342,
            458
          ]
        },
        {
          "content": "Replace <bpt id=\"p52\">__</bpt>CLUSTERNAME<ept id=\"p52\">__</ept><ph id=\"ph42\"/> with the cluster name.",
          "pos": [
            459,
            560
          ]
        },
        {
          "content": "In the response, the \"host_name\" entry contains the FQDN of the node.",
          "pos": [
            561,
            630
          ]
        }
      ]
    },
    {
      "pos": [
        10116,
        10130
      ],
      "content": "Authentication"
    },
    {
      "pos": [
        10132,
        10257
      ],
      "content": "Requests to the REST API must use <bpt id=\"p53\">**</bpt>basic authentication<ept id=\"p53\">**</ept>, so you use the HDInsight cluster administrator name and password."
    },
    {
      "pos": [
        10261,
        10406
      ],
      "content": "<ph id=\"ph43\">[AZURE.NOTE]</ph><ph id=\"ph44\"/> Because basic authentication is sent by using clear text, you should <bpt id=\"p54\">**</bpt>always<ept id=\"p54\">**</ept><ph id=\"ph45\"/> use HTTPS to secure communications with the cluster."
    },
    {
      "pos": [
        10412,
        10425
      ],
      "content": "Return values"
    },
    {
      "pos": [
        10427,
        10711
      ],
      "content": "Information that is returned from the REST API may only be usable from within the cluster or virtual machines on the same Azure Virtual Network as the cluster. For example, the fully qualified domain name (FQDN) returned for Zookeeper servers will not be accessible from the Internet.",
      "nodes": [
        {
          "content": "Information that is returned from the REST API may only be usable from within the cluster or virtual machines on the same Azure Virtual Network as the cluster.",
          "pos": [
            0,
            159
          ]
        },
        {
          "content": "For example, the fully qualified domain name (FQDN) returned for Zookeeper servers will not be accessible from the Internet.",
          "pos": [
            160,
            284
          ]
        }
      ]
    },
    {
      "pos": [
        10716,
        10726
      ],
      "content": "Next Steps"
    },
    {
      "pos": [
        10728,
        10918
      ],
      "content": "Now that you've learned how to deploy and monitor topologies by using the Storm Dashboard, learn how to <bpt id=\"p55\">[</bpt>Develop Java-based topologies using Maven<ept id=\"p55\">](hdinsight-storm-develop-java-topology.md)</ept>."
    },
    {
      "pos": [
        10920,
        11044
      ],
      "content": "For a list of more example topologies, see <bpt id=\"p56\">[</bpt>Example topologies for Storm on HDInsight<ept id=\"p56\">](hdinsight-storm-example-topology.md)</ept>."
    }
  ],
  "content": "<properties\n   pageTitle=\"Deploy and manage Apache Storm topologies on Linux-based HDInsight | Microsoft Azure\"\n   description=\"Learn how to deploy, monitor and manage Apache Storm topologies using the Storm Dashboard on Linux-based HDInsight. Use Hadoop tools for Visual Studio.\"\n   services=\"hdinsight\"\n   documentationCenter=\"\"\n   authors=\"Blackmist\"\n   manager=\"paulettm\"\n   editor=\"cgronlun\"/>\n\n<tags\n   ms.service=\"hdinsight\"\n   ms.devlang=\"java\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"na\"\n   ms.workload=\"big-data\"\n   ms.date=\"01/28/2016\"\n   ms.author=\"larryfr\"/>\n\n# Deploy and manage Apache Storm topologies on Linux-based HDInsight\n\nIn this document, learn the basics of managing and monitoring Storm topologies running on Linux-based Storm on HDInsight clusters.\n\n> [AZURE.IMPORTANT] The steps in this article require a Linux-based Storm on HDInsight cluster. For information on deploying and monitoring topologies on Windows-based HDInsight, see [Deploy and manage Apache Storm topologies on Windows-based HDInsight](hdinsight-storm-deploy-monitor-topology.md)\n\n## Prerequisites\n\n- **A Linux-based Storm on HDInsight cluster**: see [Get started with Apache Storm on HDInsight](hdinsight-apache-storm-tutorial-get-started-linux.md) for steps on creating a cluster\n\n- **Familiarity with SSH and SCP**: For more information on using SSH and SCP with HDInsight, see the following:\n    - **Linux, Unix or OS X clients**: See [Use SSH with Linux-based Hadoop on HDInsight from Linux, OS X or Unix](hdinsight-hadoop-linux-use-ssh-unix.md)\n    - **Windows clients**: See [Use SSH with Linux-based Hadoop on HDInsight from Windows](hdinsight-hadoop-linux-use-ssh-windows.md)\n\n- **An SCP client**: This is provided with all Linux, Unix, and OS X systems. For Windows clients, we recommend PSCP, which is available from the [PuTTY download page](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html).\n\n## Start a Storm topology\n\n1. Use SSH to connect to the HDInsight cluster. Replace **USERNAME** the the name of your SSH login. Replace **CLUSTERNAME** with your HDInsight cluster name:\n\n        ssh USERNAME@CLUSTERNAME-ssh.azurehdinsight.net\n\n    For more information on using SSH to connect to your HDInsight cluster, see the following documents:\n    \n        - **Linux, Unix or OS X clients**: See [Use SSH with Linux-based Hadoop on HDInsight from Linux, OS X or Unix](hdinsight-hadoop-linux-use-ssh-unix.md)\n        \n        - **Windows clients**: See [Use SSH with Linux-based Hadoop on HDInsight from Windows](hdinsight-hadoop-linux-use-ssh-windows.md)\n\n2. Use the following command to start an example topology:\n\n        storm jar storm jar /usr/hdp/current/storm-client/contrib/storm-starter/storm-starter-topologies-0.9.3.2.2.4.9-1.jar storm.starter.WordCountTopology WordCount\n\n    This will start the example WordCount topology on the cluster. It will randomly generate sentences and count the occurrance of each word in the sentences.\n\n    > [AZURE.NOTE] When submitting topology to the cluster, you must first copy the jar file containing the cluster before using the `storm` command. This can be accomplished using the `scp` command from the client where the file exists. For example, `scp FILENAME.jar USERNAME@CLUSTERNAME-ssh.azurehdinsight.net:FILENAME.jar`\n    >\n    > The WordCount example, and other storm starter examples, are already included on your cluster at `/usr/hdp/current/storm-client/contrib/storm-starter/`.\n\n##Monitor and manage using the storm command\n\nThe `storm` utility allows you to work with running topologies from the command line. The following is a list of commonly used commands. Use `storm -h` for a full list of commands.\n\n###List topologies\n\nUse the following command to list all running topologies:\n\n    storm list\n    \nThis will return information similar to the following:\n\n    Topology_name        Status     Num_tasks  Num_workers  Uptime_secs\n    -------------------------------------------------------------------\n    WordCount            ACTIVE     29         2            263\n\n###Deactivate and reactivate\n\nDeactivating a topology pauses it until it is killed or reactivated. Use the following to deactivate and reactivate:\n\n    storm Deactivate TOPOLOGYNAME\n    \n    storm Activate TOPOLOGYNAME\n\n###Kill a running topology\n\nStorm topologies, once started, will continue running until stopped. To stop a topology, use the following command:\n\n    storm stop TOPOLOGYNAME\n\n###Rebalance\n\nRebalancing a topology allows the system to revise the parallelism of the topology. For example, if you have resized the cluster to add more notes, rebalancing will allow a running topology to make use of the new nodes.\n\n> [AZURE.WARNING] Rebalancing a topology first deactivates the topology, then redistributes workers evenly across the cluster, then finally returns the topology to the state it was in before rebalancing occurred. So if the topology was active, it will become active again. If it was deactivated, it will remain deactivated.\n\n    storm rebalance TOPOLOGYNAME\n\n##Monitor and manage using the Storm UI\n\nThe Storm UI provides a web interface for working with running topologies, and is included on your HDInsight cluster. To view the Storm UI, use a web browser to open __https://CLUSTERNAME.azurehdinsight.net/stormui__, where __CLUSTERNAME__ is the name of your cluster.\n\n> [AZURE.NOTE] If asked to provide a user name and password, enter the cluster administrator (admin) and password that you used when creating the cluster.\n\n\n### Main page\n\nThe main page of the Storm UI provides the following information:\n- **Cluster summary**: Basic information about the Storm cluster.\n- **Topology summary**: A list of running topologies. Use the links in this section to view more information about specific topologies.\n- **Supervisor summary**: Information about the Storm supervisor.\n- **Nimbus configuration**: Nimbus configuration for the cluster.\n\n### Topology summary\n\nSelecting a link from the **Topology summary** section displays the following information about the topology:\n- **Topology summary**: Basic information about the topology.\n- **Topology actions**: Management actions that you can perform for the topology.\n  - **Activate**: Resumes processing of a deactivated topology.\n  - **Deactivate**: Pauses a running topology.\n  - **Rebalance**: Adjusts the parallelism of the topology. You should rebalance running topologies after you have changed the number of nodes in the cluster. This allows the topology to adjust parallelism to compensate for the increased or decreased number of nodes in the cluster.\n\n      For more information, see <a href=\"http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html\" target=\"_blank\">Understanding the parallelism of a Storm topology</a>.\n\n  - **Kill**: Terminates a Storm topology after the specified timeout.\n\n- **Topology stats**: Statistics about the topology. Use the links in the **Window** column to set the timeframe for the remaining entries on the page.\n- **Spouts**: The spouts used by the topology. Use the links in this section to view more information about specific spouts.\n- **Bolts**: The bolts used by the topology. Use the links in this section to view more information about specific bolts.\n- **Topology configuration**: The configuration of the selected topology.\n\n### Spout and Bolt summary\n\nSelecting a spout from the **Spouts** or **Bolts** sections displays the following information about the selected item:\n- **Component summary**: Basic information about the spout or bolt.\n- **Spout/Bolt stats**: Statistics about the spout or bolt. Use the links in the **Window** column to set the timeframe for the remaining entries on the page.\n- **Input stats** (bolt only): Information about the input streams consumed by the bolt.\n- **Output stats**: Information about the streams emitted by this spout or bolt.\n- **Executors**: Information about the instances of the spout or bolt. Select the **Port** entry for a specific executor to view a log of diagnostic information produced for this instance.\n- **Errors**: Any error information for this spout or bolt.\n\n## REST API\n\nThe Storm UI is built on top of the REST API, so you can perform similar management and monitoring functionality by using the REST API. You can use the REST API to create custom tools for managing and monitoring Storm topologies.\n\nFor more information, see [Storm UI REST API](https://github.com/apache/storm/blob/master/docs/documentation/ui-rest-api.md). The following information is specific to using the REST API with Apache Storm on HDInsight.\n\n> [AZURE.IMPORTANT] The Storm REST API is not publicly available over the internet, and must be accessed using an SSH tunnel to the HDInsight cluster head node. For information on creating and using an SSH tunnel, see [Use SSH Tunneling to access Ambari web UI, ResourceManager, JobHistory, NameNode, Oozie, and other web UI's](hdinsight-linux-ambari-ssh-tunnel.md).\n\n### Base URI\n\nThe base URI for the REST API on Linux-based HDInsight clusters is available on the head node at **https://HEADNODEFQDN:8744/api/v1/**; however, the domain name of the head node is generated during cluster creation and is not static.\n\nYou can find the fully qualified domain name (FQDN) for the cluster head node in several different ways:\n\n* __From an SSH session__: Use the command `headnode -f` from an SSH session to the cluster.\n* __From Ambari Web__: Select __Services__ from the top of the page, then select __Storm__. From the __Summary__ tab, select __Storm UI Server__. The FQDN of the node that the Storm UI and REST API is running on will be at the top of the page.\n* __From Ambari REST API__: Use the command `curl -u admin:PASSWORD -G \"https://CLUSTERNAME\n.azurehdinsight.net/api/v1/clusters/CLUSTERNAME/services/STORM/components/STORM_UI_SERVER\"` to retrieve information about the node that the Storm UI and REST API are running on. Replace __PASSWORD__ with the admin password for the cluster. Replace __CLUSTERNAME__ with the cluster name. In the response, the \"host_name\" entry contains the FQDN of the node.\n\n### Authentication\n\nRequests to the REST API must use **basic authentication**, so you use the HDInsight cluster administrator name and password.\n\n> [AZURE.NOTE] Because basic authentication is sent by using clear text, you should **always** use HTTPS to secure communications with the cluster.\n\n### Return values\n\nInformation that is returned from the REST API may only be usable from within the cluster or virtual machines on the same Azure Virtual Network as the cluster. For example, the fully qualified domain name (FQDN) returned for Zookeeper servers will not be accessible from the Internet.\n\n## Next Steps\n\nNow that you've learned how to deploy and monitor topologies by using the Storm Dashboard, learn how to [Develop Java-based topologies using Maven](hdinsight-storm-develop-java-topology.md).\n\nFor a list of more example topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).\n"
}