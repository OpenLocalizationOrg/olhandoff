{
  "nodes": [
    {
      "pos": [
        28,
        128
      ],
      "content": "Use Resource Manager to allocate resources to the Apache Spark cluster in HDInsight| Microsoft Azure"
    },
    {
      "pos": [
        148,
        241
      ],
      "content": "Learn how to use the Resource Manager for Spark clusters on HDInsight for better performance."
    },
    {
      "pos": [
        582,
        656
      ],
      "content": "Manage resources for the Apache Spark cluster in Azure HDInsight (Windows)"
    },
    {
      "pos": [
        660,
        927
      ],
      "content": "<ph id=\"ph2\">[AZURE.NOTE]</ph><ph id=\"ph3\"/> HDInsight now provides Spark clusters on Linux. For information on how to manage resources for a Spark cluster on HDInsight Linux, see <bpt id=\"p1\">[</bpt>Manage resources for the Apache Spark cluster in Azure HDInsight (Linux)<ept id=\"p1\">](hdinsight-apache-spark-resource-manager.md)</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph2\">[AZURE.NOTE]</ph><ph id=\"ph3\"/> HDInsight now provides Spark clusters on Linux.",
          "pos": [
            0,
            92
          ]
        },
        {
          "content": "For information on how to manage resources for a Spark cluster on HDInsight Linux, see <bpt id=\"p1\">[</bpt>Manage resources for the Apache Spark cluster in Azure HDInsight (Linux)<ept id=\"p1\">](hdinsight-apache-spark-resource-manager.md)</ept>.",
          "pos": [
            93,
            337
          ]
        }
      ]
    },
    {
      "pos": [
        929,
        1099
      ],
      "content": "Resource manager is a component of the Spark cluster dashboard that enables you to manage resources such as cores and RAM used by each application running on the cluster."
    },
    {
      "pos": [
        1127,
        1164
      ],
      "content": "How do I launch the Resource Manager?"
    },
    {
      "pos": [
        1169,
        1413
      ],
      "content": "From the <bpt id=\"p2\">[</bpt>Azure Preview Portal<ept id=\"p2\">](https://ms.portal.azure.com/)</ept>, from the startboard, click the tile for your Spark cluster (if you pinned it to the startboard). You can also navigate to your cluster under <bpt id=\"p3\">**</bpt>Browse All<ept id=\"p3\">**</ept><ph id=\"ph4\"/> &gt; <bpt id=\"p4\">**</bpt>HDInsight Clusters<ept id=\"p4\">**</ept>.",
      "nodes": [
        {
          "content": "From the <bpt id=\"p2\">[</bpt>Azure Preview Portal<ept id=\"p2\">](https://ms.portal.azure.com/)</ept>, from the startboard, click the tile for your Spark cluster (if you pinned it to the startboard).",
          "pos": [
            0,
            197
          ]
        },
        {
          "content": "You can also navigate to your cluster under <bpt id=\"p3\">**</bpt>Browse All<ept id=\"p3\">**</ept><ph id=\"ph4\"/> &gt; <bpt id=\"p4\">**</bpt>HDInsight Clusters<ept id=\"p4\">**</ept>.",
          "pos": [
            198,
            375
          ]
        }
      ]
    },
    {
      "pos": [
        1420,
        1536
      ],
      "content": "From the Spark cluster blade, click <bpt id=\"p5\">**</bpt>Dashboard<ept id=\"p5\">**</ept>. When prompted, enter the admin credentials for the Spark cluster.",
      "nodes": [
        {
          "content": "From the Spark cluster blade, click <bpt id=\"p5\">**</bpt>Dashboard<ept id=\"p5\">**</ept>.",
          "pos": [
            0,
            88
          ]
        },
        {
          "content": "When prompted, enter the admin credentials for the Spark cluster.",
          "pos": [
            89,
            154
          ]
        }
      ]
    },
    {
      "pos": [
        1542,
        1683
      ],
      "content": "<ph id=\"ph5\">![</ph>Launch Resource Manager<ph id=\"ph6\">](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.cluster.launch.dashboard.png \"Start Resource Manager\")</ph>"
    },
    {
      "pos": [
        1688,
        1690
      ],
      "content": "##"
    },
    {
      "pos": [
        1716,
        1769
      ],
      "content": "How do I fix these issues using the Resource Manager?"
    },
    {
      "pos": [
        1771,
        1923
      ],
      "content": "Here are some common scenarios that you might run into with your Spark cluster, and the instructions on how to address those using the Resource Manager."
    },
    {
      "pos": [
        1929,
        1966
      ],
      "content": "My Spark cluster on HDInsight is slow"
    },
    {
      "pos": [
        1968,
        2349
      ],
      "content": "Apache Spark cluster in HDInsight is designed for multi-tenancy, so resources are split across multiple components (notebooks, job server, etc). This allows you to use all Spark components concurrently without worrying about any component not able to get resources to run, but each component will be slower since resources are fragmented.  This can be adjusted based on your needs.",
      "nodes": [
        {
          "content": "Apache Spark cluster in HDInsight is designed for multi-tenancy, so resources are split across multiple components (notebooks, job server, etc).",
          "pos": [
            0,
            144
          ]
        },
        {
          "content": "This allows you to use all Spark components concurrently without worrying about any component not able to get resources to run, but each component will be slower since resources are fragmented.",
          "pos": [
            145,
            338
          ]
        },
        {
          "content": "This can be adjusted based on your needs.",
          "pos": [
            340,
            381
          ]
        }
      ]
    },
    {
      "pos": [
        2357,
        2452
      ],
      "content": "I only use the Jupyter notebook with the Spark cluster. How can I allocate all resources to it?",
      "nodes": [
        {
          "content": "I only use the Jupyter notebook with the Spark cluster.",
          "pos": [
            0,
            55
          ]
        },
        {
          "content": "How can I allocate all resources to it?",
          "pos": [
            56,
            95
          ]
        }
      ]
    },
    {
      "pos": [
        2457,
        2616
      ],
      "content": "From the <bpt id=\"p6\">**</bpt>Spark Dashboard<ept id=\"p6\">**</ept>, click the <bpt id=\"p7\">**</bpt>Spark UI<ept id=\"p7\">**</ept><ph id=\"ph7\"/> tab to find out the maximum number of cores and the maximum RAM that you can allocate to the applications."
    },
    {
      "pos": [
        2622,
        2767
      ],
      "content": "<ph id=\"ph8\">![</ph>Resource allocation<ph id=\"ph9\">](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.ui.resource.png \"Find resources allocated to a Spark cluster\")</ph>"
    },
    {
      "pos": [
        2773,
        3049
      ],
      "content": "Going by the screen capture above, the maximum cores that you can allocate is 7 (total 8 cores of which 1 is in use), and the maximum RAM that you can allocate is 9GB (total 12GB RAM, of which 2GB must be set aside for system use and 1GB that is in use by other applications)."
    },
    {
      "pos": [
        3055,
        3180
      ],
      "content": "You should also factor any applications that are running. You can look at the running applications from the <bpt id=\"p8\">**</bpt>Spark UI<ept id=\"p8\">**</ept><ph id=\"ph10\"/> tab.",
      "nodes": [
        {
          "content": "You should also factor any applications that are running.",
          "pos": [
            0,
            57
          ]
        },
        {
          "content": "You can look at the running applications from the <bpt id=\"p8\">**</bpt>Spark UI<ept id=\"p8\">**</ept><ph id=\"ph10\"/> tab.",
          "pos": [
            58,
            178
          ]
        }
      ]
    },
    {
      "pos": [
        3186,
        3328
      ],
      "content": "<ph id=\"ph11\">![</ph>Running applications<ph id=\"ph12\">](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.ui.running.apps.png \"Applications running on the cluster\")</ph>"
    },
    {
      "pos": [
        3338,
        3546
      ],
      "content": "From the HDInsight Spark Dashboard, click the <bpt id=\"p9\">**</bpt>Resource Manager<ept id=\"p9\">**</ept><ph id=\"ph13\"/> tab and specify the values for <bpt id=\"p10\">**</bpt>Default application core count<ept id=\"p10\">**</ept><ph id=\"ph14\"/> and <bpt id=\"p11\">**</bpt>Default executor memory per worker node<ept id=\"p11\">**</ept>. Set other properties to 0.",
      "nodes": [
        {
          "content": "From the HDInsight Spark Dashboard, click the <bpt id=\"p9\">**</bpt>Resource Manager<ept id=\"p9\">**</ept><ph id=\"ph13\"/> tab and specify the values for <bpt id=\"p10\">**</bpt>Default application core count<ept id=\"p10\">**</ept><ph id=\"ph14\"/> and <bpt id=\"p11\">**</bpt>Default executor memory per worker node<ept id=\"p11\">**</ept>.",
          "pos": [
            0,
            329
          ]
        },
        {
          "content": "Set other properties to 0.",
          "pos": [
            330,
            356
          ]
        }
      ]
    },
    {
      "pos": [
        3552,
        3703
      ],
      "content": "<ph id=\"ph15\">![</ph>Resource allocation<ph id=\"ph16\">](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.ui.allocate.resources.png \"Allocate resources to your applications\")</ph>"
    },
    {
      "pos": [
        3709,
        3785
      ],
      "content": "I do not use BI tools with the Spark cluster. How can I take resources back?",
      "nodes": [
        {
          "content": "I do not use BI tools with the Spark cluster.",
          "pos": [
            0,
            45
          ]
        },
        {
          "content": "How can I take resources back?",
          "pos": [
            46,
            76
          ]
        }
      ]
    },
    {
      "pos": [
        3788,
        3946
      ],
      "content": "Specify thrift server core Count and thrift Server executor memory as 0. With no core or memory allocated, the thrift server will go into a <bpt id=\"p12\">**</bpt>WAITING<ept id=\"p12\">**</ept><ph id=\"ph17\"/> state.",
      "nodes": [
        {
          "content": "Specify thrift server core Count and thrift Server executor memory as 0.",
          "pos": [
            0,
            72
          ]
        },
        {
          "content": "With no core or memory allocated, the thrift server will go into a <bpt id=\"p12\">**</bpt>WAITING<ept id=\"p12\">**</ept><ph id=\"ph17\"/> state.",
          "pos": [
            73,
            213
          ]
        }
      ]
    },
    {
      "pos": [
        3948,
        4084
      ],
      "content": "<ph id=\"ph18\">![</ph>Resource allocation<ph id=\"ph19\">](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.ui.no.thrift.png \"No resources to the thrift server\")</ph>"
    },
    {
      "pos": [
        4086,
        4088
      ],
      "content": "##"
    },
    {
      "pos": [
        4110,
        4118
      ],
      "content": "See also"
    },
    {
      "pos": [
        4122,
        4204
      ],
      "content": "<bpt id=\"p13\">[</bpt>Overview: Apache Spark on Azure HDInsight<ept id=\"p13\">](hdinsight-apache-spark-overview-v1.md)</ept>"
    },
    {
      "pos": [
        4207,
        4290
      ],
      "content": "<bpt id=\"p14\">[</bpt>Create a Spark on HDInsight cluster<ept id=\"p14\">](hdinsight-apache-spark-provision-clusters.md)</ept>"
    },
    {
      "pos": [
        4293,
        4410
      ],
      "content": "<bpt id=\"p15\">[</bpt>Perform interactive data analysis using Spark in HDInsight with BI tools<ept id=\"p15\">](hdinsight-apache-spark-use-bi-tools-v1.md)</ept>"
    },
    {
      "pos": [
        4413,
        4544
      ],
      "content": "<bpt id=\"p16\">[</bpt>Use Spark in HDInsight for building machine learning applications<ept id=\"p16\">](hdinsight-apache-spark-ipython-notebook-machine-learning-v1.md)</ept>"
    },
    {
      "pos": [
        4547,
        4686
      ],
      "content": "<bpt id=\"p17\">[</bpt>Use Spark in HDInsight for building real-time streaming applications<ept id=\"p17\">](hdinsight-apache-spark-csharp-apache-zeppelin-eventhub-streaming.md)</ept>"
    }
  ],
  "content": "<properties \n    pageTitle=\"Use Resource Manager to allocate resources to the Apache Spark cluster in HDInsight| Microsoft Azure\" \n    description=\"Learn how to use the Resource Manager for Spark clusters on HDInsight for better performance.\" \n    services=\"hdinsight\" \n    documentationCenter=\"\" \n    authors=\"nitinme\" \n    manager=\"paulettm\" \n    editor=\"cgronlun\"\n    tags=\"azure-portal\"/>\n\n<tags \n    ms.service=\"hdinsight\" \n    ms.workload=\"big-data\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"12/22/2015\" \n    ms.author=\"nitinme\"/>\n\n\n# Manage resources for the Apache Spark cluster in Azure HDInsight (Windows)\n\n> [AZURE.NOTE] HDInsight now provides Spark clusters on Linux. For information on how to manage resources for a Spark cluster on HDInsight Linux, see [Manage resources for the Apache Spark cluster in Azure HDInsight (Linux)](hdinsight-apache-spark-resource-manager.md).\n\nResource manager is a component of the Spark cluster dashboard that enables you to manage resources such as cores and RAM used by each application running on the cluster.\n\n## <a name=\"launchrm\"></a>How do I launch the Resource Manager?\n\n1. From the [Azure Preview Portal](https://ms.portal.azure.com/), from the startboard, click the tile for your Spark cluster (if you pinned it to the startboard). You can also navigate to your cluster under **Browse All** > **HDInsight Clusters**. \n \n2. From the Spark cluster blade, click **Dashboard**. When prompted, enter the admin credentials for the Spark cluster.\n\n    ![Launch Resource Manager](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.cluster.launch.dashboard.png \"Start Resource Manager\")   \n\n##<a name=\"scenariosrm\"></a>How do I fix these issues using the Resource Manager?\n\nHere are some common scenarios that you might run into with your Spark cluster, and the instructions on how to address those using the Resource Manager.\n\n### My Spark cluster on HDInsight is slow\n\nApache Spark cluster in HDInsight is designed for multi-tenancy, so resources are split across multiple components (notebooks, job server, etc). This allows you to use all Spark components concurrently without worrying about any component not able to get resources to run, but each component will be slower since resources are fragmented.  This can be adjusted based on your needs. \n\n\n### I only use the Jupyter notebook with the Spark cluster. How can I allocate all resources to it?\n\n1. From the **Spark Dashboard**, click the **Spark UI** tab to find out the maximum number of cores and the maximum RAM that you can allocate to the applications.\n\n    ![Resource allocation](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.ui.resource.png \"Find resources allocated to a Spark cluster\")\n\n    Going by the screen capture above, the maximum cores that you can allocate is 7 (total 8 cores of which 1 is in use), and the maximum RAM that you can allocate is 9GB (total 12GB RAM, of which 2GB must be set aside for system use and 1GB that is in use by other applications).\n\n    You should also factor any applications that are running. You can look at the running applications from the **Spark UI** tab.\n\n    ![Running applications](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.ui.running.apps.png \"Applications running on the cluster\")\n\n    \n2. From the HDInsight Spark Dashboard, click the **Resource Manager** tab and specify the values for **Default application core count** and **Default executor memory per worker node**. Set other properties to 0.\n\n    ![Resource allocation](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.ui.allocate.resources.png \"Allocate resources to your applications\")\n\n### I do not use BI tools with the Spark cluster. How can I take resources back? \n\nSpecify thrift server core Count and thrift Server executor memory as 0. With no core or memory allocated, the thrift server will go into a **WAITING** state.\n\n![Resource allocation](./media/hdinsight-apache-spark-resource-manager-v1/hdispark.ui.no.thrift.png \"No resources to the thrift server\")\n\n##<a name=\"seealso\"></a>See also\n\n* [Overview: Apache Spark on Azure HDInsight](hdinsight-apache-spark-overview-v1.md)\n* [Create a Spark on HDInsight cluster](hdinsight-apache-spark-provision-clusters.md)\n* [Perform interactive data analysis using Spark in HDInsight with BI tools](hdinsight-apache-spark-use-bi-tools-v1.md)\n* [Use Spark in HDInsight for building machine learning applications](hdinsight-apache-spark-ipython-notebook-machine-learning-v1.md)\n* [Use Spark in HDInsight for building real-time streaming applications](hdinsight-apache-spark-csharp-apache-zeppelin-eventhub-streaming.md)\n\n\n[hdinsight-versions]: hdinsight-component-versioning.md\n[hdinsight-upload-data]: hdinsight-upload-data.md\n[hdinsight-storage]: hdinsight-hadoop-use-blob-storage.md\n\n\n[azure-purchase-options]: http://azure.microsoft.com/pricing/purchase-options/\n[azure-member-offers]: http://azure.microsoft.com/pricing/member-offers/\n[azure-free-trial]: http://azure.microsoft.com/pricing/free-trial/\n[azure-management-portal]: https://manage.windowsazure.com/\n[azure-create-storageaccount]: storage-create-storage-account.md\n"
}