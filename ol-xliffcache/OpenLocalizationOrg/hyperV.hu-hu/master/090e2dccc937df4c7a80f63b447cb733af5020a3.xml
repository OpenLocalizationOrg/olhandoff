{
  "nodes": [
    {
      "content": "ms.ContentId: 5bbac9eb-c31e-40db-97b1-f33ea59ac3a3",
      "pos": [
        0,
        50
      ]
    },
    {
      "content": "title: Work in Progress",
      "pos": [
        51,
        74
      ]
    },
    {
      "content": "Work in Progress",
      "pos": [
        78,
        94
      ]
    },
    {
      "pos": [
        96,
        262
      ],
      "content": "If you don't see your problem addressed here or have questions, post them on the <bpt id=\"p1\">[</bpt>forum<ept id=\"p1\">](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers)</ept>."
    },
    {
      "content": "General functionality",
      "pos": [
        292,
        313
      ]
    },
    {
      "content": "Windows Container Image must exactly match container host",
      "pos": [
        319,
        376
      ]
    },
    {
      "content": "A Windows Server Container requires an operating system image that matches the container host in respect to build and patch level.",
      "pos": [
        377,
        507
      ]
    },
    {
      "content": "A mismatch will lead to instability and or unpredictable behavior for the container and/or the host.",
      "pos": [
        508,
        608
      ]
    },
    {
      "content": "If you install updates against the Windows container host OS you will need to update the container base OS image to have the matching updates.",
      "pos": [
        610,
        752
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Work Around:<ept id=\"p1\">**</ept><ph id=\"ph1\"> </ph>",
      "pos": [
        833,
        850
      ]
    },
    {
      "content": "Download and install a container base image matching the OS version and patch level of the container host.",
      "pos": [
        853,
        959
      ]
    },
    {
      "content": "Commands sporadically fail -- try again",
      "pos": [
        966,
        1005
      ]
    },
    {
      "content": "In our testing, commands occasionally need to be run multiple times.",
      "pos": [
        1006,
        1074
      ]
    },
    {
      "content": "The same principle applies to other actions.",
      "pos": [
        1076,
        1120
      ]
    },
    {
      "content": "For example, if you create a new file and it doesn't appear, try touching the file.",
      "pos": [
        1123,
        1206
      ]
    },
    {
      "pos": [
        1210,
        1340
      ],
      "content": "If you have to do this, let us know via <bpt id=\"p1\">[</bpt>the forums<ept id=\"p1\">](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers)</ept>."
    },
    {
      "content": "** Work Around:  **",
      "pos": [
        1342,
        1361
      ]
    },
    {
      "content": "Build scripts such that they try commands multiple times.",
      "pos": [
        1364,
        1421
      ]
    },
    {
      "content": "If a command fails, try again.",
      "pos": [
        1423,
        1453
      ]
    },
    {
      "content": "All non-C:/ drives are automatically mapped into new containers",
      "pos": [
        1461,
        1524
      ]
    },
    {
      "content": "All non-C:/ drives available to the container host are automatically mapped into new running Windows Server Containers.",
      "pos": [
        1525,
        1644
      ]
    },
    {
      "content": "At this point in time there is no way to selectively map folders into a container, as an interim work around drives are mapped automatically.",
      "pos": [
        1646,
        1787
      ]
    },
    {
      "content": "**Work Around: **",
      "pos": [
        1789,
        1806
      ]
    },
    {
      "content": "We're working on it.",
      "pos": [
        1809,
        1829
      ]
    },
    {
      "content": "In the future there will be folder sharing.",
      "pos": [
        1831,
        1874
      ]
    },
    {
      "content": "Windows Server Containers are starting very slowly",
      "pos": [
        1881,
        1931
      ]
    },
    {
      "content": "If your container is taking more than 30 seconds to start, it may be performing many duplicate virus scans.",
      "pos": [
        1932,
        2039
      ]
    },
    {
      "content": "Many anti-malware solutions, such as Windows Defender, maybe unnecessarily scanning files with-in container images including all of the OS binaries and files in the container OS image.",
      "pos": [
        2041,
        2225
      ]
    },
    {
      "content": "This occurs when ever a new container is created and from the anti-malware’s perspective all of the “container’s files” look like new files that have not previously been scanned.",
      "pos": [
        2227,
        2405
      ]
    },
    {
      "content": "So when processes inside the container attempt to read these files the anti-malware components first scan them before allowing access to the files.",
      "pos": [
        2407,
        2554
      ]
    },
    {
      "content": "In reality these files were already scanned when the container image was imported or pulled to the server.",
      "pos": [
        2556,
        2662
      ]
    },
    {
      "content": "In future previews new infrastructure will be in place such that anti-malware solutions, including Windows Defender, will be aware of these situations and can act accordingly to avoid multiple scans.",
      "pos": [
        2663,
        2862
      ]
    },
    {
      "content": "Networking",
      "pos": [
        2896,
        2906
      ]
    },
    {
      "content": "Number of network compartments per container",
      "pos": [
        2912,
        2956
      ]
    },
    {
      "content": "In this release we support one network compartment per container.",
      "pos": [
        2957,
        3022
      ]
    },
    {
      "content": "This means that if you have a container with multiple network adapters, you cannot access the same network port on each adapter (e.g. 192.168.0.1:80 and 192.168.0.2:80 belonging to the same container).",
      "pos": [
        3023,
        3224
      ]
    },
    {
      "content": "**Work Around: **",
      "pos": [
        3226,
        3243
      ]
    },
    {
      "content": "If multiple endpoints need to be exposed by a container, use NAT port mapping.",
      "pos": [
        3246,
        3324
      ]
    },
    {
      "content": "Windows containers are not getting IPs",
      "pos": [
        3330,
        3368
      ]
    },
    {
      "content": "If you're connecting to the windows server containers with DHCP VM Switches it's possible for the container host to recieve an IP wwhile the containers do not.",
      "pos": [
        3369,
        3528
      ]
    },
    {
      "content": "The containers get a 169.254.<bpt id=\"p1\">***</bpt>.<ept id=\"p1\">***</ept>",
      "pos": [
        3530,
        3566
      ]
    },
    {
      "content": "APIPA IP address.",
      "pos": [
        3567,
        3584
      ]
    },
    {
      "content": "Work around:",
      "pos": [
        3588,
        3600
      ]
    },
    {
      "content": "This is a side effect of sharing the kernel.",
      "pos": [
        3603,
        3647
      ]
    },
    {
      "content": "All containers affectively have the same mac address.",
      "pos": [
        3649,
        3702
      ]
    },
    {
      "content": "Enable MAC address spoofing on the container host.",
      "pos": [
        3704,
        3754
      ]
    },
    {
      "content": "This can be achieved using PowerShell",
      "pos": [
        3756,
        3793
      ]
    },
    {
      "content": "Creating file shares does not work in a Container",
      "pos": [
        3902,
        3951
      ]
    },
    {
      "content": "Currently it is not possible to create a file share within a Container.",
      "pos": [
        3953,
        4024
      ]
    },
    {
      "content": "If you run <ph id=\"ph1\">`net share`</ph> you will see an error like this:",
      "pos": [
        4025,
        4080
      ]
    },
    {
      "content": "**Work Around: **",
      "pos": [
        4329,
        4346
      ]
    },
    {
      "content": "If you want to copy files into a Container you can use the other way round by running <ph id=\"ph1\">`net use`</ph> within the Container.",
      "pos": [
        4347,
        4464
      ]
    },
    {
      "content": "For example:",
      "pos": [
        4465,
        4477
      ]
    },
    {
      "content": "Application compatibility",
      "pos": [
        4581,
        4606
      ]
    },
    {
      "pos": [
        4608,
        4820
      ],
      "content": "There are so mnay questions about which applications work and don't work in Windows Server Containers, we decided to break application compatability information into <bpt id=\"p1\">[</bpt>its own article<ept id=\"p1\">](../reference/app_compat.md)</ept>."
    },
    {
      "content": "Some of the most common issues are located here as well.",
      "pos": [
        4822,
        4878
      ]
    },
    {
      "content": "WinRM won't start in a Windows Server Container",
      "pos": [
        4884,
        4931
      ]
    },
    {
      "content": "WinRM starts, throws an error, and stops again.",
      "pos": [
        4932,
        4979
      ]
    },
    {
      "content": "Errors are not logged in the event log.",
      "pos": [
        4981,
        5020
      ]
    },
    {
      "content": "Work Around:",
      "pos": [
        5024,
        5036
      ]
    },
    {
      "content": "Use WMI, <bpt id=\"p1\">[</bpt>RDP<ept id=\"p1\">](#RemoteDesktopAccessOfContainers)</ept>, or Enter-PSSession -ContainerID",
      "pos": [
        5039,
        5120
      ]
    },
    {
      "content": "Can't install ASP.NET 4.5 or ASP.NET 3.5 with IIS in a container using DISM",
      "pos": [
        5126,
        5201
      ]
    },
    {
      "content": "Installing IIS-ASPNET45 in a container doesn't work inside a Windows Server container.",
      "pos": [
        5203,
        5289
      ]
    },
    {
      "content": "The installation progress sticks around 95.5%.",
      "pos": [
        5291,
        5337
      ]
    },
    {
      "content": "This fails because ASP.NET 4.5 doesn't run in a container.",
      "pos": [
        5423,
        5481
      ]
    },
    {
      "content": "Work Around:",
      "pos": [
        5485,
        5497
      ]
    },
    {
      "content": "Instead, install the Web-Server role to use IIS.",
      "pos": [
        5502,
        5550
      ]
    },
    {
      "content": "ASP 5.0 does work.",
      "pos": [
        5551,
        5569
      ]
    },
    {
      "pos": [
        5654,
        5792
      ],
      "content": "See the <bpt id=\"p1\">[</bpt>application compatability article<ept id=\"p1\">](../reference/app_compat.md)</ept> for more information about what applications can be containerized."
    },
    {
      "content": "Docker management",
      "pos": [
        5826,
        5843
      ]
    },
    {
      "content": "Docker clients unsecured by default",
      "pos": [
        5849,
        5884
      ]
    },
    {
      "content": "In this pre-release, docker communication is public if you know where to look.",
      "pos": [
        5885,
        5963
      ]
    },
    {
      "content": "Docker commands that don't work with Windows Server Containers",
      "pos": [
        5969,
        6031
      ]
    },
    {
      "content": "Commands known to fail:",
      "pos": [
        6033,
        6056
      ]
    },
    {
      "content": "Docker command",
      "pos": [
        6062,
        6076
      ]
    },
    {
      "content": "Where it runs",
      "pos": [
        6083,
        6096
      ]
    },
    {
      "content": "Error",
      "pos": [
        6103,
        6108
      ]
    },
    {
      "content": "Notes",
      "pos": [
        6115,
        6120
      ]
    },
    {
      "content": "docker commit",
      "pos": [
        6159,
        6172
      ]
    },
    {
      "content": "image",
      "pos": [
        6177,
        6182
      ]
    },
    {
      "content": "Docker stops running container and doesn’t show correct error message",
      "pos": [
        6185,
        6254
      ]
    },
    {
      "content": "Committing a stopped container works.",
      "pos": [
        6257,
        6294
      ]
    },
    {
      "content": "For running containers: We're working on it :)",
      "pos": [
        6295,
        6341
      ]
    },
    {
      "content": "docker diff",
      "pos": [
        6348,
        6359
      ]
    },
    {
      "content": "daemon",
      "pos": [
        6364,
        6370
      ]
    },
    {
      "content": "Error: The windows graphdriver does not support Changes()",
      "pos": [
        6373,
        6430
      ]
    },
    {
      "content": "docker kill",
      "pos": [
        6439,
        6450
      ]
    },
    {
      "content": "container",
      "pos": [
        6455,
        6464
      ]
    },
    {
      "content": "Error: Invalid signal: KILL  Error: failed to kill containers:[]",
      "pos": [
        6467,
        6531
      ]
    },
    {
      "content": "docker load",
      "pos": [
        6540,
        6551
      ]
    },
    {
      "content": "image",
      "pos": [
        6556,
        6561
      ]
    },
    {
      "content": "Fails silently",
      "pos": [
        6564,
        6578
      ]
    },
    {
      "content": "No error but the image isn't loading either",
      "pos": [
        6581,
        6624
      ]
    },
    {
      "content": "docker pause",
      "pos": [
        6631,
        6643
      ]
    },
    {
      "content": "container",
      "pos": [
        6648,
        6657
      ]
    },
    {
      "content": "Error: Windows container cannot be paused.",
      "pos": [
        6660,
        6702
      ]
    },
    {
      "content": "May be not supported",
      "pos": [
        6704,
        6724
      ]
    },
    {
      "content": "docker port",
      "pos": [
        6733,
        6744
      ]
    },
    {
      "content": "container",
      "pos": [
        6749,
        6758
      ]
    },
    {
      "content": "No port is getting listed even we are able to RDP.",
      "pos": [
        6764,
        6814
      ]
    },
    {
      "content": "docker pull",
      "pos": [
        6819,
        6830
      ]
    },
    {
      "content": "daemon",
      "pos": [
        6835,
        6841
      ]
    },
    {
      "content": "Error: System cannot find the file path.",
      "pos": [
        6844,
        6884
      ]
    },
    {
      "content": "We cant run container using this image.",
      "pos": [
        6885,
        6924
      ]
    },
    {
      "content": "Image is getting added can't be used.",
      "pos": [
        6927,
        6964
      ]
    },
    {
      "content": "We're working on it :)",
      "pos": [
        6966,
        6988
      ]
    },
    {
      "content": "docker restart",
      "pos": [
        6995,
        7009
      ]
    },
    {
      "content": "container",
      "pos": [
        7014,
        7023
      ]
    },
    {
      "content": "Error: A system shutdown is in progress.",
      "pos": [
        7026,
        7066
      ]
    },
    {
      "content": "docker unpause",
      "pos": [
        7076,
        7090
      ]
    },
    {
      "content": "container",
      "pos": [
        7095,
        7104
      ]
    },
    {
      "content": "Can't test because pause doesn't work yet.",
      "pos": [
        7110,
        7152
      ]
    },
    {
      "pos": [
        7156,
        7355
      ],
      "content": "If anything that isn't on this list fails (or if a command fails differently than expected), let us know via <bpt id=\"p1\">[</bpt>the forums<ept id=\"p1\">](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers)</ept>."
    },
    {
      "content": "Docker commands that partially work with Windows Server Containers",
      "pos": [
        7363,
        7429
      ]
    },
    {
      "content": "Commands with partial functionality:",
      "pos": [
        7431,
        7467
      ]
    },
    {
      "content": "Docker command",
      "pos": [
        7473,
        7487
      ]
    },
    {
      "content": "Runs on...",
      "pos": [
        7494,
        7504
      ]
    },
    {
      "content": "Parameter",
      "pos": [
        7511,
        7520
      ]
    },
    {
      "content": "Notes",
      "pos": [
        7527,
        7532
      ]
    },
    {
      "content": "docker attach",
      "pos": [
        7571,
        7584
      ]
    },
    {
      "content": "container",
      "pos": [
        7589,
        7598
      ]
    },
    {
      "content": "--no-stdin=false",
      "pos": [
        7601,
        7617
      ]
    },
    {
      "content": "The command doesn't exit when Ctrl-P and CTRL-Q is pressed",
      "pos": [
        7620,
        7678
      ]
    },
    {
      "content": "--sig-proxy=true",
      "pos": [
        7687,
        7703
      ]
    },
    {
      "content": "works",
      "pos": [
        7706,
        7711
      ]
    },
    {
      "content": "docker build",
      "pos": [
        7718,
        7730
      ]
    },
    {
      "content": "images",
      "pos": [
        7735,
        7741
      ]
    },
    {
      "content": "-f, --file",
      "pos": [
        7744,
        7754
      ]
    },
    {
      "content": "Error: Unable to prepare context: Unable to get synlinks",
      "pos": [
        7757,
        7813
      ]
    },
    {
      "content": "--force-rm=false",
      "pos": [
        7822,
        7838
      ]
    },
    {
      "content": "works",
      "pos": [
        7841,
        7846
      ]
    },
    {
      "content": "--no-cache=false",
      "pos": [
        7855,
        7871
      ]
    },
    {
      "content": "works",
      "pos": [
        7874,
        7879
      ]
    },
    {
      "content": "-q, --quiet=false",
      "pos": [
        7888,
        7905
      ]
    },
    {
      "content": "--rm=true",
      "pos": [
        7916,
        7925
      ]
    },
    {
      "content": "works",
      "pos": [
        7928,
        7933
      ]
    },
    {
      "content": "-t, --tag=\"\"",
      "pos": [
        7941,
        7953
      ]
    },
    {
      "content": "works",
      "pos": [
        7956,
        7961
      ]
    },
    {
      "content": "docker login",
      "pos": [
        7968,
        7980
      ]
    },
    {
      "content": "daemon",
      "pos": [
        7985,
        7991
      ]
    },
    {
      "content": "-e, -p, -u",
      "pos": [
        7994,
        8004
      ]
    },
    {
      "content": "sporratic behavior",
      "pos": [
        8007,
        8025
      ]
    },
    {
      "content": "docker push",
      "pos": [
        8033,
        8044
      ]
    },
    {
      "content": "daemon",
      "pos": [
        8049,
        8055
      ]
    },
    {
      "content": "Getting occasional \"repository does not exit\" errors.",
      "pos": [
        8060,
        8113
      ]
    },
    {
      "content": "docker rm",
      "pos": [
        8120,
        8129
      ]
    },
    {
      "content": "container",
      "pos": [
        8134,
        8143
      ]
    },
    {
      "content": "-f",
      "pos": [
        8146,
        8148
      ]
    },
    {
      "content": "Error: A system shutdown is in progress.",
      "pos": [
        8151,
        8191
      ]
    },
    {
      "pos": [
        8195,
        8420
      ],
      "content": "If anything that isn't on this list fails, if a command fails differently than expected, or if you find a work around, let us know via <bpt id=\"p1\">[</bpt>the forums<ept id=\"p1\">](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers)</ept>."
    },
    {
      "content": "Pasting commands to interactive Docker session is limited to 50 characters",
      "pos": [
        8427,
        8501
      ]
    },
    {
      "content": "If you copy a command line into an interactive Docker session, it is currently limited to 50 characters.",
      "pos": [
        8502,
        8606
      ]
    },
    {
      "content": "The pasted string is simply truncated.",
      "pos": [
        8607,
        8645
      ]
    },
    {
      "content": "This is not by design, we're working on lifting the restriction.",
      "pos": [
        8647,
        8711
      ]
    },
    {
      "content": "net use returns System error 1223 instead of prompting for username or password",
      "pos": [
        8717,
        8796
      ]
    },
    {
      "content": "Workaround: specify both, the username and password, when running net use.",
      "pos": [
        8797,
        8871
      ]
    },
    {
      "content": "For example:",
      "pos": [
        8872,
        8884
      ]
    },
    {
      "content": "HCS Shim errors when creating new container images",
      "pos": [
        8961,
        9011
      ]
    },
    {
      "content": "If you encounter error messages like this:",
      "pos": [
        9012,
        9054
      ]
    },
    {
      "content": "You're hitting an issue addressed by the Zero Day Patch for Windows Server 2016 TP3.",
      "pos": [
        9404,
        9488
      ]
    },
    {
      "content": "This error can also occur when running the Python-3.4.3.msi installer or node-v0.12.7.msi in a container.",
      "pos": [
        9489,
        9594
      ]
    },
    {
      "pos": [
        9596,
        9735
      ],
      "content": "If you hit other hcsshim errors, let us know via <bpt id=\"p1\">[</bpt>the forums<ept id=\"p1\">](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers)</ept>."
    },
    {
      "content": "Accessing windows server container with Remote Desktop",
      "pos": [
        9741,
        9795
      ]
    },
    {
      "content": "Windows Server Containers can be managed/interacted with through a RDP session.",
      "pos": [
        9797,
        9876
      ]
    },
    {
      "content": "The following steps are needed to remotely connect to a Windows Server Container using RDP.",
      "pos": [
        9878,
        9969
      ]
    },
    {
      "content": "It is assumed that the Container is connected to the network via a NAT switch.",
      "pos": [
        9970,
        10048
      ]
    },
    {
      "content": "This is the default when setting up a Container host through the installation script or creating a new VM in Azure.",
      "pos": [
        10049,
        10164
      ]
    },
    {
      "content": "** In the Container you want to connect to **",
      "pos": [
        10166,
        10211
      ]
    },
    {
      "content": "The following steps require either managing the Container using Docker or, when using PowerShell, specifying the <ph id=\"ph1\">`-RunAsAdministrator`</ph> switch when connecting to the Container.",
      "pos": [
        10213,
        10388
      ]
    },
    {
      "content": "Please take the following steps in the Container you want to connect to.",
      "pos": [
        10389,
        10461
      ]
    },
    {
      "content": "Obtain the Container's IP address",
      "pos": [
        10466,
        10499
      ]
    },
    {
      "content": "Returns something similar to this",
      "pos": [
        10529,
        10562
      ]
    },
    {
      "content": "Please note the IPv4 Address which is typically in the format 172.16.x.x",
      "pos": [
        10979,
        11051
      ]
    },
    {
      "content": "Set the password for the builtin administrator user for the Container",
      "pos": [
        11056,
        11125
      ]
    },
    {
      "content": "Enable the builtin administrator user for the Container",
      "pos": [
        11183,
        11238
      ]
    },
    {
      "content": "** On the Container host **",
      "pos": [
        11290,
        11317
      ]
    },
    {
      "content": "Since Windows Server has the Windows Firewall with Advanced Security enabled by default we need to open some ports for communication in order for RDP to work.",
      "pos": [
        11319,
        11477
      ]
    },
    {
      "content": "Additionally a port mapping is created so the Container is reachable through a port on the Container host.",
      "pos": [
        11478,
        11584
      ]
    },
    {
      "content": "The following steps require a PowerShell launched as Administrator on the Container host.",
      "pos": [
        11586,
        11675
      ]
    },
    {
      "content": "Allow the default RDP port through the Windows Advanced Firewall",
      "pos": [
        11680,
        11744
      ]
    },
    {
      "content": "Allow an additional port for RDP connection to the Container",
      "pos": [
        11882,
        11942
      ]
    },
    {
      "content": "This step opens up port 3390 on the Container host.",
      "pos": [
        12103,
        12154
      ]
    },
    {
      "content": "It will be used to open a RDP session to the Container.",
      "pos": [
        12155,
        12210
      ]
    },
    {
      "content": "If you want to connect to multiple Containers, you can repeat this step while providing additional port numbers.",
      "pos": [
        12211,
        12323
      ]
    },
    {
      "content": "Add a port mapping for the existing NAT",
      "pos": [
        12329,
        12368
      ]
    },
    {
      "content": "In this step you need the IP address from step 1 within the Container",
      "pos": [
        12372,
        12441
      ]
    },
    {
      "content": "Here you ensure that communication to the Container host which is coming in on port 3390 is redirected to port 3389 on the Container running at the IP address you specify.",
      "pos": [
        12626,
        12797
      ]
    },
    {
      "content": "** Connect to the container via RDP **",
      "pos": [
        12799,
        12837
      ]
    },
    {
      "content": "Finally you can connect to the Container using RDP.",
      "pos": [
        12839,
        12890
      ]
    },
    {
      "content": "In order to do that please run the following command on a system which has the Remote Desktop Client installed (e.g. your system running the Container host VM):",
      "pos": [
        12891,
        13051
      ]
    },
    {
      "pos": [
        13103,
        13199
      ],
      "content": "Please specify <ph id=\"ph1\">`administrator`</ph> as the user name and the password that you chose as the password."
    },
    {
      "content": "The Remote Desktop Connection will ask you whether you want connect to the system despite certificate errors.",
      "pos": [
        13201,
        13310
      ]
    },
    {
      "content": "If you select \"Yes\", the RDP connection will be opened.",
      "pos": [
        13311,
        13366
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Exiting the container RDP session without logoff may prevent the container from shutting down.",
      "pos": [
        13370,
        13474
      ]
    },
    {
      "content": "Please make sure to exit the RDP session by typing \"logoff\" (instead of \"exit\" or just closing the RDP window) before shutting the container down.",
      "pos": [
        13475,
        13621
      ]
    },
    {
      "content": "PowerShell management",
      "pos": [
        13654,
        13675
      ]
    },
    {
      "content": "Enter-PSSession has containerid argument, New-PSSession doesn't",
      "pos": [
        13681,
        13744
      ]
    },
    {
      "content": "This is correct.",
      "pos": [
        13746,
        13762
      ]
    },
    {
      "content": "We're planning on full cimsession support in the future.",
      "pos": [
        13764,
        13820
      ]
    },
    {
      "pos": [
        13823,
        13952
      ],
      "content": "Feel free to voice feature requests in <bpt id=\"p1\">[</bpt>the forums<ept id=\"p1\">](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers)</ept>."
    },
    {
      "content": "Back to Container Home",
      "pos": [
        13983,
        14005
      ]
    }
  ],
  "content": "ms.ContentId: 5bbac9eb-c31e-40db-97b1-f33ea59ac3a3\ntitle: Work in Progress\n\n# Work in Progress\n\nIf you don't see your problem addressed here or have questions, post them on the [forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).\n\n-----------------------\n\n## General functionality\n\n### Windows Container Image must exactly match container host\nA Windows Server Container requires an operating system image that matches the container host in respect to build and patch level. A mismatch will lead to instability and or unpredictable behavior for the container and/or the host.\n\nIf you install updates against the Windows container host OS you will need to update the container base OS image to have the matching updates.\n<!-- Can we give examples of behavior or errors?  Makes it more searchable -->\n\n**Work Around:**   \nDownload and install a container base image matching the OS version and patch level of the container host.\n\n\n### Commands sporadically fail -- try again\nIn our testing, commands occasionally need to be run multiple times.  The same principle applies to other actions.  \nFor example, if you create a new file and it doesn't appear, try touching the file.  \n\nIf you have to do this, let us know via [the forums](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).\n\n** Work Around:  **  \nBuild scripts such that they try commands multiple times.  If a command fails, try again.  \n\n### All non-C:/ drives are automatically mapped into new containers\nAll non-C:/ drives available to the container host are automatically mapped into new running Windows Server Containers.\n\nAt this point in time there is no way to selectively map folders into a container, as an interim work around drives are mapped automatically.\n\n**Work Around: **  \nWe're working on it.  In the future there will be folder sharing.\n\n\n### Windows Server Containers are starting very slowly\nIf your container is taking more than 30 seconds to start, it may be performing many duplicate virus scans.\n\nMany anti-malware solutions, such as Windows Defender, maybe unnecessarily scanning files with-in container images including all of the OS binaries and files in the container OS image.  This occurs when ever a new container is created and from the anti-malware’s perspective all of the “container’s files” look like new files that have not previously been scanned.  So when processes inside the container attempt to read these files the anti-malware components first scan them before allowing access to the files.  In reality these files were already scanned when the container image was imported or pulled to the server. In future previews new infrastructure will be in place such that anti-malware solutions, including Windows Defender, will be aware of these situations and can act accordingly to avoid multiple scans. \n\n--------------------------\n\n## Networking\n\n### Number of network compartments per container\nIn this release we support one network compartment per container. This means that if you have a container with multiple network adapters, you cannot access the same network port on each adapter (e.g. 192.168.0.1:80 and 192.168.0.2:80 belonging to the same container).\n\n**Work Around: **  \nIf multiple endpoints need to be exposed by a container, use NAT port mapping.\n\n### Windows containers are not getting IPs\nIf you're connecting to the windows server containers with DHCP VM Switches it's possible for the container host to recieve an IP wwhile the containers do not.\n\nThe containers get a 169.254.***.*** APIPA IP address.\n\n**Work around:**\nThis is a side effect of sharing the kernel.  All containers affectively have the same mac address.\n\nEnable MAC address spoofing on the container host.\n\nThis can be achieved using PowerShell\n```\nGet-VMNetworkAdapter -VMName \"[YourVMNameHere]\"  | Set-VMNetworkAdapter -MacAddressSpoofing On\n```\n\n### Creating file shares does not work in a Container\n\nCurrently it is not possible to create a file share within a Container. If you run `net share` you will see an error like this:\n\n```\nThe Server service is not started.\n\nIs it OK to start it? (Y/N) [Y]: y\nThe Server service is starting.\nThe Server service could not be started.\n\nA service specific error occurred: 2182.\n\nMore help is available by typing NET HELPMSG 3547.\n```\n\n**Work Around: **\nIf you want to copy files into a Container you can use the other way round by running `net use` within the Container. For example: \n```\nnet use S: \\\\your\\sources\\here /User:shareuser [yourpassword]\n```\n\n--------------------------\n\n## Application compatibility\n\nThere are so mnay questions about which applications work and don't work in Windows Server Containers, we decided to break application compatability information into [its own article](../reference/app_compat.md).\n\nSome of the most common issues are located here as well.\n\n### WinRM won't start in a Windows Server Container\nWinRM starts, throws an error, and stops again.  Errors are not logged in the event log.\n\n**Work Around:**\nUse WMI, [RDP](#RemoteDesktopAccessOfContainers), or Enter-PSSession -ContainerID\n\n### Can't install ASP.NET 4.5 or ASP.NET 3.5 with IIS in a container using DISM \nInstalling IIS-ASPNET45 in a container doesn't work inside a Windows Server container.  The installation progress sticks around 95.5%.\n\n``` PowerShell\nEnable-WindowsOptionalFeature -Online -FeatureName IIS-ASPNET45\n```\n\nThis fails because ASP.NET 4.5 doesn't run in a container.\n\n**Work Around:**  \nInstead, install the Web-Server role to use IIS. ASP 5.0 does work. \n\n``` PowerShell\nEnable-WindowsOptionalFeature -Online -FeatureName Web-Server\n```\n\nSee the [application compatability article](../reference/app_compat.md) for more information about what applications can be containerized.\n\n--------------------------\n\n\n## Docker management\n\n### Docker clients unsecured by default\nIn this pre-release, docker communication is public if you know where to look.\n\n### Docker commands that don't work with Windows Server Containers\n\nCommands known to fail:\n\n| **Docker command** | **Where it runs** | **Error** | **Notes** |\n|:-----|:-----|:-----|:-----|\n| **docker commit** | image | Docker stops running container and doesn’t show correct error message | Committing a stopped container works. For running containers: We're working on it :) |\n| **docker diff** | daemon | Error: The windows graphdriver does not support Changes() | |\n| **docker kill** | container | Error: Invalid signal: KILL  Error: failed to kill containers:[] | |\n| **docker load** | image | Fails silently | No error but the image isn't loading either |\n| **docker pause** | container | Error: Windows container cannot be paused.  May be not supported | |\n| **docker port** | container |  | No port is getting listed even we are able to RDP.\n| **docker pull** | daemon | Error: System cannot find the file path. We cant run container using this image. | Image is getting added can't be used.  We're working on it :) |\n| **docker restart** | container | Error: A system shutdown is in progress. |  |\n| **docker unpause** | container |  | Can't test because pause doesn't work yet. |\n\nIf anything that isn't on this list fails (or if a command fails differently than expected), let us know via [the forums](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).\n\n\n\n### Docker commands that partially work with Windows Server Containers\n\nCommands with partial functionality:\n\n| **Docker command** | **Runs on...** | **Parameter** | **Notes** |\n|:-----|:-----|:-----|:-----|\n| **docker attach** | container | --no-stdin=false | The command doesn't exit when Ctrl-P and CTRL-Q is pressed |\n| | | --sig-proxy=true | works |\n| **docker build** | images | -f, --file | Error: Unable to prepare context: Unable to get synlinks |\n| | | --force-rm=false | works |\n| | | --no-cache=false | works |\n| | | -q, --quiet=false | |\n| | | --rm=true | works|\n| | | -t, --tag=\"\" | works |\n| **docker login** | daemon | -e, -p, -u | sporratic behavior | \n| **docker push** | daemon | | Getting occasional \"repository does not exit\" errors. |\n| **docker rm** | container | -f | Error: A system shutdown is in progress. |\n\nIf anything that isn't on this list fails, if a command fails differently than expected, or if you find a work around, let us know via [the forums](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).\n\n\n### Pasting commands to interactive Docker session is limited to 50 characters\nIf you copy a command line into an interactive Docker session, it is currently limited to 50 characters. The pasted string is simply truncated.\n\nThis is not by design, we're working on lifting the restriction.\n\n### net use returns System error 1223 instead of prompting for username or password\nWorkaround: specify both, the username and password, when running net use. For example:\n```\nnet use S: \\\\your\\sources\\here /User:shareuser [yourpassword]\n``` \n\n### HCS Shim errors when creating new container images\nIf you encounter error messages like this:\n```\nhcsshim::ExportLayer - Win32 API call returned error r1=2147942523 err=The filename, directory name, or volume label syntax is incorrect. layerId=606a2c430fccd1091b9ad2f930bae009956856cf4e6c66062b188aac48aa2e34 flavour=1 folder=C:\\ProgramData\\docker\\windowsfilter\\606a2c430fccd1091b9ad2f930bae009956856cf4e6c66062b188aac48aa2e34-1868857733\n```\n\nYou're hitting an issue addressed by the Zero Day Patch for Windows Server 2016 TP3. This error can also occur when running the Python-3.4.3.msi installer or node-v0.12.7.msi in a container.\n\nIf you hit other hcsshim errors, let us know via [the forums](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).\n\n\n## Accessing windows server container with Remote Desktop \nWindows Server Containers can be managed/interacted with through a RDP session.\n\nThe following steps are needed to remotely connect to a Windows Server Container using RDP. It is assumed that the Container is connected to the network via a NAT switch. This is the default when setting up a Container host through the installation script or creating a new VM in Azure.\n\n** In the Container you want to connect to **\n\nThe following steps require either managing the Container using Docker or, when using PowerShell, specifying the `-RunAsAdministrator` switch when connecting to the Container. Please take the following steps in the Container you want to connect to.\n\n1. Obtain the Container's IP address\n\n  ```\n  ipconfig\n  ```\n  \n  Returns something similar to this\n  \n  ```\n  Windows IP Configuration\n\n  Ethernet adapter vEthernet (Virtual Switch-f758a5a9519e1956cc3bef06eb03e5728d3fb61cf6d310246185587be490210a-0):\n\n  Connection-specific DNS Suffix  . :\n  Link-local IPv6 Address . . . . . : fe80::91cd:fb4c:4ea5:51df%17\n  IPv4 Address. . . . . . . . . . . : 172.16.0.2\n  Subnet Mask . . . . . . . . . . . : 255.240.0.0\n  Default Gateway . . . . . . . . . : 172.16.0.1\n  ```\n  \n  Please note the IPv4 Address which is typically in the format 172.16.x.x\n\n2. Set the password for the builtin administrator user for the Container\n\n  ```\n  net user administrator [yourpassword]\n  ```\n\n3. Enable the builtin administrator user for the Container\n\n  ```\n  net user administrator /active:yes\n  ```\n\n** On the Container host **\n\nSince Windows Server has the Windows Firewall with Advanced Security enabled by default we need to open some ports for communication in order for RDP to work. Additionally a port mapping is created so the Container is reachable through a port on the Container host.\n\nThe following steps require a PowerShell launched as Administrator on the Container host.\n\n1. Allow the default RDP port through the Windows Advanced Firewall\n\n  ```\n  New-NetFirewallRule -Name \"RDP\" -DisplayName \"Remote Desktop Protocol\" -Protocol TCP -LocalPort @(3389) -Action Allow\n  ```\n\n2. Allow an additional port for RDP connection to the Container\n\n  ```\n  New-NetFirewallRule -Name \"ContainerRDP\" -DisplayName \"RDP Port for connecting to Container\" -Protocol TCP -LocalPort @(3390) -Action Allow\n  ```\n  \n  This step opens up port 3390 on the Container host. It will be used to open a RDP session to the Container. If you want to connect to multiple Containers, you can repeat this step while providing additional port numbers. \n\n3. Add a port mapping for the existing NAT\n\n  In this step you need the IP address from step 1 within the Container\n\n  ```\n  Add-NetNatStaticMapping -NatName ContainerNAT -Protocol TCP -ExternalPort 3390 -ExternalIPAddress 0.0.0.0 -InternalPort 3389 -InternalIPAddress [your container IP]\n  ```\n  \n  Here you ensure that communication to the Container host which is coming in on port 3390 is redirected to port 3389 on the Container running at the IP address you specify.\n\n** Connect to the container via RDP **\n\nFinally you can connect to the Container using RDP. In order to do that please run the following command on a system which has the Remote Desktop Client installed (e.g. your system running the Container host VM): \n\n```\nmstsc /v:[ContainerHostIP]:3390 /prompt\n```\n\nPlease specify `administrator` as the user name and the password that you chose as the password.\n\nThe Remote Desktop Connection will ask you whether you want connect to the system despite certificate errors. If you select \"Yes\", the RDP connection will be opened.  \n\n**Note:** Exiting the container RDP session without logoff may prevent the container from shutting down. Please make sure to exit the RDP session by typing \"logoff\" (instead of \"exit\" or just closing the RDP window) before shutting the container down.\n\n--------------------------\n\n## PowerShell management\n\n### Enter-PSSession has containerid argument, New-PSSession doesn't\n\nThis is correct.  We're planning on full cimsession support in the future.\n\n\nFeel free to voice feature requests in [the forums](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers). \n\n--------------------------\n[Back to Container Home](../containers_welcome.md)"
}