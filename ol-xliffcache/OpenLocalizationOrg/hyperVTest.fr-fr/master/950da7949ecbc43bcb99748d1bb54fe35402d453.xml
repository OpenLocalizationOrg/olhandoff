{
  "nodes": [
    {
      "pos": [
        28,
        92
      ],
      "content": "Explore data in Azure blob storage with Pandas | Microsoft Azure"
    },
    {
      "pos": [
        112,
        184
      ],
      "content": "How to explore data that is stored in Azure blob container using Pandas."
    },
    {
      "pos": [
        542,
        588
      ],
      "content": "Explore data in Azure blob storage with Pandas"
    },
    {
      "pos": [
        593,
        605
      ],
      "content": "Introduction"
    },
    {
      "pos": [
        607,
        744
      ],
      "content": "This document covers how to explore data that is stored in Azure blob container using <bpt id=\"p1\">[</bpt>Pandas<ept id=\"p1\">](http://pandas.pydata.org/)</ept><ph id=\"ph2\"/> Python package."
    },
    {
      "pos": [
        746,
        922
      ],
      "content": "The <bpt id=\"p2\">**</bpt>menu<ept id=\"p2\">**</ept><ph id=\"ph3\"/> below links to topics that describe how to use tools to explore data from various storage environments. This task is a step in the Cortana Analytics Process (CAP).",
      "nodes": [
        {
          "content": "The <bpt id=\"p2\">**</bpt>menu<ept id=\"p2\">**</ept><ph id=\"ph3\"/> below links to topics that describe how to use tools to explore data from various storage environments.",
          "pos": [
            0,
            168
          ]
        },
        {
          "content": "This task is a step in the Cortana Analytics Process (CAP).",
          "pos": [
            169,
            228
          ]
        }
      ]
    },
    {
      "pos": [
        1018,
        1031
      ],
      "content": "Prerequisites"
    },
    {
      "pos": [
        1032,
        1067
      ],
      "content": "This article assumes that you have:"
    },
    {
      "pos": [
        1071,
        1205
      ],
      "content": "Created an Azure storage account. If you need instructions, see <bpt id=\"p3\">[</bpt>Create an Azure Storage account<ept id=\"p3\">](../hdinsight-get-started.md#storage)</ept>",
      "nodes": [
        {
          "content": "Created an Azure storage account.",
          "pos": [
            0,
            33
          ]
        },
        {
          "content": "If you need instructions, see <bpt id=\"p3\">[</bpt>Create an Azure Storage account<ept id=\"p3\">](../hdinsight-get-started.md#storage)</ept>",
          "pos": [
            34,
            172
          ]
        }
      ]
    },
    {
      "pos": [
        1208,
        1258
      ],
      "content": "Stored your data in an Azure blob storage account."
    },
    {
      "pos": [
        1263,
        1301
      ],
      "content": "Load the data into a Pandas data frame"
    },
    {
      "pos": [
        1302,
        1507
      ],
      "content": "In order to do explore and manipulate a dataset, it must be downloaded from the blob source to a local file which can then be loaded in a Pandas data frame. Here are the steps to follow for this procedure:",
      "nodes": [
        {
          "content": "In order to do explore and manipulate a dataset, it must be downloaded from the blob source to a local file which can then be loaded in a Pandas data frame.",
          "pos": [
            0,
            156
          ]
        },
        {
          "content": "Here are the steps to follow for this procedure:",
          "pos": [
            157,
            205
          ]
        }
      ]
    },
    {
      "pos": [
        1512,
        1669
      ],
      "content": "Download the data from Azure blob with the following Python code sample using blob service. Replace the variable in the code below with your specific values:",
      "nodes": [
        {
          "content": "Download the data from Azure blob with the following Python code sample using blob service.",
          "pos": [
            0,
            91
          ]
        },
        {
          "content": "Replace the variable in the code below with your specific values:",
          "pos": [
            92,
            157
          ]
        }
      ]
    },
    {
      "pos": [
        2293,
        2357
      ],
      "content": "Read the data into a Pandas data-frame from the downloaded file."
    },
    {
      "pos": [
        2449,
        2525
      ],
      "content": "Now you are ready to explore the data and generate features on this dataset."
    },
    {
      "pos": [
        2527,
        2529
      ],
      "content": "##"
    },
    {
      "pos": [
        2564,
        2605
      ],
      "content": "Examples of data exploration using Pandas"
    },
    {
      "pos": [
        2607,
        2668
      ],
      "content": "Here are a few examples of ways to explore data using Pandas:"
    },
    {
      "pos": [
        2673,
        2715
      ],
      "content": "Inspect the <bpt id=\"p4\">**</bpt>number of rows and columns<ept id=\"p4\">**</ept>"
    },
    {
      "pos": [
        2814,
        2881
      ],
      "content": "<bpt id=\"p5\">**</bpt>Inspect<ept id=\"p5\">**</ept><ph id=\"ph5\"/> the first or last few <bpt id=\"p6\">**</bpt>rows<ept id=\"p6\">**</ept><ph id=\"ph6\"/> in the dataset as below:"
    },
    {
      "pos": [
        2968,
        3051
      ],
      "content": "Check the <bpt id=\"p7\">**</bpt>data type<ept id=\"p7\">**</ept><ph id=\"ph7\"/> each column was imported as using the following sample code"
    },
    {
      "pos": [
        3193,
        3261
      ],
      "content": "Check the <bpt id=\"p8\">**</bpt>basic stats<ept id=\"p8\">**</ept><ph id=\"ph8\"/> for the columns in the data set as follows"
    },
    {
      "pos": [
        3310,
        3372
      ],
      "content": "Look at the number of entries for each column value as follows"
    },
    {
      "pos": [
        3437,
        3544
      ],
      "content": "<bpt id=\"p9\">**</bpt>Count missing values<ept id=\"p9\">**</ept><ph id=\"ph9\"/> versus the actual number of entries in each column using the following sample code"
    },
    {
      "pos": [
        3655,
        3750
      ],
      "content": "If you have <bpt id=\"p10\">**</bpt>missing values<ept id=\"p10\">**</ept><ph id=\"ph10\"/> for a specific column in the data, you can drop them as follows:"
    },
    {
      "pos": [
        3857,
        3921
      ],
      "content": "Another way to replace missing values is with the mode function:"
    },
    {
      "pos": [
        4064,
        4160
      ],
      "content": "Create a <bpt id=\"p11\">**</bpt>histogram<ept id=\"p11\">**</ept><ph id=\"ph11\"/> plot using variable number of bins to plot the distribution of a variable"
    },
    {
      "pos": [
        4328,
        4433
      ],
      "content": "Look at <bpt id=\"p12\">**</bpt>correlations<ept id=\"p12\">**</ept><ph id=\"ph12\"/> between variables using a scatterplot or using the built-in correlation function"
    }
  ],
  "content": "<properties \n    pageTitle=\"Explore data in Azure blob storage with Pandas | Microsoft Azure\" \n    description=\"How to explore data that is stored in Azure blob container using Pandas.\" \n    services=\"machine-learning,storage\" \n    documentationCenter=\"\" \n    authors=\"bradsev\" \n    manager=\"paulettm\" \n    editor=\"cgronlun\" />\n\n<tags \n    ms.service=\"machine-learning\" \n    ms.workload=\"data-services\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"02/08/2016\" \n    ms.author=\"fashah;garye;bradsev\" /> \n\n#Explore data in Azure blob storage with Pandas\n\n## Introduction\n\nThis document covers how to explore data that is stored in Azure blob container using [Pandas](http://pandas.pydata.org/) Python package.\n\nThe **menu** below links to topics that describe how to use tools to explore data from various storage environments. This task is a step in the Cortana Analytics Process (CAP).\n\n[AZURE.INCLUDE [cap-explore-data-selector](../../includes/cap-explore-data-selector.md)]\n\n\n## Prerequisites\nThis article assumes that you have:\n\n* Created an Azure storage account. If you need instructions, see [Create an Azure Storage account](../hdinsight-get-started.md#storage)\n* Stored your data in an Azure blob storage account.\n\n## Load the data into a Pandas data frame\nIn order to do explore and manipulate a dataset, it must be downloaded from the blob source to a local file which can then be loaded in a Pandas data frame. Here are the steps to follow for this procedure:\n\n1. Download the data from Azure blob with the following Python code sample using blob service. Replace the variable in the code below with your specific values: \n\n        from azure.storage import BlobService\n        import tables\n        \n        STORAGEACCOUNTNAME= <storage_account_name>\n        STORAGEACCOUNTKEY= <storage_account_key>\n        LOCALFILENAME= <local_file_name>        \n        CONTAINERNAME= <container_name>\n        BLOBNAME= <blob_name>\n\n        #download from blob\n        t1=time.time()\n        blob_service=BlobService(account_name=STORAGEACCOUNTNAME,account_key=STORAGEACCOUNTKEY)\n        blob_service.get_blob_to_path(CONTAINERNAME,BLOBNAME,LOCALFILENAME)\n        t2=time.time()\n        print((\"It takes %s seconds to download \"+blobname) % (t2 - t1))\n\n\n2. Read the data into a Pandas data-frame from the downloaded file.\n\n        #LOCALFILE is the file path \n        dataframe_blobdata = pd.read_csv(LOCALFILE)\n\nNow you are ready to explore the data and generate features on this dataset.\n\n##<a name=\"blob-dataexploration\"></a>Examples of data exploration using Pandas\n\nHere are a few examples of ways to explore data using Pandas:\n\n1. Inspect the **number of rows and columns** \n\n        print 'the size of the data is: %d rows and  %d columns' % dataframe_blobdata.shape\n\n2. **Inspect** the first or last few **rows** in the dataset as below:\n\n        dataframe_blobdata.head(10)\n        \n        dataframe_blobdata.tail(10)\n\n3. Check the **data type** each column was imported as using the following sample code\n    \n        for col in dataframe_blobdata.columns:\n            print dataframe_blobdata[col].name, ':\\t', dataframe_blobdata[col].dtype\n\n4. Check the **basic stats** for the columns in the data set as follows\n \n        dataframe_blobdata.describe()\n    \n5. Look at the number of entries for each column value as follows\n\n        dataframe_blobdata['<column_name>'].value_counts()\n\n6. **Count missing values** versus the actual number of entries in each column using the following sample code\n\n        miss_num = dataframe_blobdata.shape[0] - dataframe_blobdata.count()\n        print miss_num\n     \n7.  If you have **missing values** for a specific column in the data, you can drop them as follows:\n\n        dataframe_blobdata_noNA = dataframe_blobdata.dropna()\n        dataframe_blobdata_noNA.shape\n\n    Another way to replace missing values is with the mode function:\n    \n        dataframe_blobdata_mode = dataframe_blobdata.fillna({'<column_name>':dataframe_blobdata['<column_name>'].mode()[0]})        \n\n8. Create a **histogram** plot using variable number of bins to plot the distribution of a variable \n    \n        dataframe_blobdata['<column_name>'].value_counts().plot(kind='bar')\n        \n        np.log(dataframe_blobdata['<column_name>']+1).hist(bins=50)\n    \n9. Look at **correlations** between variables using a scatterplot or using the built-in correlation function\n\n        #relationship between column_a and column_b using scatter plot\n        plt.scatter(dataframe_blobdata['<column_a>'], dataframe_blobdata['<column_b>'])\n        \n        #correlation between column_a and column_b\n        dataframe_blobdata[['<column_a>', '<column_b>']].corr()\n"
}