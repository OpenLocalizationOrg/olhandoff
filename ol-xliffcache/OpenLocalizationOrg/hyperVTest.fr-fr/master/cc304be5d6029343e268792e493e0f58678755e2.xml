{
  "nodes": [
    {
      "pos": [
        27,
        89
      ],
      "content": "Use Apache Phoenix and SQuirreL in HDInsight | Microsoft Azure"
    },
    {
      "pos": [
        108,
        260
      ],
      "content": "Learn how to use Apache Phoenix in HDInsight, and how to install and configure SQuirreL on your workstation to connect to an HBase cluster in HDInsight."
    },
    {
      "pos": [
        554,
        618
      ],
      "content": "Use Apache Phoenix and SQuirreL with HBase clusters in HDinsight"
    },
    {
      "pos": [
        622,
        1034
      ],
      "content": "Learn how to use <bpt id=\"p1\">[</bpt>Apache Phoenix<ept id=\"p1\">](http://phoenix.apache.org/)</ept><ph id=\"ph2\"/> in HDInsight, and how to install and configure SQuirreL on your workstation to connect to an HBase cluster in HDInsight. For more information about Phoenix, see <bpt id=\"p2\">[</bpt>Phoenix in 15 minutes or less<ept id=\"p2\">](http://phoenix.apache.org/Phoenix-in-15-minutes-or-less.html)</ept>. For the Phoenix grammar, see <bpt id=\"p3\">[</bpt>Phoenix Grammar<ept id=\"p3\">](http://phoenix.apache.org/language/index.html)</ept>.",
      "nodes": [
        {
          "content": "Learn how to use <bpt id=\"p1\">[</bpt>Apache Phoenix<ept id=\"p1\">](http://phoenix.apache.org/)</ept><ph id=\"ph2\"/> in HDInsight, and how to install and configure SQuirreL on your workstation to connect to an HBase cluster in HDInsight.",
          "pos": [
            0,
            234
          ]
        },
        {
          "content": "For more information about Phoenix, see <bpt id=\"p2\">[</bpt>Phoenix in 15 minutes or less<ept id=\"p2\">](http://phoenix.apache.org/Phoenix-in-15-minutes-or-less.html)</ept>.",
          "pos": [
            235,
            407
          ]
        },
        {
          "content": "For the Phoenix grammar, see <bpt id=\"p3\">[</bpt>Phoenix Grammar<ept id=\"p3\">](http://phoenix.apache.org/language/index.html)</ept>.",
          "pos": [
            408,
            540
          ]
        }
      ]
    },
    {
      "pos": [
        1037,
        1191
      ],
      "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> For the Phoenix version information in HDInsight, see <bpt id=\"p4\">[</bpt>What's new in the Hadoop cluster versions provided by HDInsight?<ept id=\"p4\">][hdinsight-versions]</ept>."
    },
    {
      "pos": [
        1195,
        1291
      ],
      "content": "Use SQLLine\n<bpt id=\"p5\">[</bpt>SQLLine<ept id=\"p5\">](http://sqlline.sourceforge.net/)</ept><ph id=\"ph5\"/> is a command line utility to execute SQL."
    },
    {
      "pos": [
        1297,
        1310
      ],
      "content": "Prerequisites"
    },
    {
      "pos": [
        1311,
        1367
      ],
      "content": "Before you can use SQLLine, you must have the following:"
    },
    {
      "pos": [
        1371,
        1527
      ],
      "content": "<bpt id=\"p6\">**</bpt>A HBase cluster in HDInsight<ept id=\"p6\">**</ept>. For information on provision HBase cluster, see <bpt id=\"p7\">[</bpt>Get started with Apache HBase in HDInsight<ept id=\"p7\">][hdinsight-hbase-get-started]</ept>.",
      "nodes": [
        {
          "content": "<bpt id=\"p6\">**</bpt>A HBase cluster in HDInsight<ept id=\"p6\">**</ept>.",
          "pos": [
            0,
            71
          ]
        },
        {
          "content": "For information on provision HBase cluster, see <bpt id=\"p7\">[</bpt>Get started with Apache HBase in HDInsight<ept id=\"p7\">][hdinsight-hbase-get-started]</ept>.",
          "pos": [
            72,
            232
          ]
        }
      ]
    },
    {
      "pos": [
        1530,
        1715
      ],
      "content": "<bpt id=\"p8\">**</bpt>Connect to the HBase cluster via the remote desktop protocol<ept id=\"p8\">**</ept>. For instructions, see <bpt id=\"p9\">[</bpt>Manage Hadoop clusters in HDInsight by using the Azure Classic Portal<ept id=\"p9\">][hdinsight-manage-portal]</ept>.",
      "nodes": [
        {
          "content": "<bpt id=\"p8\">**</bpt>Connect to the HBase cluster via the remote desktop protocol<ept id=\"p8\">**</ept>.",
          "pos": [
            0,
            103
          ]
        },
        {
          "content": "For instructions, see <bpt id=\"p9\">[</bpt>Manage Hadoop clusters in HDInsight by using the Azure Classic Portal<ept id=\"p9\">][hdinsight-manage-portal]</ept>.",
          "pos": [
            104,
            261
          ]
        }
      ]
    },
    {
      "pos": [
        1717,
        1746
      ],
      "content": "<bpt id=\"p10\">**</bpt>To find out the host name<ept id=\"p10\">**</ept>"
    },
    {
      "pos": [
        1751,
        1797
      ],
      "content": "Open <bpt id=\"p11\">**</bpt>Hadoop Command Line<ept id=\"p11\">**</ept><ph id=\"ph6\"/> from the desktop."
    },
    {
      "pos": [
        1801,
        1849
      ],
      "content": "Run the following command to get the DNS suffix:"
    },
    {
      "pos": [
        1873,
        2257
      ],
      "content": "Write down <bpt id=\"p12\">**</bpt>Connection-specific DNS Suffix<ept id=\"p12\">**</ept>. For example, <bpt id=\"p13\">*</bpt>myhbasecluster.f5.internal.cloudapp.net<ept id=\"p13\">*</ept>. When you connect to an HBase cluster, you will need to connect to one of the Zookeepers using FQDN. Each HDInsight cluster has 3 Zookeepers. They are <bpt id=\"p14\">*</bpt>zookeeper0<ept id=\"p14\">*</ept>, <bpt id=\"p15\">*</bpt>zookeeper1<ept id=\"p15\">*</ept>, and <bpt id=\"p16\">*</bpt>zookeeper2<ept id=\"p16\">*</ept>. The FQDN will be something like <bpt id=\"p17\">*</bpt>zookeeper2.myhbasecluster.f5.internal.cloudapp.net<ept id=\"p17\">*</ept>.",
      "nodes": [
        {
          "content": "Write down <bpt id=\"p12\">**</bpt>Connection-specific DNS Suffix<ept id=\"p12\">**</ept>.",
          "pos": [
            0,
            86
          ]
        },
        {
          "content": "For example, <bpt id=\"p13\">*</bpt>myhbasecluster.f5.internal.cloudapp.net<ept id=\"p13\">*</ept>.",
          "pos": [
            87,
            182
          ]
        },
        {
          "content": "When you connect to an HBase cluster, you will need to connect to one of the Zookeepers using FQDN.",
          "pos": [
            183,
            282
          ]
        },
        {
          "content": "Each HDInsight cluster has 3 Zookeepers.",
          "pos": [
            283,
            323
          ]
        },
        {
          "content": "They are <bpt id=\"p14\">*</bpt>zookeeper0<ept id=\"p14\">*</ept>, <bpt id=\"p15\">*</bpt>zookeeper1<ept id=\"p15\">*</ept>, and <bpt id=\"p16\">*</bpt>zookeeper2<ept id=\"p16\">*</ept>.",
          "pos": [
            324,
            498
          ]
        },
        {
          "content": "The FQDN will be something like <bpt id=\"p17\">*</bpt>zookeeper2.myhbasecluster.f5.internal.cloudapp.net<ept id=\"p17\">*</ept>.",
          "pos": [
            499,
            624
          ]
        }
      ]
    },
    {
      "pos": [
        2259,
        2277
      ],
      "content": "<bpt id=\"p18\">**</bpt>To use SQLLine<ept id=\"p18\">**</ept>"
    },
    {
      "pos": [
        2282,
        2328
      ],
      "content": "Open <bpt id=\"p19\">**</bpt>Hadoop Command Line<ept id=\"p19\">**</ept><ph id=\"ph7\"/> from the desktop."
    },
    {
      "pos": [
        2332,
        2375
      ],
      "content": "Run the following commands to open SQLLine:"
    },
    {
      "pos": [
        2467,
        2534
      ],
      "content": "<ph id=\"ph8\">![</ph>hdinsight hbase phoenix sqlline<ph id=\"ph9\">][hdinsight-hbase-phoenix-sqlline]</ph>"
    },
    {
      "pos": [
        2540,
        2572
      ],
      "content": "The commands used in the sample:"
    },
    {
      "pos": [
        2784,
        2936
      ],
      "content": "For more information, see <bpt id=\"p20\">[</bpt>SQLLine manual<ept id=\"p20\">](http://sqlline.sourceforge.net/#manual)</ept><ph id=\"ph10\"/> and <bpt id=\"p21\">[</bpt>Phoenix Grammar<ept id=\"p21\">](http://phoenix.apache.org/language/index.html)</ept>."
    },
    {
      "pos": [
        2957,
        2969
      ],
      "content": "Use SQuirreL"
    },
    {
      "pos": [
        2971,
        3239
      ],
      "content": "<bpt id=\"p22\">[</bpt>SQuirreL SQL Client<ept id=\"p22\">](http://squirrel-sql.sourceforge.net/)</ept><ph id=\"ph11\"/> is a graphical Java program that will allow you to view the structure of a JDBC compliant database, browse the data in tables, issue SQL commands etc. It can be used to connect to Apache Phoenix on HDInsight."
    },
    {
      "pos": [
        3241,
        3374
      ],
      "content": "This section shows you how to install and configure SQuirreL on your workstation to connect to an HBase cluster in HDInsight via VPN."
    },
    {
      "pos": [
        3380,
        3393
      ],
      "content": "Prerequisites"
    },
    {
      "pos": [
        3395,
        3456
      ],
      "content": "Before following the procedures, you must have the following:"
    },
    {
      "pos": [
        3460,
        3649
      ],
      "content": "An HBase cluster deployed to an Azure virtual network with a DNS virtual machine.  For instructions, see <bpt id=\"p23\">[</bpt>Provision HBase clusters on Azure Virtual Network<ept id=\"p23\">][hdinsight-hbase-provision-vnet]</ept>.",
      "nodes": [
        {
          "content": "An HBase cluster deployed to an Azure virtual network with a DNS virtual machine.",
          "pos": [
            0,
            81
          ]
        },
        {
          "content": "For instructions, see <bpt id=\"p23\">[</bpt>Provision HBase clusters on Azure Virtual Network<ept id=\"p23\">][hdinsight-hbase-provision-vnet]</ept>.",
          "pos": [
            83,
            229
          ]
        }
      ]
    },
    {
      "pos": [
        3657,
        3851
      ],
      "content": "<ph id=\"ph12\">[AZURE.IMPORTANT]</ph><ph id=\"ph13\"/> You must install a DNS server to the virtual network. For instructions, see <bpt id=\"p24\">[</bpt>Configure DNS between two Azure virtual networks<ept id=\"p24\">](hdinsight-hbase-geo-replication-configure-DNS.md)</ept>",
      "nodes": [
        {
          "content": "<ph id=\"ph12\">[AZURE.IMPORTANT]</ph><ph id=\"ph13\"/> You must install a DNS server to the virtual network.",
          "pos": [
            0,
            105
          ]
        },
        {
          "content": "For instructions, see <bpt id=\"p24\">[</bpt>Configure DNS between two Azure virtual networks<ept id=\"p24\">](hdinsight-hbase-geo-replication-configure-DNS.md)</ept>",
          "pos": [
            106,
            268
          ]
        }
      ]
    },
    {
      "pos": [
        3855,
        4003
      ],
      "content": "Get the HBase cluster cluster Connection-specific DNS suffix. To get it, RDP into the cluster, and then run IPConfig.  The DNS suffix is similar to:",
      "nodes": [
        {
          "content": "Get the HBase cluster cluster Connection-specific DNS suffix.",
          "pos": [
            0,
            61
          ]
        },
        {
          "content": "To get it, RDP into the cluster, and then run IPConfig.",
          "pos": [
            62,
            117
          ]
        },
        {
          "content": "The DNS suffix is similar to:",
          "pos": [
            119,
            148
          ]
        }
      ]
    },
    {
      "pos": [
        4048,
        4285
      ],
      "content": "Download and install <bpt id=\"p25\">[</bpt>Microsoft Visual Studio Express 2013 for Windows Desktop<ept id=\"p25\">](https://www.visualstudio.com/products/visual-studio-express-vs.aspx)</ept><ph id=\"ph14\"/> on your workstation. You will need makecert from the package to create your certificate.",
      "nodes": [
        {
          "content": "Download and install <bpt id=\"p25\">[</bpt>Microsoft Visual Studio Express 2013 for Windows Desktop<ept id=\"p25\">](https://www.visualstudio.com/products/visual-studio-express-vs.aspx)</ept><ph id=\"ph14\"/> on your workstation.",
          "pos": [
            0,
            224
          ]
        },
        {
          "content": "You will need makecert from the package to create your certificate.",
          "pos": [
            225,
            292
          ]
        }
      ]
    },
    {
      "pos": [
        4290,
        4523
      ],
      "content": "Download and install <bpt id=\"p26\">[</bpt>Java Runtime Environment<ept id=\"p26\">](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html)</ept><ph id=\"ph15\"/> on your workstation.  SQuirreL SQL client version 3.0 and higher requires JRE version 1.6 or higher.",
      "nodes": [
        {
          "content": "Download and install <bpt id=\"p26\">[</bpt>Java Runtime Environment<ept id=\"p26\">](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html)</ept><ph id=\"ph15\"/> on your workstation.",
          "pos": [
            0,
            208
          ]
        },
        {
          "content": "SQuirreL SQL client version 3.0 and higher requires JRE version 1.6 or higher.",
          "pos": [
            210,
            288
          ]
        }
      ]
    },
    {
      "pos": [
        4531,
        4600
      ],
      "content": "Configure a Point-to-Site VPN connection to the Azure virtual network"
    },
    {
      "pos": [
        4602,
        4672
      ],
      "content": "There are 3 steps involved configuring a point-to-site VPN connection:"
    },
    {
      "pos": [
        4677,
        4796
      ],
      "content": "<bpt id=\"p27\">[</bpt>Configure a virtual network and a dynamic routing gateway<ept id=\"p27\">](#Configure-a-virtual-network-and-a-dynamic-routing-gateway)</ept>"
    },
    {
      "pos": [
        4800,
        4853
      ],
      "content": "<bpt id=\"p28\">[</bpt>Create your certificates<ept id=\"p28\">](#Create-your-certificates)</ept>"
    },
    {
      "pos": [
        4857,
        4912
      ],
      "content": "<bpt id=\"p29\">[</bpt>Configure your VPN client<ept id=\"p29\">](#Configure-your-VPN-client)</ept>"
    },
    {
      "pos": [
        4914,
        5062
      ],
      "content": "See <bpt id=\"p30\">[</bpt>Configure a Point-to-Site VPN connection to an Azure Virtual Network<ept id=\"p30\">](../vpn-gateway/vpn-gateway-point-to-site-create.md)</ept><ph id=\"ph16\"/> for more information."
    },
    {
      "pos": [
        5069,
        5126
      ],
      "content": "Configure a virtual network and a dynamic routing gateway"
    },
    {
      "pos": [
        5128,
        5300
      ],
      "content": "Assure you have provisioned an HBase cluster in an Azure virtual network (see the prerequisites for this section). The next step is to configure a point-to-site connection.",
      "nodes": [
        {
          "content": "Assure you have provisioned an HBase cluster in an Azure virtual network (see the prerequisites for this section).",
          "pos": [
            0,
            114
          ]
        },
        {
          "content": "The next step is to configure a point-to-site connection.",
          "pos": [
            115,
            172
          ]
        }
      ]
    },
    {
      "pos": [
        5302,
        5349
      ],
      "content": "<bpt id=\"p31\">**</bpt>To configure the point-to-site connectivity<ept id=\"p31\">**</ept>"
    },
    {
      "pos": [
        5354,
        5406
      ],
      "content": "Sign in to the <bpt id=\"p32\">[</bpt>Azure Classic Portal<ept id=\"p32\">][azure-portal]</ept>."
    },
    {
      "pos": [
        5410,
        5442
      ],
      "content": "On the left, click <bpt id=\"p33\">**</bpt>NETWORKS<ept id=\"p33\">**</ept>."
    },
    {
      "pos": [
        5446,
        5579
      ],
      "content": "Click the virtual network you have created (see <bpt id=\"p34\">[</bpt>Provision HBase clusters on Azure Virtual Network<ept id=\"p34\">][hdinsight-hbase-provision-vnet]</ept>)."
    },
    {
      "pos": [
        5583,
        5616
      ],
      "content": "Click <bpt id=\"p35\">**</bpt>CONFIGURE<ept id=\"p35\">**</ept><ph id=\"ph17\"/> from the top."
    },
    {
      "pos": [
        5620,
        5715
      ],
      "content": "In the <bpt id=\"p36\">**</bpt>point-to-site connectivity<ept id=\"p36\">**</ept><ph id=\"ph18\"/> section, select <bpt id=\"p37\">**</bpt>Configure point-to-site connectivity<ept id=\"p37\">**</ept>."
    },
    {
      "pos": [
        5720,
        6222
      ],
      "content": "Configure <bpt id=\"p38\">**</bpt>STARTING IP<ept id=\"p38\">**</ept><ph id=\"ph19\"/> and <bpt id=\"p39\">**</bpt>CIDR<ept id=\"p39\">**</ept><ph id=\"ph20\"/> to specify the IP address range from which your VPN clients will receive an IP address when connected. The range cannot overlap with any of the ranges located on your on-premises network and the Azure virtual network you will be connecting to. For example. if you selected 10.0.0.0/20 for the virtual network, you can select 10.1.0.0/24 for the client address space. See the <bpt id=\"p40\">[</bpt>Point-To-Site Connectivity<ept id=\"p40\">][vnet-point-to-site-connectivity]</ept><ph id=\"ph21\"/> page for more information.",
      "nodes": [
        {
          "content": "Configure <bpt id=\"p38\">**</bpt>STARTING IP<ept id=\"p38\">**</ept><ph id=\"ph19\"/> and <bpt id=\"p39\">**</bpt>CIDR<ept id=\"p39\">**</ept><ph id=\"ph20\"/> to specify the IP address range from which your VPN clients will receive an IP address when connected.",
          "pos": [
            0,
            251
          ]
        },
        {
          "content": "The range cannot overlap with any of the ranges located on your on-premises network and the Azure virtual network you will be connecting to.",
          "pos": [
            252,
            392
          ]
        },
        {
          "content": "For example.",
          "pos": [
            393,
            405
          ]
        },
        {
          "content": "if you selected 10.0.0.0/20 for the virtual network, you can select 10.1.0.0/24 for the client address space.",
          "pos": [
            406,
            515
          ]
        },
        {
          "content": "See the <bpt id=\"p40\">[</bpt>Point-To-Site Connectivity<ept id=\"p40\">][vnet-point-to-site-connectivity]</ept><ph id=\"ph21\"/> page for more information.",
          "pos": [
            516,
            667
          ]
        }
      ]
    },
    {
      "pos": [
        6226,
        6302
      ],
      "content": "In the virtual network address spaces section, click <bpt id=\"p41\">**</bpt>add gateway subnet<ept id=\"p41\">**</ept>."
    },
    {
      "pos": [
        6306,
        6347
      ],
      "content": "Click <bpt id=\"p42\">**</bpt>SAVE<ept id=\"p42\">**</ept><ph id=\"ph22\"/> on the bottom of the page."
    },
    {
      "pos": [
        6351,
        6482
      ],
      "content": "Click <bpt id=\"p43\">**</bpt>YES<ept id=\"p43\">**</ept><ph id=\"ph23\"/> to confirm the change. Wait until the system has finished making the change before you proceed to the next procedure.",
      "nodes": [
        {
          "content": "Click <bpt id=\"p43\">**</bpt>YES<ept id=\"p43\">**</ept><ph id=\"ph23\"/> to confirm the change.",
          "pos": [
            0,
            91
          ]
        },
        {
          "content": "Wait until the system has finished making the change before you proceed to the next procedure.",
          "pos": [
            92,
            186
          ]
        }
      ]
    },
    {
      "pos": [
        6485,
        6524
      ],
      "content": "<bpt id=\"p44\">**</bpt>To create a dynamic routing gateway<ept id=\"p44\">**</ept>"
    },
    {
      "pos": [
        6529,
        6605
      ],
      "content": "From the Azure Classic Portal, click <bpt id=\"p45\">**</bpt>DASHBOARD<ept id=\"p45\">**</ept><ph id=\"ph24\"/> from the top of the page."
    },
    {
      "pos": [
        6609,
        6662
      ],
      "content": "Click <bpt id=\"p46\">**</bpt>CREATE GATEWAY<ept id=\"p46\">**</ept><ph id=\"ph25\"/> from the bottom of the page."
    },
    {
      "pos": [
        6666,
        6726
      ],
      "content": "Click <bpt id=\"p47\">**</bpt>YES<ept id=\"p47\">**</ept><ph id=\"ph26\"/> to confirm. Wait until the gateway is created.",
      "nodes": [
        {
          "content": "Click <bpt id=\"p47\">**</bpt>YES<ept id=\"p47\">**</ept><ph id=\"ph26\"/> to confirm.",
          "pos": [
            0,
            80
          ]
        },
        {
          "content": "Wait until the gateway is created.",
          "pos": [
            81,
            115
          ]
        }
      ]
    },
    {
      "pos": [
        6730,
        6818
      ],
      "content": "Click <bpt id=\"p48\">**</bpt>DASHBOARD<ept id=\"p48\">**</ept><ph id=\"ph27\"/> from the top.  You will see a visual diagram of the virtual network:",
      "nodes": [
        {
          "content": "Click <bpt id=\"p48\">**</bpt>DASHBOARD<ept id=\"p48\">**</ept><ph id=\"ph27\"/> from the top.",
          "pos": [
            0,
            88
          ]
        },
        {
          "content": "You will see a visual diagram of the virtual network:",
          "pos": [
            90,
            143
          ]
        }
      ]
    },
    {
      "pos": [
        6824,
        6896
      ],
      "content": "<ph id=\"ph28\">![</ph>Azure virtual network point-to-site virtual diagram<ph id=\"ph29\">][img-vnet-diagram]</ph>"
    },
    {
      "pos": [
        6903,
        7029
      ],
      "content": "The diagram shows 0 client connections. After you make a connection to the virtual network, the number will be updated to one.",
      "nodes": [
        {
          "content": "The diagram shows 0 client connections.",
          "pos": [
            0,
            39
          ]
        },
        {
          "content": "After you make a connection to the virtual network, the number will be updated to one.",
          "pos": [
            40,
            126
          ]
        }
      ]
    },
    {
      "pos": [
        7037,
        7061
      ],
      "content": "Create your certificates"
    },
    {
      "pos": [
        7063,
        7303
      ],
      "content": "One way to create an X.509 certificate is by using the Certificate Creation Tool (makecert.exe) that comes with <bpt id=\"p49\">[</bpt>Microsoft Visual Studio Express 2013 for Windows Desktop<ept id=\"p49\">](https://www.visualstudio.com/products/visual-studio-express-vs.aspx)</ept>."
    },
    {
      "pos": [
        7307,
        7351
      ],
      "content": "<bpt id=\"p50\">**</bpt>To create a self-signed root certificate<ept id=\"p50\">**</ept>"
    },
    {
      "pos": [
        7356,
        7408
      ],
      "content": "From your workstation, open a command prompt window."
    },
    {
      "pos": [
        7412,
        7455
      ],
      "content": "Navigate to the Visual Studio tools folder."
    },
    {
      "pos": [
        7460,
        7695
      ],
      "content": "The following command in the example below will create and install a root certificate in the Personal certificate store on your workstation and also create a corresponding .cer file that you’ll later upload to the Azure Classic Portal."
    },
    {
      "pos": [
        7862,
        8019
      ],
      "content": "Change to the directory that you want the .cer file to be located in, where HBaseVnetVPNRootCertificate is the name that you want to use for the certificate."
    },
    {
      "pos": [
        8026,
        8098
      ],
      "content": "Don't close the command prompt.  You will need it in the next procedure.",
      "nodes": [
        {
          "content": "Don't close the command prompt.",
          "pos": [
            0,
            31
          ]
        },
        {
          "content": "You will need it in the next procedure.",
          "pos": [
            33,
            72
          ]
        }
      ]
    },
    {
      "pos": [
        8105,
        8336
      ],
      "content": "<ph id=\"ph30\">[AZURE.NOTE]</ph><ph id=\"ph31\"/> Because you have created a root certificate from which client certificates will be generated, you may want to export this certificate along with its private key and save it to a safe location where it may be recovered."
    },
    {
      "pos": [
        8339,
        8373
      ],
      "content": "<bpt id=\"p51\">**</bpt>To create a client certificate<ept id=\"p51\">**</ept>"
    },
    {
      "pos": [
        8377,
        8576
      ],
      "content": "From the same command prompt (It has to be on the same computer where you created the root certificate. The client certificate must be generated from the root certificate), run the following command:",
      "nodes": [
        {
          "content": "From the same command prompt (It has to be on the same computer where you created the root certificate.",
          "pos": [
            0,
            103
          ]
        },
        {
          "content": "The client certificate must be generated from the root certificate), run the following command:",
          "pos": [
            104,
            199
          ]
        }
      ]
    },
    {
      "pos": [
        8722,
        8823
      ],
      "content": "HBaseVnetVPNRootCertificate is the root certificate name.  It has to match the root certificate name.",
      "nodes": [
        {
          "content": "HBaseVnetVPNRootCertificate is the root certificate name.",
          "pos": [
            0,
            57
          ]
        },
        {
          "content": "It has to match the root certificate name.",
          "pos": [
            59,
            101
          ]
        }
      ]
    },
    {
      "pos": [
        8831,
        8974
      ],
      "content": "Both the root certificate and the client certificate are stored in your Personal certificate store on your computer. Use certmgr.msc to verify.",
      "nodes": [
        {
          "content": "Both the root certificate and the client certificate are stored in your Personal certificate store on your computer.",
          "pos": [
            0,
            116
          ]
        },
        {
          "content": "Use certmgr.msc to verify.",
          "pos": [
            117,
            143
          ]
        }
      ]
    },
    {
      "pos": [
        8980,
        9051
      ],
      "content": "<ph id=\"ph32\">![</ph>Azure virtual network point-to-site vpn certificate<ph id=\"ph33\">][img-certificate]</ph>"
    },
    {
      "pos": [
        9057,
        9336
      ],
      "content": "A client certificate must be installed on each computer that you want to connect to the virtual network. We recommend that you create unique client certificates for each computer that you want to connect to the virtual network. To export the client certificates, use certmgr.msc.",
      "nodes": [
        {
          "content": "A client certificate must be installed on each computer that you want to connect to the virtual network.",
          "pos": [
            0,
            104
          ]
        },
        {
          "content": "We recommend that you create unique client certificates for each computer that you want to connect to the virtual network.",
          "pos": [
            105,
            227
          ]
        },
        {
          "content": "To export the client certificates, use certmgr.msc.",
          "pos": [
            228,
            279
          ]
        }
      ]
    },
    {
      "pos": [
        9339,
        9401
      ],
      "content": "<bpt id=\"p52\">**</bpt>To upload the root certificate to the Azure Classic Portal<ept id=\"p52\">**</ept>"
    },
    {
      "pos": [
        9406,
        9467
      ],
      "content": "From the Azure Classic Portal, click <bpt id=\"p53\">**</bpt>NETWORK<ept id=\"p53\">**</ept><ph id=\"ph34\"/> on the left."
    },
    {
      "pos": [
        9471,
        9537
      ],
      "content": "Click the virtual network where your HBase cluster is deployed to."
    },
    {
      "pos": [
        9541,
        9577
      ],
      "content": "Click <bpt id=\"p54\">**</bpt>CERTIFICATES<ept id=\"p54\">**</ept><ph id=\"ph35\"/> from the top."
    },
    {
      "pos": [
        9581,
        9740
      ],
      "content": "Click <bpt id=\"p55\">**</bpt>UPLOAD<ept id=\"p55\">**</ept><ph id=\"ph36\"/> from the bottom, and specify the root certificate file you have created in the procedure before last. Wait until the certificate got imported.",
      "nodes": [
        {
          "content": "Click <bpt id=\"p55\">**</bpt>UPLOAD<ept id=\"p55\">**</ept><ph id=\"ph36\"/> from the bottom, and specify the root certificate file you have created in the procedure before last.",
          "pos": [
            0,
            173
          ]
        },
        {
          "content": "Wait until the certificate got imported.",
          "pos": [
            174,
            214
          ]
        }
      ]
    },
    {
      "pos": [
        9744,
        9814
      ],
      "content": "Click <bpt id=\"p56\">**</bpt>DASHBOARD<ept id=\"p56\">**</ept><ph id=\"ph37\"/> on the top.  The virtual diagram shows the status.",
      "nodes": [
        {
          "content": "Click <bpt id=\"p56\">**</bpt>DASHBOARD<ept id=\"p56\">**</ept><ph id=\"ph37\"/> on the top.",
          "pos": [
            0,
            86
          ]
        },
        {
          "content": "The virtual diagram shows the status.",
          "pos": [
            88,
            125
          ]
        }
      ]
    },
    {
      "pos": [
        9822,
        9847
      ],
      "content": "Configure your VPN client"
    },
    {
      "pos": [
        9851,
        9901
      ],
      "content": "<bpt id=\"p57\">**</bpt>To download and install the client VPN package<ept id=\"p57\">**</ept>"
    },
    {
      "pos": [
        9906,
        10122
      ],
      "content": "From the DASHBOARD page of the virtual network, in the quick glance section, click either <bpt id=\"p58\">**</bpt>Download the 64-bit Client VPN Package<ept id=\"p58\">**</ept><ph id=\"ph38\"/> or <bpt id=\"p59\">**</bpt>Download the 32-bit Client VPN Package<ept id=\"p59\">**</ept><ph id=\"ph39\"/> based on your workstation OS version."
    },
    {
      "pos": [
        10126,
        10163
      ],
      "content": "Click <bpt id=\"p60\">**</bpt>Run<ept id=\"p60\">**</ept><ph id=\"ph40\"/> to install the package."
    },
    {
      "pos": [
        10167,
        10242
      ],
      "content": "At the security prompt, click <bpt id=\"p61\">**</bpt>More info<ept id=\"p61\">**</ept>, and then click <bpt id=\"p62\">**</bpt>Run anyway<ept id=\"p62\">**</ept>."
    },
    {
      "pos": [
        10246,
        10266
      ],
      "content": "Click <bpt id=\"p63\">**</bpt>Yes<ept id=\"p63\">**</ept><ph id=\"ph41\"/> twice."
    },
    {
      "pos": [
        10268,
        10289
      ],
      "content": "<bpt id=\"p64\">**</bpt>To connect to VPN<ept id=\"p64\">**</ept>"
    },
    {
      "pos": [
        10294,
        10433
      ],
      "content": "On the desktop of your workstation, click the Networks icon on the Task bar. You shall see a VPN connection with your virtual network name.",
      "nodes": [
        {
          "content": "On the desktop of your workstation, click the Networks icon on the Task bar.",
          "pos": [
            0,
            76
          ]
        },
        {
          "content": "You shall see a VPN connection with your virtual network name.",
          "pos": [
            77,
            139
          ]
        }
      ]
    },
    {
      "pos": [
        10437,
        10467
      ],
      "content": "Click the VPN connection name."
    },
    {
      "pos": [
        10471,
        10489
      ],
      "content": "Click <bpt id=\"p65\">**</bpt>Connect<ept id=\"p65\">**</ept>."
    },
    {
      "pos": [
        10491,
        10548
      ],
      "content": "<bpt id=\"p66\">**</bpt>To test the VPN connection and domain name resolution<ept id=\"p66\">**</ept>"
    },
    {
      "pos": [
        10552,
        10705
      ],
      "content": "From the workstation, open a command prompt and ping one of the following names given the HBase cluster's DNS suffix is myhbase.b7.internal.cloudapp.net:"
    },
    {
      "pos": [
        11022,
        11072
      ],
      "content": "Install and configure SQuirreL on your workstation"
    },
    {
      "pos": [
        11074,
        11097
      ],
      "content": "<bpt id=\"p67\">**</bpt>To install SQuirreL<ept id=\"p67\">**</ept>"
    },
    {
      "pos": [
        11102,
        11252
      ],
      "content": "Download the SQuirreL SQL client jar file from <bpt id=\"p68\">[</bpt>http://squirrel-sql.sourceforge.net/#installation<ept id=\"p68\">](http://squirrel-sql.sourceforge.net/#installation)</ept>."
    },
    {
      "pos": [
        11256,
        11407
      ],
      "content": "Open/run the jar file. It requires the <bpt id=\"p69\">[</bpt>Java Runtime Environment<ept id=\"p69\">](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html)</ept>.",
      "nodes": [
        {
          "content": "Open/run the jar file.",
          "pos": [
            0,
            22
          ]
        },
        {
          "content": "It requires the <bpt id=\"p69\">[</bpt>Java Runtime Environment<ept id=\"p69\">](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html)</ept>.",
          "pos": [
            23,
            191
          ]
        }
      ]
    },
    {
      "pos": [
        11411,
        11432
      ],
      "content": "Click <bpt id=\"p70\">**</bpt>Next<ept id=\"p70\">**</ept><ph id=\"ph42\"/> twice."
    },
    {
      "pos": [
        11436,
        11512
      ],
      "content": "Specify a path where you have the write permission, and then click <bpt id=\"p71\">**</bpt>Next<ept id=\"p71\">**</ept>."
    },
    {
      "pos": [
        11518,
        11798
      ],
      "content": "<ph id=\"ph43\">[AZURE.NOTE]</ph><ph id=\"ph44\"/> The default installation folder is in the C:\\Program Files\\squirrel-sql-3.6 folder.  In order to write to this path, the installer must be granted the administrator privilege. You can open a command prompt as administrator, navigate to Java's bin folder, and then run",
      "nodes": [
        {
          "content": "<ph id=\"ph43\">[AZURE.NOTE]</ph><ph id=\"ph44\"/> The default installation folder is in the C:\\Program Files\\squirrel-sql-3.6 folder.",
          "pos": [
            0,
            130
          ]
        },
        {
          "content": "In order to write to this path, the installer must be granted the administrator privilege.",
          "pos": [
            132,
            222
          ]
        },
        {
          "content": "You can open a command prompt as administrator, navigate to Java's bin folder, and then run",
          "pos": [
            223,
            314
          ]
        }
      ]
    },
    {
      "pos": [
        11870,
        11924
      ],
      "content": "Click <bpt id=\"p72\">**</bpt>OK<ept id=\"p72\">**</ept><ph id=\"ph45\"/> to confirm creating the target directory."
    },
    {
      "pos": [
        11928,
        12010
      ],
      "content": "The default setting is to install the Base and Standard packages.  Click <bpt id=\"p73\">**</bpt>Next<ept id=\"p73\">**</ept>.",
      "nodes": [
        {
          "content": "The default setting is to install the Base and Standard packages.",
          "pos": [
            0,
            65
          ]
        },
        {
          "content": "Click <bpt id=\"p73\">**</bpt>Next<ept id=\"p73\">**</ept>.",
          "pos": [
            67,
            122
          ]
        }
      ]
    },
    {
      "pos": [
        12014,
        12060
      ],
      "content": "Click <bpt id=\"p74\">**</bpt>Next<ept id=\"p74\">**</ept><ph id=\"ph46\"/> twice, and then click <bpt id=\"p75\">**</bpt>Done<ept id=\"p75\">**</ept>."
    },
    {
      "pos": [
        12063,
        12096
      ],
      "content": "<bpt id=\"p76\">**</bpt>To install the Phoenix driver<ept id=\"p76\">**</ept>"
    },
    {
      "pos": [
        12098,
        12218
      ],
      "content": "The phoenix driver jar file is located on the HBase cluster. The path is similar to the following based on the versions:",
      "nodes": [
        {
          "content": "The phoenix driver jar file is located on the HBase cluster.",
          "pos": [
            0,
            60
          ]
        },
        {
          "content": "The path is similar to the following based on the versions:",
          "pos": [
            61,
            120
          ]
        }
      ]
    },
    {
      "pos": [
        12304,
        12520
      ],
      "content": "You need to copy it to your workstation under the [SQuirreL installation folder]/lib path.  The easiest way is to RDP into the cluster, and then use file copy/paste (CTRL+C and CTRL+V) to copy it to your workstation.",
      "nodes": [
        {
          "content": "You need to copy it to your workstation under the [SQuirreL installation folder]/lib path.",
          "pos": [
            0,
            90
          ]
        },
        {
          "content": "The easiest way is to RDP into the cluster, and then use file copy/paste (CTRL+C and CTRL+V) to copy it to your workstation.",
          "pos": [
            92,
            216
          ]
        }
      ]
    },
    {
      "pos": [
        12522,
        12561
      ],
      "content": "<bpt id=\"p77\">**</bpt>To add a Phoenix driver to SQuirreL<ept id=\"p77\">**</ept>"
    },
    {
      "pos": [
        12566,
        12613
      ],
      "content": "Open SQuirreL SQL Client from your workstation."
    },
    {
      "pos": [
        12617,
        12654
      ],
      "content": "Click the <bpt id=\"p78\">**</bpt>Driver<ept id=\"p78\">**</ept><ph id=\"ph47\"/> tab on the left."
    },
    {
      "pos": [
        12658,
        12706
      ],
      "content": "From the <bpt id=\"p79\">**</bpt>Drivers<ept id=\"p79\">**</ept><ph id=\"ph48\"/> menu, click <bpt id=\"p80\">**</bpt>New Driver<ept id=\"p80\">**</ept>."
    },
    {
      "pos": [
        12710,
        12742
      ],
      "content": "Enter the following information:"
    },
    {
      "pos": [
        12750,
        12767
      ],
      "content": "<bpt id=\"p81\">**</bpt>Name<ept id=\"p81\">**</ept>: Phoenix"
    },
    {
      "pos": [
        12774,
        12856
      ],
      "content": "<bpt id=\"p82\">**</bpt>Example URL<ept id=\"p82\">**</ept>: jdbc:phoenix:zookeeper2.contoso-hbase-eu.f5.internal.cloudapp.net"
    },
    {
      "pos": [
        12863,
        12916
      ],
      "content": "<bpt id=\"p83\">**</bpt>Class Name<ept id=\"p83\">**</ept>: org.apache.phoenix.jdbc.PhoenixDriver"
    },
    {
      "pos": [
        12923,
        13105
      ],
      "content": "<ph id=\"ph49\">[AZURE.WARNING]</ph><ph id=\"ph50\"/> User all lower case in the Example URL. You can use they full zookeeper quorum in case one of them is down.  The hostnames are zookeeper0, zookeeper1, and zookeeper2.",
      "nodes": [
        {
          "content": "<ph id=\"ph49\">[AZURE.WARNING]</ph><ph id=\"ph50\"/> User all lower case in the Example URL.",
          "pos": [
            0,
            89
          ]
        },
        {
          "content": "You can use they full zookeeper quorum in case one of them is down.",
          "pos": [
            90,
            157
          ]
        },
        {
          "content": "The hostnames are zookeeper0, zookeeper1, and zookeeper2.",
          "pos": [
            159,
            216
          ]
        }
      ]
    },
    {
      "pos": [
        13111,
        13174
      ],
      "content": "<ph id=\"ph51\">![</ph>HDInsight HBase Phoenix SQuirreL driver<ph id=\"ph52\">][img-squirrel-driver]</ph>"
    },
    {
      "pos": [
        13178,
        13191
      ],
      "content": "Click <bpt id=\"p84\">**</bpt>OK<ept id=\"p84\">**</ept>."
    },
    {
      "pos": [
        13193,
        13236
      ],
      "content": "<bpt id=\"p85\">**</bpt>To create an alias to the HBase cluster<ept id=\"p85\">**</ept>"
    },
    {
      "pos": [
        13241,
        13294
      ],
      "content": "From SQuirreL, Click the <bpt id=\"p86\">**</bpt>Aliases<ept id=\"p86\">**</ept><ph id=\"ph53\"/> tab on the left."
    },
    {
      "pos": [
        13298,
        13345
      ],
      "content": "From the <bpt id=\"p87\">**</bpt>Aliases<ept id=\"p87\">**</ept><ph id=\"ph54\"/> menu, click <bpt id=\"p88\">**</bpt>New Alias<ept id=\"p88\">**</ept>."
    },
    {
      "pos": [
        13349,
        13381
      ],
      "content": "Enter the following information:"
    },
    {
      "pos": [
        13389,
        13452
      ],
      "content": "<bpt id=\"p89\">**</bpt>Name<ept id=\"p89\">**</ept>: The name of the HBase cluster or any name you prefer."
    },
    {
      "pos": [
        13459,
        13547
      ],
      "content": "<bpt id=\"p90\">**</bpt>Driver<ept id=\"p90\">**</ept>: Phoenix.  This must match the driver name you created in the last procedure.",
      "nodes": [
        {
          "content": "<bpt id=\"p90\">**</bpt>Driver<ept id=\"p90\">**</ept>: Phoenix.",
          "pos": [
            0,
            60
          ]
        },
        {
          "content": "This must match the driver name you created in the last procedure.",
          "pos": [
            62,
            128
          ]
        }
      ]
    },
    {
      "pos": [
        13554,
        13646
      ],
      "content": "<bpt id=\"p91\">**</bpt>URL<ept id=\"p91\">**</ept>: The URL is copied from your driver configuration. Make sure to user all lower case.",
      "nodes": [
        {
          "content": "<bpt id=\"p91\">**</bpt>URL<ept id=\"p91\">**</ept>: The URL is copied from your driver configuration.",
          "pos": [
            0,
            98
          ]
        },
        {
          "content": "Make sure to user all lower case.",
          "pos": [
            99,
            132
          ]
        }
      ]
    },
    {
      "pos": [
        13653,
        13761
      ],
      "content": "<bpt id=\"p92\">**</bpt>User name<ept id=\"p92\">**</ept>: It can be any text.  Because you use VPN connectivity here, the user name is not used at all.",
      "nodes": [
        {
          "content": "<bpt id=\"p92\">**</bpt>User name<ept id=\"p92\">**</ept>: It can be any text.",
          "pos": [
            0,
            74
          ]
        },
        {
          "content": "Because you use VPN connectivity here, the user name is not used at all.",
          "pos": [
            76,
            148
          ]
        }
      ]
    },
    {
      "pos": [
        13768,
        13801
      ],
      "content": "<bpt id=\"p93\">**</bpt>Password<ept id=\"p93\">**</ept>: It can be any text."
    },
    {
      "pos": [
        13807,
        13869
      ],
      "content": "<ph id=\"ph55\">![</ph>HDInsight HBase Phoenix SQuirreL driver<ph id=\"ph56\">][img-squirrel-alias]</ph>"
    },
    {
      "pos": [
        13873,
        13888
      ],
      "content": "Click <bpt id=\"p94\">**</bpt>Test<ept id=\"p94\">**</ept>."
    },
    {
      "pos": [
        13893,
        13962
      ],
      "content": "Click <bpt id=\"p95\">**</bpt>Connect<ept id=\"p95\">**</ept>. When it makes the connection, SQuirreL looks like:",
      "nodes": [
        {
          "content": "Click <bpt id=\"p95\">**</bpt>Connect<ept id=\"p95\">**</ept>.",
          "pos": [
            0,
            58
          ]
        },
        {
          "content": "When it makes the connection, SQuirreL looks like:",
          "pos": [
            59,
            109
          ]
        }
      ]
    },
    {
      "pos": [
        13968,
        14007
      ],
      "content": "<ph id=\"ph57\">![</ph>HBase Phoenix SQuirreL<ph id=\"ph58\">][img-squirrel]</ph>"
    },
    {
      "pos": [
        14009,
        14026
      ],
      "content": "<bpt id=\"p96\">**</bpt>To run a test<ept id=\"p96\">**</ept>"
    },
    {
      "pos": [
        14031,
        14087
      ],
      "content": "Click the <bpt id=\"p97\">**</bpt>SQL<ept id=\"p97\">**</ept><ph id=\"ph59\"/> tab right next to the <bpt id=\"p98\">**</bpt>Objects<ept id=\"p98\">**</ept><ph id=\"ph60\"/> tab."
    },
    {
      "pos": [
        14091,
        14125
      ],
      "content": "Copy and paste the following code:"
    },
    {
      "pos": [
        14290,
        14311
      ],
      "content": "Click the run button."
    },
    {
      "pos": [
        14317,
        14360
      ],
      "content": "<ph id=\"ph61\">![</ph>HBase Phoenix SQuirreL<ph id=\"ph62\">][img-squirrel-sql]</ph>"
    },
    {
      "pos": [
        14364,
        14399
      ],
      "content": "Switch back to the <bpt id=\"p99\">**</bpt>Objects<ept id=\"p99\">**</ept><ph id=\"ph63\"/> tab."
    },
    {
      "pos": [
        14403,
        14495
      ],
      "content": "Expand the alias name, and then expand <bpt id=\"p100\">**</bpt>TABLE<ept id=\"p100\">**</ept>.  You shall see the new table listed under.",
      "nodes": [
        {
          "content": "Expand the alias name, and then expand <bpt id=\"p100\">**</bpt>TABLE<ept id=\"p100\">**</ept>.",
          "pos": [
            0,
            91
          ]
        },
        {
          "content": "You shall see the new table listed under.",
          "pos": [
            93,
            134
          ]
        }
      ]
    },
    {
      "pos": [
        14500,
        14510
      ],
      "content": "Next steps"
    },
    {
      "pos": [
        14511,
        14604
      ],
      "content": "In this article, you have learned how to use Apache Phoenix in HDInsight.  To learn more, see",
      "nodes": [
        {
          "content": "In this article, you have learned how to use Apache Phoenix in HDInsight.",
          "pos": [
            0,
            73
          ]
        },
        {
          "content": "To learn more, see",
          "pos": [
            75,
            93
          ]
        }
      ]
    },
    {
      "pos": [
        14608,
        14835
      ],
      "content": "<bpt id=\"p101\">[</bpt>HDInsight HBase overview<ept id=\"p101\">][hdinsight-hbase-overview]</ept>:\nHBase is an Apache, open-source, NoSQL database built on Hadoop that provides random access and strong consistency for large amounts of unstructured and semistructured data."
    },
    {
      "pos": [
        14838,
        15094
      ],
      "content": "<bpt id=\"p102\">[</bpt>Provision HBase clusters on Azure Virtual Network<ept id=\"p102\">][hdinsight-hbase-provision-vnet]</ept>:\nWith virtual network integration, HBase clusters can be deployed to the same virtual network as your applications so that applications can communicate with HBase directly."
    },
    {
      "pos": [
        15097,
        15247
      ],
      "content": "<bpt id=\"p103\">[</bpt>Configure HBase replication in HDInsight<ept id=\"p103\">](hdinsight-hbase-geo-replication.md)</ept>: Learn how to configure HBase replication across two Azure datacenters."
    },
    {
      "pos": [
        15251,
        15485
      ],
      "content": "<bpt id=\"p104\">[</bpt>Analyze Twitter sentiment with HBase in HDInsight<ept id=\"p104\">][hbase-twitter-sentiment]</ept>:\nLearn how to do real-time <bpt id=\"p105\">[</bpt>sentiment analysis<ept id=\"p105\">](http://en.wikipedia.org/wiki/Sentiment_analysis)</ept><ph id=\"ph64\"/> of big data by using HBase in a Hadoop cluster in HDInsight."
    }
  ],
  "content": "<properties \n   pageTitle=\"Use Apache Phoenix and SQuirreL in HDInsight | Microsoft Azure\" \n   description=\"Learn how to use Apache Phoenix in HDInsight, and how to install and configure SQuirreL on your workstation to connect to an HBase cluster in HDInsight.\" \n   services=\"hdinsight\" \n   documentationCenter=\"\" \n   authors=\"mumian\" \n   manager=\"paulettm\" \n   editor=\"cgronlun\"/>\n\n<tags\n   ms.service=\"hdinsight\"\n   ms.devlang=\"na\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"na\"\n   ms.workload=\"big-data\" \n   ms.date=\"12/02/2015\"\n   ms.author=\"jgao\"/>\n\n# Use Apache Phoenix and SQuirreL with HBase clusters in HDinsight  \n\nLearn how to use [Apache Phoenix](http://phoenix.apache.org/) in HDInsight, and how to install and configure SQuirreL on your workstation to connect to an HBase cluster in HDInsight. For more information about Phoenix, see [Phoenix in 15 minutes or less](http://phoenix.apache.org/Phoenix-in-15-minutes-or-less.html). For the Phoenix grammar, see [Phoenix Grammar](http://phoenix.apache.org/language/index.html).\n\n>[AZURE.NOTE] For the Phoenix version information in HDInsight, see [What's new in the Hadoop cluster versions provided by HDInsight?][hdinsight-versions].\n\n##Use SQLLine\n[SQLLine](http://sqlline.sourceforge.net/) is a command line utility to execute SQL. \n\n###Prerequisites\nBefore you can use SQLLine, you must have the following:\n\n- **A HBase cluster in HDInsight**. For information on provision HBase cluster, see [Get started with Apache HBase in HDInsight][hdinsight-hbase-get-started].\n- **Connect to the HBase cluster via the remote desktop protocol**. For instructions, see [Manage Hadoop clusters in HDInsight by using the Azure Classic Portal][hdinsight-manage-portal].\n\n**To find out the host name**\n\n1. Open **Hadoop Command Line** from the desktop.\n2. Run the following command to get the DNS suffix:\n\n        ipconfig\n\n    Write down **Connection-specific DNS Suffix**. For example, *myhbasecluster.f5.internal.cloudapp.net*. When you connect to an HBase cluster, you will need to connect to one of the Zookeepers using FQDN. Each HDInsight cluster has 3 Zookeepers. They are *zookeeper0*, *zookeeper1*, and *zookeeper2*. The FQDN will be something like *zookeeper2.myhbasecluster.f5.internal.cloudapp.net*.\n\n**To use SQLLine**\n\n1. Open **Hadoop Command Line** from the desktop.\n2. Run the following commands to open SQLLine:\n\n        cd %phoenix_home%\\bin\n        sqlline.py [The FQDN of one of the Zookeepers]\n\n    ![hdinsight hbase phoenix sqlline][hdinsight-hbase-phoenix-sqlline]\n\n    The commands used in the sample:\n\n        CREATE TABLE Company (COMPANY_ID INTEGER PRIMARY KEY, NAME VARCHAR(225));\n        \n        !tables;\n        \n        UPSERT INTO Company VALUES(1, 'Microsoft');\n        \n        SELECT * FROM Company;\n\nFor more information, see [SQLLine manual](http://sqlline.sourceforge.net/#manual) and [Phoenix Grammar](http://phoenix.apache.org/language/index.html).\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n##Use SQuirreL\n\n[SQuirreL SQL Client](http://squirrel-sql.sourceforge.net/) is a graphical Java program that will allow you to view the structure of a JDBC compliant database, browse the data in tables, issue SQL commands etc. It can be used to connect to Apache Phoenix on HDInsight.\n\nThis section shows you how to install and configure SQuirreL on your workstation to connect to an HBase cluster in HDInsight via VPN. \n\n###Prerequisites\n\nBefore following the procedures, you must have the following:\n\n- An HBase cluster deployed to an Azure virtual network with a DNS virtual machine.  For instructions, see [Provision HBase clusters on Azure Virtual Network][hdinsight-hbase-provision-vnet]. \n\n    >[AZURE.IMPORTANT] You must install a DNS server to the virtual network. For instructions, see [Configure DNS between two Azure virtual networks](hdinsight-hbase-geo-replication-configure-DNS.md)\n\n- Get the HBase cluster cluster Connection-specific DNS suffix. To get it, RDP into the cluster, and then run IPConfig.  The DNS suffix is similar to:\n\n        myhbase.b7.internal.cloudapp.net\n- Download and install [Microsoft Visual Studio Express 2013 for Windows Desktop](https://www.visualstudio.com/products/visual-studio-express-vs.aspx) on your workstation. You will need makecert from the package to create your certificate.  \n- Download and install [Java Runtime Environment](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html) on your workstation.  SQuirreL SQL client version 3.0 and higher requires JRE version 1.6 or higher.  \n\n\n###Configure a Point-to-Site VPN connection to the Azure virtual network\n\nThere are 3 steps involved configuring a point-to-site VPN connection:\n\n1. [Configure a virtual network and a dynamic routing gateway](#Configure-a-virtual-network-and-a-dynamic-routing-gateway)\n2. [Create your certificates](#Create-your-certificates)\n3. [Configure your VPN client](#Configure-your-VPN-client)\n\nSee [Configure a Point-to-Site VPN connection to an Azure Virtual Network](../vpn-gateway/vpn-gateway-point-to-site-create.md) for more information.\n\n#### Configure a virtual network and a dynamic routing gateway\n\nAssure you have provisioned an HBase cluster in an Azure virtual network (see the prerequisites for this section). The next step is to configure a point-to-site connection.\n\n**To configure the point-to-site connectivity**\n\n1. Sign in to the [Azure Classic Portal][azure-portal].\n2. On the left, click **NETWORKS**.\n3. Click the virtual network you have created (see [Provision HBase clusters on Azure Virtual Network][hdinsight-hbase-provision-vnet]).\n4. Click **CONFIGURE** from the top.\n5. In the **point-to-site connectivity** section, select **Configure point-to-site connectivity**. \n6. Configure **STARTING IP** and **CIDR** to specify the IP address range from which your VPN clients will receive an IP address when connected. The range cannot overlap with any of the ranges located on your on-premises network and the Azure virtual network you will be connecting to. For example. if you selected 10.0.0.0/20 for the virtual network, you can select 10.1.0.0/24 for the client address space. See the [Point-To-Site Connectivity][vnet-point-to-site-connectivity] page for more information.\n7. In the virtual network address spaces section, click **add gateway subnet**.\n7. Click **SAVE** on the bottom of the page.\n8. Click **YES** to confirm the change. Wait until the system has finished making the change before you proceed to the next procedure.\n\n\n**To create a dynamic routing gateway**\n\n1. From the Azure Classic Portal, click **DASHBOARD** from the top of the page.\n2. Click **CREATE GATEWAY** from the bottom of the page.\n3. Click **YES** to confirm. Wait until the gateway is created.\n4. Click **DASHBOARD** from the top.  You will see a visual diagram of the virtual network:\n\n    ![Azure virtual network point-to-site virtual diagram][img-vnet-diagram] \n\n    The diagram shows 0 client connections. After you make a connection to the virtual network, the number will be updated to one. \n\n#### Create your certificates\n\nOne way to create an X.509 certificate is by using the Certificate Creation Tool (makecert.exe) that comes with [Microsoft Visual Studio Express 2013 for Windows Desktop](https://www.visualstudio.com/products/visual-studio-express-vs.aspx). \n\n\n**To create a self-signed root certificate**\n\n1. From your workstation, open a command prompt window.\n2. Navigate to the Visual Studio tools folder. \n3. The following command in the example below will create and install a root certificate in the Personal certificate store on your workstation and also create a corresponding .cer file that you’ll later upload to the Azure Classic Portal. \n\n        makecert -sky exchange -r -n \"CN=HBaseVnetVPNRootCertificate\" -pe -a sha1 -len 2048 -ss My \"C:\\Users\\JohnDole\\Desktop\\HBaseVNetVPNRootCertificate.cer\"\n\n    Change to the directory that you want the .cer file to be located in, where HBaseVnetVPNRootCertificate is the name that you want to use for the certificate. \n\n    Don't close the command prompt.  You will need it in the next procedure.\n\n    >[AZURE.NOTE] Because you have created a root certificate from which client certificates will be generated, you may want to export this certificate along with its private key and save it to a safe location where it may be recovered. \n\n**To create a client certificate**\n\n- From the same command prompt (It has to be on the same computer where you created the root certificate. The client certificate must be generated from the root certificate), run the following command:\n\n        makecert.exe -n \"CN=HBaseVnetVPNClientCertificate\" -pe -sky exchange -m 96 -ss My -in \"HBaseVnetVPNRootCertificate\" -is my -a sha1\n\n    HBaseVnetVPNRootCertificate is the root certificate name.  It has to match the root certificate name.  \n\n    Both the root certificate and the client certificate are stored in your Personal certificate store on your computer. Use certmgr.msc to verify.\n\n    ![Azure virtual network point-to-site vpn certificate][img-certificate]\n\n    A client certificate must be installed on each computer that you want to connect to the virtual network. We recommend that you create unique client certificates for each computer that you want to connect to the virtual network. To export the client certificates, use certmgr.msc. \n\n**To upload the root certificate to the Azure Classic Portal**\n\n1. From the Azure Classic Portal, click **NETWORK** on the left.\n2. Click the virtual network where your HBase cluster is deployed to.\n3. Click **CERTIFICATES** from the top.\n4. Click **UPLOAD** from the bottom, and specify the root certificate file you have created in the procedure before last. Wait until the certificate got imported.\n5. Click **DASHBOARD** on the top.  The virtual diagram shows the status.\n\n\n#### Configure your VPN client\n\n\n\n**To download and install the client VPN package**\n\n1. From the DASHBOARD page of the virtual network, in the quick glance section, click either **Download the 64-bit Client VPN Package** or **Download the 32-bit Client VPN Package** based on your workstation OS version.\n2. Click **Run** to install the package.\n3. At the security prompt, click **More info**, and then click **Run anyway**.\n4. Click **Yes** twice.\n\n**To connect to VPN**\n\n1. On the desktop of your workstation, click the Networks icon on the Task bar. You shall see a VPN connection with your virtual network name.\n2. Click the VPN connection name.\n3. Click **Connect**.\n\n**To test the VPN connection and domain name resolution**\n\n- From the workstation, open a command prompt and ping one of the following names given the HBase cluster's DNS suffix is myhbase.b7.internal.cloudapp.net:\n\n        zookeeper0.myhbase.b7.internal.cloudapp.net\n        zookeeper0.myhbase.b7.internal.cloudapp.net\n        zookeeper0.myhbase.b7.internal.cloudapp.net\n        headnode0.myhbase.b7.internal.cloudapp.net\n        headnode1.myhbase.b7.internal.cloudapp.net\n        workernode0.myhbase.b7.internal.cloudapp.net\n\n###Install and configure SQuirreL on your workstation\n\n**To install SQuirreL**\n\n1. Download the SQuirreL SQL client jar file from [http://squirrel-sql.sourceforge.net/#installation](http://squirrel-sql.sourceforge.net/#installation).\n2. Open/run the jar file. It requires the [Java Runtime Environment](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html).\n3. Click **Next** twice.\n4. Specify a path where you have the write permission, and then click **Next**.\n    >[AZURE.NOTE] The default installation folder is in the C:\\Program Files\\squirrel-sql-3.6 folder.  In order to write to this path, the installer must be granted the administrator privilege. You can open a command prompt as administrator, navigate to Java's bin folder, and then run \n    >\n    >     java.exe -jar [the path of the SQuirreL jar file] \n5. Click **OK** to confirm creating the target directory.\n6. The default setting is to install the Base and Standard packages.  Click **Next**.\n7. Click **Next** twice, and then click **Done**.\n\n\n**To install the Phoenix driver**\n\nThe phoenix driver jar file is located on the HBase cluster. The path is similar to the following based on the versions:\n\n    C:\\apps\\dist\\phoenix-4.0.0.2.1.11.0-2316\\phoenix-4.0.0.2.1.11.0-2316-client.jar\nYou need to copy it to your workstation under the [SQuirreL installation folder]/lib path.  The easiest way is to RDP into the cluster, and then use file copy/paste (CTRL+C and CTRL+V) to copy it to your workstation.\n\n**To add a Phoenix driver to SQuirreL**\n\n1. Open SQuirreL SQL Client from your workstation.\n2. Click the **Driver** tab on the left.\n2. From the **Drivers** menu, click **New Driver**.\n3. Enter the following information:\n\n    - **Name**: Phoenix\n    - **Example URL**: jdbc:phoenix:zookeeper2.contoso-hbase-eu.f5.internal.cloudapp.net\n    - **Class Name**: org.apache.phoenix.jdbc.PhoenixDriver\n\n    >[AZURE.WARNING] User all lower case in the Example URL. You can use they full zookeeper quorum in case one of them is down.  The hostnames are zookeeper0, zookeeper1, and zookeeper2.\n\n    ![HDInsight HBase Phoenix SQuirreL driver][img-squirrel-driver]\n4. Click **OK**.\n\n**To create an alias to the HBase cluster**\n\n1. From SQuirreL, Click the **Aliases** tab on the left.\n2. From the **Aliases** menu, click **New Alias**.\n3. Enter the following information:\n\n    - **Name**: The name of the HBase cluster or any name you prefer.\n    - **Driver**: Phoenix.  This must match the driver name you created in the last procedure.\n    - **URL**: The URL is copied from your driver configuration. Make sure to user all lower case.\n    - **User name**: It can be any text.  Because you use VPN connectivity here, the user name is not used at all.\n    - **Password**: It can be any text.\n\n    ![HDInsight HBase Phoenix SQuirreL driver][img-squirrel-alias]\n4. Click **Test**. \n5. Click **Connect**. When it makes the connection, SQuirreL looks like:\n\n    ![HBase Phoenix SQuirreL][img-squirrel]\n\n**To run a test**\n\n1. Click the **SQL** tab right next to the **Objects** tab.\n2. Copy and paste the following code:\n\n        CREATE TABLE IF NOT EXISTS us_population (state CHAR(2) NOT NULL, city VARCHAR NOT NULL, population BIGINT  CONSTRAINT my_pk PRIMARY KEY (state, city))\n3. Click the run button.\n\n    ![HBase Phoenix SQuirreL][img-squirrel-sql]\n4. Switch back to the **Objects** tab.\n5. Expand the alias name, and then expand **TABLE**.  You shall see the new table listed under.\n \n##Next steps\nIn this article, you have learned how to use Apache Phoenix in HDInsight.  To learn more, see\n\n- [HDInsight HBase overview][hdinsight-hbase-overview]:\nHBase is an Apache, open-source, NoSQL database built on Hadoop that provides random access and strong consistency for large amounts of unstructured and semistructured data.\n- [Provision HBase clusters on Azure Virtual Network][hdinsight-hbase-provision-vnet]:\nWith virtual network integration, HBase clusters can be deployed to the same virtual network as your applications so that applications can communicate with HBase directly.\n- [Configure HBase replication in HDInsight](hdinsight-hbase-geo-replication.md): Learn how to configure HBase replication across two Azure datacenters. \n- [Analyze Twitter sentiment with HBase in HDInsight][hbase-twitter-sentiment]:\nLearn how to do real-time [sentiment analysis](http://en.wikipedia.org/wiki/Sentiment_analysis) of big data by using HBase in a Hadoop cluster in HDInsight.\n\n[azure-portal]: https://portal.azure.com\n[vnet-point-to-site-connectivity]: https://msdn.microsoft.com/library/azure/09926218-92ab-4f43-aa99-83ab4d355555#BKMK_VNETPT\n\n[hdinsight-versions]: hdinsight-component-versioning.md\n[hdinsight-hbase-get-started]: hdinsight-hbase-tutorial-get-started.md\n[hdinsight-manage-portal]: hdinsight-administer-use-management-portal.md#connect-to-hdinsight-clusters-by-using-rdp\n[hdinsight-hbase-provision-vnet]: hdinsight-hbase-provision-vnet.md\n[hdinsight-hbase-overview]: hdinsight-hbase-overview.md\n[hbase-twitter-sentiment]: hdinsight-hbase-analyze-twitter-sentiment.md\n\n[hdinsight-hbase-phoenix-sqlline]: ./media/hdinsight-hbase-phoenix-squirrel/hdinsight-hbase-phoenix-sqlline.png\n[img-certificate]: ./media/hdinsight-hbase-phoenix-squirrel/hdinsight-hbase-vpn-certificate.png\n[img-vnet-diagram]: ./media/hdinsight-hbase-phoenix-squirrel/hdinsight-hbase-vnet-point-to-site.png\n[img-squirrel-driver]: ./media/hdinsight-hbase-phoenix-squirrel/hdinsight-hbase-squirrel-driver.png\n[img-squirrel-alias]: ./media/hdinsight-hbase-phoenix-squirrel/hdinsight-hbase-squirrel-alias.png\n[img-squirrel]: ./media/hdinsight-hbase-phoenix-squirrel/hdinsight-hbase-squirrel.png\n[img-squirrel-sql]: ./media/hdinsight-hbase-phoenix-squirrel/hdinsight-hbase-squirrel-sql.png\n\n\n \n"
}