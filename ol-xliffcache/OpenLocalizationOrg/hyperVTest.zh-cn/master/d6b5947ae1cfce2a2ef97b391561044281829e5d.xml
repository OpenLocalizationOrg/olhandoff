{
  "nodes": [
    {
      "pos": [
        28,
        65
      ],
      "content": "Azure API Management Policy Reference"
    },
    {
      "pos": [
        85,
        148
      ],
      "content": "Learn about the policies available to configure API Management."
    },
    {
      "pos": [
        462,
        499
      ],
      "content": "Azure API Management Policy Reference"
    },
    {
      "pos": [
        501,
        680
      ],
      "content": "This section provides an index for the policies in the <bpt id=\"p1\">[</bpt>API Management policy reference<ept id=\"p1\">][]</ept>. For information on adding and configuring policies, see <bpt id=\"p2\">[</bpt>Policies in API Management<ept id=\"p2\">][]</ept>.",
      "nodes": [
        {
          "content": "This section provides an index for the policies in the <bpt id=\"p1\">[</bpt>API Management policy reference<ept id=\"p1\">][]</ept>.",
          "pos": [
            0,
            129
          ]
        },
        {
          "content": "For information on adding and configuring policies, see <bpt id=\"p2\">[</bpt>Policies in API Management<ept id=\"p2\">][]</ept>.",
          "pos": [
            130,
            255
          ]
        }
      ]
    },
    {
      "pos": [
        682,
        1006
      ],
      "content": "Policy expressions can be used as attribute values or text values in any of the API Management policies, unless the policy specifies otherwise. Some policies such as the <bpt id=\"p3\">[</bpt>Control flow<ept id=\"p3\">][]</ept><ph id=\"ph2\"/> and <bpt id=\"p4\">[</bpt>Set variable<ept id=\"p4\">][]</ept><ph id=\"ph3\"/> policies are based on policy expressions. For more information, see <bpt id=\"p5\">[</bpt>Advanced policies<ept id=\"p5\">][]</ept><ph id=\"ph4\"/> and <bpt id=\"p6\">[</bpt>Policy expressions<ept id=\"p6\">][]</ept>",
      "nodes": [
        {
          "content": "Policy expressions can be used as attribute values or text values in any of the API Management policies, unless the policy specifies otherwise.",
          "pos": [
            0,
            143
          ]
        },
        {
          "content": "Some policies such as the <bpt id=\"p3\">[</bpt>Control flow<ept id=\"p3\">][]</ept><ph id=\"ph2\"/> and <bpt id=\"p4\">[</bpt>Set variable<ept id=\"p4\">][]</ept><ph id=\"ph3\"/> policies are based on policy expressions.",
          "pos": [
            144,
            353
          ]
        },
        {
          "content": "For more information, see <bpt id=\"p5\">[</bpt>Advanced policies<ept id=\"p5\">][]</ept><ph id=\"ph4\"/> and <bpt id=\"p6\">[</bpt>Policy expressions<ept id=\"p6\">][]</ept>",
          "pos": [
            354,
            518
          ]
        }
      ]
    },
    {
      "pos": [
        1011,
        1033
      ],
      "content": "Policy reference index"
    },
    {
      "pos": [
        1039,
        1070
      ],
      "content": "<bpt id=\"p7\">[</bpt>Access restriction policies<ept id=\"p7\">][]</ept>"
    },
    {
      "pos": [
        1079,
        1152
      ],
      "content": "<bpt id=\"p8\">[</bpt>Check HTTP header<ept id=\"p8\">][]</ept><ph id=\"ph5\"/> - Enforces existence and/or value of a HTTP Header."
    },
    {
      "pos": [
        1161,
        1276
      ],
      "content": "<bpt id=\"p9\">[</bpt>Limit call rate by subscription<ept id=\"p9\">][]</ept><ph id=\"ph6\"/> - Prevents API usage spikes by limiting call rate, on a per subscription basis."
    },
    {
      "pos": [
        1285,
        1455
      ],
      "content": "<bpt id=\"p10\">[</bpt>Limit call rate by key<ept id=\"p10\">](https://msdn.microsoft.com/library/azure/dn894078.aspx#LimitCallRateByKey)</ept><ph id=\"ph7\"/> - Prevents API usage spikes by limiting call rate, on a per key basis."
    },
    {
      "pos": [
        1464,
        1569
      ],
      "content": "<bpt id=\"p11\">[</bpt>Restrict caller IPs<ept id=\"p11\">][]</ept><ph id=\"ph8\"/> - Filters (allows/denies) calls from specific IP addresses and/or address ranges."
    },
    {
      "pos": [
        1578,
        1726
      ],
      "content": "<bpt id=\"p12\">[</bpt>Set usage quota by subscription<ept id=\"p12\">][]</ept><ph id=\"ph9\"/> - Allows you to enforce a renewable or lifetime call volume and/or bandwidth quota, on a per subscription basis."
    },
    {
      "pos": [
        1735,
        1938
      ],
      "content": "<bpt id=\"p13\">[</bpt>Set usage quota by key<ept id=\"p13\">](https://msdn.microsoft.com/library/azure/dn894078.aspx#SetUsageQuotaByKey)</ept><ph id=\"ph10\"/> - Allows you to enforce a renewable or lifetime call volume and/or bandwidth quota, on a per key basis."
    },
    {
      "pos": [
        1947,
        2084
      ],
      "content": "<bpt id=\"p14\">[</bpt>Validate JWT<ept id=\"p14\">][]</ept><ph id=\"ph11\"/> - Enforces existence and validity of a JWT extracted from either a specified HTTP Header or a specified query parameter."
    },
    {
      "pos": [
        2089,
        2110
      ],
      "content": "<bpt id=\"p15\">[</bpt>Advanced policies<ept id=\"p15\">][]</ept>"
    },
    {
      "pos": [
        2119,
        2244
      ],
      "content": "<bpt id=\"p16\">[</bpt>Control flow<ept id=\"p16\">][]</ept><ph id=\"ph12\"/> - Conditionally applies policy statements based on the results of the evaluation of Boolean <bpt id=\"p17\">[</bpt>expressions<ept id=\"p17\">][]</ept>."
    },
    {
      "pos": [
        2253,
        2319
      ],
      "content": "<bpt id=\"p18\">[</bpt>Forward request<ept id=\"p18\">][]</ept><ph id=\"ph13\"/> - Forwards the request to the backend service."
    },
    {
      "pos": [
        2328,
        2502
      ],
      "content": "<bpt id=\"p19\">[</bpt>Log to Event Hub<ept id=\"p19\">][]</ept><ph id=\"ph14\"/> - Sends messages in the specified format to a message target defined by a <bpt id=\"p20\">[</bpt>Logger<ept id=\"p20\">](https://msdn.microsoft.com/library/azure/mt592020.aspx#Logger)</ept><ph id=\"ph15\"/> entity."
    },
    {
      "pos": [
        2511,
        2686
      ],
      "content": "<bpt id=\"p21\">[</bpt>Return response<ept id=\"p21\">](https://msdn.microsoft.com/library/azure/dn894085.aspx#ReturnResponse)</ept><ph id=\"ph16\"/> - Aborts pipeline execution and returns the specified response directly to the caller."
    },
    {
      "pos": [
        2695,
        2862
      ],
      "content": "<bpt id=\"p22\">[</bpt>Send one way request<ept id=\"p22\">](https://msdn.microsoft.com/library/azure/dn894085.aspx#SendOneWayRequest)</ept><ph id=\"ph17\"/> - Sends a request to the specified URL without waiting for a response."
    },
    {
      "pos": [
        2871,
        2993
      ],
      "content": "<bpt id=\"p23\">[</bpt>Send request<ept id=\"p23\">](https://msdn.microsoft.com/library/azure/dn894085.aspx#SendRequest)</ept><ph id=\"ph18\"/> - Sends a request to the specified URL."
    },
    {
      "pos": [
        3002,
        3149
      ],
      "content": "<bpt id=\"p24\">[</bpt>Set request method<ept id=\"p24\">](https://msdn.microsoft.com/library/azure/dn894085.aspx#SetRequestMethod)</ept><ph id=\"ph19\"/> - Allows you to change the HTTP method for a request."
    },
    {
      "pos": [
        3158,
        3291
      ],
      "content": "<bpt id=\"p25\">[</bpt>Set status<ept id=\"p25\">](https://msdn.microsoft.com/library/azure/dn894085.aspx#SetStatus)</ept><ph id=\"ph20\"/> - Changes the HTTP status code to the specified value."
    },
    {
      "pos": [
        3300,
        3384
      ],
      "content": "<bpt id=\"p26\">[</bpt>Set variable<ept id=\"p26\">][]</ept><ph id=\"ph21\"/> - Persist a value in a named <bpt id=\"p27\">[</bpt>context<ept id=\"p27\">][]</ept><ph id=\"ph22\"/> variable for later access."
    },
    {
      "pos": [
        3389,
        3416
      ],
      "content": "<bpt id=\"p28\">[</bpt>Authentication policies<ept id=\"p28\">][]</ept>"
    },
    {
      "pos": [
        3425,
        3518
      ],
      "content": "<bpt id=\"p29\">[</bpt>Authenticate with Basic<ept id=\"p29\">][]</ept><ph id=\"ph23\"/> - Authenticate with a backend service using Basic authentication."
    },
    {
      "pos": [
        3527,
        3632
      ],
      "content": "<bpt id=\"p30\">[</bpt>Authenticate with client certificate<ept id=\"p30\">][]</ept><ph id=\"ph24\"/> - Authenticate with a backend service using client certificates."
    },
    {
      "pos": [
        3637,
        3657
      ],
      "content": "<bpt id=\"p31\">[</bpt>Caching policies<ept id=\"p31\">][]</ept>"
    },
    {
      "pos": [
        3667,
        3760
      ],
      "content": "<bpt id=\"p32\">[</bpt>Get from cache<ept id=\"p32\">][]</ept><ph id=\"ph25\"/> - Perform cache look up and return a valid cached response when available."
    },
    {
      "pos": [
        3769,
        3861
      ],
      "content": "<bpt id=\"p33\">[</bpt>Store to cache<ept id=\"p33\">][]</ept><ph id=\"ph26\"/> - Caches response according to the specified cache control configuration."
    },
    {
      "pos": [
        3870,
        3999
      ],
      "content": "<bpt id=\"p34\">[</bpt>Get value from cache<ept id=\"p34\">](https://msdn.microsoft.com/library/azure/dn894086.aspx#GetFromCacheByKey)</ept><ph id=\"ph27\"/> - Retrieve a cached item by key."
    },
    {
      "pos": [
        4008,
        4141
      ],
      "content": "<bpt id=\"p35\">[</bpt>Store value in cache<ept id=\"p35\">](https://msdn.microsoft.com/library/azure/dn894086.aspx#StoreToCacheByKey)</ept><ph id=\"ph28\"/> - Store an item in the cache by key."
    },
    {
      "pos": [
        4146,
        4171
      ],
      "content": "<bpt id=\"p36\">[</bpt>Cross domain policies<ept id=\"p36\">][]</ept>"
    },
    {
      "pos": [
        4181,
        4302
      ],
      "content": "<bpt id=\"p37\">[</bpt>Allow cross-domain calls<ept id=\"p37\">][]</ept><ph id=\"ph29\"/> - Makes the API accessible from Adobe Flash and Microsoft Silverlight browser-based clients."
    },
    {
      "pos": [
        4311,
        4453
      ],
      "content": "<bpt id=\"p38\">[</bpt>CORS<ept id=\"p38\">][]</ept><ph id=\"ph30\"/> - Adds cross-origin resource sharing (CORS) support to an operation or an API to allow cross-domain calls from browser-based clients."
    },
    {
      "pos": [
        4462,
        4605
      ],
      "content": "<bpt id=\"p39\">[</bpt>JSONP<ept id=\"p39\">][]</ept><ph id=\"ph31\"/> - Adds JSON with padding (JSONP) support to an operation or an API to allow cross-domain calls from JavaScript browser-based clients."
    },
    {
      "pos": [
        4610,
        4637
      ],
      "content": "<bpt id=\"p40\">[</bpt>Transformation policies<ept id=\"p40\">][]</ept>"
    },
    {
      "pos": [
        4647,
        4724
      ],
      "content": "<bpt id=\"p41\">[</bpt>Convert JSON to XML<ept id=\"p41\">][]</ept><ph id=\"ph32\"/> - Converts request or response body from JSON to XML."
    },
    {
      "pos": [
        4733,
        4810
      ],
      "content": "<bpt id=\"p42\">[</bpt>Convert XML to JSON<ept id=\"p42\">][]</ept><ph id=\"ph33\"/> - Converts request or response body from XML to JSON."
    },
    {
      "pos": [
        4819,
        4938
      ],
      "content": "<bpt id=\"p43\">[</bpt>Find and replace string in body<ept id=\"p43\">][]</ept><ph id=\"ph34\"/> - Finds a request or response substring and replaces it with a different substring."
    },
    {
      "pos": [
        4947,
        5104
      ],
      "content": "<bpt id=\"p44\">[</bpt>Mask URLs in content<ept id=\"p44\">][]</ept><ph id=\"ph35\"/> - Re-writes (masks) links in the response body and in the location header so that they point to the equivalent link via the gateway."
    },
    {
      "pos": [
        5113,
        5191
      ],
      "content": "<bpt id=\"p45\">[</bpt>Set backend service<ept id=\"p45\">][]</ept><ph id=\"ph36\"/> - Changes the backend service for an incoming request."
    },
    {
      "pos": [
        5200,
        5272
      ],
      "content": "<bpt id=\"p46\">[</bpt>Set body<ept id=\"p46\">][]</ept><ph id=\"ph37\"/> - Sets the message body for incoming and outgoing requests."
    },
    {
      "pos": [
        5281,
        5410
      ],
      "content": "<bpt id=\"p47\">[</bpt>Set HTTP header<ept id=\"p47\">][]</ept><ph id=\"ph38\"/> - Assigns a value to an existing response and/or request header or adds a new response and/or request header."
    },
    {
      "pos": [
        5419,
        5519
      ],
      "content": "<bpt id=\"p48\">[</bpt>Set query string parameter<ept id=\"p48\">][]</ept><ph id=\"ph39\"/> - Adds, replaces value of, or deletes request query string parameter."
    },
    {
      "pos": [
        5528,
        5630
      ],
      "content": "<bpt id=\"p49\">[</bpt>Rewrite URL<ept id=\"p49\">][]</ept><ph id=\"ph40\"/> - Converts a request URL from its public form to the form expected by the web service."
    },
    {
      "pos": [
        5635,
        5645
      ],
      "content": "Next steps"
    },
    {
      "pos": [
        5647,
        5715
      ],
      "content": "For more information on policy expressions, see the following video."
    }
  ],
  "content": "<properties \n    pageTitle=\"Azure API Management Policy Reference\" \n    description=\"Learn about the policies available to configure API Management.\" \n    services=\"api-management\" \n    documentationCenter=\"\" \n    authors=\"steved0x\" \n    manager=\"dwrede\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"api-management\" \n    ms.workload=\"mobile\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"12/16/2015\" \n    ms.author=\"sdanie\"/>\n\n# Azure API Management Policy Reference\n\nThis section provides an index for the policies in the [API Management policy reference][]. For information on adding and configuring policies, see [Policies in API Management][].\n\nPolicy expressions can be used as attribute values or text values in any of the API Management policies, unless the policy specifies otherwise. Some policies such as the [Control flow][] and [Set variable][] policies are based on policy expressions. For more information, see [Advanced policies][] and [Policy expressions][]\n\n## Policy reference index\n\n-   [Access restriction policies][]\n    -   [Check HTTP header][] - Enforces existence and/or value of a HTTP Header.\n    -   [Limit call rate by subscription][] - Prevents API usage spikes by limiting call rate, on a per subscription basis.\n    -   [Limit call rate by key](https://msdn.microsoft.com/library/azure/dn894078.aspx#LimitCallRateByKey) - Prevents API usage spikes by limiting call rate, on a per key basis.\n    -   [Restrict caller IPs][] - Filters (allows/denies) calls from specific IP addresses and/or address ranges.\n    -   [Set usage quota by subscription][] - Allows you to enforce a renewable or lifetime call volume and/or bandwidth quota, on a per subscription basis.\n    -   [Set usage quota by key](https://msdn.microsoft.com/library/azure/dn894078.aspx#SetUsageQuotaByKey) - Allows you to enforce a renewable or lifetime call volume and/or bandwidth quota, on a per key basis.\n    -   [Validate JWT][] - Enforces existence and validity of a JWT extracted from either a specified HTTP Header or a specified query parameter.\n-   [Advanced policies][]\n    -   [Control flow][] - Conditionally applies policy statements based on the results of the evaluation of Boolean [expressions][].\n    -   [Forward request][] - Forwards the request to the backend service.\n    -   [Log to Event Hub][] - Sends messages in the specified format to a message target defined by a [Logger](https://msdn.microsoft.com/library/azure/mt592020.aspx#Logger) entity.\n    -   [Return response](https://msdn.microsoft.com/library/azure/dn894085.aspx#ReturnResponse) - Aborts pipeline execution and returns the specified response directly to the caller.\n    -   [Send one way request](https://msdn.microsoft.com/library/azure/dn894085.aspx#SendOneWayRequest) - Sends a request to the specified URL without waiting for a response.\n    -   [Send request](https://msdn.microsoft.com/library/azure/dn894085.aspx#SendRequest) - Sends a request to the specified URL.\n    -   [Set request method](https://msdn.microsoft.com/library/azure/dn894085.aspx#SetRequestMethod) - Allows you to change the HTTP method for a request.\n    -   [Set status](https://msdn.microsoft.com/library/azure/dn894085.aspx#SetStatus) - Changes the HTTP status code to the specified value.\n    -   [Set variable][] - Persist a value in a named [context][] variable for later access.\n-   [Authentication policies][]\n    -   [Authenticate with Basic][] - Authenticate with a backend service using Basic authentication.\n    -   [Authenticate with client certificate][] - Authenticate with a backend service using client certificates.\n-   [Caching policies][] \n    -   [Get from cache][] - Perform cache look up and return a valid cached response when available.\n    -   [Store to cache][] - Caches response according to the specified cache control configuration.\n    -   [Get value from cache](https://msdn.microsoft.com/library/azure/dn894086.aspx#GetFromCacheByKey) - Retrieve a cached item by key.\n    -   [Store value in cache](https://msdn.microsoft.com/library/azure/dn894086.aspx#StoreToCacheByKey) - Store an item in the cache by key.\n-   [Cross domain policies][] \n    -   [Allow cross-domain calls][] - Makes the API accessible from Adobe Flash and Microsoft Silverlight browser-based clients.\n    -   [CORS][] - Adds cross-origin resource sharing (CORS) support to an operation or an API to allow cross-domain calls from browser-based clients.\n    -   [JSONP][] - Adds JSON with padding (JSONP) support to an operation or an API to allow cross-domain calls from JavaScript browser-based clients.\n-   [Transformation policies][] \n    -   [Convert JSON to XML][] - Converts request or response body from JSON to XML.\n    -   [Convert XML to JSON][] - Converts request or response body from XML to JSON.\n    -   [Find and replace string in body][] - Finds a request or response substring and replaces it with a different substring.\n    -   [Mask URLs in content][] - Re-writes (masks) links in the response body and in the location header so that they point to the equivalent link via the gateway.\n    -   [Set backend service][] - Changes the backend service for an incoming request.\n    -   [Set body][] - Sets the message body for incoming and outgoing requests.\n    -   [Set HTTP header][] - Assigns a value to an existing response and/or request header or adds a new response and/or request header.\n    -   [Set query string parameter][] - Adds, replaces value of, or deletes request query string parameter.\n    -   [Rewrite URL][] - Converts a request URL from its public form to the form expected by the web service.\n\n## Next steps\n\nFor more information on policy expressions, see the following video.\n\n> [AZURE.VIDEO policy-expressions-in-azure-api-management]\n\n[Access restriction policies]: https://msdn.microsoft.com/library/azure/dn894078.aspx\n[Check HTTP header]: https://msdn.microsoft.com/library/azure/034febe3-465f-4840-9fc6-c448ef520b0f#CheckHTTPHeader\n[Limit call rate by subscription]: https://msdn.microsoft.com/library/azure/034febe3-465f-4840-9fc6-c448ef520b0f#LimitCallRate\n[Restrict caller IPs]: https://msdn.microsoft.com/library/azure/034febe3-465f-4840-9fc6-c448ef520b0f#RestrictCallerIPs\n[Set usage quota by subscription]: https://msdn.microsoft.com/library/azure/034febe3-465f-4840-9fc6-c448ef520b0f#SetUsageQuota\n[Validate JWT]: https://msdn.microsoft.com/library/azure/034febe3-465f-4840-9fc6-c448ef520b0f#ValidateJWT\n\n[Advanced policies]: https://msdn.microsoft.com/library/azure/dn894085.aspx\n[Control flow]: https://msdn.microsoft.com/library/azure/dn894085.aspx#choose\n[Set variable]: https://msdn.microsoft.com/library/azure/dn894085.aspx#set_variable\n[expressions]: https://msdn.microsoft.com/library/azure/dn910913.aspx\n[context]: https://msdn.microsoft.com/library/azure/ea160028-fc04-4782-aa26-4b8329df3448#ContextVariables\n[Forward request]: https://msdn.microsoft.com/library/azure/dn894085.aspx#ForwardRequest\n[Log to Event Hub]: https://msdn.microsoft.com/library/azure/dn894085.aspx#log-to-eventhub\n\n[Authentication policies]: https://msdn.microsoft.com/library/azure/dn894079.aspx\n[Authenticate with Basic]: https://msdn.microsoft.com/library/azure/061702a7-3a78-472b-a54a-f3b1e332490d#Basic\n[Authenticate with client certificate]: https://msdn.microsoft.com/library/azure/061702a7-3a78-472b-a54a-f3b1e332490d#ClientCertificate\n[Caching policies]: https://msdn.microsoft.com/library/azure/dn894086.aspx\n[Get from cache]: https://msdn.microsoft.com/library/azure/8147199c-24d8-439f-b2a9-da28a70a890c#GetFromCache\n[Store to cache]: https://msdn.microsoft.com/library/azure/8147199c-24d8-439f-b2a9-da28a70a890c#StoreToCache\n\n[Cross domain policies]: https://msdn.microsoft.com/library/azure/dn894084.aspx\n[Allow cross-domain calls]: https://msdn.microsoft.com/library/azure/7689d277-8abe-472a-a78c-e6d4bd43455d#AllowCrossDomainCalls\n[CORS]: https://msdn.microsoft.com/library/azure/7689d277-8abe-472a-a78c-e6d4bd43455d#CORS\n[JSONP]: https://msdn.microsoft.com/library/azure/7689d277-8abe-472a-a78c-e6d4bd43455d#JSONP\n\n[Transformation policies]: https://msdn.microsoft.com/library/azure/dn894083.aspx\n[Convert JSON to XML]: https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#ConvertJSONtoXML\n[Convert XML to JSON]: https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#ConvertXMLtoJSON\n[Find and replace string in body]: https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#Findandreplacestringinbody\n[Mask URLs in content]: https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#MaskURLSContent\n[Set backend service]: https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#SetBackendService\n[Set body]: https://msdn.microsoft.com/library/azure/dn894083.aspx#SetBody\n[Set HTTP header]: https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#SetHTTPheader\n[Set query string parameter]: https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#SetQueryStringParameter\n[Rewrite URL]: https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#RewriteURL\n\n\n\n[Policies in API Management]: api-management-howto-policies.md\n[API Management policy reference]: https://msdn.microsoft.com/library/azure/dn894081.aspx\n\n[Policy expressions]: https://msdn.microsoft.com/library/azure/dn910913.aspx\n\n "
}