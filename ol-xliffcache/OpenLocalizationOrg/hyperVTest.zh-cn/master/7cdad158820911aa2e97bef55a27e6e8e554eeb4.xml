{
  "nodes": [
    {
      "pos": [
        27,
        93
      ],
      "content": "Get started with a Hadoop emulator for HDInsight | Microsoft Azure"
    },
    {
      "pos": [
        112,
        260
      ],
      "content": "Use an installed emulator with a MapReduce tutorial and other samples to learn the Hadoop ecosystem. HDInsight emulator works like a Hadoop sandbox.",
      "nodes": [
        {
          "content": "Use an installed emulator with a MapReduce tutorial and other samples to learn the Hadoop ecosystem.",
          "pos": [
            0,
            100
          ]
        },
        {
          "content": "HDInsight emulator works like a Hadoop sandbox.",
          "pos": [
            101,
            148
          ]
        }
      ]
    },
    {
      "pos": [
        664,
        745
      ],
      "content": "Get started in the Hadoop ecosystem with the HDInsight Emulator, a Hadoop sandbox"
    },
    {
      "pos": [
        747,
        1140
      ],
      "content": "This tutorial gets you started with Hadoop clusters in the Microsoft HDInsight Emulator for Azure (formerly HDInsight Server Developer Preview). The HDInsight Emulator comes with the same components from the Hadoop ecosystem as Azure HDInsight. For details, including information on the versions deployed, see <bpt id=\"p1\">[</bpt>What version of Hadoop is in Azure HDInsight?<ept id=\"p1\">](hdinsight-component-versioning.md)</ept>.",
      "nodes": [
        {
          "content": "This tutorial gets you started with Hadoop clusters in the Microsoft HDInsight Emulator for Azure (formerly HDInsight Server Developer Preview).",
          "pos": [
            0,
            144
          ]
        },
        {
          "content": "The HDInsight Emulator comes with the same components from the Hadoop ecosystem as Azure HDInsight.",
          "pos": [
            145,
            244
          ]
        },
        {
          "content": "For details, including information on the versions deployed, see <bpt id=\"p1\">[</bpt>What version of Hadoop is in Azure HDInsight?<ept id=\"p1\">](hdinsight-component-versioning.md)</ept>.",
          "pos": [
            245,
            431
          ]
        }
      ]
    },
    {
      "pos": [
        1142,
        1242
      ],
      "content": "Once the emulator is installed, you follow a MapReduce tutorial for word count and then run samples."
    },
    {
      "pos": [
        1246,
        1349
      ],
      "content": "<ph id=\"ph2\">[AZURE.NOTE]</ph><ph id=\"ph3\"/> The HDInsight Emulator includes only a Hadoop cluster. It does not include HBase or Storm.",
      "nodes": [
        {
          "content": "<ph id=\"ph2\">[AZURE.NOTE]</ph><ph id=\"ph3\"/> The HDInsight Emulator includes only a Hadoop cluster.",
          "pos": [
            0,
            99
          ]
        },
        {
          "content": "It does not include HBase or Storm.",
          "pos": [
            100,
            135
          ]
        }
      ]
    },
    {
      "pos": [
        1352,
        1831
      ],
      "content": "The HDInsight Emulator provides a local development environment much like a Hadoop sandbox. If you are familiar with Hadoop, you can get started with the HDInsight Emulator by using the Hadoop Distributed File System (HDFS). In HDInsight, the default file system is Azure Blob storage. So eventually, you will want to develop your jobs by using Azure Blob storage. To use Azure Blob storage with the HDInsight Emulator, you must make changes to the configuration of the emulator.",
      "nodes": [
        {
          "content": "The HDInsight Emulator provides a local development environment much like a Hadoop sandbox.",
          "pos": [
            0,
            91
          ]
        },
        {
          "content": "If you are familiar with Hadoop, you can get started with the HDInsight Emulator by using the Hadoop Distributed File System (HDFS).",
          "pos": [
            92,
            224
          ]
        },
        {
          "content": "In HDInsight, the default file system is Azure Blob storage.",
          "pos": [
            225,
            285
          ]
        },
        {
          "content": "So eventually, you will want to develop your jobs by using Azure Blob storage.",
          "pos": [
            286,
            364
          ]
        },
        {
          "content": "To use Azure Blob storage with the HDInsight Emulator, you must make changes to the configuration of the emulator.",
          "pos": [
            365,
            479
          ]
        }
      ]
    },
    {
      "pos": [
        1835,
        1909
      ],
      "content": "<ph id=\"ph4\">[AZURE.NOTE]</ph><ph id=\"ph5\"/> The HDInsight Emulator can use only a single node deployment."
    },
    {
      "pos": [
        1915,
        1928
      ],
      "content": "Prerequisites"
    },
    {
      "pos": [
        1929,
        1989
      ],
      "content": "Before you begin this tutorial, you must have the following:"
    },
    {
      "pos": [
        1993,
        2106
      ],
      "content": "The HDInsight Emulator requires a 64-bit version of Windows. One of the following requirements must be satisfied:",
      "nodes": [
        {
          "content": "The HDInsight Emulator requires a 64-bit version of Windows.",
          "pos": [
            0,
            60
          ]
        },
        {
          "content": "One of the following requirements must be satisfied:",
          "pos": [
            61,
            113
          ]
        }
      ]
    },
    {
      "pos": [
        2114,
        2124
      ],
      "content": "Windows 10"
    },
    {
      "pos": [
        2131,
        2140
      ],
      "content": "Windows 8"
    },
    {
      "pos": [
        2147,
        2166
      ],
      "content": "Windows Server 2012"
    },
    {
      "pos": [
        2170,
        2315
      ],
      "content": "<bpt id=\"p2\">**</bpt>Azure PowerShell<ept id=\"p2\">**</ept>. See <bpt id=\"p3\">[</bpt>Install and use Azure PowerShell<ept id=\"p3\">](https://azure.microsoft.com/documentation/videos/install-and-use-azure-powershell/)</ept>.",
      "nodes": [
        {
          "content": "<bpt id=\"p2\">**</bpt>Azure PowerShell<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            59
          ]
        },
        {
          "content": "See <bpt id=\"p3\">[</bpt>Install and use Azure PowerShell<ept id=\"p3\">](https://azure.microsoft.com/documentation/videos/install-and-use-azure-powershell/)</ept>.",
          "pos": [
            60,
            221
          ]
        }
      ]
    },
    {
      "pos": [
        2318,
        2320
      ],
      "content": "##"
    },
    {
      "pos": [
        2342,
        2372
      ],
      "content": "Install the HDInsight Emulator"
    },
    {
      "pos": [
        2374,
        2463
      ],
      "content": "The Microsoft HDInsight Emulator is installable via the Microsoft Web Platform Installer."
    },
    {
      "pos": [
        2469,
        2756
      ],
      "content": "<ph id=\"ph6\">[AZURE.NOTE]</ph><ph id=\"ph7\"/> The HDInsight Emulator currently supports only English operating systems. If you have a previous version of the emulator installed, you must uninstall the following two components from Control Panel/Programs and Features before installing the latest version of the emulator:",
      "nodes": [
        {
          "content": "<ph id=\"ph6\">[AZURE.NOTE]</ph><ph id=\"ph7\"/> The HDInsight Emulator currently supports only English operating systems.",
          "pos": [
            0,
            118
          ]
        },
        {
          "content": "If you have a previous version of the emulator installed, you must uninstall the following two components from Control Panel/Programs and Features before installing the latest version of the emulator:",
          "pos": [
            119,
            319
          ]
        }
      ]
    },
    {
      "pos": [
        2762,
        2763
      ],
      "content": "\n"
    },
    {
      "pos": [
        2767,
        2860
      ],
      "content": "Microsoft HDInsight Emulator for Azure or HDInsight Developer Preview, whichever is installed"
    },
    {
      "pos": [
        2865,
        2866
      ],
      "content": "\n"
    },
    {
      "pos": [
        2870,
        2895
      ],
      "content": "Hortonworks Data Platform"
    },
    {
      "pos": [
        2900,
        2901
      ],
      "content": "\n"
    },
    {
      "pos": [
        2909,
        2946
      ],
      "content": "<bpt id=\"p4\">**</bpt>To install the HDInsight Emulator<ept id=\"p4\">**</ept>"
    },
    {
      "pos": [
        2951,
        3085
      ],
      "content": "Open Internet Explorer, and then browse to the <bpt id=\"p5\">[</bpt>Microsoft HDInsight Emulator for Azure installation page<ept id=\"p5\">][hdinsight-emulator-install]</ept>."
    },
    {
      "pos": [
        3089,
        3111
      ],
      "content": "Click <bpt id=\"p6\">**</bpt>Install Now<ept id=\"p6\">**</ept>."
    },
    {
      "pos": [
        3115,
        3207
      ],
      "content": "Click <bpt id=\"p7\">**</bpt>Run<ept id=\"p7\">**</ept><ph id=\"ph8\"/> when prompted for the installation of HDINSIGHT.exe at the bottom of the page."
    },
    {
      "pos": [
        3211,
        3360
      ],
      "content": "Click the <bpt id=\"p8\">**</bpt>Yes<ept id=\"p8\">**</ept><ph id=\"ph9\"/> button in the <bpt id=\"p9\">**</bpt>User Account Control<ept id=\"p9\">**</ept><ph id=\"ph10\"/> window that pops up to complete the installation. The Web Platform Installer window appears.",
      "nodes": [
        {
          "content": "Click the <bpt id=\"p8\">**</bpt>Yes<ept id=\"p8\">**</ept><ph id=\"ph9\"/> button in the <bpt id=\"p9\">**</bpt>User Account Control<ept id=\"p9\">**</ept><ph id=\"ph10\"/> window that pops up to complete the installation.",
          "pos": [
            0,
            211
          ]
        },
        {
          "content": "The Web Platform Installer window appears.",
          "pos": [
            212,
            254
          ]
        }
      ]
    },
    {
      "pos": [
        3364,
        3408
      ],
      "content": "Click <bpt id=\"p10\">**</bpt>Install<ept id=\"p10\">**</ept><ph id=\"ph11\"/> on the bottom of the page."
    },
    {
      "pos": [
        3412,
        3463
      ],
      "content": "Click <bpt id=\"p11\">**</bpt>I Accept<ept id=\"p11\">**</ept><ph id=\"ph12\"/> to agree to the licensing terms."
    },
    {
      "pos": [
        3467,
        3594
      ],
      "content": "Verify that the Web Platform Installer shows <bpt id=\"p12\">**</bpt>The following products were successfully installed<ept id=\"p12\">**</ept>, and then click <bpt id=\"p13\">**</bpt>Finish<ept id=\"p13\">**</ept>."
    },
    {
      "pos": [
        3598,
        3656
      ],
      "content": "Click <bpt id=\"p14\">**</bpt>Exit<ept id=\"p14\">**</ept><ph id=\"ph13\"/> to close the Web Platform Installer window."
    },
    {
      "pos": [
        3658,
        3707
      ],
      "content": "<bpt id=\"p15\">**</bpt>To verify the HDInsight Emulator installation<ept id=\"p15\">**</ept>"
    },
    {
      "pos": [
        3709,
        3815
      ],
      "content": "The installation should have installed three icons on your desktop. The three icons are linked as follows:",
      "nodes": [
        {
          "content": "The installation should have installed three icons on your desktop.",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "The three icons are linked as follows:",
          "pos": [
            68,
            106
          ]
        }
      ]
    },
    {
      "pos": [
        3819,
        3945
      ],
      "content": "<bpt id=\"p16\">**</bpt>Hadoop Command Line<ept id=\"p16\">**</ept><ph id=\"ph14\"/> - The Hadoop command prompt from which MapReduce, Pig and Hive jobs are run in the HDInsight Emulator."
    },
    {
      "pos": [
        3949,
        4248
      ],
      "content": "<bpt id=\"p17\">**</bpt>Hadoop NameNode Status<ept id=\"p17\">**</ept><ph id=\"ph15\"/> - The NameNode maintains a tree-based directory for all the files in HDFS. It also keeps track of where the data for all the files are kept in a Hadoop cluster. Clients communicate with the NameNode in order to figure out where the data nodes for all the files are stored.",
      "nodes": [
        {
          "content": "<bpt id=\"p17\">**</bpt>Hadoop NameNode Status<ept id=\"p17\">**</ept><ph id=\"ph15\"/> - The NameNode maintains a tree-based directory for all the files in HDFS.",
          "pos": [
            0,
            156
          ]
        },
        {
          "content": "It also keeps track of where the data for all the files are kept in a Hadoop cluster.",
          "pos": [
            157,
            242
          ]
        },
        {
          "content": "Clients communicate with the NameNode in order to figure out where the data nodes for all the files are stored.",
          "pos": [
            243,
            354
          ]
        }
      ]
    },
    {
      "pos": [
        4252,
        4346
      ],
      "content": "<bpt id=\"p18\">**</bpt>Hadoop Yarn Status<ept id=\"p18\">**</ept><ph id=\"ph16\"/> - The job tracker that allocates MapReduce tasks to nodes in a cluster."
    },
    {
      "pos": [
        4348,
        4469
      ],
      "content": "The installation should have also installed several local services. The following is a screenshot of the Services window:",
      "nodes": [
        {
          "content": "The installation should have also installed several local services.",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "The following is a screenshot of the Services window:",
          "pos": [
            68,
            121
          ]
        }
      ]
    },
    {
      "pos": [
        4471,
        4559
      ],
      "content": "<ph id=\"ph17\">![</ph>Hadoop ecosystem services listed in the emulator window.<ph id=\"ph18\">][image-hdi-emulator-services]</ph>"
    },
    {
      "pos": [
        4561,
        4859
      ],
      "content": "The services related to the HDInsight Emulator are not started by default. To start the services, from the Hadoop command line, run <bpt id=\"p19\">**</bpt>start\\_local\\_hdp_services.cmd<ept id=\"p19\">**</ept><ph id=\"ph19\"/> under C:\\hdp (default location). To automatically start the services after the computer restarts, run <bpt id=\"p20\">**</bpt>set-onebox-autostart.cmd<ept id=\"p20\">**</ept>.",
      "nodes": [
        {
          "content": "The services related to the HDInsight Emulator are not started by default.",
          "pos": [
            0,
            74
          ]
        },
        {
          "content": "To start the services, from the Hadoop command line, run <bpt id=\"p19\">**</bpt>start\\_local\\_hdp_services.cmd<ept id=\"p19\">**</ept><ph id=\"ph19\"/> under C:\\hdp (default location).",
          "pos": [
            75,
            254
          ]
        },
        {
          "content": "To automatically start the services after the computer restarts, run <bpt id=\"p20\">**</bpt>set-onebox-autostart.cmd<ept id=\"p20\">**</ept>.",
          "pos": [
            255,
            393
          ]
        }
      ]
    },
    {
      "pos": [
        4863,
        5140
      ],
      "content": "For known issues with installing and running the HDInsight Emulator, see the <bpt id=\"p21\">[</bpt>HDInsight Emulator Release Notes<ept id=\"p21\">](hdinsight-emulator-release-notes.md)</ept>. The installation log is located at <bpt id=\"p22\">**</bpt>C:\\HadoopFeaturePackSetup\\HadoopFeaturePackSetupTools\\gettingStarted.winpkg.install.log<ept id=\"p22\">**</ept>.",
      "nodes": [
        {
          "content": "For known issues with installing and running the HDInsight Emulator, see the <bpt id=\"p21\">[</bpt>HDInsight Emulator Release Notes<ept id=\"p21\">](hdinsight-emulator-release-notes.md)</ept>.",
          "pos": [
            0,
            189
          ]
        },
        {
          "content": "The installation log is located at <bpt id=\"p22\">**</bpt>C:\\HadoopFeaturePackSetup\\HadoopFeaturePackSetupTools\\gettingStarted.winpkg.install.log<ept id=\"p22\">**</ept>.",
          "pos": [
            190,
            357
          ]
        }
      ]
    },
    {
      "pos": [
        5142,
        5144
      ],
      "content": "##"
    },
    {
      "pos": [
        5166,
        5217
      ],
      "content": "Use Emulator with HDInsight Tools for Visual Studio"
    },
    {
      "pos": [
        5219,
        5522
      ],
      "content": "You can use HDInsight tools for Visual Studio to connect to the HDInsight Emulator. For information on how to use the Visual Studio tools with HDInsight clusters on Azure, see <bpt id=\"p23\">[</bpt>Get started using HDInsight Hadoop Tools for Visual Studio<ept id=\"p23\">](../HDInsight/hdinsight-hadoop-visual-studio-tools-get-started.md)</ept>.",
      "nodes": [
        {
          "content": "You can use HDInsight tools for Visual Studio to connect to the HDInsight Emulator.",
          "pos": [
            0,
            83
          ]
        },
        {
          "content": "For information on how to use the Visual Studio tools with HDInsight clusters on Azure, see <bpt id=\"p23\">[</bpt>Get started using HDInsight Hadoop Tools for Visual Studio<ept id=\"p23\">](../HDInsight/hdinsight-hadoop-visual-studio-tools-get-started.md)</ept>.",
          "pos": [
            84,
            343
          ]
        }
      ]
    },
    {
      "pos": [
        5528,
        5568
      ],
      "content": "Install the HDInsight tools for Emulator"
    },
    {
      "pos": [
        5570,
        5730
      ],
      "content": "For instructions on how to install the HDInsight Visual Studio tools, see <bpt id=\"p24\">[</bpt>here<ept id=\"p24\">](../HDInsight/hdinsight-hadoop-visual-studio-tools-get-started.md#installation)</ept>."
    },
    {
      "pos": [
        5736,
        5769
      ],
      "content": "Connect to the HDInsight Emulator"
    },
    {
      "pos": [
        5774,
        5793
      ],
      "content": "Open Visual Studio."
    },
    {
      "pos": [
        5797,
        5882
      ],
      "content": "From the <bpt id=\"p25\">**</bpt>View<ept id=\"p25\">**</ept><ph id=\"ph20\"/> menu, click <bpt id=\"p26\">**</bpt>Server Explorer<ept id=\"p26\">**</ept><ph id=\"ph21\"/> to open the Server Explorer window."
    },
    {
      "pos": [
        5886,
        5980
      ],
      "content": "Expand <bpt id=\"p27\">**</bpt>Azure<ept id=\"p27\">**</ept>, right-click <bpt id=\"p28\">**</bpt>HDInsight<ept id=\"p28\">**</ept>, and then click <bpt id=\"p29\">**</bpt>Connect to HDInsight Emulator<ept id=\"p29\">**</ept>."
    },
    {
      "pos": [
        5987,
        6123
      ],
      "content": "<ph id=\"ph22\">![</ph>Visual Studio view: Connect to HDInsight emulator on menu.<ph id=\"ph23\">](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.connect.vs.png)</ph>"
    },
    {
      "pos": [
        6128,
        6472
      ],
      "content": "In the Connect to HDInsight Emulator dialog box, verify the values for WebHCat, HiveServer2, and WebHDFS endpoints, and then click <bpt id=\"p30\">**</bpt>Next<ept id=\"p30\">**</ept>. The values populated by default should work if you did not make any changes to the default configuration of the Emulator. If you made any changes, update the values in the dialog box and then click Next.",
      "nodes": [
        {
          "content": "In the Connect to HDInsight Emulator dialog box, verify the values for WebHCat, HiveServer2, and WebHDFS endpoints, and then click <bpt id=\"p30\">**</bpt>Next<ept id=\"p30\">**</ept>.",
          "pos": [
            0,
            180
          ]
        },
        {
          "content": "The values populated by default should work if you did not make any changes to the default configuration of the Emulator.",
          "pos": [
            181,
            302
          ]
        },
        {
          "content": "If you made any changes, update the values in the dialog box and then click Next.",
          "pos": [
            303,
            384
          ]
        }
      ]
    },
    {
      "pos": [
        6478,
        6618
      ],
      "content": "<ph id=\"ph24\">![</ph>Connect to HDInsight emulator dialog box with settings.<ph id=\"ph25\">](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.connect.vs.dialog.png)</ph>"
    },
    {
      "pos": [
        6623,
        6755
      ],
      "content": "Once the connection is successfully established, click <bpt id=\"p31\">**</bpt>Finish<ept id=\"p31\">**</ept>. You should now see the HDInsight Emulator in the Server Explorer.",
      "nodes": [
        {
          "content": "Once the connection is successfully established, click <bpt id=\"p31\">**</bpt>Finish<ept id=\"p31\">**</ept>.",
          "pos": [
            0,
            106
          ]
        },
        {
          "content": "You should now see the HDInsight Emulator in the Server Explorer.",
          "pos": [
            107,
            172
          ]
        }
      ]
    },
    {
      "pos": [
        6761,
        6920
      ],
      "content": "<ph id=\"ph26\">![</ph>Server Explorer showing HDInsight local emulator - a Hadoop sanbox - connected.<ph id=\"ph27\">](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.vs.connected.png)</ph>"
    },
    {
      "pos": [
        6922,
        7271
      ],
      "content": "Once the connection is successfully established, you can use the HDInsight VS tools with Emulator, just like you would use it with an Azure HDInsight cluster. For instructions on how to use VS tools with Azure HDInsight clusters, see <bpt id=\"p32\">[</bpt>Using HDInsight Hadoop Tools for Visual Studio<ept id=\"p32\">](../HDInsight/hdinsight-hadoop-visual-studio-tools-get-started.md)</ept>.",
      "nodes": [
        {
          "content": "Once the connection is successfully established, you can use the HDInsight VS tools with Emulator, just like you would use it with an Azure HDInsight cluster.",
          "pos": [
            0,
            158
          ]
        },
        {
          "content": "For instructions on how to use VS tools with Azure HDInsight clusters, see <bpt id=\"p32\">[</bpt>Using HDInsight Hadoop Tools for Visual Studio<ept id=\"p32\">](../HDInsight/hdinsight-hadoop-visual-studio-tools-get-started.md)</ept>.",
          "pos": [
            159,
            389
          ]
        }
      ]
    },
    {
      "pos": [
        7276,
        7342
      ],
      "content": "Troubleshoot: Connecting HDInsight Tools to the HDInsight Emulator"
    },
    {
      "pos": [
        7347,
        7862
      ],
      "content": "While connecting to the HDInsight Emulator, even though the dialog box shows that HiveServer2 connected successfully, you must manually set <bpt id=\"p33\">**</bpt>hive.security.authorization.enabled property<ept id=\"p33\">**</ept><ph id=\"ph28\"/> to <bpt id=\"p34\">**</bpt>false<ept id=\"p34\">**</ept><ph id=\"ph29\"/> in the Hive configuration file at C:\\hdp\\hive-<bpt id=\"p35\">*</bpt>version<ept id=\"p35\">*</ept>\\conf\\hive-site.xml, and then restart the local Emulator. HDInsight Tools for Visual Studio connects to HiveServer2 only when you are previewing the top 100 rows of your table. If you do not intend to use such a query, you can leave hive configuration as-is.",
      "nodes": [
        {
          "content": "While connecting to the HDInsight Emulator, even though the dialog box shows that HiveServer2 connected successfully, you must manually set <bpt id=\"p33\">**</bpt>hive.security.authorization.enabled property<ept id=\"p33\">**</ept><ph id=\"ph28\"/> to <bpt id=\"p34\">**</bpt>false<ept id=\"p34\">**</ept><ph id=\"ph29\"/> in the Hive configuration file at C:\\hdp\\hive-<bpt id=\"p35\">*</bpt>version<ept id=\"p35\">*</ept>\\conf\\hive-site.xml, and then restart the local Emulator.",
          "pos": [
            0,
            464
          ]
        },
        {
          "content": "HDInsight Tools for Visual Studio connects to HiveServer2 only when you are previewing the top 100 rows of your table.",
          "pos": [
            465,
            583
          ]
        },
        {
          "content": "If you do not intend to use such a query, you can leave hive configuration as-is.",
          "pos": [
            584,
            665
          ]
        }
      ]
    },
    {
      "pos": [
        7867,
        8214
      ],
      "content": "If you are using dynamic IP allocation (DHCP) on the computer running the HDInsight Emulator, you might need to update C:\\hdp\\hadoop-<bpt id=\"p36\">*</bpt>version<ept id=\"p36\">*</ept>\\etc\\hadoop\\core-site.xml and change the value of property <bpt id=\"p37\">**</bpt>hadoop.proxyuser.hadoop.hosts<ept id=\"p37\">**</ept><ph id=\"ph30\"/> to (*). This enables Hadoop user to connect from all hosts to impersonate the user you entered in Visual Studio.",
      "nodes": [
        {
          "content": "If you are using dynamic IP allocation (DHCP) on the computer running the HDInsight Emulator, you might need to update C:\\hdp\\hadoop-<bpt id=\"p36\">*</bpt>version<ept id=\"p36\">*</ept>\\etc\\hadoop\\core-site.xml and change the value of property <bpt id=\"p37\">**</bpt>hadoop.proxyuser.hadoop.hosts<ept id=\"p37\">**</ept><ph id=\"ph30\"/> to (*).",
          "pos": [
            0,
            337
          ]
        },
        {
          "content": "This enables Hadoop user to connect from all hosts to impersonate the user you entered in Visual Studio.",
          "pos": [
            338,
            442
          ]
        }
      ]
    },
    {
      "pos": [
        8343,
        8700
      ],
      "content": "You might get an error when Visual Studio tries to connect to WebHCat service (“error”: “Could not find job job_XXXX_0001”). In this case, you must restart the WebHCat service and try again. To restart the WebHCat service, start the <bpt id=\"p38\">**</bpt>Services<ept id=\"p38\">**</ept><ph id=\"ph31\"/> MMC, right-click <bpt id=\"p39\">**</bpt>Apache Hadoop Templeton<ept id=\"p39\">**</ept><ph id=\"ph32\"/> (this is the old name for WebHCat service), and click <bpt id=\"p40\">**</bpt>Restart<ept id=\"p40\">**</ept>.",
      "nodes": [
        {
          "content": "You might get an error when Visual Studio tries to connect to WebHCat service (“error”: “Could not find job job_XXXX_0001”).",
          "pos": [
            0,
            124
          ]
        },
        {
          "content": "In this case, you must restart the WebHCat service and try again.",
          "pos": [
            125,
            190
          ]
        },
        {
          "content": "To restart the WebHCat service, start the <bpt id=\"p38\">**</bpt>Services<ept id=\"p38\">**</ept><ph id=\"ph31\"/> MMC, right-click <bpt id=\"p39\">**</bpt>Apache Hadoop Templeton<ept id=\"p39\">**</ept><ph id=\"ph32\"/> (this is the old name for WebHCat service), and click <bpt id=\"p40\">**</bpt>Restart<ept id=\"p40\">**</ept>.",
          "pos": [
            191,
            507
          ]
        }
      ]
    },
    {
      "pos": [
        8702,
        8704
      ],
      "content": "##"
    },
    {
      "pos": [
        8731,
        8762
      ],
      "content": "A word-count MapReduce tutorial"
    },
    {
      "pos": [
        8764,
        9034
      ],
      "content": "Now that you have the HDInsight Emulator configured on your workstation, try this MapReduce tutorial to test the installation. You will first upload some data files to HDFS, and then run a word count MapReduce job to count the frequency of specific words in those files.",
      "nodes": [
        {
          "content": "Now that you have the HDInsight Emulator configured on your workstation, try this MapReduce tutorial to test the installation.",
          "pos": [
            0,
            126
          ]
        },
        {
          "content": "You will first upload some data files to HDFS, and then run a word count MapReduce job to count the frequency of specific words in those files.",
          "pos": [
            127,
            270
          ]
        }
      ]
    },
    {
      "pos": [
        9036,
        9243
      ],
      "content": "The word-counting MapReduce program has been packaged into <bpt id=\"p41\">*</bpt>hadoop-mapreduce-examples-2.4.0.2.1.3.0-1981.jar<ept id=\"p41\">*</ept>. The jar file is located at the <bpt id=\"p42\">*</bpt>C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981\\share\\hadoop\\mapreduce<ept id=\"p42\">*</ept><ph id=\"ph33\"/> folder.",
      "nodes": [
        {
          "content": "The word-counting MapReduce program has been packaged into <bpt id=\"p41\">*</bpt>hadoop-mapreduce-examples-2.4.0.2.1.3.0-1981.jar<ept id=\"p41\">*</ept>.",
          "pos": [
            0,
            150
          ]
        },
        {
          "content": "The jar file is located at the <bpt id=\"p42\">*</bpt>C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981\\share\\hadoop\\mapreduce<ept id=\"p42\">*</ept><ph id=\"ph33\"/> folder.",
          "pos": [
            151,
            302
          ]
        }
      ]
    },
    {
      "pos": [
        9245,
        9298
      ],
      "content": "The MapReduce job to count words takes two arguments:"
    },
    {
      "pos": [
        9302,
        9384
      ],
      "content": "An input folder. You will use <bpt id=\"p43\">*</bpt>hdfs://localhost/user/HDIUser<ept id=\"p43\">*</ept><ph id=\"ph34\"/> as the input folder.",
      "nodes": [
        {
          "content": "An input folder.",
          "pos": [
            0,
            16
          ]
        },
        {
          "content": "You will use <bpt id=\"p43\">*</bpt>hdfs://localhost/user/HDIUser<ept id=\"p43\">*</ept><ph id=\"ph34\"/> as the input folder.",
          "pos": [
            17,
            137
          ]
        }
      ]
    },
    {
      "pos": [
        9387,
        9714
      ],
      "content": "An output folder. You will use <bpt id=\"p44\">*</bpt>hdfs://localhost/user/HDIUser/WordCount_Output<ept id=\"p44\">*</ept><ph id=\"ph35\"/> as the output folder. The output folder cannot be an existing folder, or the MapReduce job will fail. If you want to run the MapReduce job for the second time, you must either specify a different output folder or delete the existing output folder.",
      "nodes": [
        {
          "content": "An output folder.",
          "pos": [
            0,
            17
          ]
        },
        {
          "content": "You will use <bpt id=\"p44\">*</bpt>hdfs://localhost/user/HDIUser/WordCount_Output<ept id=\"p44\">*</ept><ph id=\"ph35\"/> as the output folder.",
          "pos": [
            18,
            156
          ]
        },
        {
          "content": "The output folder cannot be an existing folder, or the MapReduce job will fail.",
          "pos": [
            157,
            236
          ]
        },
        {
          "content": "If you want to run the MapReduce job for the second time, you must either specify a different output folder or delete the existing output folder.",
          "pos": [
            237,
            382
          ]
        }
      ]
    },
    {
      "pos": [
        9716,
        9755
      ],
      "content": "<bpt id=\"p45\">**</bpt>To run the word-count MapReduce job<ept id=\"p45\">**</ept>"
    },
    {
      "pos": [
        9760,
        9884
      ],
      "content": "From the desktop, double-click <bpt id=\"p46\">**</bpt>Hadoop Command Line<ept id=\"p46\">**</ept><ph id=\"ph36\"/> to open the Hadoop command-line window. The current folder should be:",
      "nodes": [
        {
          "content": "From the desktop, double-click <bpt id=\"p46\">**</bpt>Hadoop Command Line<ept id=\"p46\">**</ept><ph id=\"ph36\"/> to open the Hadoop command-line window.",
          "pos": [
            0,
            149
          ]
        },
        {
          "content": "The current folder should be:",
          "pos": [
            150,
            179
          ]
        }
      ]
    },
    {
      "pos": [
        9932,
        9966
      ],
      "content": "If not, run the following command:"
    },
    {
      "pos": [
        9997,
        10093
      ],
      "content": "Run the following Hadoop commands to make an HDFS folder for storing the input and output files:"
    },
    {
      "pos": [
        10169,
        10240
      ],
      "content": "Run the following Hadoop command to copy some local text files to HDFS:"
    },
    {
      "pos": [
        10356,
        10428
      ],
      "content": "Run the following command to list the files in the /user/HDIUser folder:"
    },
    {
      "pos": [
        10471,
        10506
      ],
      "content": "You should see the following files:"
    },
    {
      "pos": [
        10965,
        11027
      ],
      "content": "Run the following command to run the word-count MapReduce job:"
    },
    {
      "pos": [
        11251,
        11349
      ],
      "content": "Run the following command to list the number of words with \"windows\" in them from the output file:"
    },
    {
      "pos": [
        11443,
        11464
      ],
      "content": "The output should be:"
    },
    {
      "pos": [
        11657,
        11751
      ],
      "content": "For more information on Hadoop commands, see <bpt id=\"p47\">[</bpt>Hadoop commands manual<ept id=\"p47\">][hadoop-commands-manual]</ept>."
    },
    {
      "pos": [
        11753,
        11755
      ],
      "content": "##"
    },
    {
      "pos": [
        11791,
        11818
      ],
      "content": "Analyze sample web log data"
    },
    {
      "pos": [
        11820,
        12190
      ],
      "content": "The HDInsight Emulator installation provides some samples to get users started with learning Apache Hadoop-based services on Windows. These samples cover some tasks that are typically needed when processing a big dataset. Building on the MapReduce tutorial above, the the samples will help you become more familiar with the MapReduce programming model and its ecosystem.",
      "nodes": [
        {
          "content": "The HDInsight Emulator installation provides some samples to get users started with learning Apache Hadoop-based services on Windows.",
          "pos": [
            0,
            133
          ]
        },
        {
          "content": "These samples cover some tasks that are typically needed when processing a big dataset.",
          "pos": [
            134,
            221
          ]
        },
        {
          "content": "Building on the MapReduce tutorial above, the the samples will help you become more familiar with the MapReduce programming model and its ecosystem.",
          "pos": [
            222,
            370
          ]
        }
      ]
    },
    {
      "pos": [
        12192,
        12883
      ],
      "content": "The sample data is organized around processing IIS World Wide Web Consortium (W3C) log data. A data generation tool is provided to create and import the datasets in various sizes to HDFS or Azure Blob storage. (See <bpt id=\"p48\">[</bpt>Use Azure Blob storage for HDInsight<ept id=\"p48\">](hdinsight-hadoop-use-blob-storage.md)</ept><ph id=\"ph37\"/> for more information). MapReduce, Pig, or Hive jobs can then be run on the pages of data generated by the Azure PowerShell script. Pig and Hive scripts are a layer of abstraction over MapReduce, and eventually compile to MapReduce programs. You can run a series of jobs to observe the effects of using these different technologies and how the data size affects the execution of the processing tasks.",
      "nodes": [
        {
          "content": "The sample data is organized around processing IIS World Wide Web Consortium (W3C) log data.",
          "pos": [
            0,
            92
          ]
        },
        {
          "content": "A data generation tool is provided to create and import the datasets in various sizes to HDFS or Azure Blob storage.",
          "pos": [
            93,
            209
          ]
        },
        {
          "content": "(See <bpt id=\"p48\">[</bpt>Use Azure Blob storage for HDInsight<ept id=\"p48\">](hdinsight-hadoop-use-blob-storage.md)</ept><ph id=\"ph37\"/> for more information).",
          "pos": [
            210,
            369
          ]
        },
        {
          "content": "MapReduce, Pig, or Hive jobs can then be run on the pages of data generated by the Azure PowerShell script.",
          "pos": [
            370,
            477
          ]
        },
        {
          "content": "Pig and Hive scripts are a layer of abstraction over MapReduce, and eventually compile to MapReduce programs.",
          "pos": [
            478,
            587
          ]
        },
        {
          "content": "You can run a series of jobs to observe the effects of using these different technologies and how the data size affects the execution of the processing tasks.",
          "pos": [
            588,
            746
          ]
        }
      ]
    },
    {
      "pos": [
        12889,
        12904
      ],
      "content": "In this section"
    },
    {
      "pos": [
        12908,
        12951
      ],
      "content": "<bpt id=\"p49\">[</bpt>The IIS W3C log-data scenario<ept id=\"p49\">](#scenarios)</ept>"
    },
    {
      "pos": [
        12954,
        12991
      ],
      "content": "<bpt id=\"p50\">[</bpt>Load sample W3C log data<ept id=\"p50\">](#loaddata)</ept>"
    },
    {
      "pos": [
        12994,
        13034
      ],
      "content": "<bpt id=\"p51\">[</bpt>Run Java MapReduce job<ept id=\"p51\">](#javamapreduce)</ept>"
    },
    {
      "pos": [
        13037,
        13058
      ],
      "content": "<bpt id=\"p52\">[</bpt>Run Hive job<ept id=\"p52\">](#hive)</ept>"
    },
    {
      "pos": [
        13061,
        13080
      ],
      "content": "<bpt id=\"p53\">[</bpt>Run Pig job<ept id=\"p53\">](#pig)</ept>"
    },
    {
      "pos": [
        13083,
        13114
      ],
      "content": "<bpt id=\"p54\">[</bpt>Rebuild the samples<ept id=\"p54\">](#rebuild)</ept>"
    },
    {
      "pos": [
        13116,
        13119
      ],
      "content": "###"
    },
    {
      "pos": [
        13143,
        13173
      ],
      "content": "The IIS W3C log-data scenarios"
    },
    {
      "pos": [
        13175,
        13407
      ],
      "content": "The W3C scenario generates and imports IIS W3C log data in three sizes into HDFS or Azure Blob storage: 1MB (small), 500MB (medium), and 2GB (large). It provides three job types and implements each of them in C#, Java, Pig and Hive.",
      "nodes": [
        {
          "content": "The W3C scenario generates and imports IIS W3C log data in three sizes into HDFS or Azure Blob storage: 1MB (small), 500MB (medium), and 2GB (large).",
          "pos": [
            0,
            149
          ]
        },
        {
          "content": "It provides three job types and implements each of them in C#, Java, Pig and Hive.",
          "pos": [
            150,
            232
          ]
        }
      ]
    },
    {
      "pos": [
        13411,
        13484
      ],
      "content": "<bpt id=\"p55\">**</bpt>totalhits<ept id=\"p55\">**</ept><ph id=\"ph38\"/> - Calculates the total number of requests for a given page."
    },
    {
      "pos": [
        13487,
        13571
      ],
      "content": "<bpt id=\"p56\">**</bpt>avgtime<ept id=\"p56\">**</ept><ph id=\"ph39\"/> - Calculates the average time taken (in seconds) for a request per page."
    },
    {
      "pos": [
        13574,
        13680
      ],
      "content": "<bpt id=\"p57\">**</bpt>errors<ept id=\"p57\">**</ept><ph id=\"ph40\"/> - Calculates the number of errors per page, per hour, for requests whose status was 404 or 500."
    },
    {
      "pos": [
        13682,
        13926
      ],
      "content": "These samples and their documentation do not provide an in-depth study or full implementation of the key Hadoop technologies. The cluster used has only a single node and so the effect of adding more nodes cannot, with this release, be observed.",
      "nodes": [
        {
          "content": "These samples and their documentation do not provide an in-depth study or full implementation of the key Hadoop technologies.",
          "pos": [
            0,
            125
          ]
        },
        {
          "content": "The cluster used has only a single node and so the effect of adding more nodes cannot, with this release, be observed.",
          "pos": [
            126,
            244
          ]
        }
      ]
    },
    {
      "pos": [
        13928,
        13931
      ],
      "content": "###"
    },
    {
      "pos": [
        13954,
        13978
      ],
      "content": "Load sample W3C log data"
    },
    {
      "pos": [
        13980,
        14077
      ],
      "content": "Generating and importing the data to HDFS is done via the Azure PowerShell script importdata.ps1."
    },
    {
      "pos": [
        14079,
        14112
      ],
      "content": "<bpt id=\"p58\">**</bpt>To import sample W3C log data<ept id=\"p58\">**</ept>"
    },
    {
      "pos": [
        14117,
        14161
      ],
      "content": "Open a Hadoop command line from the desktop."
    },
    {
      "pos": [
        14165,
        14215
      ],
      "content": "Change the directory to <bpt id=\"p59\">**</bpt>C:\\hdp\\GettingStarted<ept id=\"p59\">**</ept>."
    },
    {
      "pos": [
        14219,
        14281
      ],
      "content": "Run the following command to generate and import data to HDFS:"
    },
    {
      "pos": [
        14362,
        14470
      ],
      "content": "If you want to load data into Azure Blob storage instead, see <bpt id=\"p60\">[</bpt>Connect to Azure Blob storage<ept id=\"p60\">](#blobstorage)</ept>."
    },
    {
      "pos": [
        14475,
        14565
      ],
      "content": "Run the following command from the Hadoop command line to list the imported files on HDFS:"
    },
    {
      "pos": [
        14602,
        14648
      ],
      "content": "The output should be similar to the following:"
    },
    {
      "pos": [
        15334,
        15456
      ],
      "content": "If you want to verify the file contents, run the following command to display one of the data files to the console window:"
    },
    {
      "pos": [
        15518,
        15620
      ],
      "content": "You now have the data files created and imported to HDFS. You can start running different Hadoop jobs.",
      "nodes": [
        {
          "content": "You now have the data files created and imported to HDFS.",
          "pos": [
            0,
            57
          ]
        },
        {
          "content": "You can start running different Hadoop jobs.",
          "pos": [
            58,
            102
          ]
        }
      ]
    },
    {
      "pos": [
        15622,
        15625
      ],
      "content": "###"
    },
    {
      "pos": [
        15654,
        15677
      ],
      "content": "Run Java MapReduce jobs"
    },
    {
      "pos": [
        15679,
        15891
      ],
      "content": "MapReduce is the basic compute engine for Hadoop. By default, it is implemented in Java, but there are also examples that leverage .NET and Hadoop Streaming that use C#. The syntax for running a MapReduce job is:",
      "nodes": [
        {
          "content": "MapReduce is the basic compute engine for Hadoop.",
          "pos": [
            0,
            49
          ]
        },
        {
          "content": "By default, it is implemented in Java, but there are also examples that leverage .NET and Hadoop Streaming that use C#.",
          "pos": [
            50,
            169
          ]
        },
        {
          "content": "The syntax for running a MapReduce job is:",
          "pos": [
            170,
            212
          ]
        }
      ]
    },
    {
      "pos": [
        15967,
        16057
      ],
      "content": "The jar file and the source files are located in the C:\\Hadoop\\GettingStarted\\Java folder."
    },
    {
      "pos": [
        16059,
        16114
      ],
      "content": "<bpt id=\"p61\">**</bpt>To run a MapReduce job for calculating webpage hits<ept id=\"p61\">**</ept>"
    },
    {
      "pos": [
        16119,
        16148
      ],
      "content": "Open the Hadoop command line."
    },
    {
      "pos": [
        16152,
        16202
      ],
      "content": "Change the directory to <bpt id=\"p62\">**</bpt>C:\\hdp\\GettingStarted<ept id=\"p62\">**</ept>."
    },
    {
      "pos": [
        16206,
        16354
      ],
      "content": "Run the following command to remove the output directory in case the folder exists. The MapReduce job will fail if the output folder already exists.",
      "nodes": [
        {
          "content": "Run the following command to remove the output directory in case the folder exists.",
          "pos": [
            0,
            83
          ]
        },
        {
          "content": "The MapReduce job will fail if the output folder already exists.",
          "pos": [
            84,
            148
          ]
        }
      ]
    },
    {
      "pos": [
        16397,
        16423
      ],
      "content": "Run the following command:"
    },
    {
      "pos": [
        16566,
        17368
      ],
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "content": "The following table describes the elements of the command:\n <ph id=\"ph41\">&lt;table border=\"1\"&gt;</ph><ph id=\"ph42\">\n &lt;tr&gt;</ph><ph id=\"ph43\">&lt;td&gt;</ph>Parameter<ph id=\"ph44\">&lt;/td&gt;</ph><ph id=\"ph45\">&lt;td&gt;</ph>Note<ph id=\"ph46\">&lt;/td&gt;</ph><ph id=\"ph47\">&lt;/tr&gt;</ph><ph id=\"ph48\">\n &lt;tr&gt;</ph><ph id=\"ph49\">&lt;td&gt;</ph>w3c_scenarios.jar<ph id=\"ph50\">&lt;/td&gt;</ph><ph id=\"ph51\">&lt;td&gt;</ph>The jar file is located in the C:\\hdp\\GettingStarted\\Java folder.<ph id=\"ph52\">&lt;/td&gt;</ph><ph id=\"ph53\">&lt;/tr&gt;</ph><ph id=\"ph54\">\n &lt;tr&gt;</ph><ph id=\"ph55\">&lt;td&gt;</ph>microsoft.hadoop.w3c.TotalHitsForPage<ph id=\"ph56\">&lt;/td&gt;</ph><ph id=\"ph57\">&lt;td&gt;</ph>The type can be substituted by one of the following:\n <ph id=\"ph58\">&lt;ul&gt;</ph><ph id=\"ph59\">\n &lt;li&gt;</ph>microsoft.hadoop.w3c.AverageTimeTaken<ph id=\"ph60\">&lt;/li&gt;</ph><ph id=\"ph61\">\n &lt;li&gt;</ph>microsoft.hadoop.w3c.ErrorsByPage<ph id=\"ph62\">&lt;/li&gt;</ph><ph id=\"ph63\">\n &lt;/ul&gt;</ph><ph id=\"ph64\">&lt;/td&gt;</ph><ph id=\"ph65\">&lt;/tr&gt;</ph><ph id=\"ph66\">\n &lt;tr&gt;</ph><ph id=\"ph67\">&lt;td&gt;</ph>/w3c/input/small/data_w3c_small.txt<ph id=\"ph68\">&lt;/td&gt;</ph><ph id=\"ph69\">&lt;td&gt;</ph>The input file can be substituted by the following:\n <ph id=\"ph70\">&lt;ul&gt;</ph><ph id=\"ph71\">\n &lt;li&gt;</ph>/w3c/input/medium/data_w3c_medium.txt<ph id=\"ph72\">&lt;/li&gt;</ph><ph id=\"ph73\">\n &lt;li&gt;</ph>/w3c/input/large/data_w3c_large.txt<ph id=\"ph74\">&lt;/li&gt;</ph><ph id=\"ph75\">\n &lt;/ul&gt;</ph><ph id=\"ph76\">&lt;/td&gt;</ph><ph id=\"ph77\">&lt;/tr&gt;</ph><ph id=\"ph78\">\n &lt;tr&gt;</ph><ph id=\"ph79\">&lt;td&gt;</ph>/w3c/output<ph id=\"ph80\">&lt;/td&gt;</ph><ph id=\"ph81\">&lt;td&gt;</ph>This is the output folder name.<ph id=\"ph82\">&lt;/td&gt;</ph><ph id=\"ph83\">&lt;/tr&gt;</ph><ph id=\"ph84\">\n &lt;/table&gt;</ph>"
    },
    {
      "pos": [
        17373,
        17426
      ],
      "content": "Run the following command to display the output file:"
    },
    {
      "pos": [
        17479,
        17510
      ],
      "content": "The output shall be similar to:"
    },
    {
      "pos": [
        17675,
        17886
      ],
      "content": "The Default.aspx page gets 3360 hits and so on. Try running the commands again by replacing the values as suggested in the table above and notice how the output changes based on the type of job and size of data.",
      "nodes": [
        {
          "content": "The Default.aspx page gets 3360 hits and so on.",
          "pos": [
            0,
            47
          ]
        },
        {
          "content": "Try running the commands again by replacing the values as suggested in the table above and notice how the output changes based on the type of job and size of data.",
          "pos": [
            48,
            211
          ]
        }
      ]
    },
    {
      "pos": [
        17911,
        17924
      ],
      "content": "Run Hive jobs"
    },
    {
      "pos": [
        17925,
        18305
      ],
      "content": "The Hive query engine might feel familiar to analysts with strong Structured Query Language (SQL) skills. It provides a SQL-like interface and a relational data model for HDFS. Hive uses a language called HiveQL, which is very similar to SQL. Hive provides a layer of abstraction over the Java-based MapReduce framework, and the Hive queries are compiled to MapReduce at run time.",
      "nodes": [
        {
          "content": "The Hive query engine might feel familiar to analysts with strong Structured Query Language (SQL) skills.",
          "pos": [
            0,
            105
          ]
        },
        {
          "content": "It provides a SQL-like interface and a relational data model for HDFS.",
          "pos": [
            106,
            176
          ]
        },
        {
          "content": "Hive uses a language called HiveQL, which is very similar to SQL.",
          "pos": [
            177,
            242
          ]
        },
        {
          "content": "Hive provides a layer of abstraction over the Java-based MapReduce framework, and the Hive queries are compiled to MapReduce at run time.",
          "pos": [
            243,
            380
          ]
        }
      ]
    },
    {
      "pos": [
        18307,
        18328
      ],
      "content": "<bpt id=\"p63\">**</bpt>To run a Hive job<ept id=\"p63\">**</ept>"
    },
    {
      "pos": [
        18333,
        18360
      ],
      "content": "Open a Hadoop command line."
    },
    {
      "pos": [
        18364,
        18414
      ],
      "content": "Change the directory to <bpt id=\"p64\">**</bpt>C:\\hdp\\GettingStarted<ept id=\"p64\">**</ept>."
    },
    {
      "pos": [
        18418,
        18556
      ],
      "content": "Run the following command to remove the <bpt id=\"p65\">**</bpt>/w3c/hive/input<ept id=\"p65\">**</ept><ph id=\"ph85\"/> folder in case the folder exists. The Hive job will fail if the folder exists.",
      "nodes": [
        {
          "content": "Run the following command to remove the <bpt id=\"p65\">**</bpt>/w3c/hive/input<ept id=\"p65\">**</ept><ph id=\"ph85\"/> folder in case the folder exists.",
          "pos": [
            0,
            148
          ]
        },
        {
          "content": "The Hive job will fail if the folder exists.",
          "pos": [
            149,
            193
          ]
        }
      ]
    },
    {
      "pos": [
        18601,
        18724
      ],
      "content": "Run the following command to create the <bpt id=\"p66\">**</bpt>/w3c/hive/input<ept id=\"p66\">**</ept><ph id=\"ph86\"/> folders and then copy the data files to the /hive/input folder:"
    },
    {
      "pos": [
        18881,
        19019
      ],
      "content": "Run the following command to execute the <bpt id=\"p67\">**</bpt>w3ccreate.hql<ept id=\"p67\">**</ept><ph id=\"ph87\"/> script file. The script creates a Hive table, and loads data to the Hive table:",
      "nodes": [
        {
          "content": "Run the following command to execute the <bpt id=\"p67\">**</bpt>w3ccreate.hql<ept id=\"p67\">**</ept><ph id=\"ph87\"/> script file.",
          "pos": [
            0,
            126
          ]
        },
        {
          "content": "The script creates a Hive table, and loads data to the Hive table:",
          "pos": [
            127,
            193
          ]
        }
      ]
    },
    {
      "pos": [
        19027,
        19470
      ],
      "content": "<ph id=\"ph88\">[AZURE.NOTE]</ph><ph id=\"ph89\"/> At this stage, you can also use the HDInsight Visual Studio tools to run the Hive query. Open Visual Studio, create a new Project, and from the HDInsight template, select <bpt id=\"p68\">**</bpt>Hive Application<ept id=\"p68\">**</ept>. Once the project opens, add the query as a new item. The query is available at <bpt id=\"p69\">**</bpt>C:/hdp/GettingStarted/Hive/w3c<ept id=\"p69\">**</ept>. Once the query is added to the project, replace <bpt id=\"p70\">**</bpt>${hiveconf:input}<ept id=\"p70\">**</ept><ph id=\"ph90\"/> with <bpt id=\"p71\">**</bpt>/w3c/hive/input<ept id=\"p71\">**</ept>, and then press <bpt id=\"p72\">**</bpt>Submit<ept id=\"p72\">**</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph88\">[AZURE.NOTE]</ph><ph id=\"ph89\"/> At this stage, you can also use the HDInsight Visual Studio tools to run the Hive query.",
          "pos": [
            0,
            135
          ]
        },
        {
          "content": "Open Visual Studio, create a new Project, and from the HDInsight template, select <bpt id=\"p68\">**</bpt>Hive Application<ept id=\"p68\">**</ept>.",
          "pos": [
            136,
            279
          ]
        },
        {
          "content": "Once the project opens, add the query as a new item.",
          "pos": [
            280,
            332
          ]
        },
        {
          "content": "The query is available at <bpt id=\"p69\">**</bpt>C:/hdp/GettingStarted/Hive/w3c<ept id=\"p69\">**</ept>.",
          "pos": [
            333,
            434
          ]
        },
        {
          "content": "Once the query is added to the project, replace <bpt id=\"p70\">**</bpt>${hiveconf:input}<ept id=\"p70\">**</ept><ph id=\"ph90\"/> with <bpt id=\"p71\">**</bpt>/w3c/hive/input<ept id=\"p71\">**</ept>, and then press <bpt id=\"p72\">**</bpt>Submit<ept id=\"p72\">**</ept>.",
          "pos": [
            435,
            692
          ]
        }
      ]
    },
    {
      "pos": [
        19611,
        19656
      ],
      "content": "The output shall be similar to the following:"
    },
    {
      "pos": [
        20178,
        20261
      ],
      "content": "Run the following command to run the <bpt id=\"p73\">**</bpt>w3ctotalhitsbypage.hql<ept id=\"p73\">**</ept><ph id=\"ph91\"/> HiveQL script file:"
    },
    {
      "pos": [
        20269,
        20375
      ],
      "content": "<ph id=\"ph92\">[AZURE.NOTE]</ph><ph id=\"ph93\"/> As explained earlier, you can run this query using the HDInsight Visual Studio Tools as well."
    },
    {
      "pos": [
        20474,
        21010
      ],
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "content": "The following table describes the elements of the command:\n <ph id=\"ph94\">&lt;table border=\"1\"&gt;</ph><ph id=\"ph95\">\n &lt;tr&gt;</ph><ph id=\"ph96\">&lt;td&gt;</ph>File<ph id=\"ph97\">&lt;/td&gt;</ph><ph id=\"ph98\">&lt;td&gt;</ph>Description<ph id=\"ph99\">&lt;/td&gt;</ph><ph id=\"ph100\">&lt;/tr&gt;</ph><ph id=\"ph101\">\n &lt;tr&gt;</ph><ph id=\"ph102\">&lt;td&gt;</ph>C:\\hdp\\hive-0.13.0.2.1.3.0-1981\\bin\\hive.cmd<ph id=\"ph103\">&lt;/td&gt;</ph><ph id=\"ph104\">&lt;td&gt;</ph>The Hive command script.<ph id=\"ph105\">&lt;/td&gt;</ph><ph id=\"ph106\">&lt;/tr&gt;</ph><ph id=\"ph107\">\n &lt;tr&gt;</ph><ph id=\"ph108\">&lt;td&gt;</ph>C:\\hdp\\GettingStarted\\Hive\\w3c\\w3ctotalhitsbypage.hql<ph id=\"ph109\">&lt;/td&gt;</ph><ph id=\"ph110\">&lt;td&gt;</ph><ph id=\"ph111\"/> You can substitute the Hive script file with one of the following:\n <ph id=\"ph112\">&lt;ul&gt;</ph><ph id=\"ph113\">\n &lt;li&gt;</ph>C:\\hdp\\GettingStarted\\Hive\\w3c\\w3caveragetimetaken.hql<ph id=\"ph114\">&lt;/li&gt;</ph><ph id=\"ph115\">\n &lt;li&gt;</ph>C:\\hdp\\GettingStarted\\Hive\\w3c\\w3cerrorsbypage.hql<ph id=\"ph116\">&lt;/li&gt;</ph><ph id=\"ph117\">\n &lt;/ul&gt;</ph><ph id=\"ph118\">\n &lt;/td&gt;</ph><ph id=\"ph119\">&lt;/tr&gt;</ph>"
    },
    {
      "pos": [
        21030,
        21074
      ],
      "content": "The w3ctotalhitsbypage.hql HiveQL script is:"
    },
    {
      "pos": [
        21279,
        21335
      ],
      "content": "The end of the output shall be similar to the following:"
    },
    {
      "pos": [
        21794,
        22045
      ],
      "content": "Note that as a first step in each of the jobs, a table will be created and data will be loaded into the table from the file created earlier. You can browse the file that was created by looking under the /Hive node in HDFS, using the following command:",
      "nodes": [
        {
          "content": "Note that as a first step in each of the jobs, a table will be created and data will be loaded into the table from the file created earlier.",
          "pos": [
            0,
            140
          ]
        },
        {
          "content": "You can browse the file that was created by looking under the /Hive node in HDFS, using the following command:",
          "pos": [
            141,
            251
          ]
        }
      ]
    },
    {
      "pos": [
        22101,
        22113
      ],
      "content": "Run Pig jobs"
    },
    {
      "pos": [
        22115,
        22330
      ],
      "content": "Pig processing uses a data-flow language called <bpt id=\"p74\">*</bpt>Pig Latin<ept id=\"p74\">*</ept>. Pig Latin abstractions provide richer data structures than MapReduce, and perform for Hadoop what SQL performs for relational database management systems.",
      "nodes": [
        {
          "content": "Pig processing uses a data-flow language called <bpt id=\"p74\">*</bpt>Pig Latin<ept id=\"p74\">*</ept>.",
          "pos": [
            0,
            100
          ]
        },
        {
          "content": "Pig Latin abstractions provide richer data structures than MapReduce, and perform for Hadoop what SQL performs for relational database management systems.",
          "pos": [
            101,
            255
          ]
        }
      ]
    },
    {
      "pos": [
        22333,
        22356
      ],
      "content": "<bpt id=\"p75\">**</bpt>To run the pig jobs<ept id=\"p75\">**</ept>"
    },
    {
      "pos": [
        22361,
        22388
      ],
      "content": "Open a Hadoop command line."
    },
    {
      "pos": [
        22392,
        22453
      ],
      "content": "Change the directory to the <bpt id=\"p76\">**</bpt>C:\\hdp\\GettingStarted<ept id=\"p76\">**</ept><ph id=\"ph121\"/> folder."
    },
    {
      "pos": [
        22457,
        22503
      ],
      "content": "Run the following command to submit a Pig job:"
    },
    {
      "pos": [
        22644,
        23277
      ],
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "content": "The following table shows the elements of the command:\n <ph id=\"ph122\">&lt;table border=\"1\"&gt;</ph><ph id=\"ph123\">\n &lt;tr&gt;</ph><ph id=\"ph124\">&lt;td&gt;</ph>File<ph id=\"ph125\">&lt;/td&gt;</ph><ph id=\"ph126\">&lt;td&gt;</ph>Description<ph id=\"ph127\">&lt;/td&gt;</ph><ph id=\"ph128\">&lt;/tr&gt;</ph><ph id=\"ph129\">\n &lt;tr&gt;</ph><ph id=\"ph130\">&lt;td&gt;</ph>C:\\hdp\\pig-0.12.1.2.1.3.0-1981\\bin\\pig.cmd<ph id=\"ph131\">&lt;/td&gt;</ph><ph id=\"ph132\">&lt;td&gt;</ph>The Pig command script.<ph id=\"ph133\">&lt;/td&gt;</ph><ph id=\"ph134\">&lt;/tr&gt;</ph><ph id=\"ph135\">\n &lt;tr&gt;</ph><ph id=\"ph136\">&lt;td&gt;</ph>C:\\hdp\\GettingStarted\\Pig\\w3c\\TotalHitsForPage.pig<ph id=\"ph137\">&lt;/td&gt;</ph><ph id=\"ph138\">&lt;td&gt;</ph><ph id=\"ph139\"/> You can substitute the Pig Latin script file with one of the following:\n <ph id=\"ph140\">&lt;ul&gt;</ph><ph id=\"ph141\">\n &lt;li&gt;</ph>C:\\hdp\\GettingStarted\\Pig\\w3c\\AverageTimeTaken.pig<ph id=\"ph142\">&lt;/li&gt;</ph><ph id=\"ph143\">\n &lt;li&gt;</ph>C:\\hdp\\GettingStarted\\Pig\\w3c\\ErrorsByPage.pig<ph id=\"ph144\">&lt;/li&gt;</ph><ph id=\"ph145\">\n &lt;/ul&gt;</ph><ph id=\"ph146\">\n &lt;/td&gt;</ph><ph id=\"ph147\">&lt;/tr&gt;</ph><ph id=\"ph148\">\n &lt;tr&gt;</ph><ph id=\"ph149\">&lt;td&gt;</ph>/w3c/input/small/data_w3c_small.txt<ph id=\"ph150\">&lt;/td&gt;</ph><ph id=\"ph151\">&lt;td&gt;</ph><ph id=\"ph152\"/> You can substitute the parameter with a larger file:"
    },
    {
      "pos": [
        23283,
        23397
      ],
      "leadings": [
        "",
        "   ",
        "   ",
        "   "
      ],
      "content": "<ph id=\"ph153\">&lt;ul&gt;</ph><ph id=\"ph154\">\n &lt;li&gt;</ph>/w3c/input/medium/data_w3c_medium.txt<ph id=\"ph155\">&lt;/li&gt;</ph><ph id=\"ph156\">\n &lt;li&gt;</ph>/w3c/input/large/data_w3c_large.txt<ph id=\"ph157\">&lt;/li&gt;</ph><ph id=\"ph158\">\n &lt;/ul&gt;</ph>"
    },
    {
      "pos": [
        23432,
        23478
      ],
      "content": "The output should be similar to the following:"
    },
    {
      "pos": [
        23564,
        23748
      ],
      "content": "Note that since Pig scripts compile to MapReduce jobs, and potentially to more than one such job, you might see multiple MapReduce jobs executing in the course of processing a Pig job."
    },
    {
      "pos": [
        24064,
        24090
      ],
      "content": "<bpt id=\"p77\">**</bpt>To rebuild the samples<ept id=\"p77\">**</ept>"
    },
    {
      "pos": [
        24095,
        24122
      ],
      "content": "Open a Hadoop command line."
    },
    {
      "pos": [
        24126,
        24152
      ],
      "content": "Run the following command:"
    },
    {
      "pos": [
        24193,
        24197
      ],
      "content": "---&gt;"
    },
    {
      "pos": [
        24199,
        24201
      ],
      "content": "##"
    },
    {
      "pos": [
        24227,
        24256
      ],
      "content": "Connect to Azure Blob storage"
    },
    {
      "pos": [
        24257,
        24611
      ],
      "content": "The HDInsight Emulator uses HDFS as the default file system. However, Azure HDInsight uses Azure Blob storage as the default file system. It is possible to configure the HDInsight Emulator to use Azure Blob storage instead of local storage. Follow the instructions below to create a storage container in Azure and to connect it to the HDInsight Emulator.",
      "nodes": [
        {
          "content": "The HDInsight Emulator uses HDFS as the default file system.",
          "pos": [
            0,
            60
          ]
        },
        {
          "content": "However, Azure HDInsight uses Azure Blob storage as the default file system.",
          "pos": [
            61,
            137
          ]
        },
        {
          "content": "It is possible to configure the HDInsight Emulator to use Azure Blob storage instead of local storage.",
          "pos": [
            138,
            240
          ]
        },
        {
          "content": "Follow the instructions below to create a storage container in Azure and to connect it to the HDInsight Emulator.",
          "pos": [
            241,
            354
          ]
        }
      ]
    },
    {
      "pos": [
        24614,
        24772
      ],
      "content": "<ph id=\"ph163\">[AZURE.NOTE]</ph><ph id=\"ph164\"/> For more information on how HDInsight uses Azure Blob storage, see <bpt id=\"p78\">[</bpt>Use Azure Blob storage with HDInsight<ept id=\"p78\">](hdinsight-hadoop-use-blob-storage.md)</ept>."
    },
    {
      "pos": [
        24774,
        24963
      ],
      "content": "Before you start with the instructions below, you must have created a storage account. For instructions, see <bpt id=\"p79\">[</bpt>How To Create a Storage Account<ept id=\"p79\">](../storage/storage-create-storage-account.md)</ept>.",
      "nodes": [
        {
          "content": "Before you start with the instructions below, you must have created a storage account.",
          "pos": [
            0,
            86
          ]
        },
        {
          "content": "For instructions, see <bpt id=\"p79\">[</bpt>How To Create a Storage Account<ept id=\"p79\">](../storage/storage-create-storage-account.md)</ept>.",
          "pos": [
            87,
            229
          ]
        }
      ]
    },
    {
      "pos": [
        24965,
        24990
      ],
      "content": "<bpt id=\"p80\">**</bpt>To create a container<ept id=\"p80\">**</ept>"
    },
    {
      "pos": [
        24995,
        25055
      ],
      "content": "Sign in to the <bpt id=\"p81\">[</bpt>Azure Portal<ept id=\"p81\">](https://ms.portal.azure.com/)</ept>."
    },
    {
      "pos": [
        25059,
        25139
      ],
      "content": "Click <bpt id=\"p82\">**</bpt>NEW<ept id=\"p82\">**</ept><ph id=\"ph165\"/> on the left, click <bpt id=\"p83\">**</bpt>Data + Storage<ept id=\"p83\">**</ept>, and then click <bpt id=\"p84\">**</bpt>Storage<ept id=\"p84\">**</ept>."
    },
    {
      "pos": [
        25143,
        25235
      ],
      "content": "In the Storage Account blade, configure the properties as shown in the screen capture below."
    },
    {
      "pos": [
        25245,
        25351
      ],
      "content": "<ph id=\"ph166\">![</ph>Create a storage account<ph id=\"ph167\">](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.create.storage.png)</ph>"
    },
    {
      "pos": [
        25357,
        25412
      ],
      "content": "Select <bpt id=\"p85\">**</bpt>Pin to Startboard<ept id=\"p85\">**</ept>, and the click <bpt id=\"p86\">**</bpt>Create<ept id=\"p86\">**</ept>."
    },
    {
      "pos": [
        25416,
        25554
      ],
      "content": "Once the storage account is created, from the new storage account blade, click <bpt id=\"p87\">**</bpt>Containers<ept id=\"p87\">**</ept><ph id=\"ph168\"/> to open the containers blade, click <bpt id=\"p88\">**</bpt>Add<ept id=\"p88\">**</ept>."
    },
    {
      "pos": [
        25558,
        25616
      ],
      "content": "Enter the name of the container and then click <bpt id=\"p89\">**</bpt>Select<ept id=\"p89\">**</ept>."
    },
    {
      "pos": [
        25622,
        25724
      ],
      "content": "<ph id=\"ph169\">![</ph>Create a container<ph id=\"ph170\">](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.create.container.png)</ph>"
    },
    {
      "pos": [
        25726,
        25850
      ],
      "content": "Before you can access an Azure Storage account, you must add the account name and the account key to the configuration file."
    },
    {
      "pos": [
        25852,
        25911
      ],
      "content": "<bpt id=\"p90\">**</bpt>To configure the connection to an Azure Storage account<ept id=\"p90\">**</ept>"
    },
    {
      "pos": [
        25916,
        25994
      ],
      "content": "Open <bpt id=\"p91\">**</bpt>C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981\\etc\\hadoop\\core-site.xml<ept id=\"p91\">**</ept><ph id=\"ph171\"/> in Notepad."
    },
    {
      "pos": [
        25998,
        26067
      ],
      "content": "Add the following &lt;property\\&gt; tag next to the other &lt;property\\&gt; tags:"
    },
    {
      "pos": [
        26249,
        26376
      ],
      "content": "You must substitute &lt;StorageAccountName\\&gt; and &lt;StorageAccountKey\\&gt; with the values that match your Storage account information."
    },
    {
      "pos": [
        26381,
        26444
      ],
      "content": "Save the change. You don't need to restart the Hadoop services.",
      "nodes": [
        {
          "content": "Save the change.",
          "pos": [
            0,
            16
          ]
        },
        {
          "content": "You don't need to restart the Hadoop services.",
          "pos": [
            17,
            63
          ]
        }
      ]
    },
    {
      "pos": [
        26446,
        26501
      ],
      "content": "Use the following syntax to access the Storage account:"
    },
    {
      "pos": [
        26575,
        26587
      ],
      "content": "For example:"
    },
    {
      "pos": [
        26661,
        26663
      ],
      "content": "##"
    },
    {
      "pos": [
        26689,
        26709
      ],
      "content": "Run Azure PowerShell"
    },
    {
      "pos": [
        26710,
        26815
      ],
      "content": "Some of the Azure PowerShell cmdlets are also supported on the HDInsight Emulator. These cmdlets include:",
      "nodes": [
        {
          "content": "Some of the Azure PowerShell cmdlets are also supported on the HDInsight Emulator.",
          "pos": [
            0,
            82
          ]
        },
        {
          "content": "These cmdlets include:",
          "pos": [
            83,
            105
          ]
        }
      ]
    },
    {
      "pos": [
        26819,
        26851
      ],
      "content": "HDInsight job definition cmdlets"
    },
    {
      "pos": [
        26859,
        26895
      ],
      "content": "New-AzureHDInsightSqoopJobDefinition"
    },
    {
      "pos": [
        26902,
        26951
      ],
      "content": "New-AzureHDInsightStreamingMapReduceJobDefinition"
    },
    {
      "pos": [
        26958,
        26992
      ],
      "content": "New-AzureHDInsightPigJobDefinition"
    },
    {
      "pos": [
        26999,
        27034
      ],
      "content": "New-AzureHDInsightHiveJobDefinition"
    },
    {
      "pos": [
        27041,
        27081
      ],
      "content": "New-AzureHDInsightMapReduceJobDefinition"
    },
    {
      "pos": [
        27084,
        27107
      ],
      "content": "Start-AzureHDInsightJob"
    },
    {
      "pos": [
        27110,
        27131
      ],
      "content": "Get-AzureHDInsightJob"
    },
    {
      "pos": [
        27134,
        27156
      ],
      "content": "Wait-AzureHDInsightJob"
    },
    {
      "pos": [
        27158,
        27203
      ],
      "content": "Here is a sample for submitting a Hadoop job:"
    },
    {
      "pos": [
        27425,
        27604
      ],
      "content": "You will get a prompt when calling Get-Credential. You must use <bpt id=\"p92\">**</bpt>hadoop<ept id=\"p92\">**</ept><ph id=\"ph172\"/> as the user name. The password can be any string. The cluster name is always <bpt id=\"p93\">**</bpt>http://localhost:50111<ept id=\"p93\">**</ept>.",
      "nodes": [
        {
          "content": "You will get a prompt when calling Get-Credential.",
          "pos": [
            0,
            50
          ]
        },
        {
          "content": "You must use <bpt id=\"p92\">**</bpt>hadoop<ept id=\"p92\">**</ept><ph id=\"ph172\"/> as the user name.",
          "pos": [
            51,
            148
          ]
        },
        {
          "content": "The password can be any string.",
          "pos": [
            149,
            180
          ]
        },
        {
          "content": "The cluster name is always <bpt id=\"p93\">**</bpt>http://localhost:50111<ept id=\"p93\">**</ept>.",
          "pos": [
            181,
            275
          ]
        }
      ]
    },
    {
      "pos": [
        27606,
        27886
      ],
      "content": "For more information about submitting Hadoop jobs, see <bpt id=\"p94\">[</bpt>Submit Hadoop jobs programmatically<ept id=\"p94\">](hdinsight-submit-hadoop-jobs-programmatically.md)</ept>. For more information about the Azure PowerShell cmdlets for HDInsight, see <bpt id=\"p95\">[</bpt>HDInsight cmdlet reference<ept id=\"p95\">][hdinsight-powershell-reference]</ept>.",
      "nodes": [
        {
          "content": "For more information about submitting Hadoop jobs, see <bpt id=\"p94\">[</bpt>Submit Hadoop jobs programmatically<ept id=\"p94\">](hdinsight-submit-hadoop-jobs-programmatically.md)</ept>.",
          "pos": [
            0,
            183
          ]
        },
        {
          "content": "For more information about the Azure PowerShell cmdlets for HDInsight, see <bpt id=\"p95\">[</bpt>HDInsight cmdlet reference<ept id=\"p95\">][hdinsight-powershell-reference]</ept>.",
          "pos": [
            184,
            360
          ]
        }
      ]
    },
    {
      "pos": [
        27889,
        28194
      ],
      "content": "##<ph id=\"ph173\">&lt;a name=\"remove\"&gt;</ph><ph id=\"ph174\">&lt;/a&gt;</ph><ph id=\"ph175\"/> Remove the HDInsight Emulator\nOn the computer where you have the emulator installed, open Control Panel and under <bpt id=\"p96\">**</bpt>Programs<ept id=\"p96\">**</ept>, click <bpt id=\"p97\">**</bpt>Uninstall a Program<ept id=\"p97\">**</ept>. From the list of installed programs, right-click <bpt id=\"p98\">**</bpt>Microsoft HDInsight Emulator for Azure<ept id=\"p98\">**</ept>, and then click <bpt id=\"p99\">**</bpt>Uninstall<ept id=\"p99\">**</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph173\">&lt;a name=\"remove\"&gt;</ph><ph id=\"ph174\">&lt;/a&gt;</ph><ph id=\"ph175\"/> Remove the HDInsight Emulator\nOn the computer where you have the emulator installed, open Control Panel and under <bpt id=\"p96\">**</bpt>Programs<ept id=\"p96\">**</ept>, click <bpt id=\"p97\">**</bpt>Uninstall a Program<ept id=\"p97\">**</ept>.",
          "pos": [
            2,
            330
          ]
        },
        {
          "content": "From the list of installed programs, right-click <bpt id=\"p98\">**</bpt>Microsoft HDInsight Emulator for Azure<ept id=\"p98\">**</ept>, and then click <bpt id=\"p99\">**</bpt>Uninstall<ept id=\"p99\">**</ept>.",
          "pos": [
            331,
            533
          ]
        }
      ]
    },
    {
      "pos": [
        28197,
        28199
      ],
      "content": "##"
    },
    {
      "pos": [
        28224,
        28234
      ],
      "content": "Next steps"
    },
    {
      "pos": [
        28235,
        28389
      ],
      "content": "In this MapReduce tutorial, you installed the HDInsight Emulator - a Hadoop sandbox - and ran some Hadoop jobs. To learn more, see the following articles:",
      "nodes": [
        {
          "content": "In this MapReduce tutorial, you installed the HDInsight Emulator - a Hadoop sandbox - and ran some Hadoop jobs.",
          "pos": [
            0,
            111
          ]
        },
        {
          "content": "To learn more, see the following articles:",
          "pos": [
            112,
            154
          ]
        }
      ]
    },
    {
      "pos": [
        28393,
        28476
      ],
      "content": "<bpt id=\"p100\">[</bpt>Get started using Azure HDInsight<ept id=\"p100\">](hdinsight-hadoop-linux-tutorial-get-started.md)</ept>"
    },
    {
      "pos": [
        28479,
        28570
      ],
      "content": "<bpt id=\"p101\">[</bpt>Develop Java MapReduce programs for HDInsight<ept id=\"p101\">](hdinsight-develop-deploy-java-mapreduce.md)</ept>"
    },
    {
      "pos": [
        28573,
        28686
      ],
      "content": "<bpt id=\"p102\">[</bpt>Develop C# Hadoop streaming MapReduce programs for HDInsight<ept id=\"p102\">](hdinsight-hadoop-develop-deploy-streaming-jobs.md)</ept>"
    },
    {
      "pos": [
        28689,
        28760
      ],
      "content": "<bpt id=\"p103\">[</bpt>HDInsight Emulator release notes<ept id=\"p103\">](hdinsight-emulator-release-notes.md)</ept>"
    },
    {
      "pos": [
        28763,
        28851
      ],
      "content": "<bpt id=\"p104\">[</bpt>MSDN forum for discussing HDInsight<ept id=\"p104\">](http://social.msdn.microsoft.com/Forums/hdinsight)</ept>"
    }
  ],
  "content": "<properties\n    pageTitle=\"Get started with a Hadoop emulator for HDInsight | Microsoft Azure\"\n    description=\"Use an installed emulator with a MapReduce tutorial and other samples to learn the Hadoop ecosystem. HDInsight emulator works like a Hadoop sandbox.\"\n    keywords=\"emulator,hadoop ecosystem,hadoop sandbox,mapreduce tutorial\"\n    editor=\"cgronlun\"\n    manager=\"paulettm\"\n    services=\"hdinsight\"\n    authors=\"nitinme\"\n    documentationCenter=\"\"\n    tags=\"azure-portal\"/>\n\n<tags\n    ms.service=\"hdinsight\"\n    ms.workload=\"big-data\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\" \n    ms.date=\"11/29/2015\"\n    ms.author=\"nitinme\"/>\n\n# Get started in the Hadoop ecosystem with the HDInsight Emulator, a Hadoop sandbox\n\nThis tutorial gets you started with Hadoop clusters in the Microsoft HDInsight Emulator for Azure (formerly HDInsight Server Developer Preview). The HDInsight Emulator comes with the same components from the Hadoop ecosystem as Azure HDInsight. For details, including information on the versions deployed, see [What version of Hadoop is in Azure HDInsight?](hdinsight-component-versioning.md).\n\nOnce the emulator is installed, you follow a MapReduce tutorial for word count and then run samples.\n\n> [AZURE.NOTE] The HDInsight Emulator includes only a Hadoop cluster. It does not include HBase or Storm.\n\n\nThe HDInsight Emulator provides a local development environment much like a Hadoop sandbox. If you are familiar with Hadoop, you can get started with the HDInsight Emulator by using the Hadoop Distributed File System (HDFS). In HDInsight, the default file system is Azure Blob storage. So eventually, you will want to develop your jobs by using Azure Blob storage. To use Azure Blob storage with the HDInsight Emulator, you must make changes to the configuration of the emulator.\n\n> [AZURE.NOTE] The HDInsight Emulator can use only a single node deployment.\n\n\n## Prerequisites\nBefore you begin this tutorial, you must have the following:\n\n- The HDInsight Emulator requires a 64-bit version of Windows. One of the following requirements must be satisfied:\n\n    - Windows 10\n    - Windows 8\n    - Windows Server 2012\n\n- **Azure PowerShell**. See [Install and use Azure PowerShell](https://azure.microsoft.com/documentation/videos/install-and-use-azure-powershell/).\n\n\n##<a name=\"install\"></a>Install the HDInsight Emulator\n\nThe Microsoft HDInsight Emulator is installable via the Microsoft Web Platform Installer.  \n\n> [AZURE.NOTE] The HDInsight Emulator currently supports only English operating systems. If you have a previous version of the emulator installed, you must uninstall the following two components from Control Panel/Programs and Features before installing the latest version of the emulator:\n><ul>\n<li>Microsoft HDInsight Emulator for Azure or HDInsight Developer Preview, whichever is installed</li>\n<li>Hortonworks Data Platform</li>\n</ul>\n\n\n**To install the HDInsight Emulator**\n\n1. Open Internet Explorer, and then browse to the [Microsoft HDInsight Emulator for Azure installation page][hdinsight-emulator-install].\n2. Click **Install Now**.\n3. Click **Run** when prompted for the installation of HDINSIGHT.exe at the bottom of the page.\n4. Click the **Yes** button in the **User Account Control** window that pops up to complete the installation. The Web Platform Installer window appears.\n6. Click **Install** on the bottom of the page.\n7. Click **I Accept** to agree to the licensing terms.\n8. Verify that the Web Platform Installer shows **The following products were successfully installed**, and then click **Finish**.\n9. Click **Exit** to close the Web Platform Installer window.\n\n**To verify the HDInsight Emulator installation**\n\nThe installation should have installed three icons on your desktop. The three icons are linked as follows:\n\n- **Hadoop Command Line** - The Hadoop command prompt from which MapReduce, Pig and Hive jobs are run in the HDInsight Emulator.\n\n- **Hadoop NameNode Status** - The NameNode maintains a tree-based directory for all the files in HDFS. It also keeps track of where the data for all the files are kept in a Hadoop cluster. Clients communicate with the NameNode in order to figure out where the data nodes for all the files are stored.\n\n- **Hadoop Yarn Status** - The job tracker that allocates MapReduce tasks to nodes in a cluster.\n\nThe installation should have also installed several local services. The following is a screenshot of the Services window:\n\n![Hadoop ecosystem services listed in the emulator window.][image-hdi-emulator-services]\n\nThe services related to the HDInsight Emulator are not started by default. To start the services, from the Hadoop command line, run **start\\_local\\_hdp_services.cmd** under C:\\hdp (default location). To automatically start the services after the computer restarts, run **set-onebox-autostart.cmd**.  \n\nFor known issues with installing and running the HDInsight Emulator, see the [HDInsight Emulator Release Notes](hdinsight-emulator-release-notes.md). The installation log is located at **C:\\HadoopFeaturePackSetup\\HadoopFeaturePackSetupTools\\gettingStarted.winpkg.install.log**.\n\n##<a name=\"vstools\"></a>Use Emulator with HDInsight Tools for Visual Studio\n\nYou can use HDInsight tools for Visual Studio to connect to the HDInsight Emulator. For information on how to use the Visual Studio tools with HDInsight clusters on Azure, see [Get started using HDInsight Hadoop Tools for Visual Studio](../HDInsight/hdinsight-hadoop-visual-studio-tools-get-started.md).\n\n### Install the HDInsight tools for Emulator\n\nFor instructions on how to install the HDInsight Visual Studio tools, see [here](../HDInsight/hdinsight-hadoop-visual-studio-tools-get-started.md#installation).\n\n### Connect to the HDInsight Emulator\n\n1. Open Visual Studio.\n2. From the **View** menu, click **Server Explorer** to open the Server Explorer window.\n3. Expand **Azure**, right-click **HDInsight**, and then click **Connect to HDInsight Emulator**.\n\n     ![Visual Studio view: Connect to HDInsight emulator on menu.](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.connect.vs.png)\n\n4. In the Connect to HDInsight Emulator dialog box, verify the values for WebHCat, HiveServer2, and WebHDFS endpoints, and then click **Next**. The values populated by default should work if you did not make any changes to the default configuration of the Emulator. If you made any changes, update the values in the dialog box and then click Next.\n\n    ![Connect to HDInsight emulator dialog box with settings.](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.connect.vs.dialog.png)\n\n5. Once the connection is successfully established, click **Finish**. You should now see the HDInsight Emulator in the Server Explorer.\n\n    ![Server Explorer showing HDInsight local emulator - a Hadoop sanbox - connected.](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.vs.connected.png)\n\nOnce the connection is successfully established, you can use the HDInsight VS tools with Emulator, just like you would use it with an Azure HDInsight cluster. For instructions on how to use VS tools with Azure HDInsight clusters, see [Using HDInsight Hadoop Tools for Visual Studio](../HDInsight/hdinsight-hadoop-visual-studio-tools-get-started.md).\n\n## Troubleshoot: Connecting HDInsight Tools to the HDInsight Emulator\n\n1. While connecting to the HDInsight Emulator, even though the dialog box shows that HiveServer2 connected successfully, you must manually set **hive.security.authorization.enabled property** to **false** in the Hive configuration file at C:\\hdp\\hive-*version*\\conf\\hive-site.xml, and then restart the local Emulator. HDInsight Tools for Visual Studio connects to HiveServer2 only when you are previewing the top 100 rows of your table. If you do not intend to use such a query, you can leave hive configuration as-is.\n\n2. If you are using dynamic IP allocation (DHCP) on the computer running the HDInsight Emulator, you might need to update C:\\hdp\\hadoop-*version*\\etc\\hadoop\\core-site.xml and change the value of property **hadoop.proxyuser.hadoop.hosts** to (*). This enables Hadoop user to connect from all hosts to impersonate the user you entered in Visual Studio.\n\n        <property>\n            <name>hadoop.proxyuser.hadoop.hosts</name>\n            <value>*</value>\n        </property>\n\n3. You might get an error when Visual Studio tries to connect to WebHCat service (“error”: “Could not find job job_XXXX_0001”). In this case, you must restart the WebHCat service and try again. To restart the WebHCat service, start the **Services** MMC, right-click **Apache Hadoop Templeton** (this is the old name for WebHCat service), and click **Restart**.\n\n##<a name=\"runwordcount\"></a>A word-count MapReduce tutorial\n\nNow that you have the HDInsight Emulator configured on your workstation, try this MapReduce tutorial to test the installation. You will first upload some data files to HDFS, and then run a word count MapReduce job to count the frequency of specific words in those files.\n\nThe word-counting MapReduce program has been packaged into *hadoop-mapreduce-examples-2.4.0.2.1.3.0-1981.jar*. The jar file is located at the *C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981\\share\\hadoop\\mapreduce* folder.\n\nThe MapReduce job to count words takes two arguments:\n\n- An input folder. You will use *hdfs://localhost/user/HDIUser* as the input folder.\n- An output folder. You will use *hdfs://localhost/user/HDIUser/WordCount_Output* as the output folder. The output folder cannot be an existing folder, or the MapReduce job will fail. If you want to run the MapReduce job for the second time, you must either specify a different output folder or delete the existing output folder.\n\n**To run the word-count MapReduce job**\n\n1. From the desktop, double-click **Hadoop Command Line** to open the Hadoop command-line window. The current folder should be:\n\n        c:\\hdp\\hadoop-2.4.0.2.1.3.0-1981\n\n    If not, run the following command:\n\n        cd %hadoop_home%\n\n2. Run the following Hadoop commands to make an HDFS folder for storing the input and output files:\n\n        hadoop fs -mkdir /user\n        hadoop fs -mkdir /user/HDIUser\n\n3. Run the following Hadoop command to copy some local text files to HDFS:\n\n        hadoop fs -copyFromLocal C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981\\share\\doc\\hadoop\\common\\*.txt /user/HDIUser\n\n4. Run the following command to list the files in the /user/HDIUser folder:\n\n        hadoop fs -ls /user/HDIUser\n\n    You should see the following files:\n\n        C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981>hadoop fs -ls /user/HDIUser\n        Found 4 items\n        -rw-r--r--   1 username hdfs     574261 2014-09-08 12:56 /user/HDIUser/CHANGES.txt\n        -rw-r--r--   1 username hdfs      15748 2014-09-08 12:56 /user/HDIUser/LICENSE.txt\n        -rw-r--r--   1 username hdfs        103 2014-09-08 12:56 /user/HDIUser/NOTICE.txt\n        -rw-r--r--   1 username hdfs       1397 2014-09-08 12:56 /user/HDIUser/README.txt\n\n5. Run the following command to run the word-count MapReduce job:\n\n        C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981>hadoop jar C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981\\share\\hadoop\\mapreduce\\hadoop-mapreduce-examples-2.4.0.2.1.3.0-1981.jar wordcount /user/HDIUser/*.txt /user/HDIUser/WordCount_Output\n\n6. Run the following command to list the number of words with \"windows\" in them from the output file:\n\n        hadoop fs -cat /user/HDIUser/WordCount_Output/part-r-00000 | findstr \"windows\"\n\n    The output should be:\n\n        C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981>hadoop fs -cat /user/HDIUser/WordCount_Output/part-r-00000 | findstr \"windows\"\n        windows 4\n        windows.        2\n        windows/cygwin. 1\n\nFor more information on Hadoop commands, see [Hadoop commands manual][hadoop-commands-manual].\n\n##<a name=\"rungetstartedsamples\"></a> Analyze sample web log data\n\nThe HDInsight Emulator installation provides some samples to get users started with learning Apache Hadoop-based services on Windows. These samples cover some tasks that are typically needed when processing a big dataset. Building on the MapReduce tutorial above, the the samples will help you become more familiar with the MapReduce programming model and its ecosystem.\n\nThe sample data is organized around processing IIS World Wide Web Consortium (W3C) log data. A data generation tool is provided to create and import the datasets in various sizes to HDFS or Azure Blob storage. (See [Use Azure Blob storage for HDInsight](hdinsight-hadoop-use-blob-storage.md) for more information). MapReduce, Pig, or Hive jobs can then be run on the pages of data generated by the Azure PowerShell script. Pig and Hive scripts are a layer of abstraction over MapReduce, and eventually compile to MapReduce programs. You can run a series of jobs to observe the effects of using these different technologies and how the data size affects the execution of the processing tasks.\n\n### In this section\n\n- [The IIS W3C log-data scenario](#scenarios)\n- [Load sample W3C log data](#loaddata)\n- [Run Java MapReduce job](#javamapreduce)\n- [Run Hive job](#hive)\n- [Run Pig job](#pig)\n- [Rebuild the samples](#rebuild)\n\n###<a name=\"scenarios\"></a>The IIS W3C log-data scenarios\n\nThe W3C scenario generates and imports IIS W3C log data in three sizes into HDFS or Azure Blob storage: 1MB (small), 500MB (medium), and 2GB (large). It provides three job types and implements each of them in C#, Java, Pig and Hive.\n\n- **totalhits** - Calculates the total number of requests for a given page.\n- **avgtime** - Calculates the average time taken (in seconds) for a request per page.\n- **errors** - Calculates the number of errors per page, per hour, for requests whose status was 404 or 500.\n\nThese samples and their documentation do not provide an in-depth study or full implementation of the key Hadoop technologies. The cluster used has only a single node and so the effect of adding more nodes cannot, with this release, be observed.\n\n###<a name=\"loaddata\"></a>Load sample W3C log data\n\nGenerating and importing the data to HDFS is done via the Azure PowerShell script importdata.ps1.\n\n**To import sample W3C log data**\n\n1. Open a Hadoop command line from the desktop.\n2. Change the directory to **C:\\hdp\\GettingStarted**.\n3. Run the following command to generate and import data to HDFS:\n\n        powershell -File importdata.ps1 w3c -ExecutionPolicy unrestricted\n\n    If you want to load data into Azure Blob storage instead, see [Connect to Azure Blob storage](#blobstorage).\n\n4. Run the following command from the Hadoop command line to list the imported files on HDFS:\n\n        hadoop fs -ls -R /w3c\n\n    The output should be similar to the following:\n\n        C:\\hdp\\GettingStarted>hadoop fs -ls -R /w3c\n        drwxr-xr-x   - username hdfs          0 2014-09-08 15:40 /w3c/input\n        drwxr-xr-x   - username hdfs          0 2014-09-08 15:41 /w3c/input/large\n        -rw-r--r--   1 username hdfs  543683503 2014-09-08 15:41 /w3c/input/large/data_w3c_large.txt\n        drwxr-xr-x   - username hdfs          0 2014-09-08 15:40 /w3c/input/medium\n        -rw-r--r--   1 username hdfs  272435159 2014-09-08 15:40 /w3c/input/medium/data_w3c_medium.txt\n        drwxr-xr-x   - username hdfs          0 2014-09-08 15:39 /w3c/input/small\n        -rw-r--r--   1 username hdfs    1058423 2014-09-08 15:39 /w3c/input/small/data_w3c_small.txt\n\n5. If you want to verify the file contents, run the following command to display one of the data files to the console window:\n\n        hadoop fs -cat /w3c/input/small/data_w3c_small.txt\n\nYou now have the data files created and imported to HDFS. You can start running different Hadoop jobs.\n\n###<a name=\"javamapreduce\"></a> Run Java MapReduce jobs\n\nMapReduce is the basic compute engine for Hadoop. By default, it is implemented in Java, but there are also examples that leverage .NET and Hadoop Streaming that use C#. The syntax for running a MapReduce job is:\n\n    hadoop jar <jarFileName>.jar <className> <inputFiles> <outputFolder>\n\nThe jar file and the source files are located in the C:\\Hadoop\\GettingStarted\\Java folder.\n\n**To run a MapReduce job for calculating webpage hits**\n\n1. Open the Hadoop command line.\n2. Change the directory to **C:\\hdp\\GettingStarted**.\n3. Run the following command to remove the output directory in case the folder exists. The MapReduce job will fail if the output folder already exists.\n\n        hadoop fs -rm -r /w3c/output\n\n3. Run the following command:\n\n        hadoop jar .\\Java\\w3c_scenarios.jar \"microsoft.hadoop.w3c.TotalHitsForPage\" \"/w3c/input/small/data_w3c_small.txt\" \"/w3c/output\"\n\n    The following table describes the elements of the command:\n    <table border=\"1\">\n    <tr><td>Parameter</td><td>Note</td></tr>\n    <tr><td>w3c_scenarios.jar</td><td>The jar file is located in the C:\\hdp\\GettingStarted\\Java folder.</td></tr>\n    <tr><td>microsoft.hadoop.w3c.TotalHitsForPage</td><td>The type can be substituted by one of the following:\n    <ul>\n    <li>microsoft.hadoop.w3c.AverageTimeTaken</li>\n    <li>microsoft.hadoop.w3c.ErrorsByPage</li>\n    </ul></td></tr>\n    <tr><td>/w3c/input/small/data_w3c_small.txt</td><td>The input file can be substituted by the following:\n    <ul>\n    <li>/w3c/input/medium/data_w3c_medium.txt</li>\n    <li>/w3c/input/large/data_w3c_large.txt</li>\n    </ul></td></tr>\n    <tr><td>/w3c/output</td><td>This is the output folder name.</td></tr>\n    </table>\n\n4. Run the following command to display the output file:\n\n        hadoop fs -cat /w3c/output/part-00000\n\n    The output shall be similar to:\n\n        c:\\Hadoop\\GettingStarted>hadoop fs -cat /w3c/output/part-00000\n        /Default.aspx   3380\n        /Info.aspx      1135\n        /UserService    1126\n\n    The Default.aspx page gets 3360 hits and so on. Try running the commands again by replacing the values as suggested in the table above and notice how the output changes based on the type of job and size of data.\n\n### <a name=\"hive\"></a>Run Hive jobs\nThe Hive query engine might feel familiar to analysts with strong Structured Query Language (SQL) skills. It provides a SQL-like interface and a relational data model for HDFS. Hive uses a language called HiveQL, which is very similar to SQL. Hive provides a layer of abstraction over the Java-based MapReduce framework, and the Hive queries are compiled to MapReduce at run time.\n\n**To run a Hive job**\n\n1. Open a Hadoop command line.\n2. Change the directory to **C:\\hdp\\GettingStarted**.\n3. Run the following command to remove the **/w3c/hive/input** folder in case the folder exists. The Hive job will fail if the folder exists.\n\n        hadoop fs -rmr /w3c/hive/input\n\n4. Run the following command to create the **/w3c/hive/input** folders and then copy the data files to the /hive/input folder:\n\n        hadoop fs -mkdir /w3c/hive\n        hadoop fs -mkdir /w3c/hive/input\n\n        hadoop fs -cp /w3c/input/small/data_w3c_small.txt /w3c/hive/input\n\n5. Run the following command to execute the **w3ccreate.hql** script file. The script creates a Hive table, and loads data to the Hive table:\n\n    > [AZURE.NOTE] At this stage, you can also use the HDInsight Visual Studio tools to run the Hive query. Open Visual Studio, create a new Project, and from the HDInsight template, select **Hive Application**. Once the project opens, add the query as a new item. The query is available at **C:/hdp/GettingStarted/Hive/w3c**. Once the query is added to the project, replace **${hiveconf:input}** with **/w3c/hive/input**, and then press **Submit**.\n\n        C:\\hdp\\hive-0.13.0.2.1.3.0-1981\\bin\\hive.cmd -f ./Hive/w3c/w3ccreate.hql -hiveconf \"input=/w3c/hive/input/data_w3c_small.txt\"\n\n    The output shall be similar to the following:\n\n        Logging initialized using configuration in file:/C:/hdp/hive-0.13.0.2.1.3.0-1981    /conf/hive-log4j.properties\n        OK\n        Time taken: 1.137 seconds\n        OK\n        Time taken: 4.403 seconds\n        Loading data to table default.w3c\n        Moved: 'hdfs://HDINSIGHT02:8020/hive/warehouse/w3c' to trash at: hdfs://HDINSIGHT02:8020/user/<username>/.Trash/Current\n        Table default.w3c stats: [numFiles=1, numRows=0, totalSize=1058423, rawDataSize=0]\n        OK\n        Time taken: 2.881 seconds\n\n6. Run the following command to run the **w3ctotalhitsbypage.hql** HiveQL script file:\n\n    > [AZURE.NOTE] As explained earlier, you can run this query using the HDInsight Visual Studio Tools as well.  \n\n        C:\\hdp\\hive-0.13.0.2.1.3.0-1981\\bin\\hive.cmd -f ./Hive/w3c/w3ctotalhitsbypage.hql\n\n    The following table describes the elements of the command:\n    <table border=\"1\">\n    <tr><td>File</td><td>Description</td></tr>\n    <tr><td>C:\\hdp\\hive-0.13.0.2.1.3.0-1981\\bin\\hive.cmd</td><td>The Hive command script.</td></tr>\n    <tr><td>C:\\hdp\\GettingStarted\\Hive\\w3c\\w3ctotalhitsbypage.hql</td><td> You can substitute the Hive script file with one of the following:\n    <ul>\n    <li>C:\\hdp\\GettingStarted\\Hive\\w3c\\w3caveragetimetaken.hql</li>\n    <li>C:\\hdp\\GettingStarted\\Hive\\w3c\\w3cerrorsbypage.hql</li>\n    </ul>\n    </td></tr>\n\n    </table>\n\n    The w3ctotalhitsbypage.hql HiveQL script is:\n\n        SELECT filtered.cs_uri_stem,COUNT(*)\n        FROM (\n          SELECT logdate,cs_uri_stem from w3c WHERE logdate NOT RLIKE '.*#.*'\n        ) filtered\n        GROUP BY (filtered.cs_uri_stem);\n\n    The end of the output shall be similar to the following:\n\n        MapReduce Total cumulative CPU time: 5 seconds 391 msec\n        Ended Job = job_1410201800143_0008\n        MapReduce Jobs Launched:\n        Job 0: Map: 1  Reduce: 1   Cumulative CPU: 5.391 sec   HDFS Read: 1058638 HDFS Write: 53 SUCCESS\n        Total MapReduce CPU Time Spent: 5 seconds 391 msec\n        OK\n        /Default.aspx   3380\n        /Info.aspx      1135\n        /UserService    1126\n        Time taken: 49.304 seconds, Fetched: 3 row(s)\n\nNote that as a first step in each of the jobs, a table will be created and data will be loaded into the table from the file created earlier. You can browse the file that was created by looking under the /Hive node in HDFS, using the following command:\n\n    hadoop fs -lsr /apps/hive/\n\n### <a name=\"pig\"></a>Run Pig jobs\n\nPig processing uses a data-flow language called *Pig Latin*. Pig Latin abstractions provide richer data structures than MapReduce, and perform for Hadoop what SQL performs for relational database management systems.\n\n\n**To run the pig jobs**\n\n1. Open a Hadoop command line.\n2. Change the directory to the **C:\\hdp\\GettingStarted** folder.\n3. Run the following command to submit a Pig job:\n\n        C:\\hdp\\pig-0.12.1.2.1.3.0-1981\\bin\\pig.cmd -f \".\\Pig\\w3c\\TotalHitsForPage.pig\" -p \"input=/w3c/input/small/data_w3c_small.txt\"\n\n    The following table shows the elements of the command:\n    <table border=\"1\">\n    <tr><td>File</td><td>Description</td></tr>\n    <tr><td>C:\\hdp\\pig-0.12.1.2.1.3.0-1981\\bin\\pig.cmd</td><td>The Pig command script.</td></tr>\n    <tr><td>C:\\hdp\\GettingStarted\\Pig\\w3c\\TotalHitsForPage.pig</td><td> You can substitute the Pig Latin script file with one of the following:\n    <ul>\n    <li>C:\\hdp\\GettingStarted\\Pig\\w3c\\AverageTimeTaken.pig</li>\n    <li>C:\\hdp\\GettingStarted\\Pig\\w3c\\ErrorsByPage.pig</li>\n    </ul>\n    </td></tr>\n    <tr><td>/w3c/input/small/data_w3c_small.txt</td><td> You can substitute the parameter with a larger file:\n\n    <ul>\n    <li>/w3c/input/medium/data_w3c_medium.txt</li>\n    <li>/w3c/input/large/data_w3c_large.txt</li>\n    </ul>\n\n    </td></tr>\n    </table>\n\n    The output should be similar to the following:\n\n        (/Info.aspx,1135)\n        (/UserService,1126)\n        (/Default.aspx,3380)\n\nNote that since Pig scripts compile to MapReduce jobs, and potentially to more than one such job, you might see multiple MapReduce jobs executing in the course of processing a Pig job.\n\n<!---\n### <a name=\"rebuild\"></a>Rebuild the samples\nThe samples currently contain all the required binaries, so building is not required. If you'd like to make changes to the Java or .NET samples, you can rebuild them by using either the Microsoft Build Engine (MSBuild) or the included Azure PowerShell script.\n\n\n**To rebuild the samples**\n\n1. Open a Hadoop command line.\n2. Run the following command:\n\n        powershell -F buildsamples.ps1\n--->\n\n##<a name=\"blobstorage\"></a>Connect to Azure Blob storage\nThe HDInsight Emulator uses HDFS as the default file system. However, Azure HDInsight uses Azure Blob storage as the default file system. It is possible to configure the HDInsight Emulator to use Azure Blob storage instead of local storage. Follow the instructions below to create a storage container in Azure and to connect it to the HDInsight Emulator.\n\n>[AZURE.NOTE] For more information on how HDInsight uses Azure Blob storage, see [Use Azure Blob storage with HDInsight](hdinsight-hadoop-use-blob-storage.md).\n\nBefore you start with the instructions below, you must have created a storage account. For instructions, see [How To Create a Storage Account](../storage/storage-create-storage-account.md).\n\n**To create a container**\n\n1. Sign in to the [Azure Portal](https://ms.portal.azure.com/).\n2. Click **NEW** on the left, click **Data + Storage**, and then click **Storage**.\n3. In the Storage Account blade, configure the properties as shown in the screen capture below.\n    \n    ![Create a storage account](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.create.storage.png)\n\n    Select **Pin to Startboard**, and the click **Create**.\n4. Once the storage account is created, from the new storage account blade, click **Containers** to open the containers blade, click **Add**.\n5. Enter the name of the container and then click **Select**.\n\n    ![Create a container](./media/hdinsight-hadoop-emulator-get-started/hdi.emulator.create.container.png)\n\nBefore you can access an Azure Storage account, you must add the account name and the account key to the configuration file.\n\n**To configure the connection to an Azure Storage account**\n\n1. Open **C:\\hdp\\hadoop-2.4.0.2.1.3.0-1981\\etc\\hadoop\\core-site.xml** in Notepad.\n2. Add the following <property\\> tag next to the other <property\\> tags:\n\n        <property>\n            <name>fs.azure.account.key.<StorageAccountName>.blob.core.windows.net</name>\n            <value><StorageAccountKey></value>\n        </property>\n\n    You must substitute <StorageAccountName\\> and <StorageAccountKey\\> with the values that match your Storage account information.\n\n3. Save the change. You don't need to restart the Hadoop services.\n\nUse the following syntax to access the Storage account:\n\n    wasb://<ContainerName>@<StorageAccountName>.blob.core.windows.net/\n\nFor example:\n\n    hadoop fs -ls wasb://myContainer@myStorage.blob.core.windows.net/\n\n\n##<a name=\"powershell\"></a> Run Azure PowerShell\nSome of the Azure PowerShell cmdlets are also supported on the HDInsight Emulator. These cmdlets include:\n\n- HDInsight job definition cmdlets\n\n    - New-AzureHDInsightSqoopJobDefinition\n    - New-AzureHDInsightStreamingMapReduceJobDefinition\n    - New-AzureHDInsightPigJobDefinition\n    - New-AzureHDInsightHiveJobDefinition\n    - New-AzureHDInsightMapReduceJobDefinition\n- Start-AzureHDInsightJob\n- Get-AzureHDInsightJob\n- Wait-AzureHDInsightJob\n\nHere is a sample for submitting a Hadoop job:\n\n    $creds = Get-Credential (hadoop as username, password can be anything)\n    $hdinsightJob = <JobDefinition>\n    Start-AzureHDInsightJob -Cluster http://localhost:50111 -Credential $creds -JobDefinition $hdinsightJob\n\nYou will get a prompt when calling Get-Credential. You must use **hadoop** as the user name. The password can be any string. The cluster name is always **http://localhost:50111**.\n\nFor more information about submitting Hadoop jobs, see [Submit Hadoop jobs programmatically](hdinsight-submit-hadoop-jobs-programmatically.md). For more information about the Azure PowerShell cmdlets for HDInsight, see [HDInsight cmdlet reference][hdinsight-powershell-reference].\n\n\n##<a name=\"remove\"></a> Remove the HDInsight Emulator\nOn the computer where you have the emulator installed, open Control Panel and under **Programs**, click **Uninstall a Program**. From the list of installed programs, right-click **Microsoft HDInsight Emulator for Azure**, and then click **Uninstall**.\n\n\n##<a name=\"nextsteps\"></a> Next steps\nIn this MapReduce tutorial, you installed the HDInsight Emulator - a Hadoop sandbox - and ran some Hadoop jobs. To learn more, see the following articles:\n\n- [Get started using Azure HDInsight](hdinsight-hadoop-linux-tutorial-get-started.md)\n- [Develop Java MapReduce programs for HDInsight](hdinsight-develop-deploy-java-mapreduce.md)\n- [Develop C# Hadoop streaming MapReduce programs for HDInsight](hdinsight-hadoop-develop-deploy-streaming-jobs.md)\n- [HDInsight Emulator release notes](hdinsight-emulator-release-notes.md)\n- [MSDN forum for discussing HDInsight](http://social.msdn.microsoft.com/Forums/hdinsight)\n\n\n\n[azure-sdk]: http://azure.microsoft.com/downloads/\n[azure-create-storage-account]: ../storage-create-storage-account.md\n[azure-management-portal]: https://manage.windowsazure.com/\n[netstat-url]: http://technet.microsoft.com/library/ff961504.aspx\n\n[hdinsight-develop-mapreduce]: hdinsight-develop-deploy-java-mapreduce.md\n\n[hdinsight-emulator-install]: http://www.microsoft.com/web/gallery/install.aspx?appid=HDINSIGHT\n[hdinsight-emulator-release-notes]: hdinsight-emulator-release-notes.md\n\n[hdinsight-storage]: hdinsight-hadoop-use-blob-storage.md\n[hdinsight-submit-jobs]: hdinsight-submit-hadoop-jobs-programmatically.md\n[hdinsight-powershell-reference]: https://msdn.microsoft.com/library/dn858087.aspx\n[hdinsight-get-started]: hdinsight-hadoop-linux-tutorial-get-started.md\n[hdinsight-develop-deploy-streaming]: hdinsight-hadoop-develop-deploy-streaming-jobs.md\n[hdinsight-versions]: hdinsight-component-versioning.md\n\n[Powershell-install-configure]: powershell-install-configure.md\n\n[hadoop-commands-manual]: http://hadoop.apache.org/docs/r1.1.1/commands_manual.html\n\n[image-hdi-emulator-services]: ./media/hdinsight-hadoop-emulator-get-started/HDI.Emulator.Services.png\n "
}