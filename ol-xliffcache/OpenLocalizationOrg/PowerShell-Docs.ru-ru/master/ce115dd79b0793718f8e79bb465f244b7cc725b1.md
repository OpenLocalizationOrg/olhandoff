#DSC файла ресурсов

> Область применения: Windows PowerShell 4.0, Windows PowerShell 5.0

Файл ресурсов в Windows PowerShell требуемой состояние конфигурации (DSC) предоставляет механизм для управления файлами и папками на целевом узле.

##Синтаксис

```
File [string] #ResourceName
{
    DestinationPath = [string]
    [ Attributes = [string[]] { Archive | Hidden | ReadOnly | System }]
    [ Checksum = [string] { CreatedDate | ModifiedDate | SHA-1 | SHA-256 | SHA-512 } ]
    [ Contents = [string] ]
    [ Credential = [PSCredential] ]
    [ Ensure = [string] { Absent | Present } ] 
    [ Force = [bool] ]
    [ Recurse = [bool] ]
    [ DependsOn = [string[]] ]
    [ SourcePath = [string] ]
    [ Type = [string] { Directory | File } ] 
    [ MatchSource = [bool] ]
}
```

##Свойства

| Свойство| Описание|
|---|---|
| DestinationPath| Указывает расположение, где требуется обеспечить состояние файла или каталога.|
| Атрибуты| Указывает требуемое состояние атрибутов для целевого файла или каталога.|
| Контрольная сумма| Указывает тип контрольной суммы для определения того, совпадают ли два файла.Если __контрольной суммы__ не указан, только имя файла или каталога, используемого для сравнения.Допустимыми значениями являются: SHA-1, SHA-256, SHA-512, Дата создания, modifiedDate.|
| Содержимое| Задает содержимое файла, например определенной строки.|
| Учетные данные| Указывает учетные данные, необходимые для доступа к ресурсам, например, исходные файлы, если такой доступ является обязательным.|
| Убедитесь| Указывает, существует ли файл или каталог.Установите это свойство для «Отсутствует», чтобы убедиться, что файл или каталог не существует.Задайте для него значение «Отсутствует», чтобы убедиться, что файл или каталог существует.Значение по умолчанию — «Отсутствует».|
| Force| Определенных операций с файлами (перезаписи файла или при удалении каталога, который не является пустым) приведет к ошибке.С помощью свойства принудительно переопределяет такие ошибки.Значение по умолчанию — __$false__.|
| Recurse| Указывает, включены ли вложенные папки.Присвойте этому свойству значение __$true__ чтобы указать, что вложенные папки должны быть включены.Значение по умолчанию — __$false__.**Примечание**: это свойство допустимо только в случае, если свойство Type имеет значение каталога.|
| DependsOn| Указывает, что конфигурация другого ресурса должна выполняться перед настройкой этого ресурса.Например, если идентификатор конфигурации ресурсов сценария блока, который вы хотите запустить сначала — __ResourceName__ и его тип является __типа ресурса__, для использования этого свойства используется синтаксис `DependsOn = "[типа ресурса] ResourceName"`.|
| SourcePath| Указывает путь, из которого необходимо скопировать файл или папку ресурсов.|
| Type| Указывает, является ли ресурс выполняется настройка каталога или файла.Установите это свойство «Каталог», чтобы указать, что ресурс является каталог.Задайте для него значение «Файл», чтобы указать файл ресурса.Значение по умолчанию — «Файл».|
| MatchSource| Если присвоено значение по умолчанию __$false__, то все файлы в источнике (скажем, файлы A, B и C) добавляется к назначению впервые применяется конфигурация.Если источник добавляется новый файл (D), он не добавляется к назначению даже в том случае, если конфигурация применяется повторно позже.Если значение равно __$true__, а затем конфигурация применяется при каждом добавлении новых файлов впоследствии найден в источнике (например, файл D в данном примере) в место назначения.|

##Пример

В следующем примере показано использование файла ресурсов для убедитесь, что каталог с путем `C:\Users\Public\Documents\DSCDemo\DemoSource` на источнике компьютера (например, сервер "по запросу") присутствует также (и всех подкаталогов) на целевом узле. Также записывает в журнал после завершения confirmatory сообщение и включает инструкцию, чтобы убедиться, что операция проверки файлов выполняется перед выполнением операции ведения журнала.

```powershell
Configuration FileResourceDemo
{
    Node "localhost"
    {
        File DirectoryCopy
        {
            Ensure = "Present"  # You can also set Ensure to "Absent"
            Type = "Directory" # Default is "File".
            Recurse = $true # Ensure presence of subdirectories, too
            SourcePath = "C:\Users\Public\Documents\DSCDemo\DemoSource"
            DestinationPath = "C:\Users\Public\Documents\DSCDemo\DemoDestination"    
        }

        Log AfterDirectoryCopy
        {
            # The message below gets written to the Microsoft-Windows-Desired State Configuration/Analytic log
            Message = "Finished running the file resource with ID DirectoryCopy"
            DependsOn = "[File]DirectoryCopy" # This means run "DirectoryCopy" first.
        }
    }
}
```




