{
  "nodes": [
    {
      "pos": [
        27,
        85
      ],
      "content": "Use R in HDInsight to customize clusters | Microsoft Azure"
    },
    {
      "pos": [
        104,
        180
      ],
      "content": "Learn how to install R using Script Action, and use R on HDInsight clusters."
    },
    {
      "pos": [
        504,
        550
      ],
      "content": "Install and use R on HDInsight Hadoop clusters"
    },
    {
      "pos": [
        553,
        829
      ],
      "content": "Learn how to customize Windows based HDInsight cluster with R using Script Action, and how to use R on HDInsight clusters. For information on using R with a Linux-based cluster, see <bpt id=\"p1\">[</bpt>Install and use R on HDinsight Hadoop clusters (Linux)<ept id=\"p1\">](hdinsight-hadoop-r-scripts-linux.md)</ept>.",
      "nodes": [
        {
          "content": "Learn how to customize Windows based HDInsight cluster with R using Script Action, and how to use R on HDInsight clusters.",
          "pos": [
            0,
            122
          ]
        },
        {
          "content": "For information on using R with a Linux-based cluster, see <bpt id=\"p1\">[</bpt>Install and use R on HDinsight Hadoop clusters (Linux)<ept id=\"p1\">](hdinsight-hadoop-r-scripts-linux.md)</ept>.",
          "pos": [
            123,
            314
          ]
        }
      ]
    },
    {
      "pos": [
        832,
        1224
      ],
      "content": "You can install R on any type of cluster (Hadoop, Storm, HBase, Spark) on Azure HDInsight by using <bpt id=\"p2\">*</bpt>Script Action<ept id=\"p2\">*</ept>. A sample script to install R on an HDInsight cluster is available from a read-only Azure storage blob at <bpt id=\"p3\">[</bpt>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1<ept id=\"p3\">](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1)</ept>.",
      "nodes": [
        {
          "content": "You can install R on any type of cluster (Hadoop, Storm, HBase, Spark) on Azure HDInsight by using <bpt id=\"p2\">*</bpt>Script Action<ept id=\"p2\">*</ept>.",
          "pos": [
            0,
            153
          ]
        },
        {
          "content": "A sample script to install R on an HDInsight cluster is available from a read-only Azure storage blob at <bpt id=\"p3\">[</bpt>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1<ept id=\"p3\">](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1)</ept>.",
          "pos": [
            154,
            468
          ]
        }
      ]
    },
    {
      "pos": [
        1227,
        1247
      ],
      "content": "<bpt id=\"p4\">**</bpt>Related articles<ept id=\"p4\">**</ept>"
    },
    {
      "pos": [
        1251,
        1344
      ],
      "content": "<bpt id=\"p5\">[</bpt>Install and use R on HDinsight Hadoop clusters (Linux)<ept id=\"p5\">](hdinsight-hadoop-r-scripts-linux.md)</ept>"
    },
    {
      "pos": [
        1347,
        1469
      ],
      "content": "<bpt id=\"p6\">[</bpt>Create Hadoop clusters in HDInsight<ept id=\"p6\">](hdinsight-provision-clusters.md)</ept>: general information on creating HDInsight clusters"
    },
    {
      "pos": [
        1472,
        1625
      ],
      "content": "<bpt id=\"p7\">[</bpt>Customize HDInsight cluster using Script Action<ept id=\"p7\">][hdinsight-cluster-customize]</ept>: general information on customizing HDInsight clusters using Script Action"
    },
    {
      "pos": [
        1628,
        1709
      ],
      "content": "<bpt id=\"p8\">[</bpt>Develop Script Action scripts for HDInsight<ept id=\"p8\">](hdinsight-hadoop-script-actions.md)</ept>"
    },
    {
      "pos": [
        1714,
        1724
      ],
      "content": "What is R?"
    },
    {
      "pos": [
        1726,
        1729
      ],
      "content": "The"
    },
    {
      "pos": [
        1782,
        1817
      ],
      "content": "R Project for Statistical Computing"
    },
    {
      "pos": [
        1822,
        2221
      ],
      "content": "is an open source language and environment for statistical computing. R provides hundreds of build-in statistical functions and its own programming language that combines aspects of functional and object-oriented programming. It also provides extensive graphical capabilities. R is the preferred programming environment for most professional statisticians and scientists in a wide variety of fields.",
      "nodes": [
        {
          "content": "is an open source language and environment for statistical computing.",
          "pos": [
            0,
            69
          ]
        },
        {
          "content": "R provides hundreds of build-in statistical functions and its own programming language that combines aspects of functional and object-oriented programming.",
          "pos": [
            70,
            225
          ]
        },
        {
          "content": "It also provides extensive graphical capabilities.",
          "pos": [
            226,
            276
          ]
        },
        {
          "content": "R is the preferred programming environment for most professional statisticians and scientists in a wide variety of fields.",
          "pos": [
            277,
            399
          ]
        }
      ]
    },
    {
      "pos": [
        2223,
        2342
      ],
      "content": "R is compatible with Azure Blob Storage (WASB) so that data that is stored there can be processed using R on HDInsight."
    },
    {
      "pos": [
        2349,
        2358
      ],
      "content": "Install R"
    },
    {
      "pos": [
        2360,
        2673
      ],
      "content": "A <bpt id=\"p9\">[</bpt>sample script<ept id=\"p9\">](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1)</ept><ph id=\"ph2\"/> to install R on an HDInsight cluster is available from a read-only blob in Azure Storage. This section provides instructions about how to use the sample script while creating the cluster using the Azure Portal.",
      "nodes": [
        {
          "content": "A <bpt id=\"p9\">[</bpt>sample script<ept id=\"p9\">](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1)</ept><ph id=\"ph2\"/> to install R on an HDInsight cluster is available from a read-only blob in Azure Storage.",
          "pos": [
            0,
            244
          ]
        },
        {
          "content": "This section provides instructions about how to use the sample script while creating the cluster using the Azure Portal.",
          "pos": [
            245,
            365
          ]
        }
      ]
    },
    {
      "pos": [
        2677,
        2884
      ],
      "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> The sample script was introduced with HDInsight cluster version 3.1. For more information about  HDInsight cluster versions, see <bpt id=\"p10\">[</bpt>HDInsight cluster versions<ept id=\"p10\">](../hdinsight-component-versioning/)</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> The sample script was introduced with HDInsight cluster version 3.1.",
          "pos": [
            0,
            113
          ]
        },
        {
          "content": "For more information about  HDInsight cluster versions, see <bpt id=\"p10\">[</bpt>HDInsight cluster versions<ept id=\"p10\">](../hdinsight-component-versioning/)</ept>.",
          "pos": [
            114,
            279
          ]
        }
      ]
    },
    {
      "pos": [
        2889,
        3011
      ],
      "content": "When you create an HDInsight cluster from the Portal, click <bpt id=\"p11\">**</bpt>Optional Configuration<ept id=\"p11\">**</ept>, and then click <bpt id=\"p12\">**</bpt>Script Actions<ept id=\"p12\">**</ept>."
    },
    {
      "pos": [
        3015,
        3074
      ],
      "content": "On the <bpt id=\"p13\">**</bpt>Script Actions<ept id=\"p13\">**</ept><ph id=\"ph5\"/> page, enter the following values:"
    },
    {
      "pos": [
        3080,
        3226
      ],
      "content": "<ph id=\"ph6\">![</ph>Use Script Action to customize a cluster<ph id=\"ph7\">](./media/hdinsight-hadoop-r-scripts/hdi-r-script-action.png \"Use Script Action to customize a cluster\")</ph>"
    },
    {
      "pos": [
        3232,
        4064
      ],
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "content": "<ph id=\"ph8\">&lt;table border='1'&gt;</ph><ph id=\"ph9\">\n     &lt;tr&gt;</ph><ph id=\"ph10\">&lt;th&gt;</ph>Property<ph id=\"ph11\">&lt;/th&gt;</ph><ph id=\"ph12\">&lt;th&gt;</ph>Value<ph id=\"ph13\">&lt;/th&gt;</ph><ph id=\"ph14\">&lt;/tr&gt;</ph><ph id=\"ph15\">\n     &lt;tr&gt;</ph><ph id=\"ph16\">&lt;td&gt;</ph>Name<ph id=\"ph17\">&lt;/td&gt;</ph><ph id=\"ph18\">\n         &lt;td&gt;</ph>Specify a name for the script action, for example, <ph id=\"ph19\">&lt;b&gt;</ph>Install R<ph id=\"ph20\">&lt;/b&gt;</ph>.<ph id=\"ph21\">&lt;/td&gt;</ph><ph id=\"ph22\">&lt;/tr&gt;</ph><ph id=\"ph23\">\n     &lt;tr&gt;</ph><ph id=\"ph24\">&lt;td&gt;</ph>Script URI<ph id=\"ph25\">&lt;/td&gt;</ph><ph id=\"ph26\">\n         &lt;td&gt;</ph>Specify the URI to the script that is invoked to customize the cluster, for example, <ph id=\"ph27\">&lt;i&gt;</ph>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1<ph id=\"ph28\">&lt;/i&gt;</ph><ph id=\"ph29\">&lt;/td&gt;</ph><ph id=\"ph30\">&lt;/tr&gt;</ph><ph id=\"ph31\">\n     &lt;tr&gt;</ph><ph id=\"ph32\">&lt;td&gt;</ph>Node Type<ph id=\"ph33\">&lt;/td&gt;</ph><ph id=\"ph34\">\n         &lt;td&gt;</ph>Specify the nodes on which the customization script is run. You can choose <ph id=\"ph35\">&lt;b&gt;</ph>All Nodes<ph id=\"ph36\">&lt;/b&gt;</ph>, <ph id=\"ph37\">&lt;b&gt;</ph>Head nodes only<ph id=\"ph38\">&lt;/b&gt;</ph>, or <ph id=\"ph39\">&lt;b&gt;</ph>Worker nodes<ph id=\"ph40\">&lt;/b&gt;</ph><ph id=\"ph41\"/> only.\n     <ph id=\"ph42\">&lt;tr&gt;</ph><ph id=\"ph43\">&lt;td&gt;</ph>Parameters<ph id=\"ph44\">&lt;/td&gt;</ph><ph id=\"ph45\">\n         &lt;td&gt;</ph>Specify the parameters, if required by the script. However, the script to install R does not require any parameters, so you can leave this blank.<ph id=\"ph46\">&lt;/td&gt;</ph><ph id=\"ph47\">&lt;/tr&gt;</ph><ph id=\"ph48\">\n &lt;/table&gt;</ph>",
      "nodes": [
        {
          "content": "<ph id=\"ph8\">&lt;table border='1'&gt;</ph><ph id=\"ph9\">\n     &lt;tr&gt;</ph><ph id=\"ph10\">&lt;th&gt;</ph>Property<ph id=\"ph11\">&lt;/th&gt;</ph><ph id=\"ph12\">&lt;th&gt;</ph>Value<ph id=\"ph13\">&lt;/th&gt;</ph><ph id=\"ph14\">&lt;/tr&gt;</ph><ph id=\"ph15\">\n     &lt;tr&gt;</ph><ph id=\"ph16\">&lt;td&gt;</ph>Name<ph id=\"ph17\">&lt;/td&gt;</ph><ph id=\"ph18\">\n         &lt;td&gt;</ph>Specify a name for the script action, for example, <ph id=\"ph19\">&lt;b&gt;</ph>Install R<ph id=\"ph20\">&lt;/b&gt;</ph>.<ph id=\"ph21\">&lt;/td&gt;</ph><ph id=\"ph22\">&lt;/tr&gt;</ph><ph id=\"ph23\">\n     &lt;tr&gt;</ph><ph id=\"ph24\">&lt;td&gt;</ph>Script URI<ph id=\"ph25\">&lt;/td&gt;</ph><ph id=\"ph26\">\n         &lt;td&gt;</ph>Specify the URI to the script that is invoked to customize the cluster, for example, <ph id=\"ph27\">&lt;i&gt;</ph>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1<ph id=\"ph28\">&lt;/i&gt;</ph><ph id=\"ph29\">&lt;/td&gt;</ph><ph id=\"ph30\">&lt;/tr&gt;</ph><ph id=\"ph31\">\n     &lt;tr&gt;</ph><ph id=\"ph32\">&lt;td&gt;</ph>Node Type<ph id=\"ph33\">&lt;/td&gt;</ph><ph id=\"ph34\">\n         &lt;td&gt;</ph>Specify the nodes on which the customization script is run.",
          "pos": [
            0,
            1181
          ]
        },
        {
          "content": "You can choose <ph id=\"ph35\">&lt;b&gt;</ph>All Nodes<ph id=\"ph36\">&lt;/b&gt;</ph>, <ph id=\"ph37\">&lt;b&gt;</ph>Head nodes only<ph id=\"ph38\">&lt;/b&gt;</ph>, or <ph id=\"ph39\">&lt;b&gt;</ph>Worker nodes<ph id=\"ph40\">&lt;/b&gt;</ph><ph id=\"ph41\"/> only.",
          "pos": [
            1182,
            1432
          ]
        },
        {
          "content": "<ph id=\"ph42\">&lt;tr&gt;</ph><ph id=\"ph43\">&lt;td&gt;</ph>Parameters<ph id=\"ph44\">&lt;/td&gt;</ph><ph id=\"ph45\">\n         &lt;td&gt;</ph>Specify the parameters, if required by the script.",
          "pos": [
            1438,
            1625
          ]
        },
        {
          "content": "However, the script to install R does not require any parameters, so you can leave this blank.<ph id=\"ph46\">&lt;/td&gt;</ph><ph id=\"ph47\">&lt;/tr&gt;</ph><ph id=\"ph48\">\n &lt;/table&gt;</ph>",
          "pos": [
            1626,
            1815
          ]
        }
      ]
    },
    {
      "pos": [
        4070,
        4241
      ],
      "content": "You can add more than one script action to install multiple components on the cluster. After you have added the scripts, click the check mark to start crating the cluster.",
      "nodes": [
        {
          "content": "You can add more than one script action to install multiple components on the cluster.",
          "pos": [
            0,
            86
          ]
        },
        {
          "content": "After you have added the scripts, click the check mark to start crating the cluster.",
          "pos": [
            87,
            171
          ]
        }
      ]
    },
    {
      "pos": [
        4243,
        4419
      ],
      "content": "You can also use the script to install R on HDInsight by using Azure PowerShell or the HDInsight .NET SDK. Instructions for these procedures are provided later in this article.",
      "nodes": [
        {
          "content": "You can also use the script to install R on HDInsight by using Azure PowerShell or the HDInsight .NET SDK.",
          "pos": [
            0,
            106
          ]
        },
        {
          "content": "Instructions for these procedures are provided later in this article.",
          "pos": [
            107,
            176
          ]
        }
      ]
    },
    {
      "pos": [
        4424,
        4437
      ],
      "content": "Run R scripts"
    },
    {
      "pos": [
        4438,
        4521
      ],
      "content": "This section describes how to run an R script on the Hadoop cluster with HDInsight."
    },
    {
      "pos": [
        4526,
        4817
      ],
      "content": "<bpt id=\"p14\">**</bpt>Establish a Remote Desktop connection to the cluster<ept id=\"p14\">**</ept>: From the Portal, enable Remote Desktop for the cluster you created with R installed, and then connect to the cluster. For instructions, see <bpt id=\"p15\">[</bpt>Connect to HDInsight clusters using RDP<ept id=\"p15\">](hdinsight-administer-use-management-portal.md#rdp)</ept>.",
      "nodes": [
        {
          "content": "<bpt id=\"p14\">**</bpt>Establish a Remote Desktop connection to the cluster<ept id=\"p14\">**</ept>: From the Portal, enable Remote Desktop for the cluster you created with R installed, and then connect to the cluster.",
          "pos": [
            0,
            215
          ]
        },
        {
          "content": "For instructions, see <bpt id=\"p15\">[</bpt>Connect to HDInsight clusters using RDP<ept id=\"p15\">](hdinsight-administer-use-management-portal.md#rdp)</ept>.",
          "pos": [
            216,
            371
          ]
        }
      ]
    },
    {
      "pos": [
        4822,
        4961
      ],
      "content": "<bpt id=\"p16\">**</bpt>Open the R console<ept id=\"p16\">**</ept>: The R installation puts a link to the R console on the desktop of the head node. Click on it to open the R console.",
      "nodes": [
        {
          "content": "<bpt id=\"p16\">**</bpt>Open the R console<ept id=\"p16\">**</ept>: The R installation puts a link to the R console on the desktop of the head node.",
          "pos": [
            0,
            144
          ]
        },
        {
          "content": "Click on it to open the R console.",
          "pos": [
            145,
            179
          ]
        }
      ]
    },
    {
      "pos": [
        4966,
        5187
      ],
      "content": "<bpt id=\"p17\">**</bpt>Run the R script<ept id=\"p17\">**</ept>: The R script can be run directly from the R console by pasting it, selecting it, and pressing ENTER. Here is a simple example script that generates the numbers 1 to 100 and then multiplies them by 2.",
      "nodes": [
        {
          "content": "<bpt id=\"p17\">**</bpt>Run the R script<ept id=\"p17\">**</ept>: The R script can be run directly from the R console by pasting it, selecting it, and pressing ENTER.",
          "pos": [
            0,
            162
          ]
        },
        {
          "content": "Here is a simple example script that generates the numbers 1 to 100 and then multiplies them by 2.",
          "pos": [
            163,
            261
          ]
        }
      ]
    },
    {
      "pos": [
        5362,
        5519
      ],
      "content": "The first two lines call the RHadoop libraries that are installed with R. The final line prints the results to the console. The output should look like this:",
      "nodes": [
        {
          "content": "The first two lines call the RHadoop libraries that are installed with R. The final line prints the results to the console.",
          "pos": [
            0,
            123
          ]
        },
        {
          "content": "The output should look like this:",
          "pos": [
            124,
            157
          ]
        }
      ]
    },
    {
      "pos": [
        5627,
        5658
      ],
      "content": "Install R using Aure PowerShell"
    },
    {
      "pos": [
        5660,
        6066
      ],
      "content": "See <bpt id=\"p18\">[</bpt>Customize HDInsight clusters using Script Action<ept id=\"p18\">](hdinsight-hadoop-customize-cluster.md#call_scripts_using_powershell)</ept>.  The sample demonstrates how to install Spark using Azure PowerShell. You need to customize the script to use <bpt id=\"p19\">[</bpt>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1<ept id=\"p19\">](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1)</ept>.",
      "nodes": [
        {
          "content": "See <bpt id=\"p18\">[</bpt>Customize HDInsight clusters using Script Action<ept id=\"p18\">](hdinsight-hadoop-customize-cluster.md#call_scripts_using_powershell)</ept>.",
          "pos": [
            0,
            164
          ]
        },
        {
          "content": "The sample demonstrates how to install Spark using Azure PowerShell.",
          "pos": [
            166,
            234
          ]
        },
        {
          "content": "You need to customize the script to use <bpt id=\"p19\">[</bpt>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1<ept id=\"p19\">](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1)</ept>.",
          "pos": [
            235,
            486
          ]
        }
      ]
    },
    {
      "pos": [
        6071,
        6095
      ],
      "content": "Install R using .NET SDK"
    },
    {
      "pos": [
        6097,
        6505
      ],
      "content": "See <bpt id=\"p20\">[</bpt>Customize HDInsight clusters using Script Action<ept id=\"p20\">](hdinsight-hadoop-customize-cluster.md#call_scripts_using_azure_powershell)</ept>. The sample demonstrates how to install Spark using the .NET SDK. You need to customize the script to use <bpt id=\"p21\">[</bpt>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1<ept id=\"p21\">](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps11)</ept>.",
      "nodes": [
        {
          "content": "See <bpt id=\"p20\">[</bpt>Customize HDInsight clusters using Script Action<ept id=\"p20\">](hdinsight-hadoop-customize-cluster.md#call_scripts_using_azure_powershell)</ept>.",
          "pos": [
            0,
            170
          ]
        },
        {
          "content": "The sample demonstrates how to install Spark using the .NET SDK.",
          "pos": [
            171,
            235
          ]
        },
        {
          "content": "You need to customize the script to use <bpt id=\"p21\">[</bpt>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1<ept id=\"p21\">](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps11)</ept>.",
          "pos": [
            236,
            488
          ]
        }
      ]
    },
    {
      "pos": [
        6511,
        6519
      ],
      "content": "See also"
    },
    {
      "pos": [
        6523,
        6616
      ],
      "content": "<bpt id=\"p22\">[</bpt>Install and use R on HDinsight Hadoop clusters (Linux)<ept id=\"p22\">](hdinsight-hadoop-r-scripts-linux.md)</ept>"
    },
    {
      "pos": [
        6619,
        6741
      ],
      "content": "<bpt id=\"p23\">[</bpt>Create Hadoop clusters in HDInsight<ept id=\"p23\">](hdinsight-provision-clusters.md)</ept>: general information on creating HDInsight clusters"
    },
    {
      "pos": [
        6744,
        6897
      ],
      "content": "<bpt id=\"p24\">[</bpt>Customize HDInsight cluster using Script Action<ept id=\"p24\">][hdinsight-cluster-customize]</ept>: general information on customizing HDInsight clusters using Script Action"
    },
    {
      "pos": [
        6900,
        6981
      ],
      "content": "<bpt id=\"p25\">[</bpt>Develop Script Action scripts for HDInsight<ept id=\"p25\">](hdinsight-hadoop-script-actions.md)</ept>"
    },
    {
      "pos": [
        6984,
        7099
      ],
      "content": "<bpt id=\"p26\">[</bpt>Install and use Spark on HDInsight clusters<ept id=\"p26\">][hdinsight-install-spark]</ept>: Script Action sample about installing Spark"
    },
    {
      "pos": [
        7102,
        7222
      ],
      "content": "<bpt id=\"p27\">[</bpt>Install Giraph on HDInsight clusters<ept id=\"p27\">](hdinsight-hadoop-giraph-install.md)</ept>: Script Action sample about installing Giraph"
    },
    {
      "pos": [
        7225,
        7346
      ],
      "content": "<bpt id=\"p28\">[</bpt>Install Solr on HDInsight clusters<ept id=\"p28\">](hdinsight-hadoop-solr-install-linux.md)</ept>: Script Action sample about installing Solr."
    }
  ],
  "content": "<properties\n    pageTitle=\"Use R in HDInsight to customize clusters | Microsoft Azure\"\n    description=\"Learn how to install R using Script Action, and use R on HDInsight clusters.\"\n    services=\"hdinsight\"\n    documentationCenter=\"\"\n    tags=\"azure-portal\"\n    authors=\"mumian\"\n    manager=\"paulettm\"\n    editor=\"cgronlun\"/>\n\n<tags\n    ms.service=\"hdinsight\"\n    ms.workload=\"big-data\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"01/14/2016\"\n    ms.author=\"jgao\"/>\n\n# Install and use R on HDInsight Hadoop clusters\n\n\nLearn how to customize Windows based HDInsight cluster with R using Script Action, and how to use R on HDInsight clusters. For information on using R with a Linux-based cluster, see [Install and use R on HDinsight Hadoop clusters (Linux)](hdinsight-hadoop-r-scripts-linux.md).\n \nYou can install R on any type of cluster (Hadoop, Storm, HBase, Spark) on Azure HDInsight by using *Script Action*. A sample script to install R on an HDInsight cluster is available from a read-only Azure storage blob at [https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1). \n\n**Related articles**\n\n- [Install and use R on HDinsight Hadoop clusters (Linux)](hdinsight-hadoop-r-scripts-linux.md)\n- [Create Hadoop clusters in HDInsight](hdinsight-provision-clusters.md): general information on creating HDInsight clusters\n- [Customize HDInsight cluster using Script Action][hdinsight-cluster-customize]: general information on customizing HDInsight clusters using Script Action\n- [Develop Script Action scripts for HDInsight](hdinsight-hadoop-script-actions.md)\n\n## What is R?\n\nThe <a href=\"http://www.r-project.org/\" target=\"_blank\">R Project for Statistical Computing</a> is an open source language and environment for statistical computing. R provides hundreds of build-in statistical functions and its own programming language that combines aspects of functional and object-oriented programming. It also provides extensive graphical capabilities. R is the preferred programming environment for most professional statisticians and scientists in a wide variety of fields.\n\nR is compatible with Azure Blob Storage (WASB) so that data that is stored there can be processed using R on HDInsight.  \n\n## Install R\n\nA [sample script](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1) to install R on an HDInsight cluster is available from a read-only blob in Azure Storage. This section provides instructions about how to use the sample script while creating the cluster using the Azure Portal.\n\n> [AZURE.NOTE] The sample script was introduced with HDInsight cluster version 3.1. For more information about  HDInsight cluster versions, see [HDInsight cluster versions](../hdinsight-component-versioning/).\n\n1. When you create an HDInsight cluster from the Portal, click **Optional Configuration**, and then click **Script Actions**.\n2. On the **Script Actions** page, enter the following values:\n\n    ![Use Script Action to customize a cluster](./media/hdinsight-hadoop-r-scripts/hdi-r-script-action.png \"Use Script Action to customize a cluster\")\n\n    <table border='1'>\n        <tr><th>Property</th><th>Value</th></tr>\n        <tr><td>Name</td>\n            <td>Specify a name for the script action, for example, <b>Install R</b>.</td></tr>\n        <tr><td>Script URI</td>\n            <td>Specify the URI to the script that is invoked to customize the cluster, for example, <i>https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1</i></td></tr>\n        <tr><td>Node Type</td>\n            <td>Specify the nodes on which the customization script is run. You can choose <b>All Nodes</b>, <b>Head nodes only</b>, or <b>Worker nodes</b> only.\n        <tr><td>Parameters</td>\n            <td>Specify the parameters, if required by the script. However, the script to install R does not require any parameters, so you can leave this blank.</td></tr>\n    </table>\n\n    You can add more than one script action to install multiple components on the cluster. After you have added the scripts, click the check mark to start crating the cluster.\n\nYou can also use the script to install R on HDInsight by using Azure PowerShell or the HDInsight .NET SDK. Instructions for these procedures are provided later in this article.\n\n## Run R scripts\nThis section describes how to run an R script on the Hadoop cluster with HDInsight.\n\n1. **Establish a Remote Desktop connection to the cluster**: From the Portal, enable Remote Desktop for the cluster you created with R installed, and then connect to the cluster. For instructions, see [Connect to HDInsight clusters using RDP](hdinsight-administer-use-management-portal.md#rdp).\n\n2. **Open the R console**: The R installation puts a link to the R console on the desktop of the head node. Click on it to open the R console.\n\n3. **Run the R script**: The R script can be run directly from the R console by pasting it, selecting it, and pressing ENTER. Here is a simple example script that generates the numbers 1 to 100 and then multiplies them by 2.\n\n        library(rmr2)\n        library(rhdfs)\n        ints = to.dfs(1:100)\n        calc = mapreduce(input = ints, map = function(k, v) cbind(v, 2*v))\n        from.dfs(calc)\n\nThe first two lines call the RHadoop libraries that are installed with R. The final line prints the results to the console. The output should look like this:\n\n    [1,]  1 2\n    [2,]  2 4\n    .\n    .\n    .\n    [98,]  98 196\n    [99,]  99 198\n    [100,] 100 200\n\n\n## Install R using Aure PowerShell\n\nSee [Customize HDInsight clusters using Script Action](hdinsight-hadoop-customize-cluster.md#call_scripts_using_powershell).  The sample demonstrates how to install Spark using Azure PowerShell. You need to customize the script to use [https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1).\n\n## Install R using .NET SDK\n\nSee [Customize HDInsight clusters using Script Action](hdinsight-hadoop-customize-cluster.md#call_scripts_using_azure_powershell). The sample demonstrates how to install Spark using the .NET SDK. You need to customize the script to use [https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1](https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps11).\n\n\n## See also\n\n- [Install and use R on HDinsight Hadoop clusters (Linux)](hdinsight-hadoop-r-scripts-linux.md)\n- [Create Hadoop clusters in HDInsight](hdinsight-provision-clusters.md): general information on creating HDInsight clusters\n- [Customize HDInsight cluster using Script Action][hdinsight-cluster-customize]: general information on customizing HDInsight clusters using Script Action\n- [Develop Script Action scripts for HDInsight](hdinsight-hadoop-script-actions.md)\n- [Install and use Spark on HDInsight clusters][hdinsight-install-spark]: Script Action sample about installing Spark\n- [Install Giraph on HDInsight clusters](hdinsight-hadoop-giraph-install.md): Script Action sample about installing Giraph\n- [Install Solr on HDInsight clusters](hdinsight-hadoop-solr-install-linux.md): Script Action sample about installing Solr.\n\n[powershell-install-configure]: powershell-install-configure.md\n[hdinsight-provision]: ../hdinsight-provision-clusters/\n[hdinsight-cluster-customize]: hdinsight-hadoop-customize-cluster-linux.md\n[hdinsight-install-spark]: hdinsight-hadoop-spark-install-linux.md\n"
}