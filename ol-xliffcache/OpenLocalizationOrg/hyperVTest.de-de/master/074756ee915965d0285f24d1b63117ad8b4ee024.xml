{
  "nodes": [
    {
      "pos": [
        27,
        93
      ],
      "content": "Step 3: Create a new Machine Learning experiment | Microsoft Azure"
    },
    {
      "pos": [
        112,
        235
      ],
      "content": "Step 3 of the Develop a predictive solution walkthrough: Create a new training experiment in Azure Machine Learning Studio."
    },
    {
      "pos": [
        562,
        628
      ],
      "content": "Walkthrough Step 3: Create a new Azure Machine Learning experiment"
    },
    {
      "pos": [
        630,
        801
      ],
      "content": "This is the third step of the walkthrough, <bpt id=\"p1\">[</bpt>Develop a predictive analytics solution in Azure Machine Learning<ept id=\"p1\">](machine-learning-walkthrough-develop-predictive-solution.md)</ept>"
    },
    {
      "pos": [
        808,
        900
      ],
      "content": "<bpt id=\"p2\">[</bpt>Create a Machine Learning workspace<ept id=\"p2\">](machine-learning-walkthrough-1-create-ml-workspace.md)</ept>"
    },
    {
      "pos": [
        905,
        974
      ],
      "content": "<bpt id=\"p3\">[</bpt>Upload existing data<ept id=\"p3\">](machine-learning-walkthrough-2-upload-data.md)</ept>"
    },
    {
      "pos": [
        979,
        1006
      ],
      "content": "<bpt id=\"p4\">**</bpt>Create a new experiment<ept id=\"p4\">**</ept>"
    },
    {
      "pos": [
        1011,
        1103
      ],
      "content": "<bpt id=\"p5\">[</bpt>Train and evaluate the models<ept id=\"p5\">](machine-learning-walkthrough-4-train-and-evaluate-models.md)</ept>"
    },
    {
      "pos": [
        1108,
        1187
      ],
      "content": "<bpt id=\"p6\">[</bpt>Deploy the web service<ept id=\"p6\">](machine-learning-walkthrough-5-publish-web-service.md)</ept>"
    },
    {
      "pos": [
        1192,
        1270
      ],
      "content": "<bpt id=\"p7\">[</bpt>Access the web service<ept id=\"p7\">](machine-learning-walkthrough-6-access-web-service.md)</ept>"
    },
    {
      "pos": [
        1284,
        1409
      ],
      "content": "The next step in this walkthrough is to create a new experiment in Machine Learning Studio that uses the dataset we uploaded."
    },
    {
      "pos": [
        1417,
        1471
      ],
      "content": "In Studio, click <bpt id=\"p8\">**</bpt>+NEW<ept id=\"p8\">**</ept><ph id=\"ph2\"/> at the bottom of the window."
    },
    {
      "pos": [
        1476,
        1632
      ],
      "content": "Select <bpt id=\"p9\">**</bpt>EXPERIMENT<ept id=\"p9\">**</ept>, and then select \"Blank Experiment\". Select the default experiment name at the top of the canvas and rename it to something meaningful",
      "nodes": [
        {
          "content": "Select <bpt id=\"p9\">**</bpt>EXPERIMENT<ept id=\"p9\">**</ept>, and then select \"Blank Experiment\".",
          "pos": [
            0,
            96
          ]
        },
        {
          "content": "Select the default experiment name at the top of the canvas and rename it to something meaningful",
          "pos": [
            97,
            194
          ]
        }
      ]
    },
    {
      "pos": [
        1640,
        1907
      ],
      "content": "<ph id=\"ph3\">[AZURE.TIP]</ph><ph id=\"ph4\"/> It's a good practice to fill in <bpt id=\"p10\">**</bpt>Summary<ept id=\"p10\">**</ept><ph id=\"ph5\"/> and <bpt id=\"p11\">**</bpt>Description<ept id=\"p11\">**</ept><ph id=\"ph6\"/> for the experiment in the <bpt id=\"p12\">**</bpt>Properties<ept id=\"p12\">**</ept><ph id=\"ph7\"/> pane. These properties give you the chance to document the experiment so that anyone who looks at it later will understand your goals and methodology.",
      "nodes": [
        {
          "content": "<ph id=\"ph3\">[AZURE.TIP]</ph><ph id=\"ph4\"/> It's a good practice to fill in <bpt id=\"p10\">**</bpt>Summary<ept id=\"p10\">**</ept><ph id=\"ph5\"/> and <bpt id=\"p11\">**</bpt>Description<ept id=\"p11\">**</ept><ph id=\"ph6\"/> for the experiment in the <bpt id=\"p12\">**</bpt>Properties<ept id=\"p12\">**</ept><ph id=\"ph7\"/> pane.",
          "pos": [
            0,
            316
          ]
        },
        {
          "content": "These properties give you the chance to document the experiment so that anyone who looks at it later will understand your goals and methodology.",
          "pos": [
            317,
            461
          ]
        }
      ]
    },
    {
      "pos": [
        1913,
        1999
      ],
      "content": "In the module palette to the left of the experiment canvas, expand <bpt id=\"p13\">**</bpt>Saved Datasets<ept id=\"p13\">**</ept>."
    },
    {
      "pos": [
        2004,
        2175
      ],
      "content": "Find the dataset you created under <bpt id=\"p14\">**</bpt>My Datasets<ept id=\"p14\">**</ept><ph id=\"ph8\"/> and drag it onto the canvas. You can also find the dataset by entering the name in the <bpt id=\"p15\">**</bpt>Search<ept id=\"p15\">**</ept><ph id=\"ph9\"/> box above the palette.",
      "nodes": [
        {
          "content": "Find the dataset you created under <bpt id=\"p14\">**</bpt>My Datasets<ept id=\"p14\">**</ept><ph id=\"ph8\"/> and drag it onto the canvas.",
          "pos": [
            0,
            133
          ]
        },
        {
          "content": "You can also find the dataset by entering the name in the <bpt id=\"p15\">**</bpt>Search<ept id=\"p15\">**</ept><ph id=\"ph9\"/> box above the palette.",
          "pos": [
            134,
            279
          ]
        }
      ]
    },
    {
      "pos": [
        2181,
        2401
      ],
      "content": "Prepare the data\nYou can view the first 100 rows of the data and some statistical information for the whole dataset by clicking the output port of the dataset (the small circle at the bottom) and selecting <bpt id=\"p16\">**</bpt>Visualize<ept id=\"p16\">**</ept>."
    },
    {
      "pos": [
        2405,
        2775
      ],
      "content": "Because the data file didn't come with column headings, Studio has provided generic headings (Col1, Col2, <bpt id=\"p17\">*</bpt>etc.<ept id=\"p17\">*</ept>). Good headings aren't essential to creating a model, but they will make it easier to work with the data in the experiment. Also, when we eventually publish this model in a web service, the headings will help identify the columns to the user of the service.",
      "nodes": [
        {
          "content": "Because the data file didn't come with column headings, Studio has provided generic headings (Col1, Col2, <bpt id=\"p17\">*</bpt>etc.<ept id=\"p17\">*</ept>).",
          "pos": [
            0,
            154
          ]
        },
        {
          "content": "Good headings aren't essential to creating a model, but they will make it easier to work with the data in the experiment.",
          "pos": [
            155,
            276
          ]
        },
        {
          "content": "Also, when we eventually publish this model in a web service, the headings will help identify the columns to the user of the service.",
          "pos": [
            277,
            410
          ]
        }
      ]
    },
    {
      "pos": [
        2779,
        2859
      ],
      "content": "We can add column headings using the [Metadata Editor][metadata-editor] module.\n",
      "nodes": [
        {
          "content": "We can add column headings using the [Metadata Editor][metadata-editor] module.",
          "pos": [
            0,
            79
          ]
        },
        {
          "content": "\n",
          "pos": [
            79,
            80
          ]
        }
      ]
    },
    {
      "pos": [
        2859,
        3028
      ],
      "content": "You use the [Metadata Editor][metadata-editor] module to change metadata associated with a dataset. In this case, it can provide more friendly names for column headings.",
      "nodes": [
        {
          "content": "You use the [Metadata Editor][metadata-editor] module to change metadata associated with a dataset.",
          "pos": [
            0,
            99
          ]
        },
        {
          "content": "In this case, it can provide more friendly names for column headings.",
          "pos": [
            100,
            169
          ]
        }
      ]
    },
    {
      "pos": [
        3031,
        3247
      ],
      "content": "To use [Metadata Editor][metadata-editor], you first specify which columns to modify (in this case, all of them), then you specify the action to be performed on those columns (in this case, changing column headings)."
    },
    {
      "pos": [
        3253,
        3387
      ],
      "content": "In the module palette, type \"metadata\" in the <bpt id=\"p18\">**</bpt>Search<ept id=\"p18\">**</ept><ph id=\"ph10\"/> box. You'll see [Metadata Editor][metadata-editor] appear in the module list.",
      "nodes": [
        {
          "content": "In the module palette, type \"metadata\" in the <bpt id=\"p18\">**</bpt>Search<ept id=\"p18\">**</ept><ph id=\"ph10\"/> box.",
          "pos": [
            0,
            116
          ]
        },
        {
          "content": "You'll see [Metadata Editor][metadata-editor] appear in the module list.",
          "pos": [
            117,
            189
          ]
        }
      ]
    },
    {
      "pos": [
        3392,
        3516
      ],
      "content": "Click and drag the [Metadata Editor][metadata-editor] module onto the canvas and drop it below the dataset we added earlier."
    },
    {
      "pos": [
        3521,
        3897
      ],
      "content": "Connect the dataset to the [Metadata Editor][metadata-editor]: click the output port of the dataset (the small circle at the bottom of the dataset), drag to the input port of [Metadata Editor][metadata-editor] (the small circle at the top of the module), then release the mouse button. The dataset and module will remain connected even if you move either around on the canvas.",
      "nodes": [
        {
          "content": "Connect the dataset to the [Metadata Editor][metadata-editor]: click the output port of the dataset (the small circle at the bottom of the dataset), drag to the input port of [Metadata Editor][metadata-editor] (the small circle at the top of the module), then release the mouse button.",
          "pos": [
            0,
            285
          ]
        },
        {
          "content": "The dataset and module will remain connected even if you move either around on the canvas.",
          "pos": [
            286,
            376
          ]
        }
      ]
    },
    {
      "pos": [
        3903,
        3954
      ],
      "content": "The experiment should now look something like this:"
    },
    {
      "pos": [
        3962,
        3990
      ],
      "content": "<ph id=\"ph11\">![</ph>Adding Metadata Editor<ph id=\"ph12\">][2]</ph>"
    },
    {
      "pos": [
        4000,
        4110
      ],
      "content": "The red exclamation mark indicates that we haven't set the properties for this module yet. We'll do that next.",
      "nodes": [
        {
          "content": "The red exclamation mark indicates that we haven't set the properties for this module yet.",
          "pos": [
            0,
            90
          ]
        },
        {
          "content": "We'll do that next.",
          "pos": [
            91,
            110
          ]
        }
      ]
    },
    {
      "pos": [
        4122,
        4528
      ],
      "content": "<ph id=\"ph13\">[AZURE.TIP]</ph><ph id=\"ph14\"/> You can add a comment to a module by double-clicking the module and entering text. This can help you see at a glance what the module is doing in your experiment. In this case, double-click the [Metadata Editor][metadata-editor] module and type the comment \"Add column headings\". Click anywhere else on the canvas to close the text box. Click the down-arrow on the module to display the comment.",
      "nodes": [
        {
          "content": "<ph id=\"ph13\">[AZURE.TIP]</ph><ph id=\"ph14\"/> You can add a comment to a module by double-clicking the module and entering text.",
          "pos": [
            0,
            128
          ]
        },
        {
          "content": "This can help you see at a glance what the module is doing in your experiment.",
          "pos": [
            129,
            207
          ]
        },
        {
          "content": "In this case, double-click the [Metadata Editor][metadata-editor] module and type the comment \"Add column headings\".",
          "pos": [
            208,
            324
          ]
        },
        {
          "content": "Click anywhere else on the canvas to close the text box.",
          "pos": [
            325,
            381
          ]
        },
        {
          "content": "Click the down-arrow on the module to display the comment.",
          "pos": [
            382,
            440
          ]
        }
      ]
    },
    {
      "pos": [
        4534,
        4670
      ],
      "content": "Select [Metadata Editor][metadata-editor], then in the <bpt id=\"p19\">**</bpt>Properties<ept id=\"p19\">**</ept><ph id=\"ph15\"/> pane to the right of the canvas, click <bpt id=\"p20\">**</bpt>Launch column selector<ept id=\"p20\">**</ept>."
    },
    {
      "pos": [
        4675,
        4755
      ],
      "content": "In the <bpt id=\"p21\">**</bpt>Select columns<ept id=\"p21\">**</ept><ph id=\"ph16\"/> dialog, set the <bpt id=\"p22\">**</bpt>Begin With<ept id=\"p22\">**</ept><ph id=\"ph17\"/> field to \"All columns\"."
    },
    {
      "pos": [
        4760,
        5089
      ],
      "leadings": [
        "",
        "    "
      ],
      "content": "The row beneath <bpt id=\"p23\">**</bpt>Begin With<ept id=\"p23\">**</ept><ph id=\"ph18\"/> allows you to include or exclude specific columns for [Metadata Editor][metadata-editor] to modify. Since we want to modify <bpt id=\"p24\">*</bpt>all<ept id=\"p24\">*</ept><ph id=\"ph19\"/> columns, delete this row by clicking the minus sign (\"-\") to the right of the row. The dialog should look like this:\n<ph id=\"ph20\">![</ph>Column Selector with all columns selected<ph id=\"ph21\">][4]</ph>",
      "nodes": [
        {
          "content": "The row beneath <bpt id=\"p23\">**</bpt>Begin With<ept id=\"p23\">**</ept><ph id=\"ph18\"/> allows you to include or exclude specific columns for [Metadata Editor][metadata-editor] to modify.",
          "pos": [
            0,
            185
          ]
        },
        {
          "content": "Since we want to modify <bpt id=\"p24\">*</bpt>all<ept id=\"p24\">*</ept><ph id=\"ph19\"/> columns, delete this row by clicking the minus sign (\"-\") to the right of the row.",
          "pos": [
            186,
            353
          ]
        },
        {
          "content": "The dialog should look like this:\n<ph id=\"ph20\">![</ph>Column Selector with all columns selected<ph id=\"ph21\">][4]</ph>",
          "pos": [
            354,
            473
          ]
        }
      ]
    },
    {
      "pos": [
        5094,
        5121
      ],
      "content": "Click the <bpt id=\"p25\">**</bpt>OK<ept id=\"p25\">**</ept><ph id=\"ph22\"/> checkmark."
    },
    {
      "pos": [
        5126,
        5462
      ],
      "content": "Back in the <bpt id=\"p26\">**</bpt>Properties<ept id=\"p26\">**</ept><ph id=\"ph23\"/> pane, look for the <bpt id=\"p27\">**</bpt>New column names<ept id=\"p27\">**</ept><ph id=\"ph24\"/> parameter. In this field, enter a list of names for the 21 columns in the dataset, separated by commas and in column order. You can obtain the columns names from the dataset documentation on the UCI website, or for convenience you can copy and paste the following list:",
      "nodes": [
        {
          "content": "Back in the <bpt id=\"p26\">**</bpt>Properties<ept id=\"p26\">**</ept><ph id=\"ph23\"/> pane, look for the <bpt id=\"p27\">**</bpt>New column names<ept id=\"p27\">**</ept><ph id=\"ph24\"/> parameter.",
          "pos": [
            0,
            187
          ]
        },
        {
          "content": "In this field, enter a list of names for the 21 columns in the dataset, separated by commas and in column order.",
          "pos": [
            188,
            300
          ]
        },
        {
          "content": "You can obtain the columns names from the dataset documentation on the UCI website, or for convenience you can copy and paste the following list:",
          "pos": [
            301,
            446
          ]
        }
      ]
    },
    {
      "pos": [
        5911,
        5951
      ],
      "content": "The Properties pane will look like this:"
    },
    {
      "pos": [
        5957,
        5993
      ],
      "content": "<ph id=\"ph25\">![</ph>Properties for Metadata Editor<ph id=\"ph26\">][1]</ph>"
    },
    {
      "pos": [
        5997,
        6420
      ],
      "content": "<ph id=\"ph27\">[AZURE.TIP]</ph><ph id=\"ph28\"/> If you want to verify the column headings, run the experiment (click <bpt id=\"p28\">**</bpt>RUN<ept id=\"p28\">**</ept><ph id=\"ph29\"/> below the experiment canvas). When it finishes running (a green checkmark will appear on [Metadata Editor][metadata-editor]), click the output port of the [Metadata Editor][metadata-editor] module, and select <bpt id=\"p29\">**</bpt>Visualize<ept id=\"p29\">**</ept>. You can view the output of any module in the same way to view the progress of the data through the experiment.",
      "nodes": [
        {
          "content": "<ph id=\"ph27\">[AZURE.TIP]</ph><ph id=\"ph28\"/> If you want to verify the column headings, run the experiment (click <bpt id=\"p28\">**</bpt>RUN<ept id=\"p28\">**</ept><ph id=\"ph29\"/> below the experiment canvas).",
          "pos": [
            0,
            207
          ]
        },
        {
          "content": "When it finishes running (a green checkmark will appear on [Metadata Editor][metadata-editor]), click the output port of the [Metadata Editor][metadata-editor] module, and select <bpt id=\"p29\">**</bpt>Visualize<ept id=\"p29\">**</ept>.",
          "pos": [
            208,
            441
          ]
        },
        {
          "content": "You can view the output of any module in the same way to view the progress of the data through the experiment.",
          "pos": [
            442,
            552
          ]
        }
      ]
    },
    {
      "pos": [
        6424,
        6457
      ],
      "content": "Create training and test datasets"
    },
    {
      "pos": [
        6458,
        6578
      ],
      "content": "The next step of the experiment is to generate separate datasets that we'll use for both training and testing our model."
    },
    {
      "pos": [
        6580,
        6630
      ],
      "content": "To do this, we use the [Split Data][split] module."
    },
    {
      "pos": [
        6638,
        6769
      ],
      "content": "Find the [Split Data][split] module, drag it onto the canvas, and connect it to the last [Metadata Editor][metadata-editor] module."
    },
    {
      "pos": [
        6774,
        7152
      ],
      "content": "By default, the split ratio is 0.5 and the <bpt id=\"p30\">**</bpt>Randomized split<ept id=\"p30\">**</ept><ph id=\"ph30\"/> parameter is set. This means that a random half of the data will be output through one port of the [Split Data][split] module, and half through the other. You can adjust these, as well as the <bpt id=\"p31\">**</bpt>Random seed<ept id=\"p31\">**</ept><ph id=\"ph31\"/> parameter, to change the split between training and testing data. For this example we'll leave them as-is.",
      "nodes": [
        {
          "content": "By default, the split ratio is 0.5 and the <bpt id=\"p30\">**</bpt>Randomized split<ept id=\"p30\">**</ept><ph id=\"ph30\"/> parameter is set.",
          "pos": [
            0,
            136
          ]
        },
        {
          "content": "This means that a random half of the data will be output through one port of the [Split Data][split] module, and half through the other.",
          "pos": [
            137,
            273
          ]
        },
        {
          "content": "You can adjust these, as well as the <bpt id=\"p31\">**</bpt>Random seed<ept id=\"p31\">**</ept><ph id=\"ph31\"/> parameter, to change the split between training and testing data.",
          "pos": [
            274,
            447
          ]
        },
        {
          "content": "For this example we'll leave them as-is.",
          "pos": [
            448,
            488
          ]
        }
      ]
    },
    {
      "pos": [
        7159,
        7433
      ],
      "content": "<ph id=\"ph32\">[AZURE.TIP]</ph><ph id=\"ph33\"/> The property <bpt id=\"p32\">**</bpt>Fraction of rows in the first output dataset<ept id=\"p32\">**</ept><ph id=\"ph34\"/>  determines how much of the data is output through the left output port. For instance, if you set the ratio to 0.7, then 70% of the data is output through the left port and 30% through the right port.",
      "nodes": [
        {
          "content": "<ph id=\"ph32\">[AZURE.TIP]</ph><ph id=\"ph33\"/> The property <bpt id=\"p32\">**</bpt>Fraction of rows in the first output dataset<ept id=\"p32\">**</ept><ph id=\"ph34\"/>  determines how much of the data is output through the left output port.",
          "pos": [
            0,
            235
          ]
        },
        {
          "content": "For instance, if you set the ratio to 0.7, then 70% of the data is output through the left port and 30% through the right port.",
          "pos": [
            236,
            363
          ]
        }
      ]
    },
    {
      "pos": [
        7439,
        7540
      ],
      "content": "Double-click the [Split Data][split] module and enter the comment, \"Training/testing data split 50%\"."
    },
    {
      "pos": [
        7543,
        7711
      ],
      "content": "We can use the outputs of the [Split Data][split] module however we like, but let's choose to use the left output as training data and the right output as testing data."
    },
    {
      "pos": [
        7715,
        8074
      ],
      "content": "As mentioned on the UCI website, the cost of misclassifying a high credit risk as low is 5 times larger than the cost of misclassifying a low credit risk as high. To account for this, we'll generate a new dataset that reflects this cost function. In the new dataset, each high risk example is replicated 5 times, while each low risk example is not replicated.",
      "nodes": [
        {
          "content": "As mentioned on the UCI website, the cost of misclassifying a high credit risk as low is 5 times larger than the cost of misclassifying a low credit risk as high.",
          "pos": [
            0,
            162
          ]
        },
        {
          "content": "To account for this, we'll generate a new dataset that reflects this cost function.",
          "pos": [
            163,
            246
          ]
        },
        {
          "content": "In the new dataset, each high risk example is replicated 5 times, while each low risk example is not replicated.",
          "pos": [
            247,
            359
          ]
        }
      ]
    },
    {
      "pos": [
        8079,
        8119
      ],
      "content": "We can do this replication using R code:"
    },
    {
      "pos": [
        8127,
        8371
      ],
      "content": "Find and drag the [Execute R Script][execute-r-script] module onto the experiment canvas and connect the left output port of the [Split Data][split] module to the first input port (\"Dataset1\") of the [Execute R Script][execute-r-script] module."
    },
    {
      "pos": [
        8375,
        8481
      ],
      "content": "Double-click the [Execute R Script][execute-r-script] module and enter the comment, \"Set cost adjustment\"."
    },
    {
      "pos": [
        8486,
        8590
      ],
      "content": "In the <bpt id=\"p33\">**</bpt>Properties<ept id=\"p33\">**</ept><ph id=\"ph35\"/> pane, delete the default text in the <bpt id=\"p34\">**</bpt>R Script<ept id=\"p34\">**</ept><ph id=\"ph36\"/> parameter and enter this script:"
    },
    {
      "pos": [
        8824,
        8988
      ],
      "content": "We need to do this same replication operation for each output of the [Split Data][split] module so that the training and testing data have the same cost adjustment."
    },
    {
      "pos": [
        8994,
        9074
      ],
      "content": "Right-click the [Execute R Script][execute-r-script] module and select <bpt id=\"p35\">**</bpt>Copy<ept id=\"p35\">**</ept>."
    },
    {
      "pos": [
        9079,
        9134
      ],
      "content": "Right-click the experiment canvas and select <bpt id=\"p36\">**</bpt>Paste<ept id=\"p36\">**</ept>."
    },
    {
      "pos": [
        9139,
        9279
      ],
      "content": "Connect the first input port of this [Execute R Script][execute-r-script] module to the right output port of the [Split Data][split] module."
    },
    {
      "pos": [
        9285,
        9486
      ],
      "content": "<ph id=\"ph37\">[AZURE.TIP]</ph><ph id=\"ph38\"/> The copy of the Execute R Script module contains the same script as the original module. When you copy and paste a module on the canvas, the copy retains all the properties of the original.",
      "nodes": [
        {
          "content": "<ph id=\"ph37\">[AZURE.TIP]</ph><ph id=\"ph38\"/> The copy of the Execute R Script module contains the same script as the original module.",
          "pos": [
            0,
            134
          ]
        },
        {
          "content": "When you copy and paste a module on the canvas, the copy retains all the properties of the original.",
          "pos": [
            135,
            235
          ]
        }
      ]
    },
    {
      "pos": [
        9490,
        9535
      ],
      "content": "Our experiment now looks something like this:"
    },
    {
      "pos": [
        9537,
        9576
      ],
      "content": "<ph id=\"ph39\">![</ph>Adding Split module and R scripts<ph id=\"ph40\">][3]</ph>"
    },
    {
      "pos": [
        9578,
        9726
      ],
      "content": "For more information on using R scripts in your experiments, see <bpt id=\"p37\">[</bpt>Extend your experiment with R<ept id=\"p37\">](machine-learning-extend-your-experiment-with-r.md)</ept>."
    },
    {
      "pos": [
        9728,
        9830
      ],
      "content": "<bpt id=\"p38\">**</bpt>Next: <bpt id=\"p39\">[</bpt>Train and evaluate the models<ept id=\"p39\">](machine-learning-walkthrough-4-train-and-evaluate-models.md)</ept><ept id=\"p38\">**</ept>"
    },
    {
      "pos": [
        10181,
        10465
      ],
      "content": "[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/\n[metadata-editor]: https://msdn.microsoft.com/library/azure/370b6676-c11c-486f-bf73-35349f842a66/\n[split]: https://msdn.microsoft.com/library/azure/70530644-c97a-4ab6-85f7-88bf30a8be5f/"
    }
  ],
  "content": "<properties\n    pageTitle=\"Step 3: Create a new Machine Learning experiment | Microsoft Azure\"\n    description=\"Step 3 of the Develop a predictive solution walkthrough: Create a new training experiment in Azure Machine Learning Studio.\"\n    services=\"machine-learning\"\n    documentationCenter=\"\"\n    authors=\"garyericson\"\n    manager=\"paulettm\"\n    editor=\"cgronlun\"/>\n\n<tags\n    ms.service=\"machine-learning\"\n    ms.workload=\"data-services\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"02/03/2016\" \n    ms.author=\"garye\"/>\n\n\n# Walkthrough Step 3: Create a new Azure Machine Learning experiment\n\nThis is the third step of the walkthrough, [Develop a predictive analytics solution in Azure Machine Learning](machine-learning-walkthrough-develop-predictive-solution.md)\n\n\n1.  [Create a Machine Learning workspace](machine-learning-walkthrough-1-create-ml-workspace.md)\n2.  [Upload existing data](machine-learning-walkthrough-2-upload-data.md)\n3.  **Create a new experiment**\n4.  [Train and evaluate the models](machine-learning-walkthrough-4-train-and-evaluate-models.md)\n5.  [Deploy the web service](machine-learning-walkthrough-5-publish-web-service.md)\n6.  [Access the web service](machine-learning-walkthrough-6-access-web-service.md)\n\n----------\n\nThe next step in this walkthrough is to create a new experiment in Machine Learning Studio that uses the dataset we uploaded.  \n\n1.  In Studio, click **+NEW** at the bottom of the window.\n2.  Select **EXPERIMENT**, and then select \"Blank Experiment\". Select the default experiment name at the top of the canvas and rename it to something meaningful\n\n    > [AZURE.TIP] It's a good practice to fill in **Summary** and **Description** for the experiment in the **Properties** pane. These properties give you the chance to document the experiment so that anyone who looks at it later will understand your goals and methodology.\n\n3.  In the module palette to the left of the experiment canvas, expand **Saved Datasets**.\n4.  Find the dataset you created under **My Datasets** and drag it onto the canvas. You can also find the dataset by entering the name in the **Search** box above the palette.  \n\n##Prepare the data\nYou can view the first 100 rows of the data and some statistical information for the whole dataset by clicking the output port of the dataset (the small circle at the bottom) and selecting **Visualize**.  \n\nBecause the data file didn't come with column headings, Studio has provided generic headings (Col1, Col2, *etc.*). Good headings aren't essential to creating a model, but they will make it easier to work with the data in the experiment. Also, when we eventually publish this model in a web service, the headings will help identify the columns to the user of the service.  \n\nWe can add column headings using the [Metadata Editor][metadata-editor] module.\nYou use the [Metadata Editor][metadata-editor] module to change metadata associated with a dataset. In this case, it can provide more friendly names for column headings. \n\nTo use [Metadata Editor][metadata-editor], you first specify which columns to modify (in this case, all of them), then you specify the action to be performed on those columns (in this case, changing column headings).\n\n1.  In the module palette, type \"metadata\" in the **Search** box. You'll see [Metadata Editor][metadata-editor] appear in the module list.\n2.  Click and drag the [Metadata Editor][metadata-editor] module onto the canvas and drop it below the dataset we added earlier.\n3.  Connect the dataset to the [Metadata Editor][metadata-editor]: click the output port of the dataset (the small circle at the bottom of the dataset), drag to the input port of [Metadata Editor][metadata-editor] (the small circle at the top of the module), then release the mouse button. The dataset and module will remain connected even if you move either around on the canvas.\n\n    The experiment should now look something like this:  \n\n    ![Adding Metadata Editor][2]\n    \n    The red exclamation mark indicates that we haven't set the properties for this module yet. We'll do that next.\n    \n    > [AZURE.TIP] You can add a comment to a module by double-clicking the module and entering text. This can help you see at a glance what the module is doing in your experiment. In this case, double-click the [Metadata Editor][metadata-editor] module and type the comment \"Add column headings\". Click anywhere else on the canvas to close the text box. Click the down-arrow on the module to display the comment.\n\n4.  Select [Metadata Editor][metadata-editor], then in the **Properties** pane to the right of the canvas, click **Launch column selector**.\n5.  In the **Select columns** dialog, set the **Begin With** field to \"All columns\".\n6.  The row beneath **Begin With** allows you to include or exclude specific columns for [Metadata Editor][metadata-editor] to modify. Since we want to modify *all* columns, delete this row by clicking the minus sign (\"-\") to the right of the row. The dialog should look like this:\n    ![Column Selector with all columns selected][4]\n7.  Click the **OK** checkmark.\n8.  Back in the **Properties** pane, look for the **New column names** parameter. In this field, enter a list of names for the 21 columns in the dataset, separated by commas and in column order. You can obtain the columns names from the dataset documentation on the UCI website, or for convenience you can copy and paste the following list:  \n\n          Status of checking account, Duration in months, Credit history, Purpose, Credit amount, Savings account/bond, Present employment since, Installment rate in percentage of disposable income, Personal status and sex, Other debtors, Present residence since, Property, Age in years, Other installment plans, Housing, Number of existing credits, Job, Number of people providing maintenance for, Telephone, Foreign worker, Credit risk  \n\n    The Properties pane will look like this:\n\n    ![Properties for Metadata Editor][1]\n\n> [AZURE.TIP] If you want to verify the column headings, run the experiment (click **RUN** below the experiment canvas). When it finishes running (a green checkmark will appear on [Metadata Editor][metadata-editor]), click the output port of the [Metadata Editor][metadata-editor] module, and select **Visualize**. You can view the output of any module in the same way to view the progress of the data through the experiment.\n\n##Create training and test datasets\nThe next step of the experiment is to generate separate datasets that we'll use for both training and testing our model.\n\nTo do this, we use the [Split Data][split] module.  \n\n1.  Find the [Split Data][split] module, drag it onto the canvas, and connect it to the last [Metadata Editor][metadata-editor] module.\n2.  By default, the split ratio is 0.5 and the **Randomized split** parameter is set. This means that a random half of the data will be output through one port of the [Split Data][split] module, and half through the other. You can adjust these, as well as the **Random seed** parameter, to change the split between training and testing data. For this example we'll leave them as-is.\n    > [AZURE.TIP] The property **Fraction of rows in the first output dataset**  determines how much of the data is output through the left output port. For instance, if you set the ratio to 0.7, then 70% of the data is output through the left port and 30% through the right port.  \n3. Double-click the [Split Data][split] module and enter the comment, \"Training/testing data split 50%\". \n\nWe can use the outputs of the [Split Data][split] module however we like, but let's choose to use the left output as training data and the right output as testing data.  \n\nAs mentioned on the UCI website, the cost of misclassifying a high credit risk as low is 5 times larger than the cost of misclassifying a low credit risk as high. To account for this, we'll generate a new dataset that reflects this cost function. In the new dataset, each high risk example is replicated 5 times, while each low risk example is not replicated.   \n\nWe can do this replication using R code:  \n\n1.  Find and drag the [Execute R Script][execute-r-script] module onto the experiment canvas and connect the left output port of the [Split Data][split] module to the first input port (\"Dataset1\") of the [Execute R Script][execute-r-script] module.\n2. Double-click the [Execute R Script][execute-r-script] module and enter the comment, \"Set cost adjustment\".\n2.  In the **Properties** pane, delete the default text in the **R Script** parameter and enter this script:\n\n          dataset1 <- maml.mapInputPort(1)\n          data.set<-dataset1[dataset1[,21]==1,]\n          pos<-dataset1[dataset1[,21]==2,]\n          for (i in 1:5) data.set<-rbind(data.set,pos)\n          maml.mapOutputPort(\"data.set\")\n\n\nWe need to do this same replication operation for each output of the [Split Data][split] module so that the training and testing data have the same cost adjustment.\n\n1.  Right-click the [Execute R Script][execute-r-script] module and select **Copy**.\n2.  Right-click the experiment canvas and select **Paste**.\n3.  Connect the first input port of this [Execute R Script][execute-r-script] module to the right output port of the [Split Data][split] module.  \n\n> [AZURE.TIP] The copy of the Execute R Script module contains the same script as the original module. When you copy and paste a module on the canvas, the copy retains all the properties of the original.  \n\nOur experiment now looks something like this:\n\n![Adding Split module and R scripts][3]\n\nFor more information on using R scripts in your experiments, see [Extend your experiment with R](machine-learning-extend-your-experiment-with-r.md).\n\n**Next: [Train and evaluate the models](machine-learning-walkthrough-4-train-and-evaluate-models.md)**\n\n\n[1]: ./media/machine-learning-walkthrough-3-create-new-experiment/create1.png\n[2]: ./media/machine-learning-walkthrough-3-create-new-experiment/create2.png\n[3]: ./media/machine-learning-walkthrough-3-create-new-experiment/create3.png\n[4]: ./media/machine-learning-walkthrough-3-create-new-experiment/columnselector.png\n\n\n<!-- Module References -->\n[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/\n[metadata-editor]: https://msdn.microsoft.com/library/azure/370b6676-c11c-486f-bf73-35349f842a66/\n[split]: https://msdn.microsoft.com/library/azure/70530644-c97a-4ab6-85f7-88bf30a8be5f/\n"
}