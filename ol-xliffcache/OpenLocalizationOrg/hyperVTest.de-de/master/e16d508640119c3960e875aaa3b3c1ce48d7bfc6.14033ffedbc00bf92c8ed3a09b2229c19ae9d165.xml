{"nodes":[{"pos":[0,95],"content":"ms.ContentId: 52DAFFBE-40F5-46D2-96F3-FB8659581594 title: What's New in Hyper-V for Windows 10","source":"ms.ContentId: 52DAFFBE-40F5-46D2-96F3-FB8659581594 \ntitle: What's New in Hyper-V for Windows 10"},{"content":"What's New for Hyper-V on Windows 10","pos":[99,135]},{"content":"12-Nov update.","pos":[137,151]},{"content":"This topic explains the new and changed functionality in Hyper-V on Windows 10®.","pos":[152,232]},{"content":"Windows PowerShell Direct","pos":[237,262]},{"content":"There is a now an easy and reliable way to run Windows PowerShell commands inside a virtual machine from the host operating system.","pos":[264,395]},{"content":"There are no network or firewall requirements or special configuration.","pos":[396,467]},{"content":"It works regardless of your remote management configuration.","pos":[468,529],"source":" \nIt works regardless of your remote management configuration."},{"content":"To use it, you must run Windows 10 or Windows Server Technical Preview on the host and the virtual machine guest operating system.","pos":[530,660]},{"content":"To create a PowerShell Direct session, use one of the following commands:","pos":[662,735]},{"content":"Today, Hyper-V administrators rely on two categories of tools for connecting to a virtual machine on their Hyper-V host:","pos":[844,964]},{"content":"Remote management tools such as PowerShell or Remote Desktop","pos":[967,1027]},{"content":"Hyper-V Virtual Machine Connection (VM Connect)","pos":[1030,1077]},{"content":"Both of these technologies work well, but each have trade-offs as your Hyper-V deployment grows.","pos":[1079,1175]},{"content":"VMConnect is reliable, but it can be hard to automate.","pos":[1176,1230]},{"content":"Remote PowerShell is powerful, but can be difficult to setup and maintain.","pos":[1231,1305]},{"content":"Windows PowerShell Direct provides a powerful scripting and automation experience with the simplicity of VMConnect.","pos":[1308,1423]},{"content":"Because Windows PowerShell Direct runs between the host and virtual machine, there is no need for a network connection or to enable remote management.","pos":[1424,1574]},{"content":"You do need guest credentials to log into the virtual machine.","pos":[1575,1637]},{"content":"Requirements","pos":[1644,1656]},{"content":"You must be connected to a Windows 10 or Windows Server Technical Preview host with virtual machines that run Windows 10 or Windows Server Technical Preview as guests.","pos":[1659,1826]},{"content":"You need to be logged in with Hyper-V Administrator credentials on the host.","pos":[1829,1905]},{"content":"You need User credentials for the virtual machine.","pos":[1908,1958]},{"content":"The virtual machine you want to connect to must be running and booted.","pos":[1961,2031]},{"content":"Hot add and remove for network adapters and memory","pos":[2037,2087]},{"content":"You can now add or remove a Network Adapter while the virtual machine is running, without downtime.","pos":[2089,2188]},{"content":"This works for generation 2 virtual machines running both Windows and Linux operating systems.","pos":[2189,2283]},{"content":"You can also adjust the amount of memory assigned to a virtual machine while it's running, even if you haven’t enabled Dynamic Memory.","pos":[2286,2420]},{"content":"This works for both generation 1 and generation 2 virtual machines.","pos":[2421,2488]},{"content":"Production checkpoints","pos":[2493,2515]},{"content":"Production checkpoints allow you to easily create “point in time” images of a virtual machine, which can be restored later on in a way that is completely supported for all production workloads.","pos":[2517,2710]},{"content":"This is achieved by using backup technology inside the guest to create the checkpoint, instead of using saved state technology.","pos":[2711,2838]},{"content":"For production checkpoints, the Volume Snapshot Service (VSS) is used inside Windows virtual machines.","pos":[2839,2941]},{"content":"Linux virtual machines flush their file system buffers to create a file system consistent checkpoint.","pos":[2942,3043]},{"content":"If you want to create checkpoints using saved state technology, you can still choose to use standard checkpoints for your virtual machine.","pos":[3044,3182]},{"pos":[3188,3321],"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> The default for new virtual machines will be to create production checkpoints with a fallback to standard checkpoints.","source":"**Important:** The default for new virtual machines will be to create production checkpoints with a fallback to standard checkpoints."},{"content":"Hyper-V Manager improvements","pos":[3329,3357]},{"content":"<bpt id=\"p1\">**</bpt>Alternate credentials support<ept id=\"p1\">**</ept> – You can now use a different set of credentials in Hyper-V manager when you connect to another Windows 10 Technical Preview remote host.","pos":[3361,3532],"source":"**Alternate credentials support** – You can now use a different set of credentials in Hyper-V manager when you connect to another Windows 10 Technical Preview remote host."},{"content":"You can also save these credentials so it's easier to log on later.","pos":[3533,3600]},{"content":"<bpt id=\"p1\">**</bpt>Down-level management<ept id=\"p1\">**</ept> - You can now use Hyper-V manager to manage more versions of Hyper-V.","pos":[3605,3700],"source":"**Down-level management** - You can now use Hyper-V manager to manage more versions of Hyper-V."},{"content":"With Hyper-V manager in Windows 10 Technical Preview, you can manage computers running Hyper-V on Windows Server 2012, Windows 8, Windows Server 2012 R2 and Windows 8.1.","pos":[3701,3870]},{"content":"<bpt id=\"p1\">**</bpt>Updated management protocol<ept id=\"p1\">**</ept> - Hyper-V manager has been updated to communicate with remote Hyper-V hosts using the WS-MAN protocol, which permits CredSSP, Kerberos or NTLM authentication.","pos":[3874,4064],"source":"**Updated management protocol** - Hyper-V manager has been updated to communicate with remote Hyper-V hosts using the WS-MAN protocol, which permits CredSSP, Kerberos or NTLM authentication."},{"content":"When you use CredSSP to connect to a remote Hyper-V host, it allows you to perform a live migration without first enabling constrained delegation in Active Directory.","pos":[4065,4231]},{"content":"WS-MAN-based infrastructure also simplifies the configuration necessary to enable a host for remote management.","pos":[4232,4343]},{"content":"WS-MAN connects over port 80, which is open by default.","pos":[4344,4399]},{"content":"Connected Standby works","pos":[4405,4428]},{"content":"When Hyper-V is enabled on a computer that uses the Always On/Always Connected (AOAC) power model, the Connected Standby power state is now available.","pos":[4431,4581]},{"content":"In Windows 8 and 8.1, Hyper-V caused computers that used the Always On/Always Connected (AOAC) power model (also known as InstantON) to never sleep.","pos":[4583,4731]},{"content":"See this <bpt id=\"p1\">[</bpt>KB article<ept id=\"p1\">](\nhttps://support.microsoft.com/en-us/kb/2973536)</ept> for a full discription.","pos":[4732,4826],"source":" See this [KB article](\nhttps://support.microsoft.com/en-us/kb/2973536) for a full discription."},{"content":"Linux secure boot","pos":[4832,4849]},{"content":"More Linux operating systems, running on generation 2 virtual machines, can now boot with the secure boot option enabled.","pos":[4852,4973]},{"content":"Ubuntu 14.04 and later, and SUSE Linux Enterprise Server 12, are enabled for secure boot on hosts that run the Technical Preview.","pos":[4975,5104]},{"content":"Before you boot the virtual machine for the first time, you must specify that the virtual machine should use the Microsoft UEFI Certificate Authority.","pos":[5105,5255]},{"content":"At an elevated Windows Powershell prompt, type:","pos":[5257,5304]},{"pos":[5387,5558],"content":"For more information on running Linux virtual machines on Hyper-V, see <bpt id=\"p1\">[</bpt>Linux and FreeBSD Virtual Machines on Hyper-V<ept id=\"p1\">](http://technet.microsoft.com/library/dn531030.aspx)</ept>.","source":"For more information on running Linux virtual machines on Hyper-V, see [Linux and FreeBSD Virtual Machines on Hyper-V](http://technet.microsoft.com/library/dn531030.aspx)."},{"content":"Virtual Machine Configuration Version","pos":[5566,5603]},{"content":"When you move or import a virtual machine to a host running Hyper-V on Windows 10 from host running Windows 8.1, the virtual machine’s configuration file isn't automatically upgraded.","pos":[5606,5789]},{"content":"This allows the virtual machine to be moved back to a host running Windows 8.1.","pos":[5790,5869]},{"content":"You won't have access to new virtual machine features until you manually update the virtual machine configuration version.","pos":[5870,5992]},{"content":"The virtual machine configuration version represents what version of Hyper-V the virtual machine’s configuration, saved state, and snapshot files it's compatible with.","pos":[5995,6162]},{"content":"Virtual machines with configuration version 5 are compatible with Windows 8.1 and can run on both Windows 8.1 and Windows 10.","pos":[6163,6288]},{"content":"Virtual machines with configuration version 6 are compatible with Windows 10 and won't run on Windows 8.1.","pos":[6289,6395]},{"content":"How do I check the configuration version of the virtual machines running on Hyper-V?","pos":[6402,6486]},{"content":"From an elevated command prompt, run the following command:","pos":[6489,6548]},{"content":"How do I upgrade the configuration version of a virtual machine?","pos":[6613,6677]},{"content":"From an elevated Windows PowerShell command prompt, run one of the following commands:","pos":[6681,6767]},{"content":"Or","pos":[6828,6830]},{"content":"Important:","pos":[6896,6906]},{"content":"After you upgrade the virtual machine configuration version, you can't move the virtual machine to a host that runs Windows 8.1.","pos":[6912,7040]},{"content":"You can't downgrade the virtual machine configuration version from version 6 to version 5.","pos":[7043,7133]},{"content":"You must turn off the virtual machine to upgrade the virtual machine configuration.","pos":[7136,7219]},{"content":"After the upgrade, the virtual machine uses the new configuration file format.","pos":[7222,7300]},{"content":"For more information, see New virtual machine configuration file format.","pos":[7301,7373]},{"content":"New virtual machine configuration file format","pos":[7379,7424]},{"content":"Virtual machines now have a new configuration file format which is designed to increase the efficiency of reading and writing virtual machine configuration data.","pos":[7426,7587]},{"content":"It's also designed to reduce the potential for data corruption if there's a storage failure.","pos":[7588,7680]},{"content":"The new configuration files use the .VMCX extension for virtual machine configuration data and the .VMRS extension for runtime state data.","pos":[7681,7819]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> The .VMCX file is a binary format.","pos":[7825,7874],"source":"**Important:** The .VMCX file is a binary format."},{"content":"Directly editing the .VMCX or .VMRS file isn't supported.","pos":[7875,7932]},{"content":"Integration Services delivered through Windows Update","pos":[7939,7992]},{"content":"Updates to integration services for Windows guests are now distributed through Windows Update.","pos":[7994,8088]},{"content":"Integration components (also called integration services) are the set of synthetic drivers which allow a virtual machine to communicate with the host operating system.","pos":[8090,8257]},{"content":"They control services ranging from time sync to guest file copy.","pos":[8259,8323]},{"content":"We've been talking to customers about integration component installation and update over the past year to discover that they are a huge pain point during the upgrade process.","pos":[8325,8499]},{"content":"Historically, all new versions of Hyper-V came with new integration components.","pos":[8502,8581]},{"content":"Upgrading the Hyper-V host required upgrading the integration components in the virtual machines as well.","pos":[8582,8687]},{"content":"The new integration components were included with the Hyper-V host then they were installed in the virtual machines using vmguest.iso.","pos":[8689,8823]},{"content":"This process required restarting the virtual machine and couldn't be batched with other Windows updates.","pos":[8825,8929]},{"content":"Since the Hyper-V administrator had to offer vmguest.iso and the virtual machine administrator had to install them, integration component upgrade required the Hyper-V administrator have administrator credentials in the virtual machines -- which isn't always the case.","pos":[8931,9198]},{"content":"In Windows 10 and going forward, all integration components will be delivered to virtual machined through Windows Update along with other important updates.","pos":[9204,9360]},{"content":"There are updates available today for virtual machines running:","pos":[9363,9426]},{"content":"Windows Server 2012","pos":[9430,9449]},{"content":"Windows Server 2008 R2","pos":[9453,9475]},{"content":"Windows 8","pos":[9479,9488]},{"content":"Windows 7","pos":[9492,9501]},{"content":"The virtual machine must be connected to Windows Update or a WSUS server.","pos":[9503,9576]},{"content":"In the future, integration component updates will have a category ID, for this release, they are listed as KBs.","pos":[9578,9689]},{"pos":[9691,9899],"content":"To read more about how we determine applicability, see this <bpt id=\"p1\">[</bpt>blog post<ept id=\"p1\">](http://blogs.technet.com/b/virtualization/archive/2014/11/24/integration-components-how-we-determine-windows-update-applicability.aspx)</ept>.","source":"To read more about how we determine applicability, see this [blog post](http://blogs.technet.com/b/virtualization/archive/2014/11/24/integration-components-how-we-determine-windows-update-applicability.aspx)."},{"pos":[9902,10101],"content":"See <bpt id=\"p1\">[</bpt>this blog<ept id=\"p1\">](http://blogs.msdn.com/b/virtual_pc_guy/archive/2014/11/12/updating-integration-components-over-windows-update.aspx)</ept> post for a detailed walkthrough of installing integration services.","source":"See [this blog](http://blogs.msdn.com/b/virtual_pc_guy/archive/2014/11/12/updating-integration-components-over-windows-update.aspx) post for a detailed walkthrough of installing integration services."},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> The ISO image file vmguest.iso is no longer needed for updating integration components.","pos":[10106,10208],"source":"**Important:** The ISO image file vmguest.iso is no longer needed for updating integration components."},{"content":"It's not included with Hyper-V on Windows 10.","pos":[10209,10254]},{"content":"Next Step","pos":[10262,10271]},{"content":"Walk through Hyper-V on Windows 10","pos":[10273,10307]}],"content":"ms.ContentId: 52DAFFBE-40F5-46D2-96F3-FB8659581594 \ntitle: What's New in Hyper-V for Windows 10\n\n# What's New for Hyper-V on Windows 10\n\n12-Nov update. This topic explains the new and changed functionality in Hyper-V on Windows 10®.\n\n## Windows PowerShell Direct\n\nThere is a now an easy and reliable way to run Windows PowerShell commands inside a virtual machine from the host operating system. There are no network or firewall requirements or special configuration. \nIt works regardless of your remote management configuration. To use it, you must run Windows 10 or Windows Server Technical Preview on the host and the virtual machine guest operating system.\n\nTo create a PowerShell Direct session, use one of the following commands:\n\n``` PowerShell\nEnter-PSSession -VMName VMName\nInvoke-Command -VMName VMName -ScriptBlock { commands }\n```\n\nToday, Hyper-V administrators rely on two categories of tools for connecting to a virtual machine on their Hyper-V host:\n- Remote management tools such as PowerShell or Remote Desktop\n- Hyper-V Virtual Machine Connection (VM Connect)\n\nBoth of these technologies work well, but each have trade-offs as your Hyper-V deployment grows. VMConnect is reliable, but it can be hard to automate. Remote PowerShell is powerful, but can be difficult to setup and maintain. \n\nWindows PowerShell Direct provides a powerful scripting and automation experience with the simplicity of VMConnect. Because Windows PowerShell Direct runs between the host and virtual machine, there is no need for a network connection or to enable remote management. You do need guest credentials to log into the virtual machine.\n\n#### Requirements\n- You must be connected to a Windows 10 or Windows Server Technical Preview host with virtual machines that run Windows 10 or Windows Server Technical Preview as guests.\n- You need to be logged in with Hyper-V Administrator credentials on the host.\n- You need User credentials for the virtual machine.\n- The virtual machine you want to connect to must be running and booted.\n\n\n## Hot add and remove for network adapters and memory\n\nYou can now add or remove a Network Adapter while the virtual machine is running, without downtime. This works for generation 2 virtual machines running both Windows and Linux operating systems. \n\nYou can also adjust the amount of memory assigned to a virtual machine while it's running, even if you haven’t enabled Dynamic Memory. This works for both generation 1 and generation 2 virtual machines.\n\n## Production checkpoints\n\nProduction checkpoints allow you to easily create “point in time” images of a virtual machine, which can be restored later on in a way that is completely supported for all production workloads. This is achieved by using backup technology inside the guest to create the checkpoint, instead of using saved state technology. For production checkpoints, the Volume Snapshot Service (VSS) is used inside Windows virtual machines. Linux virtual machines flush their file system buffers to create a file system consistent checkpoint. If you want to create checkpoints using saved state technology, you can still choose to use standard checkpoints for your virtual machine. \n\n\n> **Important:** The default for new virtual machines will be to create production checkpoints with a fallback to standard checkpoints. \n \n\n## Hyper-V Manager improvements\n\n- **Alternate credentials support** – You can now use a different set of credentials in Hyper-V manager when you connect to another Windows 10 Technical Preview remote host. You can also save these credentials so it's easier to log on later. \n\n- **Down-level management** - You can now use Hyper-V manager to manage more versions of Hyper-V. With Hyper-V manager in Windows 10 Technical Preview, you can manage computers running Hyper-V on Windows Server 2012, Windows 8, Windows Server 2012 R2 and Windows 8.1.\n\n- **Updated management protocol** - Hyper-V manager has been updated to communicate with remote Hyper-V hosts using the WS-MAN protocol, which permits CredSSP, Kerberos or NTLM authentication. When you use CredSSP to connect to a remote Hyper-V host, it allows you to perform a live migration without first enabling constrained delegation in Active Directory. WS-MAN-based infrastructure also simplifies the configuration necessary to enable a host for remote management. WS-MAN connects over port 80, which is open by default.\n\n\n## Connected Standby works \n\nWhen Hyper-V is enabled on a computer that uses the Always On/Always Connected (AOAC) power model, the Connected Standby power state is now available.\n\nIn Windows 8 and 8.1, Hyper-V caused computers that used the Always On/Always Connected (AOAC) power model (also known as InstantON) to never sleep. See this [KB article](\nhttps://support.microsoft.com/en-us/kb/2973536) for a full discription.\n\n\n## Linux secure boot \n\nMore Linux operating systems, running on generation 2 virtual machines, can now boot with the secure boot option enabled.  Ubuntu 14.04 and later, and SUSE Linux Enterprise Server 12, are enabled for secure boot on hosts that run the Technical Preview. Before you boot the virtual machine for the first time, you must specify that the virtual machine should use the Microsoft UEFI Certificate Authority.  At an elevated Windows Powershell prompt, type:\n\n    Set-VMFirmware vmname -SecureBootTemplate MicrosoftUEFICertificateAuthority\n\nFor more information on running Linux virtual machines on Hyper-V, see [Linux and FreeBSD Virtual Machines on Hyper-V](http://technet.microsoft.com/library/dn531030.aspx).\n \n \n## Virtual Machine Configuration Version \n\nWhen you move or import a virtual machine to a host running Hyper-V on Windows 10 from host running Windows 8.1, the virtual machine’s configuration file isn't automatically upgraded. This allows the virtual machine to be moved back to a host running Windows 8.1. You won't have access to new virtual machine features until you manually update the virtual machine configuration version. \n\nThe virtual machine configuration version represents what version of Hyper-V the virtual machine’s configuration, saved state, and snapshot files it's compatible with. Virtual machines with configuration version 5 are compatible with Windows 8.1 and can run on both Windows 8.1 and Windows 10. Virtual machines with configuration version 6 are compatible with Windows 10 and won't run on Windows 8.1.\n\n#### How do I check the configuration version of the virtual machines running on Hyper-V? \n\nFrom an elevated command prompt, run the following command:\n\n``` PowerShell\nGet-VM * | Format-Table Name, Version\n```\n\n#### How do I upgrade the configuration version of a virtual machine?  \n\nFrom an elevated Windows PowerShell command prompt, run one of the following commands:\n\n``` PowerShell\nUpdate-VmConfigurationVersion <vmname>\n```\n\nOr\n\n``` PowerShell\nUpdate-VmConfigurationVersion <vmobject>\n```\n\n\n**Important: **\n- After you upgrade the virtual machine configuration version, you can't move the virtual machine to a host that runs Windows 8.1.\n- You can't downgrade the virtual machine configuration version from version 6 to version 5.\n- You must turn off the virtual machine to upgrade the virtual machine configuration.\n- After the upgrade, the virtual machine uses the new configuration file format. For more information, see New virtual machine configuration file format.\n\n\n## New virtual machine configuration file format\n\nVirtual machines now have a new configuration file format which is designed to increase the efficiency of reading and writing virtual machine configuration data. It's also designed to reduce the potential for data corruption if there's a storage failure. The new configuration files use the .VMCX extension for virtual machine configuration data and the .VMRS extension for runtime state data. \n\n\n> **Important:** The .VMCX file is a binary format. Directly editing the .VMCX or .VMRS file isn't supported.\n\n\n\n## Integration Services delivered through Windows Update\n\nUpdates to integration services for Windows guests are now distributed through Windows Update.\n\nIntegration components (also called integration services) are the set of synthetic drivers which allow a virtual machine to communicate with the host operating system.  They control services ranging from time sync to guest file copy.  We've been talking to customers about integration component installation and update over the past year to discover that they are a huge pain point during the upgrade process.　\n\nHistorically, all new versions of Hyper-V came with new integration components. Upgrading the Hyper-V host required upgrading the integration components in the virtual machines as well.  The new integration components were included with the Hyper-V host then they were installed in the virtual machines using vmguest.iso.  This process required restarting the virtual machine and couldn't be batched with other Windows updates.  Since the Hyper-V administrator had to offer vmguest.iso and the virtual machine administrator had to install them, integration component upgrade required the Hyper-V administrator have administrator credentials in the virtual machines -- which isn't always the case.　　　　\n\nIn Windows 10 and going forward, all integration components will be delivered to virtual machined through Windows Update along with other important updates.　\n\nThere are updates available today for virtual machines running:\n*  Windows Server 2012\n*  Windows Server 2008 R2\n*  Windows 8\n*  Windows 7\n\nThe virtual machine must be connected to Windows Update or a WSUS server.  In the future, integration component updates will have a category ID, for this release, they are listed as KBs.\n\nTo read more about how we determine applicability, see this [blog post](http://blogs.technet.com/b/virtualization/archive/2014/11/24/integration-components-how-we-determine-windows-update-applicability.aspx).\n\n\nSee [this blog](http://blogs.msdn.com/b/virtual_pc_guy/archive/2014/11/12/updating-integration-components-over-windows-update.aspx) post for a detailed walkthrough of installing integration services.\n\n\n> **Important:** The ISO image file vmguest.iso is no longer needed for updating integration components. It's not included with Hyper-V on Windows 10.\n\n\n\n\n## Next Step\n[Walk through Hyper-V on Windows 10](..\\quick_start\\walkthrough.md) \n"}