{
  "nodes": [
    {
      "pos": [
        27,
        82
      ],
      "content": "Register for Microsoft authentication | Microsoft Azure"
    },
    {
      "pos": [
        101,
        194
      ],
      "content": "Learn how to register for Microsoft authentication in your Azure Mobile Services application."
    },
    {
      "pos": [
        519,
        580
      ],
      "content": "Register your app to use Microsoft account for authentication"
    },
    {
      "pos": [
        685,
        691
      ],
      "content": "&amp;nbsp;"
    },
    {
      "pos": [
        839,
        847
      ],
      "content": "Overview"
    },
    {
      "pos": [
        849,
        1106
      ],
      "content": "This topic shows you how to register your mobile app to be able to use Microsoft account as an identity provider with Azure Mobile Services. The same steps apply for both service-directed authentication and client-directed authentication using the Live SDK.",
      "nodes": [
        {
          "content": "This topic shows you how to register your mobile app to be able to use Microsoft account as an identity provider with Azure Mobile Services.",
          "pos": [
            0,
            140
          ]
        },
        {
          "content": "The same steps apply for both service-directed authentication and client-directed authentication using the Live SDK.",
          "pos": [
            141,
            257
          ]
        }
      ]
    },
    {
      "pos": [
        1110,
        1167
      ],
      "content": "Register your Windows Store app at the Windows Dev Center"
    },
    {
      "pos": [
        1169,
        1241
      ],
      "content": "Windows Store apps must first be registered with the Windows Dev Center."
    },
    {
      "pos": [
        1244,
        1347
      ],
      "content": "<ph id=\"ph4\">[AZURE.NOTE]</ph>Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows apps can skip this section."
    },
    {
      "pos": [
        1352,
        1580
      ],
      "content": "If you have not already registered your app, navigate to the <bpt id=\"p1\">[</bpt>Windows Dev Center<ept id=\"p1\">](https://dev.windows.com/dashboard/Application/New)</ept>, log on with your Microsoft account, type a name for your app, then click <bpt id=\"p2\">**</bpt>Reserve app name<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        1585,
        1756
      ],
      "content": "Open your Windows app project in Visual Studio, then in Solution Explorer right-click the Windows Store app project, click <bpt id=\"p3\">**</bpt>Store<ept id=\"p3\">**</ept><ph id=\"ph5\"/> &gt; <bpt id=\"p4\">**</bpt>Associate App with the Store...<ept id=\"p4\">**</ept>."
    },
    {
      "pos": [
        1874,
        2018
      ],
      "content": "In the wizard, click <bpt id=\"p5\">**</bpt>Sign in<ept id=\"p5\">**</ept><ph id=\"ph7\"/> and sign-in with your Microsoft account, select the app name you reserved, then click <bpt id=\"p6\">**</bpt>Next<ept id=\"p6\">**</ept><ph id=\"ph8\"/> &gt; <bpt id=\"p7\">**</bpt>Associate<ept id=\"p7\">**</ept>."
    },
    {
      "pos": [
        2023,
        2124
      ],
      "content": "(Optional) For a universal Windows 8.1 app, repeat steps 4 and 5 for the Windows Phone Store project."
    },
    {
      "pos": [
        2129,
        2227
      ],
      "content": "Back in the Windows Dev Center page for your new app, click <bpt id=\"p8\">**</bpt>Services<ept id=\"p8\">**</ept><ph id=\"ph9\"/> &gt; <bpt id=\"p9\">**</bpt>Push notifications<ept id=\"p9\">**</ept>."
    },
    {
      "pos": [
        2232,
        2384
      ],
      "content": "In the <bpt id=\"p10\">**</bpt>Push notifications<ept id=\"p10\">**</ept><ph id=\"ph10\"/> page, click <bpt id=\"p11\">**</bpt>Live Services site<ept id=\"p11\">**</ept><ph id=\"ph11\"/> under <bpt id=\"p12\">**</bpt>Windows Push Notification Services (WNS) and Microsoft Azure Mobile Services<ept id=\"p12\">**</ept>."
    },
    {
      "pos": [
        2386,
        2554
      ],
      "content": "This displays the Microsoft account page for your app. Next, you will get the authentication credentials that Azure needs to use Microsoft authentication with your app.",
      "nodes": [
        {
          "content": "This displays the Microsoft account page for your app.",
          "pos": [
            0,
            54
          ]
        },
        {
          "content": "Next, you will get the authentication credentials that Azure needs to use Microsoft authentication with your app.",
          "pos": [
            55,
            168
          ]
        }
      ]
    },
    {
      "pos": [
        2559,
        2635
      ],
      "content": "Configure your Microsoft account registration and connect to Mobile Services"
    },
    {
      "pos": [
        2637,
        2882
      ],
      "content": "The first step in this section applies only to Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows Store apps. For these apps, you can also ignore the Package security identifier (SID), which is only available for Windows Store apps.",
      "nodes": [
        {
          "content": "The first step in this section applies only to Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows Store apps.",
          "pos": [
            0,
            122
          ]
        },
        {
          "content": "For these apps, you can also ignore the Package security identifier (SID), which is only available for Windows Store apps.",
          "pos": [
            123,
            245
          ]
        }
      ]
    },
    {
      "pos": [
        2887,
        3181
      ],
      "content": "For a non-Windows Store app, navigate to the <bpt id=\"p13\">[</bpt>My Applications<ept id=\"p13\">](http://go.microsoft.com/fwlink/p/?LinkId=262039)</ept><ph id=\"ph12\"/> page in the Microsoft account Developer Center, log on with your Microsoft account (if required), click <bpt id=\"p14\">**</bpt>Create application<ept id=\"p14\">**</ept>, type an <bpt id=\"p15\">**</bpt>Application name<ept id=\"p15\">**</ept>, then click <bpt id=\"p16\">**</bpt>I accept<ept id=\"p16\">**</ept>."
    },
    {
      "pos": [
        3187,
        3290
      ],
      "content": "This reserves you app name with Microsoft account and displays the Microsoft account page for your app."
    },
    {
      "pos": [
        3295,
        3541
      ],
      "content": "In the Microsoft account page for your app, click <bpt id=\"p17\">**</bpt>API Settings<ept id=\"p17\">**</ept>, enable <bpt id=\"p18\">**</bpt>Mobile or desktop client app<ept id=\"p18\">**</ept>, set the mobile service URL as the <bpt id=\"p19\">**</bpt>Target domain<ept id=\"p19\">**</ept>, then supply one of the following URL formats in <bpt id=\"p20\">**</bpt>Redirect URL<ept id=\"p20\">**</ept><ph id=\"ph13\"/> and click <bpt id=\"p21\">**</bpt>Save<ept id=\"p21\">**</ept>:"
    },
    {
      "pos": [
        3549,
        3627
      ],
      "content": "<bpt id=\"p22\">**</bpt>.NET backend<ept id=\"p22\">**</ept>: <ph id=\"ph14\">`https://&lt;mobile_service&gt;.azure-mobile.net/signin-microsoft`</ph>"
    },
    {
      "pos": [
        3634,
        3724
      ],
      "content": "<bpt id=\"p23\">**</bpt>JavaScript backend<ept id=\"p23\">**</ept>: <ph id=\"ph15\">`https://&lt;mobile_service&gt;.azure-mobile.net/login/microsoftaccount`</ph>"
    },
    {
      "pos": [
        3732,
        3959
      ],
      "content": "<ph id=\"ph16\">[AZURE.NOTE]</ph>Make sure that you use the correct redirect URL path format for your type of Mobile Services backend. When this is incorrect, authentication will not succeed. The <bpt id=\"p24\">**</bpt>Root domain<ept id=\"p24\">**</ept><ph id=\"ph17\"/> should fill in automatically.\n&amp;nbsp;",
      "nodes": [
        {
          "content": "<ph id=\"ph16\">[AZURE.NOTE]</ph>Make sure that you use the correct redirect URL path format for your type of Mobile Services backend.",
          "pos": [
            0,
            132
          ]
        },
        {
          "content": "When this is incorrect, authentication will not succeed.",
          "pos": [
            133,
            189
          ]
        },
        {
          "content": "The <bpt id=\"p24\">**</bpt>Root domain<ept id=\"p24\">**</ept><ph id=\"ph17\"/> should fill in automatically.",
          "pos": [
            190,
            294
          ]
        },
        {
          "content": "&amp;nbsp;",
          "pos": [
            295,
            305
          ]
        }
      ]
    },
    {
      "pos": [
        3965,
        4105
      ],
      "content": "<ph id=\"ph18\">![</ph>Microsoft account API settings<ph id=\"ph19\">](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-win8-app-push-auth-2.png)</ph>"
    },
    {
      "pos": [
        4111,
        4224
      ],
      "content": "Click <bpt id=\"p25\">**</bpt>App Settings<ept id=\"p25\">**</ept><ph id=\"ph20\"/> and make a note of the values of the <bpt id=\"p26\">**</bpt>Client ID<ept id=\"p26\">**</ept>, <bpt id=\"p27\">**</bpt>Client secret<ept id=\"p27\">**</ept><ph id=\"ph21\"/> and <bpt id=\"p28\">**</bpt>Package SID<ept id=\"p28\">**</ept>."
    },
    {
      "pos": [
        4230,
        4368
      ],
      "content": "<ph id=\"ph22\">![</ph>Microsoft account app settings<ph id=\"ph23\">](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-win8-app-push-auth.png)</ph>"
    },
    {
      "pos": [
        4591,
        4782
      ],
      "content": "In the <bpt id=\"p29\">[</bpt><ept id=\"p29\">Azure classic portal]</ept>, click the <bpt id=\"p30\">**</bpt>Identity<ept id=\"p30\">**</ept><ph id=\"ph24\"/> tab for the mobile service, enter the client ID, client secret and package SID obtained from your identity provider, then click <bpt id=\"p31\">**</bpt>Save<ept id=\"p31\">**</ept>."
    },
    {
      "pos": [
        4789,
        4928
      ],
      "content": "<ph id=\"ph25\">[AZURE.NOTE]</ph>You do not need to supply a Package SID value for a Windows Phone 8, Windows Phone Store 8.1 Silverlight, or a non-Windows app."
    },
    {
      "pos": [
        4930,
        5018
      ],
      "content": "Both your mobile service and your app are now configured to work with Microsoft account."
    }
  ],
  "content": "<properties\n    pageTitle=\"Register for Microsoft authentication | Microsoft Azure\"\n    description=\"Learn how to register for Microsoft authentication in your Azure Mobile Services application.\"\n    authors=\"ggailey777\"\n    services=\"mobile-services\"\n    documentationCenter=\"Mobile\"\n    manager=\"dwrede\"\n    editor=\"\"/>\n\n<tags \n    ms.service=\"mobile-services\" \n    ms.workload=\"mobile\" \n    ms.tgt_pltfrm=\"NA\" \n    ms.devlang=\"multiple\" \n    ms.topic=\"article\" \n    ms.date=\"11/30/2015\" \n    ms.author=\"glenga\"/>\n\n# Register your app to use Microsoft account for authentication\n\n[AZURE.INCLUDE [mobile-service-note-mobile-apps](../../includes/mobile-services-note-mobile-apps.md)]\n\n&nbsp;\n\n\n[AZURE.INCLUDE [mobile-services-selector-register-identity-provider](../../includes/mobile-services-selector-register-identity-provider.md)]\n\n## Overview\n\nThis topic shows you how to register your mobile app to be able to use Microsoft account as an identity provider with Azure Mobile Services. The same steps apply for both service-directed authentication and client-directed authentication using the Live SDK.\n\n##Register your Windows Store app at the Windows Dev Center\n\nWindows Store apps must first be registered with the Windows Dev Center.\n\n>[AZURE.NOTE]Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows apps can skip this section.\n\n1. If you have not already registered your app, navigate to the [Windows Dev Center](https://dev.windows.com/dashboard/Application/New), log on with your Microsoft account, type a name for your app, then click **Reserve app name**.\n\n3. Open your Windows app project in Visual Studio, then in Solution Explorer right-click the Windows Store app project, click **Store** > **Associate App with the Store...**.\n\n    ![](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-store-association.png)\n\n5. In the wizard, click **Sign in** and sign-in with your Microsoft account, select the app name you reserved, then click **Next** > **Associate**.\n\n6. (Optional) For a universal Windows 8.1 app, repeat steps 4 and 5 for the Windows Phone Store project.\n\n6. Back in the Windows Dev Center page for your new app, click **Services** > **Push notifications**.\n\n7. In the **Push notifications** page, click **Live Services site** under **Windows Push Notification Services (WNS) and Microsoft Azure Mobile Services**.\n\nThis displays the Microsoft account page for your app. Next, you will get the authentication credentials that Azure needs to use Microsoft authentication with your app.\n\n## Configure your Microsoft account registration and connect to Mobile Services\n\nThe first step in this section applies only to Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows Store apps. For these apps, you can also ignore the Package security identifier (SID), which is only available for Windows Store apps.\n\n1. For a non-Windows Store app, navigate to the [My Applications](http://go.microsoft.com/fwlink/p/?LinkId=262039) page in the Microsoft account Developer Center, log on with your Microsoft account (if required), click **Create application**, type an **Application name**, then click **I accept**.\n\n    This reserves you app name with Microsoft account and displays the Microsoft account page for your app.\n\n2. In the Microsoft account page for your app, click **API Settings**, enable **Mobile or desktop client app**, set the mobile service URL as the **Target domain**, then supply one of the following URL formats in **Redirect URL** and click **Save**:\n\n    + **.NET backend**: `https://<mobile_service>.azure-mobile.net/signin-microsoft`\n    + **JavaScript backend**: `https://<mobile_service>.azure-mobile.net/login/microsoftaccount`\n\n     >[AZURE.NOTE]Make sure that you use the correct redirect URL path format for your type of Mobile Services backend. When this is incorrect, authentication will not succeed. The **Root domain** should fill in automatically.\n&nbsp;\n\n    ![Microsoft account API settings](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-win8-app-push-auth-2.png)\n\n\n4. Click **App Settings** and make a note of the values of the **Client ID**, **Client secret** and **Package SID**.\n\n    ![Microsoft account app settings](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-win8-app-push-auth.png)\n\n\n    > [AZURE.NOTE] The client secret is an important security credential. Do not share the client secret with anyone or distribute it with your app. Only Windows Store app registrations will see a Package SID field.\n\n4. In the [Azure classic portal], click the **Identity** tab for the mobile service, enter the client ID, client secret and package SID obtained from your identity provider, then click **Save**.\n\n    >[AZURE.NOTE]You do not need to supply a Package SID value for a Windows Phone 8, Windows Phone Store 8.1 Silverlight, or a non-Windows app.\n\nBoth your mobile service and your app are now configured to work with Microsoft account.\n\n<!-- Anchors. -->\n\n<!-- Images. -->\n\n<!-- URLs. -->\n\n[Submit an app page]: http://go.microsoft.com/fwlink/p/?LinkID=266582\n[My Applications]: http://go.microsoft.com/fwlink/p/?LinkId=262039\n\n[Azure classic portal]: https://manage.windowsazure.com/\n"
}