{
  "nodes": [
    {
      "pos": [
        27,
        83
      ],
      "content": "Add Push Notifications to App (iOS) | JavaScript Backend"
    },
    {
      "pos": [
        102,
        184
      ],
      "content": "Learn how to use Azure Mobile Services to send push notifications to your iOS app."
    },
    {
      "pos": [
        521,
        577
      ],
      "content": "Add Push Notifications to iOS App and JavaScript Backend"
    },
    {
      "pos": [
        701,
        962
      ],
      "content": "This topic shows you how to add push notifications to the <bpt id=\"p1\">[</bpt>quickstart project<ept id=\"p1\">](mobile-services-ios-get-started.md)</ept>, so that your mobile service sends a push notification each time a record is inserted. You must complete [Get Started with Mobile Services] first.",
      "nodes": [
        {
          "content": "This topic shows you how to add push notifications to the <bpt id=\"p1\">[</bpt>quickstart project<ept id=\"p1\">](mobile-services-ios-get-started.md)</ept>, so that your mobile service sends a push notification each time a record is inserted.",
          "pos": [
            0,
            239
          ]
        },
        {
          "content": "You must complete [Get Started with Mobile Services] first.",
          "pos": [
            240,
            299
          ]
        }
      ]
    },
    {
      "pos": [
        966,
        1315
      ],
      "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> The <bpt id=\"p2\">[</bpt>iOS simulator does not support push notifications<ept id=\"p2\">](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/iOS_Simulator_Guide/TestingontheiOSSimulator.html)</ept>, so you must use a physical iOS device. You'll also need to sign up for a paid <bpt id=\"p3\">[</bpt>Apple Developer Program membership<ept id=\"p3\">](https://developer.apple.com/programs/ios/)</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> The <bpt id=\"p2\">[</bpt>iOS simulator does not support push notifications<ept id=\"p2\">](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/iOS_Simulator_Guide/TestingontheiOSSimulator.html)</ept>, so you must use a physical iOS device.",
          "pos": [
            0,
            299
          ]
        },
        {
          "content": "You'll also need to sign up for a paid <bpt id=\"p3\">[</bpt>Apple Developer Program membership<ept id=\"p3\">](https://developer.apple.com/programs/ios/)</ept>.",
          "pos": [
            300,
            457
          ]
        }
      ]
    },
    {
      "pos": [
        1445,
        1487
      ],
      "content": "Configure Azure to Send Push Notifications"
    },
    {
      "pos": [
        1647,
        1695
      ],
      "content": "Update Backend Script to Send Push Notifications"
    },
    {
      "pos": [
        1699,
        1938
      ],
      "content": "In the [Azure classic portal], click the <bpt id=\"p4\">**</bpt>Data<ept id=\"p4\">**</ept><ph id=\"ph7\"/> tab and then click <bpt id=\"p5\">**</bpt>TodoItem<ept id=\"p5\">**</ept>. In <bpt id=\"p6\">**</bpt>TodoItem<ept id=\"p6\">**</ept>, click the <bpt id=\"p7\">**</bpt>Script<ept id=\"p7\">**</ept><ph id=\"ph8\"/> tab and select <bpt id=\"p8\">**</bpt>Insert<ept id=\"p8\">**</ept>. This displays the function that is invoked when an insert occurs in the <bpt id=\"p9\">**</bpt>TodoItem<ept id=\"p9\">**</ept><ph id=\"ph9\"/> table.",
      "nodes": [
        {
          "content": "In the [Azure classic portal], click the <bpt id=\"p4\">**</bpt>Data<ept id=\"p4\">**</ept><ph id=\"ph7\"/> tab and then click <bpt id=\"p5\">**</bpt>TodoItem<ept id=\"p5\">**</ept>.",
          "pos": [
            0,
            172
          ]
        },
        {
          "content": "In <bpt id=\"p6\">**</bpt>TodoItem<ept id=\"p6\">**</ept>, click the <bpt id=\"p7\">**</bpt>Script<ept id=\"p7\">**</ept><ph id=\"ph8\"/> tab and select <bpt id=\"p8\">**</bpt>Insert<ept id=\"p8\">**</ept>.",
          "pos": [
            173,
            365
          ]
        },
        {
          "content": "This displays the function that is invoked when an insert occurs in the <bpt id=\"p9\">**</bpt>TodoItem<ept id=\"p9\">**</ept><ph id=\"ph9\"/> table.",
          "pos": [
            366,
            509
          ]
        }
      ]
    },
    {
      "pos": [
        1942,
        2289
      ],
      "content": "Replace the insert function with the following code, and then click <bpt id=\"p10\">**</bpt>Save<ept id=\"p10\">**</ept>.  This registers a new insert script, which uses the [apns object] to send a push notification (the inserted text) to the device provided in the insert request. This script delays sending the notification to give you time to close the app to receive a push notification.",
      "nodes": [
        {
          "content": "Replace the insert function with the following code, and then click <bpt id=\"p10\">**</bpt>Save<ept id=\"p10\">**</ept>.",
          "pos": [
            0,
            117
          ]
        },
        {
          "content": "This registers a new insert script, which uses the [apns object] to send a push notification (the inserted text) to the device provided in the insert request.",
          "pos": [
            119,
            277
          ]
        },
        {
          "content": "This script delays sending the notification to give you time to close the app to receive a push notification.",
          "pos": [
            278,
            387
          ]
        }
      ]
    },
    {
      "pos": [
        3088,
        3342
      ],
      "content": "[5]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step5.png\n[6]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step6.png\n[7]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step7.png"
    },
    {
      "pos": [
        5787,
        6353
      ],
      "content": "[Install Xcode]: https://go.microsoft.com/fwLink/p/?LinkID=266532\n[iOS Provisioning Portal]: http://go.microsoft.com/fwlink/p/?LinkId=272456\n[Mobile Services iOS SDK]: https://go.microsoft.com/fwLink/p/?LinkID=266533\n[Apple Push Notification Service]: http://go.microsoft.com/fwlink/p/?LinkId=272584\n[Get started with Mobile Services]: mobile-services-ios-get-started.md\n[Get started with authentication]: mobile-services-ios-get-started-users.md\n[Azure classic portal]: https://manage.windowsazure.com/\n[apns object]: http://go.microsoft.com/fwlink/p/?LinkId=272333"
    }
  ],
  "content": "<properties\n    pageTitle=\"Add Push Notifications to App (iOS) | JavaScript Backend\"\n    description=\"Learn how to use Azure Mobile Services to send push notifications to your iOS app.\"\n    services=\"mobile-services,notification-hubs\"\n    documentationCenter=\"ios\"\n    manager=\"dwrede\"\n    editor=\"\"\n    authors=\"krisragh\"/>\n\n<tags\n    ms.service=\"mobile-services\"\n    ms.workload=\"mobile\"\n    ms.tgt_pltfrm=\"ios\"\n    ms.devlang=\"objective-c\"\n    ms.topic=\"article\"\n    ms.date=\"01/12/2016\"\n    ms.author=\"krisragh\"/>\n\n# Add Push Notifications to iOS App and JavaScript Backend\n\n[AZURE.INCLUDE [mobile-services-selector-get-started-push](../../includes/mobile-services-selector-get-started-push.md)]\n\nThis topic shows you how to add push notifications to the [quickstart project](mobile-services-ios-get-started.md), so that your mobile service sends a push notification each time a record is inserted. You must complete [Get Started with Mobile Services] first.\n\n> [AZURE.NOTE] The [iOS simulator does not support push notifications](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/iOS_Simulator_Guide/TestingontheiOSSimulator.html), so you must use a physical iOS device. You'll also need to sign up for a paid [Apple Developer Program membership](https://developer.apple.com/programs/ios/).\n\n[AZURE.INCLUDE [Enable Apple Push Notifications](../../includes/enable-apple-push-notifications.md)]\n\n\n## <a id=\"configure\"></a>Configure Azure to Send Push Notifications\n\n[AZURE.INCLUDE [Configure Push Notifications in Azure Mobile Services](../../includes/mobile-services-apns-configure-push.md)]\n\n## <a id=\"update-scripts\"></a>Update Backend Script to Send Push Notifications\n\n* In the [Azure classic portal], click the **Data** tab and then click **TodoItem**. In **TodoItem**, click the **Script** tab and select **Insert**. This displays the function that is invoked when an insert occurs in the **TodoItem** table.\n\n* Replace the insert function with the following code, and then click **Save**.  This registers a new insert script, which uses the [apns object] to send a push notification (the inserted text) to the device provided in the insert request. This script delays sending the notification to give you time to close the app to receive a push notification.\n\n\n```\n        function insert(item, user, request) {\n            request.execute();\n            // Set timeout to delay the notification, to provide time for the\n            // app to be closed on the device to demonstrate push notifications\n            setTimeout(function() {\n                push.apns.send(null, {\n                    alert: \"Alert: \" + item.text,\n                    payload: {\n                        inAppMessage: \"Hey, a new item arrived: '\" + item.text + \"'\"\n                    }\n                });\n            }, 2500);\n        }\n```\n\n[AZURE.INCLUDE [Add Push Notifications to App](../../includes/add-push-notifications-to-app.md)]\n\n[AZURE.INCLUDE [Test Push Notifications in App](../../includes/test-push-notifications-in-app.md)]\n\n\n<!-- Anchors. -->\n\n\n<!-- Images. -->\n[5]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step5.png\n[6]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step6.png\n[7]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step7.png\n\n[9]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step9.png\n[10]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step10.png\n[17]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step17.png\n[18]: ./media/mobile-services-ios-get-started-push/mobile-services-selection.png\n[19]: ./media/mobile-services-ios-get-started-push/mobile-push-tab-ios.png\n[20]: ./media/mobile-services-ios-get-started-push/mobile-push-tab-ios-upload.png\n[21]: ./media/mobile-services-ios-get-started-push/mobile-portal-data-tables.png\n[22]: ./media/mobile-services-ios-get-started-push/mobile-insert-script-push2.png\n[23]: ./media/mobile-services-ios-get-started-push/mobile-quickstart-push1-ios.png\n[24]: ./media/mobile-services-ios-get-started-push/mobile-quickstart-push2-ios.png\n[25]: ./media/mobile-services-ios-get-started-push/mobile-quickstart-push3-ios.png\n[26]: ./media/mobile-services-ios-get-started-push/mobile-quickstart-push4-ios.png\n[28]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-step18.png\n\n[101]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-01.png\n[102]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-02.png\n[103]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-03.png\n[104]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-04.png\n[105]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-05.png\n[106]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-06.png\n[107]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-07.png\n[108]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-08.png\n\n[110]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-10.png\n[111]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-11.png\n[112]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-12.png\n[113]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-13.png\n[114]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-14.png\n[115]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-15.png\n[116]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-16.png\n[117]: ./media/mobile-services-ios-get-started-push/mobile-services-ios-push-17.png\n\n<!-- URLs.   -->\n[Install Xcode]: https://go.microsoft.com/fwLink/p/?LinkID=266532\n[iOS Provisioning Portal]: http://go.microsoft.com/fwlink/p/?LinkId=272456\n[Mobile Services iOS SDK]: https://go.microsoft.com/fwLink/p/?LinkID=266533\n[Apple Push Notification Service]: http://go.microsoft.com/fwlink/p/?LinkId=272584\n[Get started with Mobile Services]: mobile-services-ios-get-started.md\n[Get started with authentication]: mobile-services-ios-get-started-users.md\n[Azure classic portal]: https://manage.windowsazure.com/\n[apns object]: http://go.microsoft.com/fwlink/p/?LinkId=272333\n\n[Mobile Services server script reference]: http://go.microsoft.com/fwlink/?LinkId=262293\n\n[Send push notifications to authenticated users]: mobile-services-javascript-backend-ios-push-notifications-app-users.md\n[What are Notification Hubs?]: ../notification-hubs-overview.md\n[Send broadcast notifications to subscribers]: ../notification-hubs-ios-send-breaking-news.md\n[Send template-based notifications to subscribers]: ../notification-hubs-ios-send-localized-breaking-news.md\n[Mobile Services Objective-C how-to conceptual reference]: mobile-services-windows-dotnet-how-to-use-client-library.md\n"
}