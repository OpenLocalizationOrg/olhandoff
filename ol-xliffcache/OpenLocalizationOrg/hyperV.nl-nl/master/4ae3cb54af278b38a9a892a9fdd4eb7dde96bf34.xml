{
  "nodes": [
    {
      "content": "Tutorial: Azure Active Directory integration with Salesforce Sandbox | Microsoft Azure",
      "pos": [
        23,
        109
      ]
    },
    {
      "content": "Learn how to use Salesforce Sandbox with Azure Active Directory to enable single sign-on, automated provisioning, and more!.",
      "pos": [
        124,
        248
      ]
    },
    {
      "content": "Tutorial: Azure Active Directory integration with Salesforce Sandbox",
      "pos": [
        501,
        569
      ]
    },
    {
      "pos": [
        571,
        656
      ],
      "content": "<ph id=\"ph1\">[AZURE.TIP]</ph>For feedback, click <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=521878)</ept>."
    },
    {
      "content": "The objective of this tutorial is to show the integration of Azure and Salesforce Sandbox.",
      "pos": [
        660,
        750
      ]
    },
    {
      "content": "Sandboxes give you the ability to create multiple copies of your organization in separate environments for a variety of purposes, such as development, testing, and training, without compromising the data and applications in your Salesforce production organization.",
      "pos": [
        753,
        1017
      ]
    },
    {
      "content": "For more details, see <bpt id=\"p1\">[</bpt>Sandbox Overview<ept id=\"p1\">](https://help.salesforce.com/HTViewHelpDoc?id=create_test_instance.htm&amp;language=en_US)</ept>",
      "pos": [
        1020,
        1146
      ]
    },
    {
      "content": "The scenario outlined in this tutorial assumes that you already have the following items:",
      "pos": [
        1150,
        1239
      ]
    },
    {
      "content": "A valid Azure subscription",
      "pos": [
        1245,
        1271
      ]
    },
    {
      "content": "A sandbox in Salesforce.com",
      "pos": [
        1276,
        1303
      ]
    },
    {
      "content": "If you don’t have a valid sandbox in Salesforce.com yet, you need to contact Salesforce.",
      "pos": [
        1307,
        1395
      ]
    },
    {
      "content": "The scenario outlined in this tutorial consists of the following building blocks:",
      "pos": [
        1399,
        1480
      ]
    },
    {
      "content": "Enabling the application integration for Salesforce Sandbox",
      "pos": [
        1486,
        1545
      ]
    },
    {
      "content": "Configuring single sign-on",
      "pos": [
        1550,
        1576
      ]
    },
    {
      "content": "Enabling your domain",
      "pos": [
        1581,
        1601
      ]
    },
    {
      "content": "Configuring user provisioning",
      "pos": [
        1606,
        1635
      ]
    },
    {
      "content": "Assigning users",
      "pos": [
        1640,
        1655
      ]
    },
    {
      "content": "Scenario",
      "pos": [
        1659,
        1667
      ]
    },
    {
      "content": "Enabling the application integration for Salesforce Sandbox",
      "pos": [
        1754,
        1813
      ]
    },
    {
      "content": "The objective of this section is to outline how to enable the application integration for Salesforce sandbox.",
      "pos": [
        1817,
        1926
      ]
    },
    {
      "content": "To enable the application integration for Salesforce sandbox, perform the following steps:",
      "pos": [
        1931,
        2021
      ]
    },
    {
      "pos": [
        2027,
        2115
      ],
      "content": "In the Azure Management Portal, on the left navigation pane, click <bpt id=\"p1\">**</bpt>Active Directory<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Active Directory",
      "pos": [
        2123,
        2139
      ]
    },
    {
      "pos": [
        2237,
        2338
      ],
      "content": "From the <bpt id=\"p1\">**</bpt>Directory<ept id=\"p1\">**</ept> list, select the directory for which you want to enable directory integration."
    },
    {
      "pos": [
        2344,
        2437
      ],
      "content": "To open the applications view, in the directory view, click <bpt id=\"p1\">**</bpt>Applications<ept id=\"p1\">**</ept> in the top menu."
    },
    {
      "content": "Applications",
      "pos": [
        2445,
        2457
      ]
    },
    {
      "pos": [
        2551,
        2675
      ],
      "content": "To open the <bpt id=\"p1\">**</bpt>Application Gallery<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Add An App<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Add an application for my organization to use<ept id=\"p3\">**</ept>."
    },
    {
      "content": "What do you want to do?",
      "pos": [
        2683,
        2706
      ]
    },
    {
      "pos": [
        2811,
        2862
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>search box<ept id=\"p1\">**</ept>, type <bpt id=\"p2\">**</bpt>Salesforce Sandbox<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Application Gallery",
      "pos": [
        2870,
        2889
      ]
    },
    {
      "pos": [
        2990,
        3093
      ],
      "content": "In the results pane, select <bpt id=\"p1\">**</bpt>Salesforce Sandbox<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Complete<ept id=\"p2\">**</ept> to add the application."
    },
    {
      "content": "Salesforce Sandbox",
      "pos": [
        3101,
        3119
      ]
    },
    {
      "content": "Configuring single sign-on",
      "pos": [
        3216,
        3242
      ]
    },
    {
      "content": "The objective of this section is to outline how to enable users to authenticate to Salesforce with their account in Azure AD using federation based on the SAML protocol.",
      "pos": [
        3246,
        3415
      ]
    },
    {
      "content": "To configure single sign-on, perform the following steps:",
      "pos": [
        3420,
        3477
      ]
    },
    {
      "pos": [
        3483,
        3650
      ],
      "content": "In the Azure AD portal, on the <bpt id=\"p1\">**</bpt>Salesforce Sandbox<ept id=\"p1\">**</ept> application integration page, click <bpt id=\"p2\">**</bpt>Configure single sign-on<ept id=\"p2\">**</ept> to open the <bpt id=\"p3\">**</bpt>Configure Single Sign On<ept id=\"p3\">**</ept> dialog."
    },
    {
      "content": "Configure single sign-on",
      "pos": [
        3658,
        3682
      ]
    },
    {
      "pos": [
        3788,
        3933
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>How would you like users to sign on to Salesforce Sandbox<ept id=\"p1\">**</ept> page, select <bpt id=\"p2\">**</bpt>Microsoft Azure AD Single Sign-On<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."
    },
    {
      "content": "Salesforce Sandbox",
      "pos": [
        3941,
        3959
      ]
    },
    {
      "pos": [
        4059,
        4228
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Configure App URL<ept id=\"p1\">**</ept> page, in the <bpt id=\"p2\">**</bpt>Sign On URL<ept id=\"p2\">**</ept> textbox, type your URL using the following pattern <ph id=\"ph1\">`http://company.my.salesforce.com`</ph>, and then click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."
    },
    {
      "content": "Configure App URL",
      "pos": [
        4236,
        4253
      ]
    },
    {
      "content": "If you have already configured single sign-on for another Salesforce Sandbox instance in your directory, then you must also configure the <bpt id=\"p1\">**</bpt>Identifier<ept id=\"p1\">**</ept> to have the same value as the <bpt id=\"p2\">**</bpt>Sign on URL<ept id=\"p2\">**</ept>.",
      "pos": [
        4351,
        4550
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Identifier<ept id=\"p1\">**</ept> field can be found by checking the <bpt id=\"p2\">**</bpt>Show advanced settings<ept id=\"p2\">**</ept> checkbox on the <bpt id=\"p3\">**</bpt>Configure App URL<ept id=\"p3\">**</ept> page of the dialog.",
      "pos": [
        4551,
        4689
      ]
    },
    {
      "pos": [
        4695,
        4843
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Configure single sign-on at Salesforce Sandbox<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Download certificate<ept id=\"p2\">**</ept>, and then save the certificate file on your computer."
    },
    {
      "content": "Configure Single Sign-On",
      "pos": [
        4851,
        4875
      ]
    },
    {
      "content": "In a different web browser window, log into your Salesforce sandbox as an administrator.",
      "pos": [
        4981,
        5069
      ]
    },
    {
      "pos": [
        5075,
        5115
      ],
      "content": "In the menu on the top, click <bpt id=\"p1\">**</bpt>Setup<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Setup",
      "pos": [
        5123,
        5128
      ]
    },
    {
      "pos": [
        5215,
        5323
      ],
      "content": "In the navigation pane on the left, click <bpt id=\"p1\">**</bpt>Security Controls<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Single Sign-On Settings<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Single Sign-On Settings",
      "pos": [
        5331,
        5354
      ]
    },
    {
      "content": "On the Single Sign-On Settings section, perform the following steps:",
      "pos": [
        5459,
        5527
      ]
    },
    {
      "content": "Single Sign-On Settings",
      "pos": [
        5535,
        5558
      ]
    },
    {
      "pos": [
        5667,
        5691
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>SAML Enabled<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        5700,
        5714
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>New<ept id=\"p1\">**</ept>."
    },
    {
      "content": "On the SAML Single Sign-On Settings section, perform the following steps:",
      "pos": [
        5720,
        5793
      ]
    },
    {
      "content": "SAML Single Sign-On Settings",
      "pos": [
        5801,
        5829
      ]
    },
    {
      "pos": [
        5943,
        6025
      ],
      "content": "In the Name textbox, type the name of the configuration (e.g.: <bpt id=\"p1\">*</bpt>SPSSOWAAD\\_Test<ept id=\"p1\">*</ept>)."
    },
    {
      "pos": [
        6034,
        6205
      ],
      "content": "In the Azure portal, on the <bpt id=\"p1\">**</bpt>Configure single sign-on at Salesforce Sandbox<ept id=\"p1\">**</ept> dialogue page, copy the <bpt id=\"p2\">**</bpt>Issuer URL<ept id=\"p2\">**</ept> value, and then paste it into the <bpt id=\"p3\">**</bpt>Issuer<ept id=\"p3\">**</ept> textbox."
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Entity Id<ept id=\"p1\">**</ept> textbox, type <bpt id=\"p2\">**</bpt>https://test.salesforce.com<ept id=\"p2\">**</ept> if this is the first Salesforce Sandbox instance that you are adding to your directory.",
      "pos": [
        6214,
        6368
      ]
    },
    {
      "content": "If you have already added an instance of Salesforce Sandbox, then for the <bpt id=\"p1\">**</bpt>Entity ID<ept id=\"p1\">**</ept> type in the <bpt id=\"p2\">**</bpt>Sign On URL<ept id=\"p2\">**</ept>, which should be in this format: <ph id=\"ph1\">`http://company.my.salesforce.com`</ph>",
      "pos": [
        6369,
        6552
      ]
    },
    {
      "pos": [
        6561,
        6615
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Browse<ept id=\"p1\">**</ept> to upload the downloaded certificate."
    },
    {
      "pos": [
        6624,
        6720
      ],
      "content": "As <bpt id=\"p1\">**</bpt>SAML Identity Type<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Assertion contains the Federation ID from the User object<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        6729,
        6838
      ],
      "content": "As <bpt id=\"p1\">**</bpt>SAML Identity Location<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Identity is in the NameIdentifier element of the Subject statement<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        6847,
        7045
      ],
      "content": "In the Azure portal, on the <bpt id=\"p1\">**</bpt>Configure single sign-on at Salesforce Sandbox<ept id=\"p1\">**</ept> dialogue page, copy the <bpt id=\"p2\">**</bpt>Remote Login URL<ept id=\"p2\">**</ept> value, and then paste it into the <bpt id=\"p3\">**</bpt>Identity Provider Login URL<ept id=\"p3\">**</ept> textbox."
    },
    {
      "pos": [
        7054,
        7254
      ],
      "content": "In the Azure portal, on the <bpt id=\"p1\">**</bpt>Configure single sign-on at Salesforce Sandbox<ept id=\"p1\">**</ept> dialogue page, copy the <bpt id=\"p2\">**</bpt>Remote Logout URL<ept id=\"p2\">**</ept> value, and then paste it into the <bpt id=\"p3\">**</bpt>Identity Provider Logout URL<ept id=\"p3\">**</ept> textbox."
    },
    {
      "pos": [
        7263,
        7335
      ],
      "content": "As <bpt id=\"p1\">**</bpt>Service Provider Initiated Request Binding<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>HTTP POST<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        7344,
        7359
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        7365,
        7520
      ],
      "content": "On the Azure AD portal, select the single sign-on configuration confirmation, and then click <bpt id=\"p1\">**</bpt>Complete<ept id=\"p1\">**</ept> to close the <bpt id=\"p2\">**</bpt>Configure Single Sign On<ept id=\"p2\">**</ept> dialog."
    },
    {
      "content": "Configure Single Sign-On",
      "pos": [
        7528,
        7552
      ]
    },
    {
      "content": "Enabling your domain",
      "pos": [
        7656,
        7676
      ]
    },
    {
      "content": "This section assumes that you already have created a domain.",
      "pos": [
        7680,
        7740
      ]
    },
    {
      "content": "For more details, see <bpt id=\"p1\">[</bpt>Defining Your Domain Name<ept id=\"p1\">](https://help.salesforce.com/HTViewHelpDoc?id=domain_name_define.htm&amp;language=en_US)</ept>.",
      "pos": [
        7743,
        7877
      ]
    },
    {
      "content": "To enable your domain, perform the following steps:",
      "pos": [
        7882,
        7933
      ]
    },
    {
      "pos": [
        7939,
        8026
      ],
      "content": "In the left navigation pane, click <bpt id=\"p1\">**</bpt>Domain Management<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>My Domain.<ept id=\"p2\">**</ept>"
    },
    {
      "content": "My Domain",
      "pos": [
        8034,
        8043
      ]
    },
    {
      "pos": [
        8135,
        8211
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>Please make sure that your domain has been configured correctly."
    },
    {
      "pos": [
        8217,
        8415
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Login Page Settings<ept id=\"p1\">**</ept> section, click <bpt id=\"p2\">**</bpt>Edit<ept id=\"p2\">**</ept>, then, as <bpt id=\"p3\">**</bpt>Authentication Service<ept id=\"p3\">**</ept>, select the name of the SAML Single Sign-On Setting from the previous section, and finally click <bpt id=\"p4\">**</bpt>Save<ept id=\"p4\">**</ept>."
    },
    {
      "content": "My Domain",
      "pos": [
        8423,
        8432
      ]
    },
    {
      "content": "As soon as you have a domain configured, your users should use the domain URL to login to the Salesforce sandbox.",
      "pos": [
        8521,
        8634
      ]
    },
    {
      "content": "To get the value of the URL, click the SSO profile you have created in the previous section.",
      "pos": [
        8637,
        8729
      ]
    },
    {
      "content": "Configuring user provisioning",
      "pos": [
        8732,
        8761
      ]
    },
    {
      "content": "The objective of this section is to outline how to enable user provisioning of Active Directory user accounts to Salesforce Sandbox.",
      "pos": [
        8765,
        8897
      ]
    },
    {
      "content": "To configure user provisioning, perform the following steps:",
      "pos": [
        8902,
        8962
      ]
    },
    {
      "content": "In the Salesforce portal, in the top navigation bar, select your name to expand your user menu:",
      "pos": [
        8968,
        9063
      ]
    },
    {
      "content": "My Settings",
      "pos": [
        9071,
        9082
      ]
    },
    {
      "pos": [
        9175,
        9253
      ],
      "content": "From your user menu, select <bpt id=\"p1\">**</bpt>My Settings<ept id=\"p1\">**</ept> to open your <bpt id=\"p2\">**</bpt>My Settings<ept id=\"p2\">**</ept> page."
    },
    {
      "pos": [
        9259,
        9371
      ],
      "content": "In the left pane, click <bpt id=\"p1\">**</bpt>Personal<ept id=\"p1\">**</ept> to expand the Personal section, and then click <bpt id=\"p2\">**</bpt>Reset My Security Token<ept id=\"p2\">**</ept>:"
    },
    {
      "content": "My Settings",
      "pos": [
        9379,
        9390
      ]
    },
    {
      "pos": [
        9483,
        9624
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Reset My Security Token<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Reset Security Token<ept id=\"p2\">**</ept> to request an email that contains your Salesforce.com security token."
    },
    {
      "content": "New Token",
      "pos": [
        9632,
        9641
      ]
    },
    {
      "pos": [
        9732,
        9851
      ],
      "content": "Check your email inbox for an email from Salesforce.com with “<bpt id=\"p1\">**</bpt>salesforce.com.com security confirmation<ept id=\"p1\">**</ept>” as subject."
    },
    {
      "content": "Review this email and copy the security token value.",
      "pos": [
        9857,
        9909
      ]
    },
    {
      "pos": [
        9915,
        10096
      ],
      "content": "In the Azure Management Portal, on the <bpt id=\"p1\">**</bpt>salesforce Sandbox<ept id=\"p1\">**</ept> application integration page, click <bpt id=\"p2\">**</bpt>Configure user provisioning<ept id=\"p2\">**</ept> to open the <bpt id=\"p3\">**</bpt>Configure User Provisioning<ept id=\"p3\">**</ept> dialog."
    },
    {
      "content": "Configure user provisioning",
      "pos": [
        10104,
        10131
      ]
    },
    {
      "pos": [
        10240,
        10382
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Enter your Salesforce Sandbox credentials to enable automatic user provisioning<ept id=\"p1\">**</ept> page, provide the following configuration settings:"
    },
    {
      "content": "Salesforce Sandbox",
      "pos": [
        10390,
        10408
      ]
    },
    {
      "pos": [
        10512,
        10679
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Salesforce Sandbox Admin User Name<ept id=\"p1\">**</ept> textbox, type a Salesforce sandbox account name that has the <bpt id=\"p2\">**</bpt>System Administrator<ept id=\"p2\">**</ept> profile in Salesforce.com assigned."
    },
    {
      "pos": [
        10689,
        10778
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Salesforce Sandbox Admin Password<ept id=\"p1\">**</ept> textbox, type the password for this account."
    },
    {
      "pos": [
        10788,
        10859
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>User Security Token<ept id=\"p1\">**</ept> textbox, paste the security token value."
    },
    {
      "pos": [
        10869,
        10917
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Validate<ept id=\"p1\">**</ept> to verify your configuration."
    },
    {
      "pos": [
        10927,
        10987
      ],
      "content": "Click the <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> button to open the <bpt id=\"p2\">**</bpt>Confirmation<ept id=\"p2\">**</ept> page."
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Confirmation<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Complete<ept id=\"p2\">**</ept> to save your configuration.",
      "pos": [
        10993,
        11069
      ]
    },
    {
      "content": "Assigning users",
      "pos": [
        11072,
        11087
      ]
    },
    {
      "content": "To test your configuration, you need to grant the Azure AD users you want to allow using your application access to it by assigning them.",
      "pos": [
        11091,
        11228
      ]
    },
    {
      "content": "To assign users to Salesforce Sandbox, perform the following steps:",
      "pos": [
        11233,
        11300
      ]
    },
    {
      "content": "In the Azure AD portal, create a test account.",
      "pos": [
        11306,
        11352
      ]
    },
    {
      "pos": [
        11358,
        11441
      ],
      "content": "On the **Salesforce Sandbox **application integration page, click <bpt id=\"p1\">**</bpt>Assign users<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Assign users",
      "pos": [
        11449,
        11461
      ]
    },
    {
      "pos": [
        11555,
        11646
      ],
      "content": "Select your test user, click <bpt id=\"p1\">**</bpt>Assign<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept> to confirm your assignment."
    },
    {
      "content": "Yes",
      "pos": [
        11654,
        11657
      ]
    },
    {
      "content": "You should now wait for 10 minutes and verify that the account has been synchronized to Salesforce Sandbox.",
      "pos": [
        11740,
        11847
      ]
    },
    {
      "content": "If you want to test your single sign-on settings, open the Access Panel.",
      "pos": [
        11851,
        11923
      ]
    },
    {
      "content": "For more details about the Access Panel, see <bpt id=\"p1\">[</bpt>Introduction to the Access Panel<ept id=\"p1\">](https://msdn.microsoft.com/library/dn308586)</ept>.",
      "pos": [
        11924,
        12049
      ]
    }
  ],
  "content": "<properties pageTitle=\"Tutorial: Azure Active Directory integration with Salesforce Sandbox | Microsoft Azure\" description=\"Learn how to use Salesforce Sandbox with Azure Active Directory to enable single sign-on, automated provisioning, and more!.\" services=\"active-directory\" authors=\"MarkusVi\"  documentationCenter=\"na\" manager=\"stevenpo\"/>\n<tags ms.service=\"active-directory\" ms.devlang=\"na\" ms.topic=\"article\" ms.tgt_pltfrm=\"na\" ms.workload=\"identity\" ms.date=\"10/07/2015\" ms.author=\"markvi\" />\n#Tutorial: Azure Active Directory integration with Salesforce Sandbox\n>[AZURE.TIP]For feedback, click [here](http://go.microsoft.com/fwlink/?LinkId=521878).\n  \nThe objective of this tutorial is to show the integration of Azure and Salesforce Sandbox.  \nSandboxes give you the ability to create multiple copies of your organization in separate environments for a variety of purposes, such as development, testing, and training, without compromising the data and applications in your Salesforce production organization.  \nFor more details, see [Sandbox Overview](https://help.salesforce.com/HTViewHelpDoc?id=create_test_instance.htm&language=en_US)\n  \nThe scenario outlined in this tutorial assumes that you already have the following items:\n\n-   A valid Azure subscription\n-   A sandbox in Salesforce.com\n  \nIf you don’t have a valid sandbox in Salesforce.com yet, you need to contact Salesforce.\n  \nThe scenario outlined in this tutorial consists of the following building blocks:\n\n1.  Enabling the application integration for Salesforce Sandbox\n2.  Configuring single sign-on\n3.  Enabling your domain\n4.  Configuring user provisioning\n5.  Assigning users\n\n![Scenario](./media/active-directory-saas-salesforce-sandbox-tutorial/IC769571.png \"Scenario\")\n##Enabling the application integration for Salesforce Sandbox\n  \nThe objective of this section is to outline how to enable the application integration for Salesforce sandbox.\n\n###To enable the application integration for Salesforce sandbox, perform the following steps:\n\n1.  In the Azure Management Portal, on the left navigation pane, click **Active Directory**.\n\n    ![Active Directory](./media/active-directory-saas-salesforce-sandbox-tutorial/IC700993.png \"Active Directory\")\n\n2.  From the **Directory** list, select the directory for which you want to enable directory integration.\n\n3.  To open the applications view, in the directory view, click **Applications** in the top menu.\n\n    ![Applications](./media/active-directory-saas-salesforce-sandbox-tutorial/IC700994.png \"Applications\")\n\n4.  To open the **Application Gallery**, click **Add An App**, and then click **Add an application for my organization to use**.\n\n    ![What do you want to do?](./media/active-directory-saas-salesforce-sandbox-tutorial/IC700995.png \"What do you want to do?\")\n\n5.  In the **search box**, type **Salesforce Sandbox**.\n\n    ![Application Gallery](./media/active-directory-saas-salesforce-sandbox-tutorial/IC710978.png \"Application Gallery\")\n\n6.  In the results pane, select **Salesforce Sandbox**, and then click **Complete** to add the application.\n\n    ![Salesforce Sandbox](./media/active-directory-saas-salesforce-sandbox-tutorial/IC746474.png \"Salesforce Sandbox\")\n##Configuring single sign-on\n  \nThe objective of this section is to outline how to enable users to authenticate to Salesforce with their account in Azure AD using federation based on the SAML protocol.\n\n###To configure single sign-on, perform the following steps:\n\n1.  In the Azure AD portal, on the **Salesforce Sandbox** application integration page, click **Configure single sign-on** to open the **Configure Single Sign On** dialog.\n\n    ![Configure single sign-on](./media/active-directory-saas-salesforce-sandbox-tutorial/IC749323.png \"Configure single sign-on\")\n\n2.  On the **How would you like users to sign on to Salesforce Sandbox** page, select **Microsoft Azure AD Single Sign-On**, and then click **Next**.\n\n    ![Salesforce Sandbox](./media/active-directory-saas-salesforce-sandbox-tutorial/IC746479.png \"Salesforce Sandbox\")\n\n3.  On the **Configure App URL** page, in the **Sign On URL** textbox, type your URL using the following pattern `http://company.my.salesforce.com`, and then click **Next**.\n\n    ![Configure App URL](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781022.png \"Configure App URL\")\n\n4. If you have already configured single sign-on for another Salesforce Sandbox instance in your directory, then you must also configure the **Identifier** to have the same value as the **Sign on URL**. The **Identifier** field can be found by checking the **Show advanced settings** checkbox on the **Configure App URL** page of the dialog.\n\n4.  On the **Configure single sign-on at Salesforce Sandbox** page, click **Download certificate**, and then save the certificate file on your computer.\n\n    ![Configure Single Sign-On](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781023.png \"Configure Single Sign-On\")\n\n5.  In a different web browser window, log into your Salesforce sandbox as an administrator.\n\n6.  In the menu on the top, click **Setup**.\n\n    ![Setup](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781024.png \"Setup\")\n\n7.  In the navigation pane on the left, click **Security Controls**, and then click **Single Sign-On Settings**.\n\n    ![Single Sign-On Settings](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781025.png \"Single Sign-On Settings\")\n\n8.  On the Single Sign-On Settings section, perform the following steps:\n\n    ![Single Sign-On Settings](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781026.png \"Single Sign-On Settings\")\n\n    1.  Select **SAML Enabled**.\n    2.  Click **New**.\n\n9.  On the SAML Single Sign-On Settings section, perform the following steps:\n\n    ![SAML Single Sign-On Settings](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781027.png \"SAML Single Sign-On Settings\")\n\n    1.  In the Name textbox, type the name of the configuration (e.g.: *SPSSOWAAD\\_Test*).\n    2.  In the Azure portal, on the **Configure single sign-on at Salesforce Sandbox** dialogue page, copy the **Issuer URL** value, and then paste it into the **Issuer** textbox.\n    3.  In the **Entity Id** textbox, type **https://test.salesforce.com** if this is the first Salesforce Sandbox instance that you are adding to your directory. If you have already added an instance of Salesforce Sandbox, then for the **Entity ID** type in the **Sign On URL**, which should be in this format: `http://company.my.salesforce.com`\n    4.  Click **Browse** to upload the downloaded certificate.\n    5.  As **SAML Identity Type**, select **Assertion contains the Federation ID from the User object**.\n    6.  As **SAML Identity Location**, select **Identity is in the NameIdentifier element of the Subject statement**.\n    7.  In the Azure portal, on the **Configure single sign-on at Salesforce Sandbox** dialogue page, copy the **Remote Login URL** value, and then paste it into the **Identity Provider Login URL** textbox.\n    8.  In the Azure portal, on the **Configure single sign-on at Salesforce Sandbox** dialogue page, copy the **Remote Logout URL** value, and then paste it into the **Identity Provider Logout URL** textbox.\n    9.  As **Service Provider Initiated Request Binding**, select **HTTP POST**.\n    10. Click **Save**.\n\n10. On the Azure AD portal, select the single sign-on configuration confirmation, and then click **Complete** to close the **Configure Single Sign On** dialog.\n\n    ![Configure Single Sign-On](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781028.png \"Configure Single Sign-On\")\n\n##Enabling your domain\n  \nThis section assumes that you already have created a domain.  \nFor more details, see [Defining Your Domain Name](https://help.salesforce.com/HTViewHelpDoc?id=domain_name_define.htm&language=en_US).\n\n###To enable your domain, perform the following steps:\n\n1.  In the left navigation pane, click **Domain Management**, and then click **My Domain.**\n\n    ![My Domain](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781029.png \"My Domain\")\n\n    >[AZURE.NOTE]Please make sure that your domain has been configured correctly.\n\n2.  In the **Login Page Settings** section, click **Edit**, then, as **Authentication Service**, select the name of the SAML Single Sign-On Setting from the previous section, and finally click **Save**.\n\n    ![My Domain](./media/active-directory-saas-salesforce-sandbox-tutorial/IC781030.png \"My Domain\")\n  \nAs soon as you have a domain configured, your users should use the domain URL to login to the Salesforce sandbox.  \nTo get the value of the URL, click the SSO profile you have created in the previous section.\n##Configuring user provisioning\n  \nThe objective of this section is to outline how to enable user provisioning of Active Directory user accounts to Salesforce Sandbox.\n\n###To configure user provisioning, perform the following steps:\n\n1.  In the Salesforce portal, in the top navigation bar, select your name to expand your user menu:\n\n    ![My Settings](./media/active-directory-saas-salesforce-sandbox-tutorial/IC698773.png \"My Settings\")\n\n2.  From your user menu, select **My Settings** to open your **My Settings** page.\n\n3.  In the left pane, click **Personal** to expand the Personal section, and then click **Reset My Security Token**:\n\n    ![My Settings](./media/active-directory-saas-salesforce-sandbox-tutorial/IC698774.png \"My Settings\")\n\n4.  On the **Reset My Security Token** page, click **Reset Security Token** to request an email that contains your Salesforce.com security token.\n\n    ![New Token](./media/active-directory-saas-salesforce-sandbox-tutorial/IC698776.png \"New Token\")\n\n5.  Check your email inbox for an email from Salesforce.com with “**salesforce.com.com security confirmation**” as subject.\n\n6.  Review this email and copy the security token value.\n\n7.  In the Azure Management Portal, on the **salesforce Sandbox** application integration page, click **Configure user provisioning** to open the **Configure User Provisioning** dialog.\n\n    ![Configure user provisioning](./media/active-directory-saas-salesforce-sandbox-tutorial/IC769573.png \"Configure user provisioning\")\n\n8.  On the **Enter your Salesforce Sandbox credentials to enable automatic user provisioning** page, provide the following configuration settings:\n\n    ![Salesforce Sandbox](./media/active-directory-saas-salesforce-sandbox-tutorial/IC746476.png \"Salesforce Sandbox\")\n\n    1.  In the **Salesforce Sandbox Admin User Name** textbox, type a Salesforce sandbox account name that has the **System Administrator** profile in Salesforce.com assigned.\n\n    2.  In the **Salesforce Sandbox Admin Password** textbox, type the password for this account.\n\n    3.  In the **User Security Token** textbox, paste the security token value.\n\n    4.  Click **Validate** to verify your configuration.\n\n    5.  Click the **Next** button to open the **Confirmation** page.\n\n9.  On the **Confirmation** page, click **Complete** to save your configuration.\n##Assigning users\n  \nTo test your configuration, you need to grant the Azure AD users you want to allow using your application access to it by assigning them.\n\n###To assign users to Salesforce Sandbox, perform the following steps:\n\n1.  In the Azure AD portal, create a test account.\n\n2.  On the **Salesforce Sandbox **application integration page, click **Assign users**.\n\n    ![Assign users](./media/active-directory-saas-salesforce-sandbox-tutorial/IC769574.png \"Assign users\")\n\n3.  Select your test user, click **Assign**, and then click **Yes** to confirm your assignment.\n\n    ![Yes](./media/active-directory-saas-salesforce-sandbox-tutorial/IC767830.png \"Yes\")\n  \nYou should now wait for 10 minutes and verify that the account has been synchronized to Salesforce Sandbox.\n  \nIf you want to test your single sign-on settings, open the Access Panel. For more details about the Access Panel, see [Introduction to the Access Panel](https://msdn.microsoft.com/library/dn308586).\n\n"
}