{
  "nodes": [
    {
      "content": "Step 6: Experiment with checkpoints",
      "pos": [
        2,
        37
      ]
    },
    {
      "content": "Checkpoints are a helpful tool when you want to save the present state of a virtual machine before making a change such as applying an update, installing software, or changing a setting.",
      "pos": [
        40,
        226
      ]
    },
    {
      "content": "If the change causes issues, you can restore the checkpoint and go back.",
      "pos": [
        228,
        300
      ]
    },
    {
      "content": "There are two types of checkpoints:",
      "pos": [
        304,
        339
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Production checkpoints<ept id=\"p1\">**</ept>: Used mainly on servers in production environments.",
      "pos": [
        342,
        420
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Standard checkpoints<ept id=\"p1\">**</ept>: Used in development or testing environments",
      "pos": [
        423,
        492
      ]
    },
    {
      "content": "Production checkpoints are the default for Hyper-V on Windows 10.",
      "pos": [
        495,
        560
      ]
    },
    {
      "content": "Change the checkpoint type",
      "pos": [
        566,
        592
      ]
    },
    {
      "content": "We'll start by trying out the older style of checkpoints, <bpt id=\"p1\">**</bpt>standard checkpoints<ept id=\"p1\">**</ept>.",
      "pos": [
        593,
        676
      ]
    },
    {
      "content": "Since production checkpoints are the default, we need to go into the settings for the VM and change the checkpoint type.",
      "pos": [
        677,
        797
      ]
    },
    {
      "pos": [
        802,
        868
      ],
      "content": "Right-click on <bpt id=\"p1\">**</bpt>Windows Walkthrough VM<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Settings<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        872,
        926
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Management<ept id=\"p1\">**</ept> section, select <bpt id=\"p2\">**</bpt>Checkpoints<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Select <bpt id=\"p1\">**</bpt>Standard checkpoints<ept id=\"p1\">**</ept>.",
      "pos": [
        930,
        962
      ]
    },
    {
      "content": "The dialog should look like this:",
      "pos": [
        963,
        996
      ]
    },
    {
      "pos": [
        1029,
        1066
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the dialog box."
    },
    {
      "content": "Open Notepad to test checkpoints",
      "pos": [
        1071,
        1103
      ]
    },
    {
      "content": "In order to see what happens with each type of checkpoint, we'll run an application in the VM.",
      "pos": [
        1105,
        1199
      ]
    },
    {
      "pos": [
        1204,
        1269
      ],
      "content": "Right-click on <bpt id=\"p1\">**</bpt>Windows Walkthrough VM<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Connect<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        1273,
        1407
      ],
      "content": "In the virtual machine, open <bpt id=\"p1\">**</bpt>Notepad<ept id=\"p1\">**</ept> by clicking on the <bpt id=\"p2\">**</bpt>Start<ept id=\"p2\">**</ept> menu and typing <bpt id=\"p3\">**</bpt>Notepad<ept id=\"p3\">**</ept> and then select it from the results."
    },
    {
      "content": "In Notepad, type <bpt id=\"p1\">**</bpt>This is a test of checkpoints.<ept id=\"p1\">**</ept>",
      "pos": [
        1412,
        1463
      ]
    },
    {
      "content": "The file should look like this:",
      "pos": [
        1464,
        1495
      ]
    },
    {
      "content": "Save the file as <bpt id=\"p1\">**</bpt>test.txt<ept id=\"p1\">**</ept>, but don't close Notepad.",
      "pos": [
        1536,
        1591
      ]
    },
    {
      "content": "Leave it running in the virtual machine.",
      "pos": [
        1592,
        1632
      ]
    },
    {
      "content": "Create a standard checkpoint",
      "pos": [
        1637,
        1665
      ]
    },
    {
      "pos": [
        1670,
        1780
      ],
      "content": "To create the checkpoint, click on the <ph id=\"ph1\">![](media/checkpoint_button.png)</ph> <bpt id=\"p1\">**</bpt>Checkpoint<ept id=\"p1\">**</ept> button in the menu bar."
    },
    {
      "content": "In the checkpoint name dialog, type <bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept>.",
      "pos": [
        1785,
        1834
      ]
    },
    {
      "content": "The dialog should look like this:",
      "pos": [
        1835,
        1868
      ]
    },
    {
      "pos": [
        1905,
        2011
      ],
      "content": "When the process is complete, the checkpoint will appear under <bpt id=\"p1\">**</bpt>Checkpoints<ept id=\"p1\">**</ept> in the <bpt id=\"p2\">**</bpt>Hyper-V Manager<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Create a production checkpoint",
      "pos": [
        2053,
        2083
      ]
    },
    {
      "pos": [
        2085,
        2228
      ],
      "content": "Now, we need to change change the type of checkpoint that we want to take back to <bpt id=\"p1\">**</bpt>Production checkpoints<ept id=\"p1\">**</ept> before taking a second checkpoint."
    },
    {
      "pos": [
        2234,
        2290
      ],
      "content": "Right-click the virtual machine, and click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        2295,
        2349
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Management<ept id=\"p1\">**</ept> section, select <bpt id=\"p2\">**</bpt>Checkpoints<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        2354,
        2388
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>Production checkpoints<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Clear the fall-back option.",
      "pos": [
        2393,
        2420
      ]
    },
    {
      "content": "If the system can't take a production checkpoint, we want it to fail instead of taking a standard checkpoint.",
      "pos": [
        2421,
        2530
      ]
    },
    {
      "pos": [
        2564,
        2601
      ],
      "content": "click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the dialog box."
    },
    {
      "pos": [
        2606,
        2657
      ],
      "content": "Right-click on the VM again and select <bpt id=\"p1\">**</bpt>Connect<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        2662,
        2783
      ],
      "content": "In Notepad in the VM, type another line that reads <bpt id=\"p1\">**</bpt>This is a test of a production checkpoint<ept id=\"p1\">**</ept> and save the file again."
    },
    {
      "pos": [
        2788,
        2872
      ],
      "content": "Click on the <ph id=\"ph1\">![](media/checkpoint_button.png)</ph> <bpt id=\"p1\">**</bpt>Checkpoint<ept id=\"p1\">**</ept> button in the menu bar."
    },
    {
      "pos": [
        2877,
        2935
      ],
      "content": "When asked, name it <bpt id=\"p1\">**</bpt>Production<ept id=\"p1\">**</ept> and then click <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Close VMConnect.",
      "pos": [
        2985,
        3001
      ]
    },
    {
      "content": "The VM will continue running, you just won't be connected to it anymore.",
      "pos": [
        3002,
        3074
      ]
    },
    {
      "content": "In Hyper-V manager, your list of checkpoints will now look like this:",
      "pos": [
        3079,
        3148
      ]
    },
    {
      "content": "Apply the standard checkpoint",
      "pos": [
        3193,
        3222
      ]
    },
    {
      "pos": [
        3229,
        3345
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Hyper-V Manager<ept id=\"p1\">**</ept>, in the <bpt id=\"p2\">**</bpt>Checkpoints<ept id=\"p2\">**</ept> section, right-click the one titled <bpt id=\"p3\">**</bpt>Standard<ept id=\"p3\">**</ept> and click <bpt id=\"p4\">**</bpt>Apply<ept id=\"p4\">**</ept>."
    },
    {
      "pos": [
        3350,
        3410
      ],
      "content": "In the pop-up dialog, click <bpt id=\"p1\">**</bpt>Create Checkpoint and Apply<ept id=\"p1\">**</ept>."
    },
    {
      "content": "When the finished, your list of checkpoints will now look something like this:",
      "pos": [
        3449,
        3527
      ]
    },
    {
      "pos": [
        3566,
        3652
      ],
      "content": "When this finishes, right-click the VM and the click <bpt id=\"p1\">**</bpt>Connect<ept id=\"p1\">**</ept> to connect to the VM."
    },
    {
      "content": "When you connect to the VM, the VM should be running, with Notepad open, but the line about production checkpoints will be missing:",
      "pos": [
        3657,
        3788
      ]
    },
    {
      "content": "Close VMConnect, but leave the VM running.",
      "pos": [
        3835,
        3877
      ]
    },
    {
      "content": "Apply the production checkpoint",
      "pos": [
        3883,
        3914
      ]
    },
    {
      "content": "Now, let's go back to Hyper-V manager and apply the production checkpoint and see how our VM looks afterwards.",
      "pos": [
        3916,
        4026
      ]
    },
    {
      "pos": [
        4032,
        4133
      ],
      "content": "In the Checkpoints section, right-click the one titled <bpt id=\"p1\">**</bpt>Production Checkpoint<ept id=\"p1\">**</ept> and click <bpt id=\"p2\">**</bpt>Apply<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        4138,
        4197
      ],
      "content": "In the pop-up dialog, pick <bpt id=\"p1\">**</bpt>Create Checkpoint and Apply<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        4202,
        4284
      ],
      "content": "When this finishes, right-click the VM and the click <bpt id=\"p1\">**</bpt>Connect<ept id=\"p1\">**</ept> to launch the VM."
    },
    {
      "content": "You'll notice that the VM is not running.",
      "pos": [
        4289,
        4330
      ]
    },
    {
      "content": "Click on the <ph id=\"ph1\">![](media/start.png)</ph> Start button in the menu bar to start the VM.",
      "pos": [
        4331,
        4410
      ]
    },
    {
      "content": "Open open test.txt in Notepad.",
      "pos": [
        4414,
        4444
      ]
    },
    {
      "content": "You should see the line in the file about testing production checkpoints:",
      "pos": [
        4445,
        4518
      ]
    },
    {
      "content": "Rename a checkpoint",
      "pos": [
        4565,
        4584
      ]
    },
    {
      "content": "Right-click the last checkpoint in the tree and click Rename.",
      "pos": [
        4591,
        4652
      ]
    },
    {
      "pos": [
        4656,
        4690
      ],
      "content": "Name the checkpoint <bpt id=\"p1\">**</bpt>Delete me<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Delete a checkpoint",
      "pos": [
        4723,
        4742
      ]
    },
    {
      "content": "The previous step has probably given you a hint about what we'll do next.",
      "pos": [
        4744,
        4817
      ]
    },
    {
      "content": "We are going to delete the checkpoint that you just renamed.",
      "pos": [
        4818,
        4878
      ]
    },
    {
      "pos": [
        4883,
        4965
      ],
      "content": "Right-click on the checkpoint named <bpt id=\"p1\">**</bpt>Delete me<ept id=\"p1\">**</ept> and click <bpt id=\"p2\">**</bpt>Delete checkpoint<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        5006,
        5046
      ],
      "content": "In the warning dialog, click <bpt id=\"p1\">**</bpt>Delete<ept id=\"p1\">**</ept>."
    },
    {
      "content": "After the checkpoint is deleted, your list should look something like this:",
      "pos": [
        5081,
        5156
      ]
    },
    {
      "content": "Next Step:",
      "pos": [
        5193,
        5203
      ]
    },
    {
      "content": "Step 7: Export and import a virtual machine",
      "pos": [
        5206,
        5249
      ]
    }
  ],
  "content": "# Step 6: Experiment with checkpoints \n\nCheckpoints are a helpful tool when you want to save the present state of a virtual machine before making a change such as applying an update, installing software, or changing a setting.  If the change causes issues, you can restore the checkpoint and go back.  \n\nThere are two types of checkpoints:  \n**Production checkpoints**: Used mainly on servers in production environments.  \n**Standard checkpoints**: Used in development or testing environments \n\nProduction checkpoints are the default for Hyper-V on Windows 10.\n\n\n## Change the checkpoint type\nWe'll start by trying out the older style of checkpoints, **standard checkpoints**. Since production checkpoints are the default, we need to go into the settings for the VM and change the checkpoint type.\n\n1. Right-click on **Windows Walkthrough VM** and select **Settings**.\n2. In the **Management** section, select **Checkpoints**.\n3. Select **Standard checkpoints**. The dialog should look like this:\n\n  ![](media/standard1.png)\n4.  Click **OK** to close the dialog box.\n\n## Open Notepad to test checkpoints \nIn order to see what happens with each type of checkpoint, we'll run an application in the VM. \n1. Right-click on **Windows Walkthrough VM** and select **Connect**.\n2. In the virtual machine, open **Notepad** by clicking on the **Start** menu and typing **Notepad** and then select it from the results. \n3. In Notepad, type **This is a test of checkpoints.** The file should look like this:\n  \n  ![](media/standard_notepad.png)\n4. Save the file as **test.txt**, but don't close Notepad. Leave it running in the virtual machine.\n\n## Create a standard checkpoint \n1. To create the checkpoint, click on the ![](media/checkpoint_button.png) **Checkpoint** button in the menu bar. \n2. In the checkpoint name dialog, type **Standard**. The dialog should look like this:\n\n  ![](media/save_standard.png) \n3. When the process is complete, the checkpoint will appear under **Checkpoints** in the **Hyper-V Manager**.\n\n  ![](media/standard_complete.png) \n\n## Create a production checkpoint \nNow, we need to change change the type of checkpoint that we want to take back to **Production checkpoints** before taking a second checkpoint.\n\n1.  Right-click the virtual machine, and click **Settings**.\n2.  In the **Management** section, select **Checkpoints**.\n3.  Select **Production checkpoints**.\n4.  Clear the fall-back option. If the system can't take a production checkpoint, we want it to fail instead of taking a standard checkpoint.\n\n  ![](media/production.png)\n5.  click **OK** to close the dialog box.\n6.  Right-click on the VM again and select **Connect**.\n7.  In Notepad in the VM, type another line that reads **This is a test of a production checkpoint** and save the file again.\n8.  Click on the ![](media/checkpoint_button.png) **Checkpoint** button in the menu bar.\n9.  When asked, name it **Production** and then click **Yes**.\n\n  ![](media/production_CheckpointName.png) \n10. Close VMConnect. The VM will continue running, you just won't be connected to it anymore.\n11. In Hyper-V manager, your list of checkpoints will now look like this:\n\n  ![](media/production_complete.png)\n\n\n\n## Apply the standard checkpoint \n\n1.  In **Hyper-V Manager**, in the **Checkpoints** section, right-click the one titled **Standard** and click **Apply**.\n2.  In the pop-up dialog, click **Create Checkpoint and Apply**. \n\n  ![](media/apply_standard.png)\n34. When the finished, your list of checkpoints will now look something like this:\n\n  ![](media/standard_applied.png)\n4. When this finishes, right-click the VM and the click **Connect** to connect to the VM. \n5. When you connect to the VM, the VM should be running, with Notepad open, but the line about production checkpoints will be missing:\n\n  ![](media/standard_applied_notepad.png)\n6. Close VMConnect, but leave the VM running.\n\n\n## Apply the production checkpoint \nNow, let's go back to Hyper-V manager and apply the production checkpoint and see how our VM looks afterwards.\n\n1.  In the Checkpoints section, right-click the one titled **Production Checkpoint** and click **Apply**.\n2.  In the pop-up dialog, pick **Create Checkpoint and Apply**. \n3. When this finishes, right-click the VM and the click **Connect** to launch the VM. \n4. You'll notice that the VM is not running. Click on the ![](media/start.png) Start button in the menu bar to start the VM.\n5. Open open test.txt in Notepad. You should see the line in the file about testing production checkpoints:\n\n  ![](media/production_notepad.png)\n    \n\n## Rename a checkpoint ##\n1. Right-click the last checkpoint in the tree and click Rename.\n2. Name the checkpoint **Delete me**.\n\n  ![](media/delete_me.png)\n\n## Delete a checkpoint \nThe previous step has probably given you a hint about what we'll do next. We are going to delete the checkpoint that you just renamed.\n\n1. Right-click on the checkpoint named **Delete me** and click **Delete checkpoint**. \n\n  ![](media/delete_checkpoint.png)\n2. In the warning dialog, click **Delete**. \n\n  ![](media/delete_warn.png)\n3. After the checkpoint is deleted, your list should look something like this:\n\n  ![](media/after_delete.png)\n\n\n## Next Step: \n[Step 7: Export and import a virtual machine](walkthrough_export_import.md)\n\n\n"
}