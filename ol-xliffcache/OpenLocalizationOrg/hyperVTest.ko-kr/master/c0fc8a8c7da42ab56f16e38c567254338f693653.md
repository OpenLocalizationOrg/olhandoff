ms입니다. ContentId: 347fa279-d588-4094-90ec-8c2fc241f5b6
제목: Docker와 Windows Server 컨테이너 관리

#빠른 시작: Windows Server 컨테이너 및 Docker

이 문서 창을 Docker 있는 컨테이너를 서버 관리의 기초를 살펴봅니다.
Windows Server 컨테이너 및 Windows Server 컨테이너 이미지 만들기, Windows Server 컨테이너 및 컨테이너 이미지 제거 및 마지막으로 Windows 서버 컨테이너에 응용 프로그램을 배포 대상 항목이 포함 됩니다.
이 연습에서는 교훈을 Docker를 사용 하 여 Windows Server 컨테이너의 배포 및 관리를 살펴볼 때 처음 수 있어야 합니다.

궁금한 점이 있으십니까?
노라는 [Windows 컨테이너 포럼](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).

> **참고:** PowerShell을 사용 하 여 만든 Windows 컨테이너 하지 현재으로 관리할 수 있는 Docker 및 visa 반대의 경우도 마찬가지입니다.
> PowerShell을 사용한 컨테이너를 만들려면 참조  [빠른 시작: Windows Server 컨테이너 및 PowerShell](./manage_powershell.md).
> <br /><br /> 더 알고 싶은 경우 [FAQ를 읽으십시오.](../about/faq.md#WhydoIhavetopickbetweenDockerandPowerShellforWindowsServerContainermanagement).

##필수 구성 요소

이 연습을 완료 하기 위해 다음과 같은 항목이 마련 되어 필요 합니다.

- Windows Server 2016 TP3 또는 나중에 Windows Server 컨테이너 기능으로 구성 합니다.
   설치 가이드를 완료 한 경우 Azure 또는 Hyper-v에서 만든 VM입니다.
- 이 시스템 네트워크에 연결 되어 있고 인터넷에 액세스할 수 있어야 합니다.

컨테이너 기능을 구성 하려면 다음 가이드를 참조: [Azure에서 컨테이너 설치](./azure_setup.md) 또는 [Hyper-v에서 컨테이너 설치](./container_setup.md).

##Docker 사용한 기본 컨테이너 관리

이 첫번째 예제에서는 생성 및 Windows Server 컨테이너 및 Docker 사용 하 여 Windows Server 컨테이너 이미지를 제거 하는 기본 방법을 설명 합니다.

Windows Server 컨테이너 호스트 시스템에 로그 통해 워크를 시작 하려면 Windows 명령 프롬프트를 보게될 것입니다.

![](media/cmd.png)

입력 하 여 PowerShell 세션을 시작 `powershell`.
프롬프트에서 변경 되는 경우 PowerShell 세션에 있는지 알 수 `C:\directory >` 를 `PS C:\directory >`.
```
C:\> powershell
Windows PowerShell
Copyright (C) 2015 Microsoft Corporation. All rights reserved.

PS C:\>
```
> 하지만이 빠른 시작 PowerShell 명령을 사용 하 여 방화벽 규칙을 관리 하 고 파일 복사와 같은 일부 단계가 실행 됩니다 Docker 명령에 집중할 것입니다.
> PowerShell 세션에서이 연습을 통해 작동 합니다.

그런 다음 시스템 사용 하 여 유효한 IP 주소에 있는지를 확인 `ipconfig` 및 나중에 사용할 수 있는이 주소를 기록해둡니다.
```
ipconfig

Ethernet adapter Ethernet 3:

   Connection-specific DNS Suffix  . :
   IPv6 Address. . . . . . . . . . . : 2601:600:8f01:84eb::e
   IPv6 Address. . . . . . . . . . . : 2601:600:8f01:84eb:a8c1:a3e:96b7:ffcb
   Link-local IPv6 Address . . . . . : fe80::a8c1:a3e:96b7:ffcb%5
   IPv4 Address. . . . . . . . . . . : 192.168.1.25
```

사용 하는 대신 Azure VM에서 작업 하는 경우 `ipconfig` Azure 가상 컴퓨터의 공용 IP 주소를 가져올 해야 합니다.

![](media/newazure9.png)

###1 단계-새 컨테이너 만들기

Docker를 사용 하 여 Windows 서버 컨테이너를 만들기 전에 이름 또는 ID exsisitng Windows 서버 컨테이너 이미지의 필요 합니다.

사용 하 여 컨테이너 호스트에 로드 된 모든 이미지를 보려면는 `docker 이미지` 명령 합니다.

``` PowerShell
docker images

REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
windowsservercore   latest              9eca9231f4d4        30 hours ago        9.613 GB
windowsservercore   10.0.10254.0        9eca9231f4d4        30 hours ago        9.613 GB
```

이제를 사용 하 여 `실행 docker` 새 Windows 서버 컨테이너를 만들 수 있습니다.
아래 표시 된 것 처럼이 명령은를 이미지 'windowsservercore'에서 ' dockerdemo' 라는 새 컨테이너를 만들고 엽니다 대화형 Docker 데몬 지시 합니다 (-것) 콘솔 세션 (cmd) 컨테이너를 사용 합니다.

``` PowerShell
docker run -it --name dockerdemo windowsservercore cmd
```
명령이 완료 되 면 작업 하는 콘솔 세션에서 컨테이너에 있습니다.

컨테이너에서 작업 하는 것은 가상 또는 실제 컴퓨터에 설치 하는 Windows와 함께 사용 하는 거의 동일 합니다.
와 같은 명령을 실행할 수 있습니다 `ipconfig` 컨테이너의 IP 주소를 반환 `mkdir` 새 디렉터리를 만들려면 또는 `powershell` PowerShell 세션을 시작 합니다.
계속 해 서 하 고 파일 또는 폴더 만들기와 같은 컨테이너를 변경 합니다.
예를들어, 다음 명령은 컨테이너에 대 한 네트워크 구성 데이터를 포함 하는 파일을 만들어집니다.

``` PowerShell
ipconfig > c:\ipconfig.txt
```

명령이 성공적으로 완료 되도록 파일의 내용을 읽을 수 있습니다.
텍스트 파일에 포함 된 IP 주소는 컨테이너와 일치 하는지 확인 합니다.

``` PowerShell
type c:\ipconfig.txt

Ethernet adapter vEthernet (Virtual Switch-94a3e12ad262b3059e08edc4d48fca3c8390e38c3b219023d4a0a4951883e658-0):

   Connection-specific DNS Suffix  . : 
   Link-local IPv6 Address . . . . . : fe80::cc1f:742:4126:9530%18
   IPv4 Address. . . . . . . . . . . : 172.16.0.2
   Subnet Mask . . . . . . . . . . . : 255.240.0.0
   Default Gateway . . . . . . . . . : 172.16.0.1
```

컨테이너가 수정 했으므로 컨테이너 호스트의 콘솔 세션에 다시 배치 하는 콘솔 세션을 중지 하려면 다음을 실행 합니다.

``` PowerShell
exit
```

마지막으로 컨테이너에 컨테이너의 목록을 보려면 호스트 사용 하 여는 `docker ps – a` 명령 합니다.
컨테이너 'dockerdemo' 명명 된 출력에서 알림을 생성 되었습니다.

``` PowerShell
docker ps -a

CONTAINER ID        IMAGE               COMMAND        CREATED             STATUS                     PORTS     NAMES
4f496dbb8048        windowsservercore   "cmd"          2 minutes ago       Exited (0) 2 minutes ago             dockerdemo
```

###2 단계-새 컨테이너 이미지 만들기

이미지는 이제이 컨테이너에서 수행할 수 있습니다.
이 이미지는 컨테이너의 스냅숏을 처럼 동작 수 있으며 다시 배포 된 여러 번 합니다.

이미지를 만들려면 새 다음을 실행 합니다.
이 명령은 모든 변경 내용에 'deckerdemo' 컨테이너를 포함 하는 ' newcontainerimage' 라는 새 이미지를 만드는 Docker 엔진을 지시 합니다.

``` PowerShell
docker commit dockerdemo newcontainerimage
```

호스트에서 모든 이미지를 보려면 실행 `docker 이미지`.
새 이미지 이름 'newcontainerimage'으로 만들어졌는지 확인 합니다.

``` PowerShell
docker images

REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
newcontainerimage   latest              4f8ebcf0a334        2 minutes ago       9.613 GB
windowsservercore   latest              9eca9231f4d4        30 hours ago        9.613 GB
windowsservercore   10.0.10254.0        9eca9231f4d4        30 hours ago        9.613 GB
```

###3 단계-이미지에서 새 컨테이너 만들기

사용자 지정 컨테이너 이미지를 만들었으므로 'newcontainerimage'에서 ' newcontainer' 라는 새 컨테이너를 배포 하 고 컨테이너와 대화형 셸 세션을 엽니다.

``` PowerShell
docker run –it --name newcontainer newcontainerimage cmd
```

이 새 컨테이너의 c:\ 드라이브 살펴보겠습니다 및 ipconfig.txt 파일이 있는지 확인 합니다.

![](media/docker3.png)

새로 만든된 컨테이너에 컨테이너 호스트 콘솔 세션을 종료 합니다.

``` PowerShell
exit
```

이 연습에 수정 된 컨테이너에서 가져온 이미지 모든 수정 내용이 포함 되도록 표시 됩니다.
다음 예제에서는 간단한 파일 수정 하는 동안 웹 서버와 같은 컨테이너에 소프트웨어를 설치 하는 경우 적용 됩니다 동일 합니다.
이러한 메서드를 사용 하 여 사용자 지정 이미지를 만들 수 있는 준비 컨테이너 응용 프로그램을 배포 합니다.

###4 단계-제거 컨테이너 및 이미지

더이상 후 컨테이너를 제거 하려면 필요한 사용은 `docker rm` 명령 합니다.
다음 명령은 컨테이너 이름 'newcontainer'를 제거 합니다.

``` PowerShell
docker rm newcontainer
```
이미지를 제거 하려면 컨테이너 없을 때 사용 하 여 필요한는 `docker rmi` 명령 합니다.
기존 컨테이너에서 참조 하는 경우에 이미지를 제거할 수 없습니다.

다음 명령은 'newcontainerimage' 라는 컨테이너 이미지를 제거 합니다.
``` PowerShell
docker rmi newcontainerimage

Untagged: newcontainerimage:latest
Deleted: 4f8ebcf0a334601e75070a92294d993b0f182abb6f4c88740c75b05093e6acff
```

##컨테이너에는 웹 서버 호스트

다음 예제에서는 Windows Server 컨테이너에 대 한 보다 효과적인 사용 사례를 설명 합니다.
이 연습에서는 포함 된 단계는 Windows 서버 컨테이너 내부에서 호스팅되는 웹 응용 프로그램 배포에 대해 사용할 수 있는 웹 서버 컨테이너 이미지를 생성 하는 과정을 안내 있습니다.

###단계 1-웹 서버 소프트웨어 다운로드

웹 컨테이너 이미지를 만들기 전에 서버 소프트웨어를 다운로드 하 고 컨테이너 호스트에 위치 하 게 할 수 있습니다.
이 예제에 대 한 Windows 소프트웨어에 대 한는 nginx를 사용 합니다.
**참고** 이 단계는 인터넷에 연결 되어 컨테이너 호스트를 필요 합니다.
이 단계에서 생성 되는 경우 연결 또는 이름 확인 오류 컨테이너 호스트의 네트워크 구성을 확인 합니다.

이 예에 사용할 디렉터리 구조를 만들 컨테이너 호스트에서 다음 명령을 실행 합니다.

``` PowerShell
mkdir c:\build\nginx\source
```

'C:\nginx-1.9.3.zip'를 nginx 소프트웨어를 다운로드 하려면 컨테이너 호스트에서이 명령을 실행 합니다.

``` PowerShell
wget -uri 'http://nginx.org/download/nginx-1.9.3.zip' -OutFile "c:\nginx-1.9.3.zip"
```

마지막으로 다음 명령은 nginx 소프트웨어 'C:\build\nginx\source'를 추출 합니다.

``` PowerShell
Expand-Archive -Path C:\nginx-1.9.3.zip -DestinationPath C:\build\nginx\source -Force
```

###2 단계-웹 서버 이미지 만들기

이전 예에서 있습니다 수동으로 만들고, 업데이트 된 이미지를 캡처한는 컨테이너입니다.
이 예제는 Dockerfile를 사용 하 여 컨테이너 이미지를 만들기 위한 자동화 된 방법을 설명 합니다.
Dockerfiles는 Docker 엔진을 빌드하고 수정할 컨테이너를 사용 하는 지침을 포함 하 고 컨테이너 이미지에 컨테이너를 커밋합니다.
Dockerfiles에 대 한 자세한 내용은 참조 [Dockerfile 참조](https://docs.docker.com/reference/builder/).

빈 dockerfile를 만들려면 다음 명령을 사용 합니다.

``` PowerShell
new-item -Type File c:\build\nginx\dockerfile
```
dockerfile 메모장으로 엽니다.

```
notepad.exe c:\build\nginx\dockerfile
```

복사한 파일을 메모장을 닫습니다 저장 메모장에 다음 텍스트를 붙여넣습니다.

``` PowerShell
FROM windowsservercore
LABEL Description="nginx For Windows" Vendor="nginx" Version="1.9.3"
ADD source /nginx
```

이 시점에 'c:\build\nginx' 및 'c:\build\nginx\source'로 추출 nginx 소프트웨어는 dockerfile가 됩니다.
이제는 dockerfile의 지침에 따라 웹 서버 컨테이너 이미지를 작성할 준비가 되었습니다.
이렇게 하려면 컨테이너 호스트에서 다음 명령을 실행 합니다.

``` PowerShell
docker build -t nginx_windows C:\build\nginx
```
이 명령은에 위치한 dockerfile를 사용 하 여 docker 엔진이 `C:\build\nginx` 'nginx_windows' 명명 된 이미지를 만들 수 있습니다.

출력을이 유사 합니다.

![](media/docker1.png)

완료 되 면에 대해 살펴보겠습니다 이미지를 사용 하 여 호스트에는 `docker 이미지` 명령 합니다.
'Nginx_windows' 라는 새 이미지가 표시 되어야 합니다.
``` PowerShell
docker images

REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE

nginx_windows       latest              d792268338d0        5 seconds ago       9.613 GB
windowsservercore   10.0.10254.0        9eca9231f4d4        35 hours ago        9.613 GB
windowsservercore   latest              9eca9231f4d4        35 hours ago        9.613 GB
```

###3 단계 – 컨테이너 응용 프로그램에 대 한 네트워킹 구성

컨테이너 내에서 웹사이트를 호스팅하는 때문에 몇 네트워킹 구성을 설정할 필요가 관련 있습니다.
먼저 웹사이트에 액세스할 수 있도록 컨테이너 호스트에서 만들 수는 방화벽 규칙 해야 합니다.
이 예제에서 포트 80 통해 사이트를 액세스 합니다.
이 방화벽 규칙을 만들려면 다음 스크립트를 실행 합니다.
이 스크립트는 VM에 복사할 수 있습니다.

``` powershell
if (!(Get-NetFirewallRule | where {$_.Name -eq "TCP80"})) {
    New-NetFirewallRule -Name "TCP80" -DisplayName "HTTP on TCP/80" -Protocol tcp -LocalPort 80 -Action Allow -Enabled True
}
```

그런 다음 Azure에서 작업 하 고 가상 컴퓨터 끝점을 아직 만들지 않은 경우 지금 만듭니다 해야 합니다.
Azure VM 끝점에 대 한 자세한 내용은이 문서를 참조 하십시오: [Azure VM 끝점을 설정](https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-set-up-endpoints/).

###4 단계-웹 서버 준비 컨테이너를 배포 합니다.

'Nginx_windows'을 기반으로 Windows 서버 컨테이너를 배포 하려면 다음 명령을 실행 하는 컨테이너입니다.
이 'nginxcontainer' 라는 새 컨테이너를 만들고 컨테이너에는 콘솔 세션을 시작 합니다.
이 명령 – p 80:80 부분에 포트 80에 컨테이너를 호스트에서 포트 80 사이의 포트 매핑을 만듭니다.

``` powershell
docker run -it --name nginxcontainer -p 80:80 nginx_windows cmd
```
Nginx 웹 서버를 시작할 수는 컨테이너 내에서 작업, 일단 및 웹 콘텐츠를 준비 합니다.
Nginx 웹 서버를 시작 하려면 nginx 설치 디렉터리로 변경 합니다.

``` powershell
cd c:\nginx\nginx-1.9.3
```

Nginx 웹 서버를 시작 합니다.
``` powershell
start nginx
```
###5 단계-컨테이너 호스팅된 웹사이트에 액세스

웹 서버에 만든 컨테이너와 이제 체크아웃 컨테이너에서 호스팅되는 응용 프로그램에 지정할 수 있습니다.
이렇게 하려면 다른 컴퓨터에서 브라우저를 열고 입력 `http://containerhost-ipaddress`.
컨테이너 호스트와 컨테이너 자체의 IP 주소를 검색 합니다 있습니다 여기를 확인 합니다.
작업 하는 경우 Azure 가상 컴퓨터에서이 됩니다 공용 IP 주소 또는 클라우드 서비스 이름입니다.

모든 항목이 올바르게 구성 되었는지, nginx 시작 페이지를 표시 됩니다.

![](media/nginx.png)

이 시점에 자유롭게 웹사이트를 업데이트 합니다.
사용자 고유의 샘플 웹사이트에서 복사 하 하거나 nginx 시작 페이지 ' Hello World' 웹 페이지를 대체 하려면 컨테이너에서 다음 명령을 실행 키를 누릅니다.

```powershell
powershell wget -uri 'https://raw.githubusercontent.com/Microsoft/Virtualization-Documentation/master/doc-site/virtualization/windowscontainers/quick_start/SampleFiles/index.html' -OutFile "C:\nginx\nginx-1.9.3\html\index.html"
```

웹사이트를 업데이트 한 후에 다시 이동 `http://containerhost-ipaddress`.

![](media/hello.png)

> **참고:** 사용 하 여 (예:를 수신 대기 포트를 변경, 컨테이너에 원격으로 연결할) Docker 데몬 설정을 변경 하려면 원하는 하 고 컨테이너에 "C:\ProgramData\docker\runDockerDaemon.cmd" 파일을 편집 해야 다음 PowerShell 사용 하 여 서비스를 다시 시작 해야 합니다, `서비스를 다시 시작 docker`.

##연습 동영상을 보려면

<iframe src="https://channel9.msdn.com/Blogs/containers/Quick-Start-Deploying-and-Managing-Windows-Server-Containers-with-Docker/player" width="800" height="450" allowFullScreen="true" frameBorder="0" scrolling="no"></iframe>

##다음 단계

컨테이너를 설정 및 도구에 대 한 소개가 했으므로 색인화 앱 빌드를 이동 합니다.

이 **미리 보기** 버그 있으며 진행 중인 작업의 많은 합니다.
[이 페이지](../about/work_in_progress.md) 우리의 알려진 문제의 대부분을 포함 합니다.

일부 알려진된 Docker 명령 하는 점에 주의 [작동 하지 않는](../about/work_in_progress.md#DockermanagementDockercommandsthatdontworkwithWindowsServerContainers) 및 일부만 [부분적으로 작업](../about/work_in_progress.md#DockermanagementDockercommandsthatpartiallyworkwithWindowsServerContainers)

모니터링 하는 우리는 또한는 [포럼](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers) 매우 밀접 하 게 합니다.

에 미리 만들어 놓은 샘플도 있습니다 [GitHub](https://github.com/Microsoft/Virtualization-Documentation/tree/master/windows-server-container-samples).

-----------------------------------

[컨테이너 홈으로 돌아가기](../containers_welcome.md)   
[현재 릴리스의 알려진된 문제](../about/work_in_progress.md)



