{
  "nodes": [
    {
      "pos": [
        26,
        100
      ],
      "content": "Use Ambari Views to work with Hive on HDInsight (Hadoop) | Microsoft Azure"
    },
    {
      "pos": [
        118,
        287
      ],
      "content": "Learn how to use the Hive View from your web browser to submit Hive queries. The Hive View is part of the Ambari Web UI provided with your Linux-based HDInsight cluster.",
      "nodes": [
        {
          "content": "Learn how to use the Hive View from your web browser to submit Hive queries.",
          "pos": [
            0,
            76
          ]
        },
        {
          "content": "The Hive View is part of the Ambari Web UI provided with your Linux-based HDInsight cluster.",
          "pos": [
            77,
            169
          ]
        }
      ]
    },
    {
      "pos": [
        604,
        646
      ],
      "content": "Use the Hive View with Hadoop in HDInsight"
    },
    {
      "pos": [
        728,
        1003
      ],
      "content": "Ambari is a management and monitoring utility provided with Linux-based HDInsight clusters. One of the features provided through Ambari is a Web UI that can be used to run Hive queries. This is the <bpt id=\"p1\">__</bpt>Hive View<ept id=\"p1\">__</ept>, part of the Ambari Views provided with your HDInsight cluster.",
      "nodes": [
        {
          "content": "Ambari is a management and monitoring utility provided with Linux-based HDInsight clusters.",
          "pos": [
            0,
            91
          ]
        },
        {
          "content": "One of the features provided through Ambari is a Web UI that can be used to run Hive queries.",
          "pos": [
            92,
            185
          ]
        },
        {
          "content": "This is the <bpt id=\"p1\">__</bpt>Hive View<ept id=\"p1\">__</ept>, part of the Ambari Views provided with your HDInsight cluster.",
          "pos": [
            186,
            313
          ]
        }
      ]
    },
    {
      "pos": [
        1007,
        1211
      ],
      "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> Ambari has a lot of capabilities that won't be discussed in this document. For more information, see <bpt id=\"p2\">[</bpt>Manage HDInsight clusters by using the Ambari Web UI<ept id=\"p2\">](hdinsight-hadoop-manage-ambari.md)</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> Ambari has a lot of capabilities that won't be discussed in this document.",
          "pos": [
            0,
            119
          ]
        },
        {
          "content": "For more information, see <bpt id=\"p2\">[</bpt>Manage HDInsight clusters by using the Ambari Web UI<ept id=\"p2\">](hdinsight-hadoop-manage-ambari.md)</ept>.",
          "pos": [
            120,
            274
          ]
        }
      ]
    },
    {
      "pos": [
        1215,
        1228
      ],
      "content": "Prerequisites"
    },
    {
      "pos": [
        1232,
        1401
      ],
      "content": "A Linux-based HDInsight cluster. For information on creating a new cluster, see <bpt id=\"p3\">[</bpt>Get started with Linux-based HDInsight<ept id=\"p3\">](hdinsight-hadoop-linux-tutorial-get-started.md)</ept>.",
      "nodes": [
        {
          "content": "A Linux-based HDInsight cluster.",
          "pos": [
            0,
            32
          ]
        },
        {
          "content": "For information on creating a new cluster, see <bpt id=\"p3\">[</bpt>Get started with Linux-based HDInsight<ept id=\"p3\">](hdinsight-hadoop-linux-tutorial-get-started.md)</ept>.",
          "pos": [
            33,
            207
          ]
        }
      ]
    },
    {
      "pos": [
        1405,
        1423
      ],
      "content": "Open the Hive view"
    },
    {
      "pos": [
        1425,
        1565
      ],
      "content": "You can Ambari Views from the Azure Portal; select your HDInsight cluster and then select <bpt id=\"p4\">__</bpt>Ambari Views<ept id=\"p4\">__</ept><ph id=\"ph5\"/> from the <bpt id=\"p5\">__</bpt>Quick Links<ept id=\"p5\">__</ept><ph id=\"ph6\"/> section."
    },
    {
      "pos": [
        1567,
        1651
      ],
      "content": "<ph id=\"ph7\">![</ph>quick links section<ph id=\"ph8\">](./media/hdinsight-hadoop-use-hive-ambari-view/quicklinks.png)</ph>"
    },
    {
      "pos": [
        1653,
        1994
      ],
      "content": "You can also navigate directly to Ambari by going to https://CLUSTERNAME.azurehdinsight.net in a web browser (where <bpt id=\"p6\">__</bpt>CLUSTERNAME<ept id=\"p6\">__</ept><ph id=\"ph9\"/> is the name of your HDInsight cluster,) and then select the set of squares from the page menu (next to the <bpt id=\"p7\">__</bpt>Admin<ept id=\"p7\">__</ept><ph id=\"ph10\"/> link and button on the left of the page,) to list available views. Select the <bpt id=\"p8\">__</bpt>Hive view<ept id=\"p8\">__</ept>.",
      "nodes": [
        {
          "content": "You can also navigate directly to Ambari by going to https://CLUSTERNAME.azurehdinsight.net in a web browser (where <bpt id=\"p6\">__</bpt>CLUSTERNAME<ept id=\"p6\">__</ept><ph id=\"ph9\"/> is the name of your HDInsight cluster,) and then select the set of squares from the page menu (next to the <bpt id=\"p7\">__</bpt>Admin<ept id=\"p7\">__</ept><ph id=\"ph10\"/> link and button on the left of the page,) to list available views.",
          "pos": [
            0,
            420
          ]
        },
        {
          "content": "Select the <bpt id=\"p8\">__</bpt>Hive view<ept id=\"p8\">__</ept>.",
          "pos": [
            421,
            484
          ]
        }
      ]
    },
    {
      "pos": [
        1996,
        2088
      ],
      "content": "<ph id=\"ph11\">![</ph>Selecting ambari views<ph id=\"ph12\">](./media/hdinsight-hadoop-use-hive-ambari-view/selecthiveview.png)</ph>."
    },
    {
      "pos": [
        2092,
        2274
      ],
      "content": "<ph id=\"ph13\">[AZURE.NOTE]</ph><ph id=\"ph14\"/> When accessing Ambari, you will be prompted to authenticate to the site. Enter the admin (default <ph id=\"ph15\">`admin`</ph>,) account name and password you used when creating the cluster.",
      "nodes": [
        {
          "content": "<ph id=\"ph13\">[AZURE.NOTE]</ph><ph id=\"ph14\"/> When accessing Ambari, you will be prompted to authenticate to the site.",
          "pos": [
            0,
            119
          ]
        },
        {
          "content": "Enter the admin (default <ph id=\"ph15\">`admin`</ph>,) account name and password you used when creating the cluster.",
          "pos": [
            120,
            235
          ]
        }
      ]
    },
    {
      "pos": [
        2276,
        2323
      ],
      "content": "You should see a page similar to the following:"
    },
    {
      "pos": [
        2325,
        2450
      ],
      "content": "<ph id=\"ph16\">![</ph>Image of the hive view page, containing a query editor section<ph id=\"ph17\">](./media/hdinsight-hadoop-use-hive-ambari-view/hiveview.png)</ph>"
    },
    {
      "pos": [
        2454,
        2465
      ],
      "content": "View tables"
    },
    {
      "pos": [
        2467,
        2710
      ],
      "content": "In the <bpt id=\"p9\">__</bpt>Database Explorer<ept id=\"p9\">__</ept><ph id=\"ph18\"/> section of the page, select the <bpt id=\"p10\">__</bpt>default<ept id=\"p10\">__</ept><ph id=\"ph19\"/> entry on the <bpt id=\"p11\">__</bpt>Databases<ept id=\"p11\">__</ept><ph id=\"ph20\"/> tab. This will display a list of tables in the default database. For a new HDInsight cluster, only one table should exist; <bpt id=\"p12\">__</bpt>hivesampletable<ept id=\"p12\">__</ept>.",
      "nodes": [
        {
          "content": "In the <bpt id=\"p9\">__</bpt>Database Explorer<ept id=\"p9\">__</ept><ph id=\"ph18\"/> section of the page, select the <bpt id=\"p10\">__</bpt>default<ept id=\"p10\">__</ept><ph id=\"ph19\"/> entry on the <bpt id=\"p11\">__</bpt>Databases<ept id=\"p11\">__</ept><ph id=\"ph20\"/> tab.",
          "pos": [
            0,
            267
          ]
        },
        {
          "content": "This will display a list of tables in the default database.",
          "pos": [
            268,
            327
          ]
        },
        {
          "content": "For a new HDInsight cluster, only one table should exist; <bpt id=\"p12\">__</bpt>hivesampletable<ept id=\"p12\">__</ept>.",
          "pos": [
            328,
            446
          ]
        }
      ]
    },
    {
      "pos": [
        2712,
        2835
      ],
      "content": "<ph id=\"ph21\">![</ph>database explorer with the default database expanded<ph id=\"ph22\">](./media/hdinsight-hadoop-use-hive-ambari-view/databaseexplorer.png)</ph>"
    },
    {
      "pos": [
        2837,
        3017
      ],
      "content": "As new tables are added through the steps in this document, you can use the refresh icon in the upper right corner of the Database Explorer to refresh the list of available tables."
    },
    {
      "pos": [
        3019,
        3021
      ],
      "content": "##"
    },
    {
      "pos": [
        3045,
        3057
      ],
      "content": "Query editor"
    },
    {
      "pos": [
        3059,
        3161
      ],
      "content": "Use the following steps from the Hive view to run a Hive query against data included with the cluster."
    },
    {
      "pos": [
        3166,
        3268
      ],
      "content": "In the <bpt id=\"p13\">__</bpt>Query Editor<ept id=\"p13\">__</ept><ph id=\"ph23\"/> section of the page, paste the following HiveQL statements into the worksheet:"
    },
    {
      "pos": [
        3628,
        3675
      ],
      "content": "These statements perform the following actions:"
    },
    {
      "pos": [
        3683,
        3770
      ],
      "content": "<bpt id=\"p14\">**</bpt>DROP TABLE<ept id=\"p14\">**</ept><ph id=\"ph24\"/> - Deletes the table and the data file, in case the table already exists."
    },
    {
      "pos": [
        3777,
        3944
      ],
      "content": "<bpt id=\"p15\">**</bpt>CREATE EXTERNAL TABLE<ept id=\"p15\">**</ept><ph id=\"ph25\"/> - Creates a new \"external\" table in Hive. External tables store only the table definition in Hive; the data is left in the original location.",
      "nodes": [
        {
          "content": "<bpt id=\"p15\">**</bpt>CREATE EXTERNAL TABLE<ept id=\"p15\">**</ept><ph id=\"ph25\"/> - Creates a new \"external\" table in Hive.",
          "pos": [
            0,
            122
          ]
        },
        {
          "content": "External tables store only the table definition in Hive; the data is left in the original location.",
          "pos": [
            123,
            222
          ]
        }
      ]
    },
    {
      "pos": [
        3951,
        4068
      ],
      "content": "<bpt id=\"p16\">**</bpt>ROW FORMAT<ept id=\"p16\">**</ept><ph id=\"ph26\"/> - Tells Hive how the data is formatted. In this case, the fields in each log are separated by a space.",
      "nodes": [
        {
          "content": "<bpt id=\"p16\">**</bpt>ROW FORMAT<ept id=\"p16\">**</ept><ph id=\"ph26\"/> - Tells Hive how the data is formatted.",
          "pos": [
            0,
            109
          ]
        },
        {
          "content": "In this case, the fields in each log are separated by a space.",
          "pos": [
            110,
            172
          ]
        }
      ]
    },
    {
      "pos": [
        4075,
        4205
      ],
      "content": "<bpt id=\"p17\">**</bpt>STORED AS TEXTFILE LOCATION<ept id=\"p17\">**</ept><ph id=\"ph27\"/> - Tells Hive where the data is stored (the example/data directory), and that it is stored as text."
    },
    {
      "pos": [
        4212,
        4296
      ],
      "content": "<bpt id=\"p18\">**</bpt>SELECT<ept id=\"p18\">**</ept><ph id=\"ph28\"/> - Selects a count of all rows where column t4 contains the value [ERROR]."
    },
    {
      "pos": [
        4303,
        4635
      ],
      "content": "<ph id=\"ph29\">[AZURE.NOTE]</ph><ph id=\"ph30\"/> External tables should be used when you expect the underlying data to be updated by an external source, such as an automated data upload process, or by another MapReduce operation, but you always want Hive queries to use the latest data. Dropping an external table does <bpt id=\"p19\">*</bpt>not<ept id=\"p19\">*</ept><ph id=\"ph31\"/> delete the data, only the table definition.",
      "nodes": [
        {
          "content": "<ph id=\"ph29\">[AZURE.NOTE]</ph><ph id=\"ph30\"/> External tables should be used when you expect the underlying data to be updated by an external source, such as an automated data upload process, or by another MapReduce operation, but you always want Hive queries to use the latest data.",
          "pos": [
            0,
            284
          ]
        },
        {
          "content": "Dropping an external table does <bpt id=\"p19\">*</bpt>not<ept id=\"p19\">*</ept><ph id=\"ph31\"/> delete the data, only the table definition.",
          "pos": [
            285,
            421
          ]
        }
      ]
    },
    {
      "pos": [
        4640,
        4904
      ],
      "content": "Use the <bpt id=\"p20\">__</bpt>Execute<ept id=\"p20\">__</ept><ph id=\"ph32\"/> button at the bottom of the Query Editor to start the query. It should turn orange and the text will change to <bpt id=\"p21\">__</bpt>Stop execution<ept id=\"p21\">__</ept>. A <bpt id=\"p22\">__</bpt>Query Process Results<ept id=\"p22\">__</ept><ph id=\"ph33\"/> section should appear beneath the Query Editor and display information about the job.",
      "nodes": [
        {
          "content": "Use the <bpt id=\"p20\">__</bpt>Execute<ept id=\"p20\">__</ept><ph id=\"ph32\"/> button at the bottom of the Query Editor to start the query.",
          "pos": [
            0,
            135
          ]
        },
        {
          "content": "It should turn orange and the text will change to <bpt id=\"p21\">__</bpt>Stop execution<ept id=\"p21\">__</ept>.",
          "pos": [
            136,
            245
          ]
        },
        {
          "content": "A <bpt id=\"p22\">__</bpt>Query Process Results<ept id=\"p22\">__</ept><ph id=\"ph33\"/> section should appear beneath the Query Editor and display information about the job.",
          "pos": [
            246,
            414
          ]
        }
      ]
    },
    {
      "pos": [
        4912,
        5147
      ],
      "content": "<ph id=\"ph34\">[AZURE.IMPORTANT]</ph><ph id=\"ph35\"/> Some browsers may not correctly refresh the log or results information. If you run a job and it appears to run forever without updating the log or returning results, try using Mozilla FireFox or Google Chrome instead.",
      "nodes": [
        {
          "content": "<ph id=\"ph34\">[AZURE.IMPORTANT]</ph><ph id=\"ph35\"/> Some browsers may not correctly refresh the log or results information.",
          "pos": [
            0,
            123
          ]
        },
        {
          "content": "If you run a job and it appears to run forever without updating the log or returning results, try using Mozilla FireFox or Google Chrome instead.",
          "pos": [
            124,
            269
          ]
        }
      ]
    },
    {
      "pos": [
        5156,
        5410
      ],
      "content": "Once the query has finished, The <bpt id=\"p23\">__</bpt>Query Process Results<ept id=\"p23\">__</ept><ph id=\"ph36\"/> section will display the results of the operation. The <bpt id=\"p24\">__</bpt>Stop execution<ept id=\"p24\">__</ept><ph id=\"ph37\"/> button will also change back to a green <bpt id=\"p25\">__</bpt>Execute<ept id=\"p25\">__</ept><ph id=\"ph38\"/> button. The <bpt id=\"p26\">__</bpt>Results<ept id=\"p26\">__</ept><ph id=\"ph39\"/> tab should contain the following information:",
      "nodes": [
        {
          "content": "Once the query has finished, The <bpt id=\"p23\">__</bpt>Query Process Results<ept id=\"p23\">__</ept><ph id=\"ph36\"/> section will display the results of the operation.",
          "pos": [
            0,
            164
          ]
        },
        {
          "content": "The <bpt id=\"p24\">__</bpt>Stop execution<ept id=\"p24\">__</ept><ph id=\"ph37\"/> button will also change back to a green <bpt id=\"p25\">__</bpt>Execute<ept id=\"p25\">__</ept><ph id=\"ph38\"/> button.",
          "pos": [
            165,
            357
          ]
        },
        {
          "content": "The <bpt id=\"p26\">__</bpt>Results<ept id=\"p26\">__</ept><ph id=\"ph39\"/> tab should contain the following information:",
          "pos": [
            358,
            474
          ]
        }
      ]
    },
    {
      "pos": [
        5459,
        5612
      ],
      "content": "The <bpt id=\"p27\">__</bpt>Logs<ept id=\"p27\">__</ept><ph id=\"ph40\"/> tab can be used to view the logging information created by the job. You can use this for troubleshooting if there are problems with a query.",
      "nodes": [
        {
          "content": "The <bpt id=\"p27\">__</bpt>Logs<ept id=\"p27\">__</ept><ph id=\"ph40\"/> tab can be used to view the logging information created by the job.",
          "pos": [
            0,
            135
          ]
        },
        {
          "content": "You can use this for troubleshooting if there are problems with a query.",
          "pos": [
            136,
            208
          ]
        }
      ]
    },
    {
      "pos": [
        5624,
        5836
      ],
      "content": "<ph id=\"ph41\">[AZURE.TIP]</ph><ph id=\"ph42\"/> Note the <bpt id=\"p28\">__</bpt>Save results<ept id=\"p28\">__</ept><ph id=\"ph43\"/> drop-down dialog in the upper left of the <bpt id=\"p29\">__</bpt>Query Process Results<ept id=\"p29\">__</ept><ph id=\"ph44\"/> section; you can use this to either download the results, or save them to HDInsight storage as a CSV file."
    },
    {
      "pos": [
        5845,
        6274
      ],
      "content": "Select the first four lines of this query, then select <bpt id=\"p30\">__</bpt>Execute<ept id=\"p30\">__</ept>. Notice that there are no results when the job completes. This is because using the <bpt id=\"p31\">__</bpt>Execute<ept id=\"p31\">__</ept><ph id=\"ph45\"/> button when part of the query is selected will only run the selected statements. In this case, the selection didn't include the final statement that retrieves rows from the table. If you select just that line and use <bpt id=\"p32\">__</bpt>Execute<ept id=\"p32\">__</ept>, you should see the expected results.",
      "nodes": [
        {
          "content": "Select the first four lines of this query, then select <bpt id=\"p30\">__</bpt>Execute<ept id=\"p30\">__</ept>.",
          "pos": [
            0,
            107
          ]
        },
        {
          "content": "Notice that there are no results when the job completes.",
          "pos": [
            108,
            164
          ]
        },
        {
          "content": "This is because using the <bpt id=\"p31\">__</bpt>Execute<ept id=\"p31\">__</ept><ph id=\"ph45\"/> button when part of the query is selected will only run the selected statements.",
          "pos": [
            165,
            338
          ]
        },
        {
          "content": "In this case, the selection didn't include the final statement that retrieves rows from the table.",
          "pos": [
            339,
            437
          ]
        },
        {
          "content": "If you select just that line and use <bpt id=\"p32\">__</bpt>Execute<ept id=\"p32\">__</ept>, you should see the expected results.",
          "pos": [
            438,
            564
          ]
        }
      ]
    },
    {
      "pos": [
        6279,
        6437
      ],
      "content": "Use the <bpt id=\"p33\">__</bpt>New Worksheet<ept id=\"p33\">__</ept><ph id=\"ph46\"/> button at the bottom of the <bpt id=\"p34\">__</bpt>Query Editor<ept id=\"p34\">__</ept><ph id=\"ph47\"/> to create a new worksheet. In the new worksheet, enter the following HiveQL statements:",
      "nodes": [
        {
          "content": "Use the <bpt id=\"p33\">__</bpt>New Worksheet<ept id=\"p33\">__</ept><ph id=\"ph46\"/> button at the bottom of the <bpt id=\"p34\">__</bpt>Query Editor<ept id=\"p34\">__</ept><ph id=\"ph47\"/> to create a new worksheet.",
          "pos": [
            0,
            207
          ]
        },
        {
          "content": "In the new worksheet, enter the following HiveQL statements:",
          "pos": [
            208,
            268
          ]
        }
      ]
    },
    {
      "pos": [
        6694,
        6741
      ],
      "content": "These statements perform the following actions:"
    },
    {
      "pos": [
        6749,
        7069
      ],
      "content": "<bpt id=\"p35\">**</bpt>CREATE TABLE IF NOT EXISTS<ept id=\"p35\">**</ept><ph id=\"ph48\"/> - Creates a table, if it does not already exist. Since the <bpt id=\"p36\">**</bpt>EXTERNAL<ept id=\"p36\">**</ept><ph id=\"ph49\"/> keyword is not used, this is an internal table, which is stored in the Hive data warehouse and is managed completely by Hive. Unlike external tables, dropping an internal table will delete the underlying data as well.",
      "nodes": [
        {
          "content": "<bpt id=\"p35\">**</bpt>CREATE TABLE IF NOT EXISTS<ept id=\"p35\">**</ept><ph id=\"ph48\"/> - Creates a table, if it does not already exist.",
          "pos": [
            0,
            134
          ]
        },
        {
          "content": "Since the <bpt id=\"p36\">**</bpt>EXTERNAL<ept id=\"p36\">**</ept><ph id=\"ph49\"/> keyword is not used, this is an internal table, which is stored in the Hive data warehouse and is managed completely by Hive.",
          "pos": [
            135,
            338
          ]
        },
        {
          "content": "Unlike external tables, dropping an internal table will delete the underlying data as well.",
          "pos": [
            339,
            430
          ]
        }
      ]
    },
    {
      "pos": [
        7076,
        7222
      ],
      "content": "<bpt id=\"p37\">**</bpt>STORED AS ORC<ept id=\"p37\">**</ept><ph id=\"ph50\"/> - Stores the data in Optimized Row Columnar (ORC) format. This is a highly optimized and efficient format for storing Hive data.",
      "nodes": [
        {
          "content": "<bpt id=\"p37\">**</bpt>STORED AS ORC<ept id=\"p37\">**</ept><ph id=\"ph50\"/> - Stores the data in Optimized Row Columnar (ORC) format.",
          "pos": [
            0,
            130
          ]
        },
        {
          "content": "This is a highly optimized and efficient format for storing Hive data.",
          "pos": [
            131,
            201
          ]
        }
      ]
    },
    {
      "pos": [
        7229,
        7382
      ],
      "content": "<bpt id=\"p38\">**</bpt>INSERT OVERWRITE ... SELECT<ept id=\"p38\">**</ept><ph id=\"ph51\"/> - Selects rows from the <bpt id=\"p39\">**</bpt>log4jLogs<ept id=\"p39\">**</ept><ph id=\"ph52\"/> table that contain [ERROR], and then inserts the data into the <bpt id=\"p40\">**</bpt>errorLogs<ept id=\"p40\">**</ept><ph id=\"ph53\"/> table."
    },
    {
      "pos": [
        7392,
        7574
      ],
      "content": "Use the <bpt id=\"p41\">__</bpt>Execute<ept id=\"p41\">__</ept><ph id=\"ph54\"/> button to run this query. The <bpt id=\"p42\">__</bpt>Results<ept id=\"p42\">__</ept><ph id=\"ph55\"/> tab will not contain any information as no rows are returned by this query, but the status should show as <bpt id=\"p43\">__</bpt>SUCCEEDED<ept id=\"p43\">__</ept>.",
      "nodes": [
        {
          "content": "Use the <bpt id=\"p41\">__</bpt>Execute<ept id=\"p41\">__</ept><ph id=\"ph54\"/> button to run this query.",
          "pos": [
            0,
            100
          ]
        },
        {
          "content": "The <bpt id=\"p42\">__</bpt>Results<ept id=\"p42\">__</ept><ph id=\"ph55\"/> tab will not contain any information as no rows are returned by this query, but the status should show as <bpt id=\"p43\">__</bpt>SUCCEEDED<ept id=\"p43\">__</ept>.",
          "pos": [
            101,
            332
          ]
        }
      ]
    },
    {
      "pos": [
        7579,
        7592
      ],
      "content": "Hive settings"
    },
    {
      "pos": [
        7594,
        7650
      ],
      "content": "Select the <bpt id=\"p44\">__</bpt>Settings<ept id=\"p44\">__</ept><ph id=\"ph56\"/> icon to the right of the editor."
    },
    {
      "pos": [
        7652,
        7720
      ],
      "content": "<ph id=\"ph57\">![</ph>icons<ph id=\"ph58\">](./media/hdinsight-hadoop-use-hive-ambari-view/settings.png)</ph>"
    },
    {
      "pos": [
        7722,
        7860
      ],
      "content": "Settings can be used to change various Hive settings, such as changing the execution engine for Hive from Tez (the default,) to MapReduce."
    },
    {
      "pos": [
        7865,
        7879
      ],
      "content": "Visual explain"
    },
    {
      "pos": [
        7881,
        7943
      ],
      "content": "Select the <bpt id=\"p45\">__</bpt>Visual Explain<ept id=\"p45\">__</ept><ph id=\"ph59\"/> icon to the right of the editor."
    },
    {
      "pos": [
        7945,
        8022
      ],
      "content": "<ph id=\"ph60\">![</ph>icons<ph id=\"ph61\">](./media/hdinsight-hadoop-use-hive-ambari-view/visualexplainicon.png)</ph>"
    },
    {
      "pos": [
        8028,
        8244
      ],
      "content": "This is the <bpt id=\"p46\">__</bpt>Visual Explain<ept id=\"p46\">__</ept><ph id=\"ph62\"/> view of the query, which can be helpful in understanding the flow of complex queries. You can view a textual equivalent of this view by using the <bpt id=\"p47\">__</bpt>Explain<ept id=\"p47\">__</ept><ph id=\"ph63\"/> button in the Query Editor.",
      "nodes": [
        {
          "content": "This is the <bpt id=\"p46\">__</bpt>Visual Explain<ept id=\"p46\">__</ept><ph id=\"ph62\"/> view of the query, which can be helpful in understanding the flow of complex queries.",
          "pos": [
            0,
            171
          ]
        },
        {
          "content": "You can view a textual equivalent of this view by using the <bpt id=\"p47\">__</bpt>Explain<ept id=\"p47\">__</ept><ph id=\"ph63\"/> button in the Query Editor.",
          "pos": [
            172,
            326
          ]
        }
      ]
    },
    {
      "pos": [
        8246,
        8334
      ],
      "content": "<ph id=\"ph64\">![</ph>visual explain image<ph id=\"ph65\">](./media/hdinsight-hadoop-use-hive-ambari-view/visualexplain.png)</ph>"
    },
    {
      "pos": [
        8339,
        8342
      ],
      "content": "Tez"
    },
    {
      "pos": [
        8344,
        8395
      ],
      "content": "Select the <bpt id=\"p48\">__</bpt>Tez<ept id=\"p48\">__</ept><ph id=\"ph66\"/> icon to the right of the editor."
    },
    {
      "pos": [
        8397,
        8460
      ],
      "content": "<ph id=\"ph67\">![</ph>icons<ph id=\"ph68\">](./media/hdinsight-hadoop-use-hive-ambari-view/tez.png)</ph>"
    },
    {
      "pos": [
        8462,
        8655
      ],
      "content": "This will display the Directed Acyclic Graph (DAG) used by Tez for this query, if one is available. If you want to view the DAG for queries you've ran in the past, use the <bpt id=\"p49\">__</bpt>Tez View<ept id=\"p49\">__</ept><ph id=\"ph69\"/> instead.",
      "nodes": [
        {
          "content": "This will display the Directed Acyclic Graph (DAG) used by Tez for this query, if one is available.",
          "pos": [
            0,
            99
          ]
        },
        {
          "content": "If you want to view the DAG for queries you've ran in the past, use the <bpt id=\"p49\">__</bpt>Tez View<ept id=\"p49\">__</ept><ph id=\"ph69\"/> instead.",
          "pos": [
            100,
            248
          ]
        }
      ]
    },
    {
      "pos": [
        8660,
        8673
      ],
      "content": "Notifications"
    },
    {
      "pos": [
        8675,
        8736
      ],
      "content": "Select the <bpt id=\"p50\">__</bpt>Notifications<ept id=\"p50\">__</ept><ph id=\"ph70\"/> icon to the right of the editor."
    },
    {
      "pos": [
        8738,
        8811
      ],
      "content": "<ph id=\"ph71\">![</ph>icons<ph id=\"ph72\">](./media/hdinsight-hadoop-use-hive-ambari-view/notifications.png)</ph>"
    },
    {
      "pos": [
        8813,
        8977
      ],
      "content": "Notifications are messages that are generated when running queries. For example, you will receive a notification when a query is submitted, or when an error occurs.",
      "nodes": [
        {
          "content": "Notifications are messages that are generated when running queries.",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "For example, you will receive a notification when a query is submitted, or when an error occurs.",
          "pos": [
            68,
            164
          ]
        }
      ]
    },
    {
      "pos": [
        8981,
        8994
      ],
      "content": "Saved queries"
    },
    {
      "pos": [
        8999,
        9075
      ],
      "content": "From the Query Editor, create a new worksheet and enter the following query:"
    },
    {
      "pos": [
        9119,
        9193
      ],
      "content": "Execute the query to verify that it works. The results will be as follows:",
      "nodes": [
        {
          "content": "Execute the query to verify that it works.",
          "pos": [
            0,
            42
          ]
        },
        {
          "content": "The results will be as follows:",
          "pos": [
            43,
            74
          ]
        }
      ]
    },
    {
      "pos": [
        9545,
        9711
      ],
      "content": "Use the <bpt id=\"p51\">__</bpt>Save as<ept id=\"p51\">__</ept><ph id=\"ph73\"/> button at the bottom of the editor. Name this query <bpt id=\"p52\">__</bpt>Errorlogs<ept id=\"p52\">__</ept><ph id=\"ph74\"/> and select <bpt id=\"p53\">__</bpt>OK<ept id=\"p53\">__</ept>. Note that the name of the worksheet changes to <bpt id=\"p54\">__</bpt>Errorlogs<ept id=\"p54\">__</ept>.",
      "nodes": [
        {
          "content": "Use the <bpt id=\"p51\">__</bpt>Save as<ept id=\"p51\">__</ept><ph id=\"ph73\"/> button at the bottom of the editor.",
          "pos": [
            0,
            110
          ]
        },
        {
          "content": "Name this query <bpt id=\"p52\">__</bpt>Errorlogs<ept id=\"p52\">__</ept><ph id=\"ph74\"/> and select <bpt id=\"p53\">__</bpt>OK<ept id=\"p53\">__</ept>.",
          "pos": [
            111,
            254
          ]
        },
        {
          "content": "Note that the name of the worksheet changes to <bpt id=\"p54\">__</bpt>Errorlogs<ept id=\"p54\">__</ept>.",
          "pos": [
            255,
            356
          ]
        }
      ]
    },
    {
      "pos": [
        9720,
        9951
      ],
      "content": "Select the <bpt id=\"p55\">__</bpt>Saved Queries<ept id=\"p55\">__</ept><ph id=\"ph75\"/> tab at the top of the Hive View page. Note that <bpt id=\"p56\">__</bpt>Errorlogs<ept id=\"p56\">__</ept><ph id=\"ph76\"/> is now listed as a saved query. It will remain in this list until you remove it. Selecting the name will open the query in the Query Editor.",
      "nodes": [
        {
          "content": "Select the <bpt id=\"p55\">__</bpt>Saved Queries<ept id=\"p55\">__</ept><ph id=\"ph75\"/> tab at the top of the Hive View page.",
          "pos": [
            0,
            121
          ]
        },
        {
          "content": "Note that <bpt id=\"p56\">__</bpt>Errorlogs<ept id=\"p56\">__</ept><ph id=\"ph76\"/> is now listed as a saved query.",
          "pos": [
            122,
            232
          ]
        },
        {
          "content": "It will remain in this list until you remove it.",
          "pos": [
            233,
            281
          ]
        },
        {
          "content": "Selecting the name will open the query in the Query Editor.",
          "pos": [
            282,
            341
          ]
        }
      ]
    },
    {
      "pos": [
        9955,
        9968
      ],
      "content": "Query history"
    },
    {
      "pos": [
        9970,
        10197
      ],
      "content": "The <bpt id=\"p57\">__</bpt>History<ept id=\"p57\">__</ept><ph id=\"ph77\"/> button at the top of the Hive View allows you to view queries you have ran previously. Use it now and select some of the queries you have ran previously. When you select a query, it opens it in the Query Editor.",
      "nodes": [
        {
          "content": "The <bpt id=\"p57\">__</bpt>History<ept id=\"p57\">__</ept><ph id=\"ph77\"/> button at the top of the Hive View allows you to view queries you have ran previously.",
          "pos": [
            0,
            157
          ]
        },
        {
          "content": "Use it now and select some of the queries you have ran previously.",
          "pos": [
            158,
            224
          ]
        },
        {
          "content": "When you select a query, it opens it in the Query Editor.",
          "pos": [
            225,
            282
          ]
        }
      ]
    },
    {
      "pos": [
        10201,
        10229
      ],
      "content": "User Defined Functions (UDF)"
    },
    {
      "pos": [
        10231,
        10388
      ],
      "content": "Hive can also be extended through <bpt id=\"p58\">**</bpt>user-defined functions (UDF)<ept id=\"p58\">**</ept>. A UDF allows you to implement functionality or logic that isn't easily modeled in HiveQL.",
      "nodes": [
        {
          "content": "Hive can also be extended through <bpt id=\"p58\">**</bpt>user-defined functions (UDF)<ept id=\"p58\">**</ept>.",
          "pos": [
            0,
            107
          ]
        },
        {
          "content": "A UDF allows you to implement functionality or logic that isn't easily modeled in HiveQL.",
          "pos": [
            108,
            197
          ]
        }
      ]
    },
    {
      "pos": [
        10391,
        10591
      ],
      "content": "While you can add a UDF as part of the HiveQL statements in your query, the UDF tab at the top of the Hive View allows you to declare and save a set of UDFs that can be used with the <bpt id=\"p59\">__</bpt>Query Editor<ept id=\"p59\">__</ept>."
    },
    {
      "pos": [
        10593,
        10872
      ],
      "content": "Once you have added a UDF to the Hive View, an <bpt id=\"p60\">__</bpt>Insert udfs<ept id=\"p60\">__</ept><ph id=\"ph78\"/> button will appear at the bottom of the <bpt id=\"p61\">__</bpt>Query Editor<ept id=\"p61\">__</ept>. Selecting this will display a drop-down list of the UDFs defined in the Hive View. Selecting a UDF will add HiveQL statements to your query to enable the UDF.",
      "nodes": [
        {
          "content": "Once you have added a UDF to the Hive View, an <bpt id=\"p60\">__</bpt>Insert udfs<ept id=\"p60\">__</ept><ph id=\"ph78\"/> button will appear at the bottom of the <bpt id=\"p61\">__</bpt>Query Editor<ept id=\"p61\">__</ept>.",
          "pos": [
            0,
            215
          ]
        },
        {
          "content": "Selecting this will display a drop-down list of the UDFs defined in the Hive View.",
          "pos": [
            216,
            298
          ]
        },
        {
          "content": "Selecting a UDF will add HiveQL statements to your query to enable the UDF.",
          "pos": [
            299,
            374
          ]
        }
      ]
    },
    {
      "pos": [
        10874,
        10943
      ],
      "content": "For example, if you have defined a UDF with the following properties:"
    },
    {
      "pos": [
        10947,
        10968
      ],
      "content": "Resource name: myudfs"
    },
    {
      "pos": [
        10971,
        11004
      ],
      "content": "Resource path: wasb:///myudfs.jar"
    },
    {
      "pos": [
        11007,
        11029
      ],
      "content": "UDF name: myawesomeudf"
    },
    {
      "pos": [
        11032,
        11066
      ],
      "content": "UDF class name: com.myudfs.Awesome"
    },
    {
      "pos": [
        11072,
        11314
      ],
      "content": "Using the <bpt id=\"p62\">__</bpt>Insert udfs<ept id=\"p62\">__</ept><ph id=\"ph79\"/> button will display an entry named <bpt id=\"p63\">__</bpt>myudfs<ept id=\"p63\">__</ept>, with another drop-down for each UDF defined for that resource. In this case, <bpt id=\"p64\">__</bpt>myawesomeudf<ept id=\"p64\">__</ept>. Selecting this entry will add the following to the beginning of the query:",
      "nodes": [
        {
          "content": "Using the <bpt id=\"p62\">__</bpt>Insert udfs<ept id=\"p62\">__</ept><ph id=\"ph79\"/> button will display an entry named <bpt id=\"p63\">__</bpt>myudfs<ept id=\"p63\">__</ept>, with another drop-down for each UDF defined for that resource.",
          "pos": [
            0,
            230
          ]
        },
        {
          "content": "In this case, <bpt id=\"p64\">__</bpt>myawesomeudf<ept id=\"p64\">__</ept>.",
          "pos": [
            231,
            302
          ]
        },
        {
          "content": "Selecting this entry will add the following to the beginning of the query:",
          "pos": [
            303,
            377
          ]
        }
      ]
    },
    {
      "pos": [
        11418,
        11512
      ],
      "content": "You can then use the UDF in your query. For example, <ph id=\"ph80\">`SELECT myawesomeudf(name) FROM people;`</ph>.",
      "nodes": [
        {
          "content": "You can then use the UDF in your query.",
          "pos": [
            0,
            39
          ]
        },
        {
          "content": "For example, <ph id=\"ph80\">`SELECT myawesomeudf(name) FROM people;`</ph>.",
          "pos": [
            40,
            113
          ]
        }
      ]
    },
    {
      "pos": [
        11514,
        11591
      ],
      "content": "For more information on using UDFs with Hive on HDInsight, see the following:"
    },
    {
      "pos": [
        11595,
        11661
      ],
      "content": "<bpt id=\"p65\">[</bpt>Using Python with Hive and Pig in HDInsight<ept id=\"p65\">](hdinsight-python.md)</ept>"
    },
    {
      "pos": [
        11665,
        11813
      ],
      "content": "<bpt id=\"p66\">[</bpt>How to add a custom Hive UDF to HDInsight<ept id=\"p66\">](http://blogs.msdn.com/b/bigdatasupport/archive/2014/01/14/how-to-add-custom-hive-udfs-to-hdinsight.aspx)</ept>"
    },
    {
      "pos": [
        11815,
        11817
      ],
      "content": "##"
    },
    {
      "pos": [
        11839,
        11849
      ],
      "content": "Next steps"
    },
    {
      "pos": [
        11851,
        11896
      ],
      "content": "For general information on Hive in HDInsight:"
    },
    {
      "pos": [
        11900,
        11958
      ],
      "content": "<bpt id=\"p67\">[</bpt>Use Hive with Hadoop on HDInsight<ept id=\"p67\">](hdinsight-use-hive.md)</ept>"
    },
    {
      "pos": [
        11960,
        12028
      ],
      "content": "For information on other ways you can work with Hadoop on HDInsight:"
    },
    {
      "pos": [
        12032,
        12088
      ],
      "content": "<bpt id=\"p68\">[</bpt>Use Pig with Hadoop on HDInsight<ept id=\"p68\">](hdinsight-use-pig.md)</ept>"
    },
    {
      "pos": [
        12092,
        12160
      ],
      "content": "<bpt id=\"p69\">[</bpt>Use MapReduce with Hadoop on HDInsight<ept id=\"p69\">](hdinsight-use-mapreduce.md)</ept>"
    }
  ],
  "content": "<properties\n   pageTitle=\"Use Ambari Views to work with Hive on HDInsight (Hadoop) | Microsoft Azure\"\n   description=\"Learn how to use the Hive View from your web browser to submit Hive queries. The Hive View is part of the Ambari Web UI provided with your Linux-based HDInsight cluster.\"\n   services=\"hdinsight\"\n   documentationCenter=\"\"\n   authors=\"Blackmist\"\n   manager=\"paulettm\"\n   editor=\"cgronlun\"\n    tags=\"azure-portal\"/>\n\n<tags\n   ms.service=\"hdinsight\"\n   ms.devlang=\"na\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"na\"\n   ms.workload=\"big-data\"\n   ms.date=\"01/04/2016\"\n   ms.author=\"larryfr\"/>\n\n#Use the Hive View with Hadoop in HDInsight\n\n[AZURE.INCLUDE [hive-selector](../../includes/hdinsight-selector-use-hive.md)]\n\nAmbari is a management and monitoring utility provided with Linux-based HDInsight clusters. One of the features provided through Ambari is a Web UI that can be used to run Hive queries. This is the __Hive View__, part of the Ambari Views provided with your HDInsight cluster.\n\n> [AZURE.NOTE] Ambari has a lot of capabilities that won't be discussed in this document. For more information, see [Manage HDInsight clusters by using the Ambari Web UI](hdinsight-hadoop-manage-ambari.md).\n\n##Prerequisites\n\n- A Linux-based HDInsight cluster. For information on creating a new cluster, see [Get started with Linux-based HDInsight](hdinsight-hadoop-linux-tutorial-get-started.md).\n\n##Open the Hive view\n\nYou can Ambari Views from the Azure Portal; select your HDInsight cluster and then select __Ambari Views__ from the __Quick Links__ section.\n\n![quick links section](./media/hdinsight-hadoop-use-hive-ambari-view/quicklinks.png)\n\nYou can also navigate directly to Ambari by going to https://CLUSTERNAME.azurehdinsight.net in a web browser (where __CLUSTERNAME__ is the name of your HDInsight cluster,) and then select the set of squares from the page menu (next to the __Admin__ link and button on the left of the page,) to list available views. Select the __Hive view__.\n\n![Selecting ambari views](./media/hdinsight-hadoop-use-hive-ambari-view/selecthiveview.png).\n\n> [AZURE.NOTE] When accessing Ambari, you will be prompted to authenticate to the site. Enter the admin (default `admin`,) account name and password you used when creating the cluster.\n\nYou should see a page similar to the following:\n\n![Image of the hive view page, containing a query editor section](./media/hdinsight-hadoop-use-hive-ambari-view/hiveview.png)\n\n##View tables\n\nIn the __Database Explorer__ section of the page, select the __default__ entry on the __Databases__ tab. This will display a list of tables in the default database. For a new HDInsight cluster, only one table should exist; __hivesampletable__.\n\n![database explorer with the default database expanded](./media/hdinsight-hadoop-use-hive-ambari-view/databaseexplorer.png)\n\nAs new tables are added through the steps in this document, you can use the refresh icon in the upper right corner of the Database Explorer to refresh the list of available tables.\n\n##<a name=\"hivequery\"></a>Query editor\n\nUse the following steps from the Hive view to run a Hive query against data included with the cluster.\n\n1. In the __Query Editor__ section of the page, paste the following HiveQL statements into the worksheet:\n\n        DROP TABLE log4jLogs;\n        CREATE EXTERNAL TABLE log4jLogs(t1 string, t2 string, t3 string, t4 string, t5 string, t6 string, t7 string)\n        ROW FORMAT DELIMITED FIELDS TERMINATED BY ' '\n        STORED AS TEXTFILE LOCATION 'wasb:///example/data/';\n        SELECT t4 AS sev, COUNT(*) AS cnt FROM log4jLogs WHERE t4 = '[ERROR]' GROUP BY t4;\n\n    These statements perform the following actions:\n\n    - **DROP TABLE** - Deletes the table and the data file, in case the table already exists.\n    - **CREATE EXTERNAL TABLE** - Creates a new \"external\" table in Hive. External tables store only the table definition in Hive; the data is left in the original location.\n    - **ROW FORMAT** - Tells Hive how the data is formatted. In this case, the fields in each log are separated by a space.\n    - **STORED AS TEXTFILE LOCATION** - Tells Hive where the data is stored (the example/data directory), and that it is stored as text.\n    - **SELECT** - Selects a count of all rows where column t4 contains the value [ERROR].\n\n    >[AZURE.NOTE] External tables should be used when you expect the underlying data to be updated by an external source, such as an automated data upload process, or by another MapReduce operation, but you always want Hive queries to use the latest data. Dropping an external table does *not* delete the data, only the table definition.\n\n2. Use the __Execute__ button at the bottom of the Query Editor to start the query. It should turn orange and the text will change to __Stop execution__. A __Query Process Results__ section should appear beneath the Query Editor and display information about the job.\n\n    > [AZURE.IMPORTANT] Some browsers may not correctly refresh the log or results information. If you run a job and it appears to run forever without updating the log or returning results, try using Mozilla FireFox or Google Chrome instead.\n    \n3. Once the query has finished, The __Query Process Results__ section will display the results of the operation. The __Stop execution__ button will also change back to a green __Execute__ button. The __Results__ tab should contain the following information:\n\n        sev       cnt\n        [ERROR]   3\n\n    The __Logs__ tab can be used to view the logging information created by the job. You can use this for troubleshooting if there are problems with a query.\n    \n    > [AZURE.TIP] Note the __Save results__ drop-down dialog in the upper left of the __Query Process Results__ section; you can use this to either download the results, or save them to HDInsight storage as a CSV file.\n    \n3. Select the first four lines of this query, then select __Execute__. Notice that there are no results when the job completes. This is because using the __Execute__ button when part of the query is selected will only run the selected statements. In this case, the selection didn't include the final statement that retrieves rows from the table. If you select just that line and use __Execute__, you should see the expected results.\n\n3. Use the __New Worksheet__ button at the bottom of the __Query Editor__ to create a new worksheet. In the new worksheet, enter the following HiveQL statements:\n\n        CREATE TABLE IF NOT EXISTS errorLogs (t1 string, t2 string, t3 string, t4 string, t5 string, t6 string, t7 string) STORED AS ORC;\n        INSERT OVERWRITE TABLE errorLogs SELECT t1, t2, t3, t4, t5, t6, t7 FROM log4jLogs WHERE t4 = '[ERROR]';\n\n    These statements perform the following actions:\n\n    - **CREATE TABLE IF NOT EXISTS** - Creates a table, if it does not already exist. Since the **EXTERNAL** keyword is not used, this is an internal table, which is stored in the Hive data warehouse and is managed completely by Hive. Unlike external tables, dropping an internal table will delete the underlying data as well.\n    - **STORED AS ORC** - Stores the data in Optimized Row Columnar (ORC) format. This is a highly optimized and efficient format for storing Hive data.\n    - **INSERT OVERWRITE ... SELECT** - Selects rows from the **log4jLogs** table that contain [ERROR], and then inserts the data into the **errorLogs** table.\n    \n    Use the __Execute__ button to run this query. The __Results__ tab will not contain any information as no rows are returned by this query, but the status should show as __SUCCEEDED__.\n\n###Hive settings\n\nSelect the __Settings__ icon to the right of the editor.\n\n![icons](./media/hdinsight-hadoop-use-hive-ambari-view/settings.png)\n\nSettings can be used to change various Hive settings, such as changing the execution engine for Hive from Tez (the default,) to MapReduce.\n\n###Visual explain\n\nSelect the __Visual Explain__ icon to the right of the editor.\n\n![icons](./media/hdinsight-hadoop-use-hive-ambari-view/visualexplainicon.png)\n    \nThis is the __Visual Explain__ view of the query, which can be helpful in understanding the flow of complex queries. You can view a textual equivalent of this view by using the __Explain__ button in the Query Editor.\n\n![visual explain image](./media/hdinsight-hadoop-use-hive-ambari-view/visualexplain.png)\n\n###Tez\n\nSelect the __Tez__ icon to the right of the editor.\n\n![icons](./media/hdinsight-hadoop-use-hive-ambari-view/tez.png)\n\nThis will display the Directed Acyclic Graph (DAG) used by Tez for this query, if one is available. If you want to view the DAG for queries you've ran in the past, use the __Tez View__ instead.\n\n###Notifications\n\nSelect the __Notifications__ icon to the right of the editor.\n\n![icons](./media/hdinsight-hadoop-use-hive-ambari-view/notifications.png)\n\nNotifications are messages that are generated when running queries. For example, you will receive a notification when a query is submitted, or when an error occurs.\n\n##Saved queries\n\n1. From the Query Editor, create a new worksheet and enter the following query:\n\n        SELECT * from errorLogs;\n    \n    Execute the query to verify that it works. The results will be as follows:\n\n        errorlogs.t1    errorlogs.t2    errorlogs.t3    errorlogs.t4    errorlogs.t5    errorlogs.t6    errorlogs.t7\n        2012-02-03  18:35:34    SampleClass0    [ERROR]     incorrect   id  \n        2012-02-03  18:55:54    SampleClass1    [ERROR]     incorrect   id  \n        2012-02-03  19:25:27    SampleClass4    [ERROR]     incorrect   id\n\n2. Use the __Save as__ button at the bottom of the editor. Name this query __Errorlogs__ and select __OK__. Note that the name of the worksheet changes to __Errorlogs__.\n    \n3. Select the __Saved Queries__ tab at the top of the Hive View page. Note that __Errorlogs__ is now listed as a saved query. It will remain in this list until you remove it. Selecting the name will open the query in the Query Editor.\n\n##Query history\n\nThe __History__ button at the top of the Hive View allows you to view queries you have ran previously. Use it now and select some of the queries you have ran previously. When you select a query, it opens it in the Query Editor.\n\n##User Defined Functions (UDF)\n\nHive can also be extended through **user-defined functions (UDF)**. A UDF allows you to implement functionality or logic that isn't easily modeled in HiveQL. \n\nWhile you can add a UDF as part of the HiveQL statements in your query, the UDF tab at the top of the Hive View allows you to declare and save a set of UDFs that can be used with the __Query Editor__.\n\nOnce you have added a UDF to the Hive View, an __Insert udfs__ button will appear at the bottom of the __Query Editor__. Selecting this will display a drop-down list of the UDFs defined in the Hive View. Selecting a UDF will add HiveQL statements to your query to enable the UDF.\n\nFor example, if you have defined a UDF with the following properties:\n\n* Resource name: myudfs\n* Resource path: wasb:///myudfs.jar\n* UDF name: myawesomeudf\n* UDF class name: com.myudfs.Awesome\n    \nUsing the __Insert udfs__ button will display an entry named __myudfs__, with another drop-down for each UDF defined for that resource. In this case, __myawesomeudf__. Selecting this entry will add the following to the beginning of the query:\n\n    add jar wasb:///myudfs.jar;\n\n    create temporary function myawesomeudf as 'com.myudfs.Awesome';\n\nYou can then use the UDF in your query. For example, `SELECT myawesomeudf(name) FROM people;`.\n\nFor more information on using UDFs with Hive on HDInsight, see the following:\n\n* [Using Python with Hive and Pig in HDInsight](hdinsight-python.md)\n\n* [How to add a custom Hive UDF to HDInsight](http://blogs.msdn.com/b/bigdatasupport/archive/2014/01/14/how-to-add-custom-hive-udfs-to-hdinsight.aspx)\n\n##<a id=\"nextsteps\"></a>Next steps\n\nFor general information on Hive in HDInsight:\n\n* [Use Hive with Hadoop on HDInsight](hdinsight-use-hive.md)\n\nFor information on other ways you can work with Hadoop on HDInsight:\n\n* [Use Pig with Hadoop on HDInsight](hdinsight-use-pig.md)\n\n* [Use MapReduce with Hadoop on HDInsight](hdinsight-use-mapreduce.md)"
}