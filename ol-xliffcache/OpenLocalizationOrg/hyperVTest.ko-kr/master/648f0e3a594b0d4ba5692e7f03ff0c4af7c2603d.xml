{
  "nodes": [
    {
      "pos": [
        27,
        94
      ],
      "content": "Customize HDInsight Clusters using script actions | Microsoft Azure"
    },
    {
      "pos": [
        113,
        175
      ],
      "content": "Learn how to customize HDInsight clusters using Script Action."
    },
    {
      "pos": [
        503,
        565
      ],
      "content": "Customize Windows-based HDInsight clusters using Script Action"
    },
    {
      "pos": [
        656,
        834
      ],
      "content": "<bpt id=\"p1\">**</bpt>Script Action<ept id=\"p1\">**</ept><ph id=\"ph3\"/> can be used to invoke <bpt id=\"p2\">[</bpt>custom scripts<ept id=\"p2\">](hdinsight-hadoop-script-actions.md)</ept><ph id=\"ph4\"/> \nduring the cluster creation process for installing additional software on a cluster."
    },
    {
      "pos": [
        836,
        929
      ],
      "content": "The information in this article is specific to Windows-based HDInsight clusters. Use the tab ",
      "nodes": [
        {
          "content": "The information in this article is specific to Windows-based HDInsight clusters.",
          "pos": [
            0,
            80
          ]
        },
        {
          "content": "Use the tab",
          "pos": [
            81,
            92
          ]
        }
      ]
    },
    {
      "pos": [
        930,
        1023
      ],
      "content": "select above to switch to a version of this article that is specific to Linux-based clusters."
    },
    {
      "pos": [
        1025,
        1522
      ],
      "content": "HDInsight clusters can be customized in a variety of other ways as well, such as including \n<ph id=\"ph5\"/>additional Azure Storage accounts, changing the Hadoop configuration files (core-site.xml, \n<ph id=\"ph6\"/>hive-site.xml, etc.), or adding shared libraries (e.g., Hive, Oozie) into common locations \n<ph id=\"ph7\"/>in the cluster. These customizations can be done through Azure PowerShell, the Azure \n<ph id=\"ph8\"/>HDInsight .NET SDK, or the Azure Portal. For more information, see \n<bpt id=\"p3\">[</bpt>Create Hadoop clusters in HDInsight<ept id=\"p3\">][hdinsight-provision-cluster]</ept>.",
      "nodes": [
        {
          "content": "HDInsight clusters can be customized in a variety of other ways as well, such as including \n<ph id=\"ph5\"/>additional Azure Storage accounts, changing the Hadoop configuration files (core-site.xml, \n<ph id=\"ph6\"/>hive-site.xml, etc.), or adding shared libraries (e.g., Hive, Oozie) into common locations \n<ph id=\"ph7\"/>in the cluster.",
          "pos": [
            0,
            333
          ]
        },
        {
          "content": "These customizations can be done through Azure PowerShell, the Azure \n<ph id=\"ph8\"/>HDInsight .NET SDK, or the Azure Portal.",
          "pos": [
            334,
            458
          ]
        },
        {
          "content": "For more information, see \n<bpt id=\"p3\">[</bpt>Create Hadoop clusters in HDInsight<ept id=\"p3\">][hdinsight-provision-cluster]</ept>.",
          "pos": [
            459,
            591
          ]
        }
      ]
    },
    {
      "pos": [
        1527,
        1572
      ],
      "content": "Script Action in the cluster creation process"
    },
    {
      "pos": [
        1574,
        1668
      ],
      "content": "Script Action is only used while a clusters is in the process of being created. The following ",
      "nodes": [
        {
          "content": "Script Action is only used while a clusters is in the process of being created.",
          "pos": [
            0,
            79
          ]
        },
        {
          "content": "The following",
          "pos": [
            80,
            93
          ]
        }
      ]
    },
    {
      "pos": [
        1669,
        1748
      ],
      "content": "diagram illustrates when Script Action is executed during the creation process:"
    },
    {
      "pos": [
        1750,
        1843
      ],
      "content": "<ph id=\"ph9\">![</ph>HDInsight cluster customization and stages during cluster creation<ph id=\"ph10\">][img-hdi-cluster-states]</ph>"
    },
    {
      "pos": [
        1845,
        2098
      ],
      "content": "When the script is running, the cluster enters the <bpt id=\"p4\">**</bpt>ClusterCustomization<ept id=\"p4\">**</ept><ph id=\"ph11\"/> stage. At this \n<ph id=\"ph12\"/>stage, the script is run under the system admin account, in parallel on all the specified \n<ph id=\"ph13\"/>nodes in the cluster, and provides full admin privileges on the nodes.",
      "nodes": [
        {
          "content": "When the script is running, the cluster enters the <bpt id=\"p4\">**</bpt>ClusterCustomization<ept id=\"p4\">**</ept><ph id=\"ph11\"/> stage.",
          "pos": [
            0,
            135
          ]
        },
        {
          "content": "At this \n<ph id=\"ph12\"/>stage, the script is run under the system admin account, in parallel on all the specified \n<ph id=\"ph13\"/>nodes in the cluster, and provides full admin privileges on the nodes.",
          "pos": [
            136,
            336
          ]
        }
      ]
    },
    {
      "pos": [
        2102,
        2859
      ],
      "content": "<ph id=\"ph14\">[AZURE.NOTE]</ph><ph id=\"ph15\"/> Because you have admin privileges on the cluster nodes during the \n<bpt id=\"p5\">**</bpt>ClusterCustomization<ept id=\"p5\">**</ept><ph id=\"ph16\"/> stage, you can use the script to perform operations like stopping \n<ph id=\"ph17\"/>and starting services, including Hadoop-related services. So, as part of the script, you must \n<ph id=\"ph18\"/>ensure that the Ambari services and other Hadoop-related services are up and running before \n<ph id=\"ph19\"/>the script finishes running. These services are required to successfully ascertain the health \n<ph id=\"ph20\"/>and state of the cluster while it is being created. If you change any configuration on the \n<ph id=\"ph21\"/>cluster that affects these services, you must use the helper functions that are provided. For \n<ph id=\"ph22\"/>more information about helper functions, see <bpt id=\"p6\">[</bpt>Develop Script Action scripts for HDInsight<ept id=\"p6\">][hdinsight-write-script]</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph14\">[AZURE.NOTE]</ph><ph id=\"ph15\"/> Because you have admin privileges on the cluster nodes during the \n<bpt id=\"p5\">**</bpt>ClusterCustomization<ept id=\"p5\">**</ept><ph id=\"ph16\"/> stage, you can use the script to perform operations like stopping \n<ph id=\"ph17\"/>and starting services, including Hadoop-related services.",
          "pos": [
            0,
            331
          ]
        },
        {
          "content": "So, as part of the script, you must \n<ph id=\"ph18\"/>ensure that the Ambari services and other Hadoop-related services are up and running before \n<ph id=\"ph19\"/>the script finishes running.",
          "pos": [
            332,
            520
          ]
        },
        {
          "content": "These services are required to successfully ascertain the health \n<ph id=\"ph20\"/>and state of the cluster while it is being created.",
          "pos": [
            521,
            653
          ]
        },
        {
          "content": "If you change any configuration on the \n<ph id=\"ph21\"/>cluster that affects these services, you must use the helper functions that are provided.",
          "pos": [
            654,
            798
          ]
        },
        {
          "content": "For \n<ph id=\"ph22\"/>more information about helper functions, see <bpt id=\"p6\">[</bpt>Develop Script Action scripts for HDInsight<ept id=\"p6\">][hdinsight-write-script]</ept>.",
          "pos": [
            799,
            972
          ]
        }
      ]
    },
    {
      "pos": [
        2861,
        3185
      ],
      "content": "The output and the error logs for the script are stored in the default Storage account you \n<ph id=\"ph23\"/>specified for the cluster. The logs are stored in a table with the name \n<bpt id=\"p7\">**</bpt>u&lt;\\cluster-name-fragment&gt;&lt;\\time-stamp&gt;setuplog<ept id=\"p7\">**</ept>. These are aggregate logs from the script \n<ph id=\"ph24\"/>run on all the nodes (head node and worker nodes) in the cluster.",
      "nodes": [
        {
          "content": "The output and the error logs for the script are stored in the default Storage account you \n<ph id=\"ph23\"/>specified for the cluster.",
          "pos": [
            0,
            133
          ]
        },
        {
          "content": "The logs are stored in a table with the name \n<bpt id=\"p7\">**</bpt>u&lt;\\cluster-name-fragment&gt;&lt;\\time-stamp&gt;setuplog<ept id=\"p7\">**</ept>.",
          "pos": [
            134,
            281
          ]
        },
        {
          "content": "These are aggregate logs from the script \n<ph id=\"ph24\"/>run on all the nodes (head node and worker nodes) in the cluster.",
          "pos": [
            282,
            404
          ]
        }
      ]
    },
    {
      "pos": [
        3187,
        3278
      ],
      "content": "Each cluster can accept multiple script actions that are invoked in the order in which they"
    },
    {
      "pos": [
        3280,
        3359
      ],
      "content": "are specified. A script can be ran on the head node, the worker nodes, or both.",
      "nodes": [
        {
          "content": "are specified.",
          "pos": [
            0,
            14
          ]
        },
        {
          "content": "A script can be ran on the head node, the worker nodes, or both.",
          "pos": [
            15,
            79
          ]
        }
      ]
    },
    {
      "pos": [
        3361,
        3454
      ],
      "content": "HDInsight provides several scripts to install the following components on HDInsight clusters:"
    },
    {
      "pos": [
        3456,
        3460
      ],
      "content": "Name"
    },
    {
      "pos": [
        3463,
        3469
      ],
      "content": "Script"
    },
    {
      "pos": [
        3484,
        3501
      ],
      "content": "<bpt id=\"p8\">**</bpt>Install Spark<ept id=\"p8\">**</ept>"
    },
    {
      "pos": [
        3504,
        3672
      ],
      "content": "https://hdiconfigactions.blob.core.windows.net/sparkconfigactionv03/spark-installer-v03.ps1. See <bpt id=\"p9\">[</bpt>Install and use Spark on HDInsight clusters<ept id=\"p9\">][hdinsight-install-spark]</ept>.",
      "nodes": [
        {
          "content": "https://hdiconfigactions.blob.core.windows.net/sparkconfigactionv03/spark-installer-v03.ps1.",
          "pos": [
            0,
            92
          ]
        },
        {
          "content": "See <bpt id=\"p9\">[</bpt>Install and use Spark on HDInsight clusters<ept id=\"p9\">][hdinsight-install-spark]</ept>.",
          "pos": [
            93,
            206
          ]
        }
      ]
    },
    {
      "pos": [
        3673,
        3686
      ],
      "content": "<bpt id=\"p10\">**</bpt>Install R<ept id=\"p10\">**</ept>"
    },
    {
      "pos": [
        3689,
        3841
      ],
      "content": "https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1. See <bpt id=\"p11\">[</bpt>Install and use R on HDInsight clusters<ept id=\"p11\">][hdinsight-install-r]</ept>.",
      "nodes": [
        {
          "content": "https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1.",
          "pos": [
            0,
            84
          ]
        },
        {
          "content": "See <bpt id=\"p11\">[</bpt>Install and use R on HDInsight clusters<ept id=\"p11\">][hdinsight-install-r]</ept>.",
          "pos": [
            85,
            192
          ]
        }
      ]
    },
    {
      "pos": [
        3842,
        3858
      ],
      "content": "<bpt id=\"p12\">**</bpt>Install Solr<ept id=\"p12\">**</ept>"
    },
    {
      "pos": [
        3861,
        4035
      ],
      "content": "https://hdiconfigactions.blob.core.windows.net/solrconfigactionv01/solr-installer-v01.ps1. See <bpt id=\"p13\">[</bpt>Install and use Solr on HDInsight clusters<ept id=\"p13\">](hdinsight-hadoop-solr-install.md)</ept>.",
      "nodes": [
        {
          "content": "https://hdiconfigactions.blob.core.windows.net/solrconfigactionv01/solr-installer-v01.ps1.",
          "pos": [
            0,
            90
          ]
        },
        {
          "content": "See <bpt id=\"p13\">[</bpt>Install and use Solr on HDInsight clusters<ept id=\"p13\">](hdinsight-hadoop-solr-install.md)</ept>.",
          "pos": [
            91,
            214
          ]
        }
      ]
    },
    {
      "pos": [
        4036,
        4056
      ],
      "content": "- <bpt id=\"p14\">**</bpt>Install Giraph<ept id=\"p14\">**</ept>"
    },
    {
      "pos": [
        4059,
        4241
      ],
      "content": "https://hdiconfigactions.blob.core.windows.net/giraphconfigactionv01/giraph-installer-v01.ps1. See <bpt id=\"p15\">[</bpt>Install and use Giraph on HDInsight clusters<ept id=\"p15\">](hdinsight-hadoop-giraph-install.md)</ept>.",
      "nodes": [
        {
          "content": "https://hdiconfigactions.blob.core.windows.net/giraphconfigactionv01/giraph-installer-v01.ps1.",
          "pos": [
            0,
            94
          ]
        },
        {
          "content": "See <bpt id=\"p15\">[</bpt>Install and use Giraph on HDInsight clusters<ept id=\"p15\">](hdinsight-hadoop-giraph-install.md)</ept>.",
          "pos": [
            95,
            222
          ]
        }
      ]
    },
    {
      "pos": [
        4244,
        4271
      ],
      "content": "<bpt id=\"p16\">**</bpt>Pre-load Hive libraries<ept id=\"p16\">**</ept>"
    },
    {
      "pos": [
        4274,
        4460
      ],
      "content": "https://hdiconfigactions.blob.core.windows.net/setupcustomhivelibsv01/setup-customhivelibs-v01.ps1. See <bpt id=\"p17\">[</bpt>Add Hive libraries on HDInsight clusters<ept id=\"p17\">](hdinsight-hadoop-add-hive-libraries.md)</ept>",
      "nodes": [
        {
          "content": "https://hdiconfigactions.blob.core.windows.net/setupcustomhivelibsv01/setup-customhivelibs-v01.ps1.",
          "pos": [
            0,
            99
          ]
        },
        {
          "content": "See <bpt id=\"p17\">[</bpt>Add Hive libraries on HDInsight clusters<ept id=\"p17\">](hdinsight-hadoop-add-hive-libraries.md)</ept>",
          "pos": [
            100,
            226
          ]
        }
      ]
    },
    {
      "pos": [
        4468,
        4503
      ],
      "content": "Call scripts using the Azure Portal"
    },
    {
      "pos": [
        4505,
        4530
      ],
      "content": "<bpt id=\"p18\">**</bpt>From the Azure Portal<ept id=\"p18\">**</ept>"
    },
    {
      "pos": [
        4535,
        4654
      ],
      "content": "Start creating a cluster as described at <bpt id=\"p19\">[</bpt>Create Hadoop clusters in HDInsight<ept id=\"p19\">](hdinsight-provision-clusters.md#portal)</ept>."
    },
    {
      "pos": [
        4658,
        4809
      ],
      "content": "Under Optional Configuration, for the <bpt id=\"p20\">**</bpt>Script Actions<ept id=\"p20\">**</ept><ph id=\"ph25\"/> blade, click <bpt id=\"p21\">**</bpt>add script action<ept id=\"p21\">**</ept><ph id=\"ph26\"/> to provide details about the script action, as shown below:"
    },
    {
      "pos": [
        4815,
        4969
      ],
      "content": "<ph id=\"ph27\">![</ph>Use Script Action to customize a cluster<ph id=\"ph28\">](./media/hdinsight-hadoop-customize-cluster/HDI.CreateCluster.8.png \"Use Script Action to customize a cluster\")</ph>"
    },
    {
      "pos": [
        4975,
        5525
      ],
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "content": "<ph id=\"ph29\">&lt;table border='1'&gt;</ph><ph id=\"ph30\">\n     &lt;tr&gt;</ph><ph id=\"ph31\">&lt;th&gt;</ph>Property<ph id=\"ph32\">&lt;/th&gt;</ph><ph id=\"ph33\">&lt;th&gt;</ph>Value<ph id=\"ph34\">&lt;/th&gt;</ph><ph id=\"ph35\">&lt;/tr&gt;</ph><ph id=\"ph36\">\n     &lt;tr&gt;</ph><ph id=\"ph37\">&lt;td&gt;</ph>Name<ph id=\"ph38\">&lt;/td&gt;</ph><ph id=\"ph39\">\n         &lt;td&gt;</ph>Specify a name for the script action.<ph id=\"ph40\">&lt;/td&gt;</ph><ph id=\"ph41\">&lt;/tr&gt;</ph><ph id=\"ph42\">\n     &lt;tr&gt;</ph><ph id=\"ph43\">&lt;td&gt;</ph>Script URI<ph id=\"ph44\">&lt;/td&gt;</ph><ph id=\"ph45\">\n         &lt;td&gt;</ph>Specify the URI to the script that is invoked to customize the cluster. s<ph id=\"ph46\">&lt;/td&gt;</ph><ph id=\"ph47\">&lt;/tr&gt;</ph><ph id=\"ph48\">\n     &lt;tr&gt;</ph><ph id=\"ph49\">&lt;td&gt;</ph>Head/Worker<ph id=\"ph50\">&lt;/td&gt;</ph><ph id=\"ph51\">\n         &lt;td&gt;</ph>Specify the nodes (<bpt id=\"p22\">**</bpt>Head<ept id=\"p22\">**</ept><ph id=\"ph52\"/> or <bpt id=\"p23\">**</bpt>Worker<ept id=\"p23\">**</ept>) on which the customization script is run.<ph id=\"ph53\">&lt;/b&gt;</ph>.\n     <ph id=\"ph54\">&lt;tr&gt;</ph><ph id=\"ph55\">&lt;td&gt;</ph>Parameters<ph id=\"ph56\">&lt;/td&gt;</ph><ph id=\"ph57\">\n         &lt;td&gt;</ph>Specify the parameters, if required by the script.<ph id=\"ph58\">&lt;/td&gt;</ph><ph id=\"ph59\">&lt;/tr&gt;</ph><ph id=\"ph60\">\n &lt;/table&gt;</ph>",
      "nodes": [
        {
          "content": "<ph id=\"ph29\">&lt;table border='1'&gt;</ph><ph id=\"ph30\">\n     &lt;tr&gt;</ph><ph id=\"ph31\">&lt;th&gt;</ph>Property<ph id=\"ph32\">&lt;/th&gt;</ph><ph id=\"ph33\">&lt;th&gt;</ph>Value<ph id=\"ph34\">&lt;/th&gt;</ph><ph id=\"ph35\">&lt;/tr&gt;</ph><ph id=\"ph36\">\n     &lt;tr&gt;</ph><ph id=\"ph37\">&lt;td&gt;</ph>Name<ph id=\"ph38\">&lt;/td&gt;</ph><ph id=\"ph39\">\n         &lt;td&gt;</ph>Specify a name for the script action.<ph id=\"ph40\">&lt;/td&gt;</ph><ph id=\"ph41\">&lt;/tr&gt;</ph><ph id=\"ph42\">\n     &lt;tr&gt;</ph><ph id=\"ph43\">&lt;td&gt;</ph>Script URI<ph id=\"ph44\">&lt;/td&gt;</ph><ph id=\"ph45\">\n         &lt;td&gt;</ph>Specify the URI to the script that is invoked to customize the cluster.",
          "pos": [
            0,
            687
          ]
        },
        {
          "content": "s<ph id=\"ph46\">&lt;/td&gt;</ph><ph id=\"ph47\">&lt;/tr&gt;</ph><ph id=\"ph48\">\n     &lt;tr&gt;</ph><ph id=\"ph49\">&lt;td&gt;</ph>Head/Worker<ph id=\"ph50\">&lt;/td&gt;</ph><ph id=\"ph51\">\n         &lt;td&gt;</ph>Specify the nodes (<bpt id=\"p22\">**</bpt>Head<ept id=\"p22\">**</ept><ph id=\"ph52\"/> or <bpt id=\"p23\">**</bpt>Worker<ept id=\"p23\">**</ept>) on which the customization script is run.<ph id=\"ph53\">&lt;/b&gt;</ph>.",
          "pos": [
            688,
            1102
          ]
        },
        {
          "content": "<ph id=\"ph54\">&lt;tr&gt;</ph><ph id=\"ph55\">&lt;td&gt;</ph>Parameters<ph id=\"ph56\">&lt;/td&gt;</ph><ph id=\"ph57\">\n         &lt;td&gt;</ph>Specify the parameters, if required by the script.<ph id=\"ph58\">&lt;/td&gt;</ph><ph id=\"ph59\">&lt;/tr&gt;</ph><ph id=\"ph60\">\n &lt;/table&gt;</ph>",
          "pos": [
            1108,
            1390
          ]
        }
      ]
    },
    {
      "pos": [
        5531,
        5624
      ],
      "content": "Press ENTER to add more than one script action to install multiple components on the cluster."
    },
    {
      "pos": [
        5629,
        5721
      ],
      "content": "Click <bpt id=\"p24\">**</bpt>Select<ept id=\"p24\">**</ept><ph id=\"ph61\"/> to save the script action configuration and continue with cluster creation."
    },
    {
      "pos": [
        5726,
        5761
      ],
      "content": "Call scripts using Azure PowerShell"
    },
    {
      "pos": [
        5763,
        5865
      ],
      "content": "This following PowerShell script demonstrates how to install Spark on Windows based HDInsight cluster."
    },
    {
      "pos": [
        9178,
        9260
      ],
      "content": "To install other software, you will need to replace the script file in the script:"
    },
    {
      "pos": [
        9263,
        9375
      ],
      "content": "When prompted, enter the credentials for the cluster. It can take several minutes before the cluster is created.",
      "nodes": [
        {
          "content": "When prompted, enter the credentials for the cluster.",
          "pos": [
            0,
            53
          ]
        },
        {
          "content": "It can take several minutes before the cluster is created.",
          "pos": [
            54,
            112
          ]
        }
      ]
    },
    {
      "pos": [
        9380,
        9407
      ],
      "content": "Call scripts using .NET SDK"
    },
    {
      "pos": [
        9410,
        9581
      ],
      "content": "The following sample demonstrates how to install Spark on Windows based HDInsight cluster. To install other software, you will need to replace the script file in the code.",
      "nodes": [
        {
          "content": "The following sample demonstrates how to install Spark on Windows based HDInsight cluster.",
          "pos": [
            0,
            90
          ]
        },
        {
          "content": "To install other software, you will need to replace the script file in the code.",
          "pos": [
            91,
            171
          ]
        }
      ]
    },
    {
      "pos": [
        9583,
        9628
      ],
      "content": "<bpt id=\"p25\">**</bpt>To create an HDInsight cluster with Spark<ept id=\"p25\">**</ept>"
    },
    {
      "pos": [
        9634,
        9683
      ],
      "content": "Create a C# console application in Visual Studio."
    },
    {
      "pos": [
        9687,
        9753
      ],
      "content": "From the Nuget Package Manager Console, run the following command."
    },
    {
      "pos": [
        9892,
        9950
      ],
      "content": "Use the following using statements in the Program.cs file:"
    },
    {
      "pos": [
        10336,
        10383
      ],
      "content": "Place the code in the class with the following:"
    },
    {
      "pos": [
        14079,
        14115
      ],
      "content": "Press <bpt id=\"p26\">**</bpt>F5<ept id=\"p26\">**</ept><ph id=\"ph62\"/> to run the application."
    },
    {
      "pos": [
        14121,
        14180
      ],
      "content": "Support for open-source software used on HDInsight clusters"
    },
    {
      "pos": [
        14181,
        14716
      ],
      "content": "The Microsoft Azure HDInsight service is a flexible platform that enables you to build big-data applications in the cloud by using an ecosystem of open-source technologies formed around Hadoop. Microsoft Azure provides a general level of support for open-source technologies, as discussed in the <bpt id=\"p27\">**</bpt>Support Scope<ept id=\"p27\">**</ept><ph id=\"ph63\"/> section of the <ph id=\"ph64\">&lt;a href=\"http://azure.microsoft.com/support/faq/\" target=\"_blank\"&gt;</ph>Azure Support FAQ website<ph id=\"ph65\">&lt;/a&gt;</ph>. The HDInsight service provides an additional level of support for some of the components, as described below.",
      "nodes": [
        {
          "content": "The Microsoft Azure HDInsight service is a flexible platform that enables you to build big-data applications in the cloud by using an ecosystem of open-source technologies formed around Hadoop.",
          "pos": [
            0,
            193
          ]
        },
        {
          "content": "Microsoft Azure provides a general level of support for open-source technologies, as discussed in the <bpt id=\"p27\">**</bpt>Support Scope<ept id=\"p27\">**</ept><ph id=\"ph63\"/> section of the <ph id=\"ph64\">&lt;a href=\"http://azure.microsoft.com/support/faq/\" target=\"_blank\"&gt;</ph>Azure Support FAQ website<ph id=\"ph65\">&lt;/a&gt;</ph>.",
          "pos": [
            194,
            530
          ]
        },
        {
          "content": "The HDInsight service provides an additional level of support for some of the components, as described below.",
          "pos": [
            531,
            640
          ]
        }
      ]
    },
    {
      "pos": [
        14718,
        14808
      ],
      "content": "There are two types of open-source components that are available in the HDInsight service:"
    },
    {
      "pos": [
        14812,
        15215
      ],
      "content": "<bpt id=\"p28\">**</bpt>Built-in components<ept id=\"p28\">**</ept><ph id=\"ph66\"/> - These components are pre-installed on HDInsight clusters and provide core functionality of the cluster. For example, YARN ResourceManager, the Hive query language (HiveQL), and the Mahout library belong to this category. A full list of cluster components is available in <bpt id=\"p29\">[</bpt>What's new in the Hadoop cluster versions provided by HDInsight?<ept id=\"p29\">](hdinsight-component-versioning.md)</ept><ph id=\"ph67\">&lt;/a&gt;</ph>.",
      "nodes": [
        {
          "content": "<bpt id=\"p28\">**</bpt>Built-in components<ept id=\"p28\">**</ept><ph id=\"ph66\"/> - These components are pre-installed on HDInsight clusters and provide core functionality of the cluster.",
          "pos": [
            0,
            184
          ]
        },
        {
          "content": "For example, YARN ResourceManager, the Hive query language (HiveQL), and the Mahout library belong to this category.",
          "pos": [
            185,
            301
          ]
        },
        {
          "content": "A full list of cluster components is available in <bpt id=\"p29\">[</bpt>What's new in the Hadoop cluster versions provided by HDInsight?<ept id=\"p29\">](hdinsight-component-versioning.md)</ept><ph id=\"ph67\">&lt;/a&gt;</ph>.",
          "pos": [
            302,
            523
          ]
        }
      ]
    },
    {
      "pos": [
        15218,
        15368
      ],
      "content": "<bpt id=\"p30\">**</bpt>Custom components<ept id=\"p30\">**</ept><ph id=\"ph68\"/> - You, as a user of the cluster, can install or use in your workload any component available in the community or created by you."
    },
    {
      "pos": [
        15370,
        15501
      ],
      "content": "Built-in components are fully supported, and Microsoft Support will help to isolate and resolve issues related to these components."
    },
    {
      "pos": [
        15505,
        15678
      ],
      "content": "<ph id=\"ph69\">[AZURE.WARNING]</ph><ph id=\"ph70\"/> Components provided with the HDInsight cluster are fully supported and Microsoft Support will help to isolate and resolve issues related to these components."
    },
    {
      "pos": [
        15683,
        16348
      ],
      "content": "Custom components receive commercially reasonable support to help you to further troubleshoot the issue. This might result in resolving the issue OR asking you to engage available channels for the open source technologies where deep expertise for that technology is found. For example, there are many community sites that can be used, like: <bpt id=\"p31\">[</bpt>MSDN forum for HDInsight<ept id=\"p31\">](https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=hdinsight)</ept>, <bpt id=\"p32\">[</bpt>http://stackoverflow.com<ept id=\"p32\">](http://stackoverflow.com)</ept>. Also Apache projects have project sites on <bpt id=\"p33\">[</bpt>http://apache.org<ept id=\"p33\">](http://apache.org)</ept>, for example: <bpt id=\"p34\">[</bpt>Hadoop<ept id=\"p34\">](http://hadoop.apache.org/)</ept>, <bpt id=\"p35\">[</bpt>Spark<ept id=\"p35\">](http://spark.apache.org/)</ept>.",
      "nodes": [
        {
          "content": "Custom components receive commercially reasonable support to help you to further troubleshoot the issue.",
          "pos": [
            0,
            104
          ]
        },
        {
          "content": "This might result in resolving the issue OR asking you to engage available channels for the open source technologies where deep expertise for that technology is found.",
          "pos": [
            105,
            272
          ]
        },
        {
          "content": "For example, there are many community sites that can be used, like: <bpt id=\"p31\">[</bpt>MSDN forum for HDInsight<ept id=\"p31\">](https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=hdinsight)</ept>, <bpt id=\"p32\">[</bpt>http://stackoverflow.com<ept id=\"p32\">](http://stackoverflow.com)</ept>.",
          "pos": [
            273,
            577
          ]
        },
        {
          "content": "Also Apache projects have project sites on <bpt id=\"p33\">[</bpt>http://apache.org<ept id=\"p33\">](http://apache.org)</ept>, for example: <bpt id=\"p34\">[</bpt>Hadoop<ept id=\"p34\">](http://hadoop.apache.org/)</ept>, <bpt id=\"p35\">[</bpt>Spark<ept id=\"p35\">](http://spark.apache.org/)</ept>.",
          "pos": [
            578,
            865
          ]
        }
      ]
    },
    {
      "pos": [
        16350,
        16619
      ],
      "content": "The HDInsight service provides several ways to use custom components. Regardless of how a component is used or installed on the cluster, the same level of support applies. Below is a list of the most common ways that custom components can be used on HDInsight clusters:",
      "nodes": [
        {
          "content": "The HDInsight service provides several ways to use custom components.",
          "pos": [
            0,
            69
          ]
        },
        {
          "content": "Regardless of how a component is used or installed on the cluster, the same level of support applies.",
          "pos": [
            70,
            171
          ]
        },
        {
          "content": "Below is a list of the most common ways that custom components can be used on HDInsight clusters:",
          "pos": [
            172,
            269
          ]
        }
      ]
    },
    {
      "pos": [
        16624,
        16741
      ],
      "content": "Job submission - Hadoop or other types of jobs that execute or use custom components can be submitted to the cluster."
    },
    {
      "pos": [
        16745,
        16896
      ],
      "content": "Cluster customization - During cluster creation, you can specify additional settings and custom components that will be installed on the cluster nodes."
    },
    {
      "pos": [
        16900,
        17088
      ],
      "content": "Samples - For popular custom components, Microsoft and others may provide samples of how these components can be used on the HDInsight clusters. These samples are provided without support.",
      "nodes": [
        {
          "content": "Samples - For popular custom components, Microsoft and others may provide samples of how these components can be used on the HDInsight clusters.",
          "pos": [
            0,
            144
          ]
        },
        {
          "content": "These samples are provided without support.",
          "pos": [
            145,
            188
          ]
        }
      ]
    },
    {
      "pos": [
        17093,
        17122
      ],
      "content": "Develop Script Action scripts"
    },
    {
      "pos": [
        17124,
        17198
      ],
      "content": "See <bpt id=\"p36\">[</bpt>Develop Script Action scripts for HDInsight<ept id=\"p36\">][hdinsight-write-script]</ept>."
    },
    {
      "pos": [
        17204,
        17212
      ],
      "content": "See also"
    },
    {
      "pos": [
        17216,
        17373
      ],
      "content": "<bpt id=\"p37\">[</bpt>Create Hadoop clusters in HDInsight<ept id=\"p37\">][hdinsight-provision-cluster]</ept><ph id=\"ph71\"/> provides instructions on how to create an HDInsight cluster by using other custom options."
    },
    {
      "pos": [
        17376,
        17445
      ],
      "content": "<bpt id=\"p38\">[</bpt>Develop Script Action scripts for HDInsight<ept id=\"p38\">][hdinsight-write-script]</ept>"
    },
    {
      "pos": [
        17448,
        17518
      ],
      "content": "<bpt id=\"p39\">[</bpt>Install and use Spark on HDInsight clusters<ept id=\"p39\">][hdinsight-install-spark]</ept>"
    },
    {
      "pos": [
        17521,
        17583
      ],
      "content": "<bpt id=\"p40\">[</bpt>Install and use R on HDInsight clusters<ept id=\"p40\">][hdinsight-install-r]</ept>"
    },
    {
      "pos": [
        17586,
        17665
      ],
      "content": "<bpt id=\"p41\">[</bpt>Install and use Solr on HDInsight clusters<ept id=\"p41\">](hdinsight-hadoop-solr-install.md)</ept>."
    },
    {
      "pos": [
        17668,
        17751
      ],
      "content": "<bpt id=\"p42\">[</bpt>Install and use Giraph on HDInsight clusters<ept id=\"p42\">](hdinsight-hadoop-giraph-install.md)</ept>."
    }
  ],
  "content": "<properties\n    pageTitle=\"Customize HDInsight Clusters using script actions | Microsoft Azure\"\n    description=\"Learn how to customize HDInsight clusters using Script Action.\"\n    services=\"hdinsight\"\n    documentationCenter=\"\"\n    authors=\"nitinme\"\n    manager=\"paulettm\"\n    editor=\"cgronlun\"\n    tags=\"azure-portal\"/>\n\n<tags\n    ms.service=\"hdinsight\"\n    ms.workload=\"big-data\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"02/16/2015\"\n    ms.author=\"nitinme\"/>\n\n# Customize Windows-based HDInsight clusters using Script Action\n\n[AZURE.INCLUDE [selector](../../includes/hdinsight-create-windows-cluster-selector.md)]\n\n**Script Action** can be used to invoke [custom scripts](hdinsight-hadoop-script-actions.md) \nduring the cluster creation process for installing additional software on a cluster.\n\nThe information in this article is specific to Windows-based HDInsight clusters. Use the tab \nselect above to switch to a version of this article that is specific to Linux-based clusters.\n\nHDInsight clusters can be customized in a variety of other ways as well, such as including \nadditional Azure Storage accounts, changing the Hadoop configuration files (core-site.xml, \nhive-site.xml, etc.), or adding shared libraries (e.g., Hive, Oozie) into common locations \nin the cluster. These customizations can be done through Azure PowerShell, the Azure \nHDInsight .NET SDK, or the Azure Portal. For more information, see \n[Create Hadoop clusters in HDInsight][hdinsight-provision-cluster].\n\n## Script Action in the cluster creation process\n\nScript Action is only used while a clusters is in the process of being created. The following \ndiagram illustrates when Script Action is executed during the creation process:\n\n![HDInsight cluster customization and stages during cluster creation][img-hdi-cluster-states]\n\nWhen the script is running, the cluster enters the **ClusterCustomization** stage. At this \nstage, the script is run under the system admin account, in parallel on all the specified \nnodes in the cluster, and provides full admin privileges on the nodes.\n\n> [AZURE.NOTE] Because you have admin privileges on the cluster nodes during the \n**ClusterCustomization** stage, you can use the script to perform operations like stopping \nand starting services, including Hadoop-related services. So, as part of the script, you must \nensure that the Ambari services and other Hadoop-related services are up and running before \nthe script finishes running. These services are required to successfully ascertain the health \nand state of the cluster while it is being created. If you change any configuration on the \ncluster that affects these services, you must use the helper functions that are provided. For \nmore information about helper functions, see [Develop Script Action scripts for HDInsight][hdinsight-write-script].\n\nThe output and the error logs for the script are stored in the default Storage account you \nspecified for the cluster. The logs are stored in a table with the name \n**u<\\cluster-name-fragment><\\time-stamp>setuplog**. These are aggregate logs from the script \nrun on all the nodes (head node and worker nodes) in the cluster.\n\nEach cluster can accept multiple script actions that are invoked in the order in which they \nare specified. A script can be ran on the head node, the worker nodes, or both.\n\nHDInsight provides several scripts to install the following components on HDInsight clusters:\n\nName | Script\n----- | -----\n**Install Spark** | https://hdiconfigactions.blob.core.windows.net/sparkconfigactionv03/spark-installer-v03.ps1. See [Install and use Spark on HDInsight clusters][hdinsight-install-spark].\n**Install R** | https://hdiconfigactions.blob.core.windows.net/rconfigactionv02/r-installer-v02.ps1. See [Install and use R on HDInsight clusters][hdinsight-install-r].\n**Install Solr** | https://hdiconfigactions.blob.core.windows.net/solrconfigactionv01/solr-installer-v01.ps1. See [Install and use Solr on HDInsight clusters](hdinsight-hadoop-solr-install.md).\n- **Install Giraph** | https://hdiconfigactions.blob.core.windows.net/giraphconfigactionv01/giraph-installer-v01.ps1. See [Install and use Giraph on HDInsight clusters](hdinsight-hadoop-giraph-install.md).\n| **Pre-load Hive libraries** | https://hdiconfigactions.blob.core.windows.net/setupcustomhivelibsv01/setup-customhivelibs-v01.ps1. See [Add Hive libraries on HDInsight clusters](hdinsight-hadoop-add-hive-libraries.md) |\n\n\n## Call scripts using the Azure Portal\n\n**From the Azure Portal**\n\n1. Start creating a cluster as described at [Create Hadoop clusters in HDInsight](hdinsight-provision-clusters.md#portal).\n2. Under Optional Configuration, for the **Script Actions** blade, click **add script action** to provide details about the script action, as shown below:\n\n    ![Use Script Action to customize a cluster](./media/hdinsight-hadoop-customize-cluster/HDI.CreateCluster.8.png \"Use Script Action to customize a cluster\")\n\n    <table border='1'>\n        <tr><th>Property</th><th>Value</th></tr>\n        <tr><td>Name</td>\n            <td>Specify a name for the script action.</td></tr>\n        <tr><td>Script URI</td>\n            <td>Specify the URI to the script that is invoked to customize the cluster. s</td></tr>\n        <tr><td>Head/Worker</td>\n            <td>Specify the nodes (**Head** or **Worker**) on which the customization script is run.</b>.\n        <tr><td>Parameters</td>\n            <td>Specify the parameters, if required by the script.</td></tr>\n    </table>\n\n    Press ENTER to add more than one script action to install multiple components on the cluster.\n\n3. Click **Select** to save the script action configuration and continue with cluster creation.\n\n## Call scripts using Azure PowerShell\n\nThis following PowerShell script demonstrates how to install Spark on Windows based HDInsight cluster.  \n\n    # Provide values for these variables\n    $subscriptionID = \"<Azure Suscription ID>\" # After \"Login-AzureRmAccount\", use \"Get-AzureRmSubscription\" to list IDs.\n\n    $nameToken = \"<Enter A Name Token>\"  # The token is use to create Azure service names.\n    $namePrefix = $nameToken.ToLower() + (Get-Date -Format \"MMdd\")\n    \n    $resourceGroupName = $namePrefix + \"rg\"\n    $location = \"EAST US 2\" # used for creating resource group, storage account, and HDInsight cluster.\n    \n    $hdinsightClusterName = $namePrefix + \"spark\"\n    $httpUserName = \"admin\"\n    $httpPassword = \"<Enter a Password>\"\n    \n    $defaultStorageAccountName = \"$namePrefix\" + \"store\"\n    $defaultBlobContainerName = $hdinsightClusterName\n    \n    #############################################################\n    # Connect to Azure\n    #############################################################\n    \n    Try{\n        Get-AzureRmSubscription\n    }\n    Catch{\n        Login-AzureRmAccount\n    }\n    Select-AzureRmSubscription -SubscriptionId $subscriptionID\n    \n    #############################################################\n    # Prepare the dependent components\n    #############################################################\n    \n    # Create resource group\n    New-AzureRmResourceGroup -Name $resourceGroupName -Location $location\n    \n    # Create storage account\n    New-AzureRmStorageAccount `\n        -ResourceGroupName $resourceGroupName `\n        -Name $defaultStorageAccountName `\n        -Location $location `\n        -Type Standard_GRS\n    $defaultStorageAccountKey = Get-AzureRmStorageAccountKey `\n                                    -ResourceGroupName $resourceGroupName `\n                                    -Name $defaultStorageAccountName |  %{ $_.Key1 }\n    $defaultStorageAccountContext = New-AzureStorageContext `\n                                    -StorageAccountName $defaultStorageAccountName `\n                                    -StorageAccountKey $storageAccountKey  \n    New-AzureStorageContainer `\n        -Name $defaultBlobContainerName `\n        -Context $defaultStorageAccountContext\n    \n    #############################################################\n    # Create cluster with ApacheSpark\n    #############################################################\n    \n    # Specify the configuration options\n    $config = New-AzureRmHDInsightClusterConfig `\n                -DefaultStorageAccountName \"$defaultStorageAccountName.blob.core.windows.net\" `\n                -DefaultStorageAccountKey $defaultStorageAccountKey \n                \n    \n    # Add a script action to the cluster configuration\n    $config = Add-AzureRmHDInsightScriptAction `\n                -Config $config `\n                -Name \"Install Spark\" `\n                -NodeType HeadNode `\n                -Uri https://hdiconfigactions.blob.core.windows.net/sparkconfigactionv03/spark-installer-v03.ps1 `\n    \n    # Start creating a cluster with Spark installed\n    New-AzureRmHDInsightCluster `\n            -ResourceGroupName $resourceGroupName `\n            -ClusterName $hdinsightClusterName `\n            -Location $location `\n            -ClusterSizeInNodes 2 `\n            -ClusterType Hadoop `\n            -OSType Windows `\n            -DefaultStorageContainer $defaultBlobContainerName `\n            -Config $config\n\n\nTo install other software, you will need to replace the script file in the script:\n\n\nWhen prompted, enter the credentials for the cluster. It can take several minutes before the cluster is created.\n\n## Call scripts using .NET SDK \n\nThe following sample demonstrates how to install Spark on Windows based HDInsight cluster. To install other software, you will need to replace the script file in the code.\n\n**To create an HDInsight cluster with Spark** \n\n1. Create a C# console application in Visual Studio.\n2. From the Nuget Package Manager Console, run the following command.\n\n        Install-Package Microsoft.Azure.Management.HDInsight -Pre\n        Install-Package Microsoft.Azure.Common.Authentication -Pre\n\n2. Use the following using statements in the Program.cs file:\n\n        using System;\n        using System.Security;\n        using Microsoft.Azure.Management.HDInsight;\n        using Microsoft.Azure.Management.HDInsight.Models;\n        \n        using Microsoft.Azure;\n        using Microsoft.Azure.Common.Authentication;\n        using Microsoft.Azure.Common.Authentication.Factories;\n        using Microsoft.Azure.Common.Authentication.Models;\n\n3. Place the code in the class with the following:\n\n        private static HDInsightManagementClient _hdiManagementClient;\n\n        private static Guid SubscriptionId = new Guid(\"<YourAzureSubscriptionID>\");\n        private const string ResourceGroupName = \"<ExistingAzureResourceGroupName>\";\n        private const string NewClusterName = \"<NewAzureHDInsightClusterName>\";\n        private const int NewClusterNumNodes = <NumberOfClusterNodes>;\n        private const string NewClusterLocation = \"East US\";\n        private const string NewClusterVersion = \"3.2\";\n        private const string ExistingStorageName = \"<ExistingAzureStorageAccountName>\";\n        private const string ExistingStorageKey = \"<ExistingAzureStorageAccountKey>\";\n        private const string ExistingContainer = \"<ExistingAzureBlobStorageContainer>\";\n        private const HDInsightClusterType NewClusterType = HDInsightClusterType.Hadoop;\n        private const OSType NewClusterOSType = OSType.Windows;\n        private const string NewClusterUsername = \"<HttpUserName>\";\n        private const string NewClusterPassword = \"<HttpUserPassword>\";\n\n        static void Main(string[] args)\n        {\n            System.Console.WriteLine(\"Running\");\n\n            var tokenCreds = GetTokenCloudCredentials();\n            var subCloudCredentials = GetSubscriptionCloudCredentials(tokenCreds, SubscriptionId);\n\n            _hdiManagementClient = new HDInsightManagementClient(subCloudCredentials);\n\n            CreateCluster();\n\n        }\n\n        private static void CreateCluster()\n        {\n            var parameters = new ClusterCreateParameters\n            {\n                ClusterSizeInNodes = NewClusterNumNodes,\n                Location = NewClusterLocation,\n                ClusterType = NewClusterType,\n                OSType = NewClusterOSType,\n                Version = NewClusterVersion,\n\n                DefaultStorageAccountName = ExistingStorageName,\n                DefaultStorageAccountKey = ExistingStorageKey,\n                DefaultStorageContainer = ExistingContainer,\n\n                UserName = NewClusterUsername,\n                Password = NewClusterPassword,\n            };\n\n            ScriptAction sparkScriptAction = new ScriptAction(\"Install Spark\",\n                new Uri(\"https://hdiconfigactions.blob.core.windows.net/sparkconfigactionv03/spark-installer-v03.ps1\"), \"\");\n\n            parameters.ScriptActions.Add(ClusterNodeType.HeadNode, new System.Collections.Generic.List<ScriptAction> { sparkScriptAction });\n            parameters.ScriptActions.Add(ClusterNodeType.WorkerNode, new System.Collections.Generic.List<ScriptAction> { sparkScriptAction });\n\n            _hdiManagementClient.Clusters.Create(ResourceGroupName, NewClusterName, parameters);\n        }\n\n\n        public static SubscriptionCloudCredentials GetTokenCloudCredentials(string username = null, SecureString password = null)\n        {\n            var authFactory = new AuthenticationFactory();\n\n            var account = new AzureAccount { Type = AzureAccount.AccountType.User };\n\n            if (username != null && password != null)\n                account.Id = username;\n\n            var env = AzureEnvironment.PublicEnvironments[EnvironmentName.AzureCloud];\n\n            var accessToken =\n                authFactory.Authenticate(account, env, AuthenticationFactory.CommonAdTenant, password, ShowDialog.Auto)\n                    .AccessToken;\n\n            return new TokenCloudCredentials(accessToken);\n        }\n\n        public static SubscriptionCloudCredentials GetSubscriptionCloudCredentials(SubscriptionCloudCredentials creds, Guid subId)\n        {\n            return new TokenCloudCredentials(subId.ToString(), ((TokenCloudCredentials)creds).Token);\n        }\n\n4. Press **F5** to run the application.\n\n\n## Support for open-source software used on HDInsight clusters\nThe Microsoft Azure HDInsight service is a flexible platform that enables you to build big-data applications in the cloud by using an ecosystem of open-source technologies formed around Hadoop. Microsoft Azure provides a general level of support for open-source technologies, as discussed in the **Support Scope** section of the <a href=\"http://azure.microsoft.com/support/faq/\" target=\"_blank\">Azure Support FAQ website</a>. The HDInsight service provides an additional level of support for some of the components, as described below.\n\nThere are two types of open-source components that are available in the HDInsight service:\n\n- **Built-in components** - These components are pre-installed on HDInsight clusters and provide core functionality of the cluster. For example, YARN ResourceManager, the Hive query language (HiveQL), and the Mahout library belong to this category. A full list of cluster components is available in [What's new in the Hadoop cluster versions provided by HDInsight?](hdinsight-component-versioning.md)</a>.\n- **Custom components** - You, as a user of the cluster, can install or use in your workload any component available in the community or created by you.\n\nBuilt-in components are fully supported, and Microsoft Support will help to isolate and resolve issues related to these components.\n\n> [AZURE.WARNING] Components provided with the HDInsight cluster are fully supported and Microsoft Support will help to isolate and resolve issues related to these components.\n>\n> Custom components receive commercially reasonable support to help you to further troubleshoot the issue. This might result in resolving the issue OR asking you to engage available channels for the open source technologies where deep expertise for that technology is found. For example, there are many community sites that can be used, like: [MSDN forum for HDInsight](https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=hdinsight), [http://stackoverflow.com](http://stackoverflow.com). Also Apache projects have project sites on [http://apache.org](http://apache.org), for example: [Hadoop](http://hadoop.apache.org/), [Spark](http://spark.apache.org/).\n\nThe HDInsight service provides several ways to use custom components. Regardless of how a component is used or installed on the cluster, the same level of support applies. Below is a list of the most common ways that custom components can be used on HDInsight clusters:\n\n1. Job submission - Hadoop or other types of jobs that execute or use custom components can be submitted to the cluster.\n2. Cluster customization - During cluster creation, you can specify additional settings and custom components that will be installed on the cluster nodes.\n3. Samples - For popular custom components, Microsoft and others may provide samples of how these components can be used on the HDInsight clusters. These samples are provided without support.\n\n## Develop Script Action scripts\n\nSee [Develop Script Action scripts for HDInsight][hdinsight-write-script].\n\n\n## See also\n\n- [Create Hadoop clusters in HDInsight][hdinsight-provision-cluster] provides instructions on how to create an HDInsight cluster by using other custom options.\n- [Develop Script Action scripts for HDInsight][hdinsight-write-script]\n- [Install and use Spark on HDInsight clusters][hdinsight-install-spark]\n- [Install and use R on HDInsight clusters][hdinsight-install-r]\n- [Install and use Solr on HDInsight clusters](hdinsight-hadoop-solr-install.md).\n- [Install and use Giraph on HDInsight clusters](hdinsight-hadoop-giraph-install.md).\n\n[hdinsight-install-spark]: hdinsight-hadoop-spark-install.md\n[hdinsight-install-r]: hdinsight-hadoop-r-scripts.md\n[hdinsight-write-script]: hdinsight-hadoop-script-actions.md\n[hdinsight-provision-cluster]: hdinsight-provision-clusters.md\n[powershell-install-configure]: powershell-install-configure.md\n\n\n[img-hdi-cluster-states]: ./media/hdinsight-hadoop-customize-cluster/HDI-Cluster-state.png \"Stages during cluster creation\"\n"
}