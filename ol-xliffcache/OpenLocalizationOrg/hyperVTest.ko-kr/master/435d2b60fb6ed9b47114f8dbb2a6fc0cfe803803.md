ms입니다. ContentId: 6C7EB25D-66FB-4B6F-AB4A-79D6BB424637
제목: 새 관리 서비스를 확인 합니다.

#새 관리 서비스를 확인 합니다.

이것은 테스트 합니다.
이 문서에서는 Hyper-v 소켓 및 사용을 시작 하는 방법에 기반 하는 VM 서비스를 소개 합니다.

##VM 서비스란 무엇입니까?

호, HB 프로세스 테스트를 위해이 문장을 추가 합니다.
VM 서비스는 Hyper-v 호스트 및 호스트에서 실행 중인 가상 컴퓨터에 걸쳐 있는 서비스입니다.

Hyper-v의 기본적인 요구 사항은 테 넌 트/호스터 격리, 컨트롤, 주위를 유지 하는 동안 호스트/가상 컴퓨터 경계에 걸쳐 서비스를 만들 수 있는 비 네트워크 연결을 제공 하는 Hyper-v 이제 (Windows 10과 서버 + 2016) 및 diagnosable 합니다.

일반적인 요청, 수신 및 기본 사항 (예: 시간 동기화)에 대 한 기본 서비스 (integration services)의 기본 집합을 제공 하 Hyper-v은 계속 되지만 이제 누구나 작성 하 고 수 필요에 따라 VM 서비스를 배포 합니다.

PowerShell 직접은 VM 서비스의 상자에서 예입니다.

##Hyper-v 소켓 이란?

Hyper-v 소켓은 네트워킹에 종속 하지와 같은 TCP 소켓.
Hyper-v 소켓을 사용 하 여, 서비스는 네트워킹 스택을 독립적으로 실행할 수 및 모든 데이터 흐름 호스트 메모리에 유지 됩니다.

##시스템 요구 사항

**지원 되는 호스트 OS**
*   Windows 10
*   Windows Server 기술 미리 보기 3
*   이후 릴리스 (서버 2016 +)

**지원 되는 게스트 OS**
*   Windows 10
*   Windows Server 기술 미리 보기 3
*   이후 릴리스 (서버 2016 +)
*   Linux

##기능 및 제한 사항

커널 모드 또는 사용자 모드  
데이터 스트림을    
백업/비디오에 대 한 최상의 아니므로 블록 메모리가 없습니다.

##시작

이 가이드에서는 C/c + +에서 프로그래밍 하는 소켓에 익숙하다면 가정 합니다.

###1 단계-Hyper-v 호스트에 서비스를 등록 합니다.

새 서비스 Hyper-v와 통합 하는 사용자 지정 서비스를 사용 하려면 Hyper-v 호스트의 레지스트리에 등록 되어 있어야 합니다.

레지스트리에서 서비스를 등록 하 여 가져옵니다.
*  WMI 관리를 사용 하도록 설정, 해제, 및 사용 가능한 서비스를 나열 합니다.
*  서비스 목록에 직접 가상 컴퓨터와 통신 하도록 허용 합니다.

** 레지스트리 위치 및 정보 **

``` 
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Virtualization\VirtualDevices\6C09BB55-D683-4DA0-8931-C9BF705F6480\GuestCommunicationServices\
```
이 레지스트리 위치에 여러 guid가 표시 됩니다.
이러한는 우리의 상자에 서비스입니다.

서비스 당 레지스트리에서 정보:
* `서비스 GUID`
   * `ElementName (REG_SZ)` -이 서비스의 이름

사용자 고유의 서비스를 등록 하려면 사용자 고유의 GUID 및 이름을 사용 하 여 새 레지스트리 키를 만듭니다.

레지스트리 항목은 다음과 같이 표시 됩니다.
```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Virtualization\GuestCommunicationServices\
    999E53D4-3D5C-4C3E-8779-BED06EC056E1\
        ElementName REG_SZ  VM Session Service
    YourGUID\
        ElementName REG_SZ  Your Service Friendly Name
```

> ** 팁: **  PowerShell에서 GUID를 생성 하 여 클립보드에 복사 실행:
``` PowerShell
[System.Guid]::NewGuid().ToString() | clip.exe
```



###2 단계-간단한 호스트 측 서비스 만들기

###3 단계-간단한 게스트 측 서비스 만들기

##AF_HYPERV에 대 한 자세한 내용

이후 Hyper-v 소켓 네트워킹 스택, TCP/IP, DNS에 의존 하지 않는 한 개의 비 IP, 호스트 이름, 여전히 연결을 설명 하는 형식을 하지 소켓 끝점 등이 필요 합니다.
IP 또는 호스트 이름 대신 AF_HYPERV 끝점 두 GUID에 크게 의존 합니다.
* VM ID – 이것이 VM 당 할당 된 고유 ID입니다.
   다음 PowerShell 코드 조각을 사용 하 여 VM의 ID는 찾을 수 있습니다.
```PowerShell
(Get-VM -Name vmname).Id
```
* 서비스 ID-Hyper-v 호스트 레지스트리에 서비스가 등록 되어 GUID입니다.
   참조 [새 서비스 등록](#GettingStarted).

VM에서 서비스를 호스트에 서비스에서 연결:  
VMID 및 서비스 ID
VM에 있는 서비스의 서비스 호스트에 연결:  
0 GUID 및 서비스 ID

##지원 되는 소켓 명령

Socket()
Bind)
()를 연결 합니다.
Send)
Listen)
Accept()







