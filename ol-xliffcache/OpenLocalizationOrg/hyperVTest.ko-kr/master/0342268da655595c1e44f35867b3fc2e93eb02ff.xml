{
  "nodes": [
    {
      "pos": [
        27,
        101
      ],
      "content": "Install and use Giraph on Linux-based HDInsight (Hadoop) | Microsoft Azure"
    },
    {
      "pos": [
        120,
        342
      ],
      "content": "Learn how to install Giraph on Linux-based HDInsight clusters using Script Actions. Script Actions allow you to customize the cluster during creation, by changing cluster configuration or installing services and utilities.",
      "nodes": [
        {
          "content": "Learn how to install Giraph on Linux-based HDInsight clusters using Script Actions.",
          "pos": [
            0,
            83
          ]
        },
        {
          "content": "Script Actions allow you to customize the cluster during creation, by changing cluster configuration or installing services and utilities.",
          "pos": [
            84,
            222
          ]
        }
      ]
    },
    {
      "pos": [
        672,
        761
      ],
      "content": "Install Giraph on HDInsight Hadoop clusters, and use Giraph to process large-scale graphs"
    },
    {
      "pos": [
        763,
        1109
      ],
      "content": "You can install Giraph on any type of cluster in Hadoop on Azure HDInsight by using <bpt id=\"p1\">**</bpt>Script Action<ept id=\"p1\">**</ept><ph id=\"ph2\"/> cluster customization. Script Action lets you run scripts to customize a cluster, only when the cluster is being created. For more information, see <bpt id=\"p2\">[</bpt>Customize HDInsight clusters using Script Action<ept id=\"p2\">](hdinsight-hadoop-customize-cluster-linux.md)</ept>.",
      "nodes": [
        {
          "content": "You can install Giraph on any type of cluster in Hadoop on Azure HDInsight by using <bpt id=\"p1\">**</bpt>Script Action<ept id=\"p1\">**</ept><ph id=\"ph2\"/> cluster customization.",
          "pos": [
            0,
            176
          ]
        },
        {
          "content": "Script Action lets you run scripts to customize a cluster, only when the cluster is being created.",
          "pos": [
            177,
            275
          ]
        },
        {
          "content": "For more information, see <bpt id=\"p2\">[</bpt>Customize HDInsight clusters using Script Action<ept id=\"p2\">](hdinsight-hadoop-customize-cluster-linux.md)</ept>.",
          "pos": [
            276,
            436
          ]
        }
      ]
    },
    {
      "pos": [
        1111,
        1325
      ],
      "content": "In this topic, you will learn how to install Giraph by using Script Action. Once you have installed Giraph, you'll also learn how to use Giraph for most typical applications, which is to process large-scale graphs.",
      "nodes": [
        {
          "content": "In this topic, you will learn how to install Giraph by using Script Action.",
          "pos": [
            0,
            75
          ]
        },
        {
          "content": "Once you have installed Giraph, you'll also learn how to use Giraph for most typical applications, which is to process large-scale graphs.",
          "pos": [
            76,
            214
          ]
        }
      ]
    },
    {
      "pos": [
        1329,
        1572
      ],
      "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> The information in this article is specific to Linux-based HDInsight clusters. For information on working with Windows-based clusters, see <bpt id=\"p3\">[</bpt>Install Giraph on HDInsight Hadoop clusters (Windows)<ept id=\"p3\">](hdinsight-hadoop-giraph-install.md)</ept>",
      "nodes": [
        {
          "content": "<ph id=\"ph3\">[AZURE.NOTE]</ph><ph id=\"ph4\"/> The information in this article is specific to Linux-based HDInsight clusters.",
          "pos": [
            0,
            123
          ]
        },
        {
          "content": "For information on working with Windows-based clusters, see <bpt id=\"p3\">[</bpt>Install Giraph on HDInsight Hadoop clusters (Windows)<ept id=\"p3\">](hdinsight-hadoop-giraph-install.md)</ept>",
          "pos": [
            124,
            313
          ]
        }
      ]
    },
    {
      "pos": [
        1598,
        1613
      ],
      "content": "What is Giraph?"
    },
    {
      "pos": [
        1615,
        2066
      ],
      "content": "<bpt id=\"p4\">[</bpt>Apache Giraph<ept id=\"p4\">](http://giraph.apache.org/)</ept><ph id=\"ph5\"/> allows you to perform graph processing by using Hadoop, and can be used with Azure HDInsight. Graphs model relationships between objects, such as the connections between routers on a large network like the Internet, or relationships between people on social networks (sometimes referred to as a social graph). Graph processing allows you to reason about the relationships between objects in a graph, such as:",
      "nodes": [
        {
          "content": "<bpt id=\"p4\">[</bpt>Apache Giraph<ept id=\"p4\">](http://giraph.apache.org/)</ept><ph id=\"ph5\"/> allows you to perform graph processing by using Hadoop, and can be used with Azure HDInsight.",
          "pos": [
            0,
            188
          ]
        },
        {
          "content": "Graphs model relationships between objects, such as the connections between routers on a large network like the Internet, or relationships between people on social networks (sometimes referred to as a social graph).",
          "pos": [
            189,
            404
          ]
        },
        {
          "content": "Graph processing allows you to reason about the relationships between objects in a graph, such as:",
          "pos": [
            405,
            503
          ]
        }
      ]
    },
    {
      "pos": [
        2070,
        2136
      ],
      "content": "Identifying potential friends based on your current relationships."
    },
    {
      "pos": [
        2139,
        2205
      ],
      "content": "Identifying the shortest route between two computers in a network."
    },
    {
      "pos": [
        2208,
        2246
      ],
      "content": "Calculating the page rank of webpages."
    },
    {
      "pos": [
        2250,
        2270
      ],
      "content": "What the script does"
    },
    {
      "pos": [
        2272,
        2315
      ],
      "content": "This script performs the following actions:"
    },
    {
      "pos": [
        2319,
        2363
      ],
      "content": "Installs Giraph to <ph id=\"ph6\">`/usr/hdp/current/giraph`</ph>"
    },
    {
      "pos": [
        2366,
        2483
      ],
      "content": "Copies the <ph id=\"ph7\">`giraph-examples.jar`</ph><ph id=\"ph8\"/> file to default storage (WASB) for your cluster: <ph id=\"ph9\">`/example/jars/giraph-examples.jar`</ph>"
    },
    {
      "pos": [
        2510,
        2545
      ],
      "content": "Install Giraph using Script Actions"
    },
    {
      "pos": [
        2547,
        2985
      ],
      "content": "A sample script to install Giraph on an HDInsight cluster is available from a read-only Azure storage blob at <bpt id=\"p5\">[</bpt>https://hdiconfigactions.blob.core.windows.net/linuxgiraphconfigactionv01/giraph-installer-v01.sh<ept id=\"p5\">](https://hdiconfigactions.blob.core.windows.net/linuxgiraphconfigactionv01/giraph-installer-v01.sh)</ept>. This section provides instructions on how to use the sample script while creating the cluster by using the Azure Classic Portal.",
      "nodes": [
        {
          "content": "A sample script to install Giraph on an HDInsight cluster is available from a read-only Azure storage blob at <bpt id=\"p5\">[</bpt>https://hdiconfigactions.blob.core.windows.net/linuxgiraphconfigactionv01/giraph-installer-v01.sh<ept id=\"p5\">](https://hdiconfigactions.blob.core.windows.net/linuxgiraphconfigactionv01/giraph-installer-v01.sh)</ept>.",
          "pos": [
            0,
            347
          ]
        },
        {
          "content": "This section provides instructions on how to use the sample script while creating the cluster by using the Azure Classic Portal.",
          "pos": [
            348,
            476
          ]
        }
      ]
    },
    {
      "pos": [
        2989,
        3246
      ],
      "content": "<ph id=\"ph10\">[AZURE.NOTE]</ph><ph id=\"ph11\"/> You can also use Azure PowerShell or the HDInsight .NET SDK to create a cluster using this script. For more information on using these methods, see <bpt id=\"p6\">[</bpt>Customize HDInsight clusters with Script Actions<ept id=\"p6\">](hdinsight-hadoop-customize-cluster-linux.md)</ept>.",
      "nodes": [
        {
          "content": "<ph id=\"ph10\">[AZURE.NOTE]</ph><ph id=\"ph11\"/> You can also use Azure PowerShell or the HDInsight .NET SDK to create a cluster using this script.",
          "pos": [
            0,
            145
          ]
        },
        {
          "content": "For more information on using these methods, see <bpt id=\"p6\">[</bpt>Customize HDInsight clusters with Script Actions<ept id=\"p6\">](hdinsight-hadoop-customize-cluster-linux.md)</ept>.",
          "pos": [
            146,
            329
          ]
        }
      ]
    },
    {
      "pos": [
        3251,
        3414
      ],
      "content": "Start creating a cluster by using the steps in <bpt id=\"p7\">[</bpt>Create Linux-based HDInsight clusters<ept id=\"p7\">](hdinsight-provision-linux-clusters.md#portal)</ept>, but do not complete creation."
    },
    {
      "pos": [
        3419,
        3521
      ],
      "content": "On the <bpt id=\"p8\">**</bpt>Optional Configuration<ept id=\"p8\">**</ept><ph id=\"ph12\"/> blade, select <bpt id=\"p9\">**</bpt>Script Actions<ept id=\"p9\">**</ept>, and provide the information below:"
    },
    {
      "pos": [
        3529,
        3583
      ],
      "content": "<bpt id=\"p10\">__</bpt>NAME<ept id=\"p10\">__</ept>: Enter a friendly name for the script action."
    },
    {
      "pos": [
        3590,
        3703
      ],
      "content": "<bpt id=\"p11\">__</bpt>SCRIPT URI<ept id=\"p11\">__</ept>: https://hdiconfigactions.blob.core.windows.net/linuxgiraphconfigactionv01/giraph-installer-v01.sh"
    },
    {
      "pos": [
        3710,
        3737
      ],
      "content": "<bpt id=\"p12\">__</bpt>HEAD<ept id=\"p12\">__</ept>: Check this option"
    },
    {
      "pos": [
        3744,
        3773
      ],
      "content": "<bpt id=\"p13\">__</bpt>WORKER<ept id=\"p13\">__</ept>: Check this option"
    },
    {
      "pos": [
        3780,
        3846
      ],
      "content": "<bpt id=\"p14\">__</bpt>ZOOKEEPER<ept id=\"p14\">__</ept>: Check this option to install on the Zookeeper node."
    },
    {
      "pos": [
        3853,
        3891
      ],
      "content": "<bpt id=\"p15\">__</bpt>PARAMETERS<ept id=\"p15\">__</ept>: Leave this field blank"
    },
    {
      "pos": [
        3896,
        4126
      ],
      "content": "At the bottom of the <bpt id=\"p16\">**</bpt>Script Actions<ept id=\"p16\">**</ept>, use the <bpt id=\"p17\">**</bpt>Select<ept id=\"p17\">**</ept><ph id=\"ph13\"/> button to save the configuration. Finally, use the <bpt id=\"p18\">**</bpt>Select<ept id=\"p18\">**</ept><ph id=\"ph14\"/> button at the bottom of the <bpt id=\"p19\">**</bpt>Optional Configuration<ept id=\"p19\">**</ept><ph id=\"ph15\"/> blade to save the optional configuration information.",
      "nodes": [
        {
          "content": "At the bottom of the <bpt id=\"p16\">**</bpt>Script Actions<ept id=\"p16\">**</ept>, use the <bpt id=\"p17\">**</bpt>Select<ept id=\"p17\">**</ept><ph id=\"ph13\"/> button to save the configuration.",
          "pos": [
            0,
            188
          ]
        },
        {
          "content": "Finally, use the <bpt id=\"p18\">**</bpt>Select<ept id=\"p18\">**</ept><ph id=\"ph14\"/> button at the bottom of the <bpt id=\"p19\">**</bpt>Optional Configuration<ept id=\"p19\">**</ept><ph id=\"ph15\"/> blade to save the optional configuration information.",
          "pos": [
            189,
            435
          ]
        }
      ]
    },
    {
      "pos": [
        4131,
        4267
      ],
      "content": "Continue creating the cluster as described in <bpt id=\"p20\">[</bpt>Create Linux-based HDInsight clusters<ept id=\"p20\">](hdinsight-hadoop-create-linux-clusters-portal.md)</ept>."
    },
    {
      "pos": [
        4296,
        4329
      ],
      "content": "How do I use Giraph in HDInsight?"
    },
    {
      "pos": [
        4331,
        4492
      ],
      "content": "Once the cluster has finished creating, use the following steps to run the SimpleShortestPathsComputation example included with Giraph. This implements the basic",
      "nodes": [
        {
          "content": "Once the cluster has finished creating, use the following steps to run the SimpleShortestPathsComputation example included with Giraph.",
          "pos": [
            0,
            135
          ]
        },
        {
          "content": "This implements the basic",
          "pos": [
            136,
            161
          ]
        }
      ]
    },
    {
      "pos": [
        4563,
        4569
      ],
      "content": "Pregel"
    },
    {
      "pos": [
        4574,
        4646
      ],
      "content": "implementation for finding the shortest path between objects in a graph."
    },
    {
      "pos": [
        4651,
        4694
      ],
      "content": "Connect to the HDInsight cluster using SSH:"
    },
    {
      "pos": [
        4757,
        4825
      ],
      "content": "For more information on using SSH with HDInsight, see the following:"
    },
    {
      "pos": [
        4833,
        4945
      ],
      "content": "<bpt id=\"p21\">[</bpt>Use SSH with Linux-based Hadoop on HDInsight from Linux, Unix, or OS X<ept id=\"p21\">](hdinsight-hadoop-linux-use-ssh-unix.md)</ept>"
    },
    {
      "pos": [
        4953,
        5055
      ],
      "content": "<bpt id=\"p22\">[</bpt>Use SSH with Linux-based Hadoop on HDInsight from Windows<ept id=\"p22\">](hdinsight-hadoop-linux-use-ssh-windows.md)</ept>"
    },
    {
      "pos": [
        5060,
        5124
      ],
      "content": "Use the following to create a new file named <bpt id=\"p23\">__</bpt>tiny_graph.txt<ept id=\"p23\">__</ept>:"
    },
    {
      "pos": [
        5159,
        5206
      ],
      "content": "Use the following as the contents of this file:"
    },
    {
      "pos": [
        5365,
        5759
      ],
      "content": "This data describes a relationship between objects in a directed graph, by using the format [source\\_id, source\\_value,[[dest\\_id], [edge\\_value],...]]. Each line represents a relationship between a <bpt id=\"p24\">**</bpt>source\\_id<ept id=\"p24\">**</ept><ph id=\"ph16\"/> object and one or more <bpt id=\"p25\">**</bpt>dest\\_id<ept id=\"p25\">**</ept><ph id=\"ph17\"/> objects. The <bpt id=\"p26\">**</bpt>edge\\_value<ept id=\"p26\">**</ept><ph id=\"ph18\"/> (or weight) can be thought of as the strength or distance of the connection between <bpt id=\"p27\">**</bpt>source_id<ept id=\"p27\">**</ept><ph id=\"ph19\"/> and <bpt id=\"p28\">**</bpt>dest\\_id<ept id=\"p28\">**</ept>.",
      "nodes": [
        {
          "content": "This data describes a relationship between objects in a directed graph, by using the format [source\\_id, source\\_value,[[dest\\_id], [edge\\_value],...]].",
          "pos": [
            0,
            152
          ]
        },
        {
          "content": "Each line represents a relationship between a <bpt id=\"p24\">**</bpt>source\\_id<ept id=\"p24\">**</ept><ph id=\"ph16\"/> object and one or more <bpt id=\"p25\">**</bpt>dest\\_id<ept id=\"p25\">**</ept><ph id=\"ph17\"/> objects.",
          "pos": [
            153,
            368
          ]
        },
        {
          "content": "The <bpt id=\"p26\">**</bpt>edge\\_value<ept id=\"p26\">**</ept><ph id=\"ph18\"/> (or weight) can be thought of as the strength or distance of the connection between <bpt id=\"p27\">**</bpt>source_id<ept id=\"p27\">**</ept><ph id=\"ph19\"/> and <bpt id=\"p28\">**</bpt>dest\\_id<ept id=\"p28\">**</ept>.",
          "pos": [
            369,
            654
          ]
        }
      ]
    },
    {
      "pos": [
        5765,
        5877
      ],
      "content": "Drawn out, and using the value (or weight) as the distance between objects, the above data might look like this:"
    },
    {
      "pos": [
        5883,
        6020
      ],
      "content": "<ph id=\"ph20\">![</ph>tiny_graph.txt drawn as circles with lines of varying distance between<ph id=\"ph21\">](./media/hdinsight-hadoop-giraph-install-linux/giraph-graph.png)</ph>"
    },
    {
      "pos": [
        6025,
        6117
      ],
      "content": "To save the file, use <bpt id=\"p29\">__</bpt>Ctrl+X<ept id=\"p29\">__</ept>, then <bpt id=\"p30\">__</bpt>Y<ept id=\"p30\">__</ept>, and finally <bpt id=\"p31\">__</bpt>Enter<ept id=\"p31\">__</ept><ph id=\"ph22\"/> to accept the file name."
    },
    {
      "pos": [
        6122,
        6206
      ],
      "content": "Use the following to store the data into primary storage for your HDInsight cluster:"
    },
    {
      "pos": [
        6289,
        6378
      ],
      "content": "Use the following to get the fully qualified domain name (FQDN) of the cluster head node:"
    },
    {
      "pos": [
        6412,
        6555
      ],
      "content": "Run the SimpleShortestPathsComputation example using the following command. Replace <bpt id=\"p32\">__</bpt>HEADNODE<ept id=\"p32\">__</ept><ph id=\"ph23\"/> with the FQDN returned from the previous step:",
      "nodes": [
        {
          "content": "Run the SimpleShortestPathsComputation example using the following command.",
          "pos": [
            0,
            75
          ]
        },
        {
          "content": "Replace <bpt id=\"p32\">__</bpt>HEADNODE<ept id=\"p32\">__</ept><ph id=\"ph23\"/> with the FQDN returned from the previous step:",
          "pos": [
            76,
            198
          ]
        }
      ]
    },
    {
      "pos": [
        6964,
        7039
      ],
      "content": "The parameters used with this command are described in the following table."
    },
    {
      "pos": [
        7047,
        7056
      ],
      "content": "Parameter"
    },
    {
      "pos": [
        7059,
        7071
      ],
      "content": "What it does"
    },
    {
      "pos": [
        7165,
        7202
      ],
      "content": "The jar file containing the examples."
    },
    {
      "pos": [
        7246,
        7283
      ],
      "content": "The class used to start the examples."
    },
    {
      "pos": [
        7353,
        7475
      ],
      "content": "The example that will be ran. In this case, it will compute the shortest path between ID 1 and all other IDs in the graph.",
      "nodes": [
        {
          "content": "The example that will be ran.",
          "pos": [
            0,
            29
          ]
        },
        {
          "content": "In this case, it will compute the shortest path between ID 1 and all other IDs in the graph.",
          "pos": [
            30,
            122
          ]
        }
      ]
    },
    {
      "pos": [
        7525,
        7554
      ],
      "content": "The headnode for the cluster."
    },
    {
      "pos": [
        7644,
        7687
      ],
      "content": "The input format to use for the input data."
    },
    {
      "pos": [
        7734,
        7754
      ],
      "content": "The input data file."
    },
    {
      "pos": [
        7829,
        7889
      ],
      "content": "The output format. In this case, ID and value as plain text.",
      "nodes": [
        {
          "content": "The output format.",
          "pos": [
            0,
            18
          ]
        },
        {
          "content": "In this case, ID and value as plain text.",
          "pos": [
            19,
            60
          ]
        }
      ]
    },
    {
      "pos": [
        7936,
        7956
      ],
      "content": "The output location."
    },
    {
      "pos": [
        7974,
        8020
      ],
      "content": "The number of workers to use. In this case, 2.",
      "nodes": [
        {
          "content": "The number of workers to use.",
          "pos": [
            0,
            29
          ]
        },
        {
          "content": "In this case, 2.",
          "pos": [
            30,
            46
          ]
        }
      ]
    },
    {
      "pos": [
        8028,
        8177
      ],
      "content": "For more information on these, and other parameters used with Giraph samples, see the <bpt id=\"p33\">[</bpt>Giraph quickstart<ept id=\"p33\">](http://giraph.apache.org/quick_start.html)</ept>."
    },
    {
      "pos": [
        8182,
        8437
      ],
      "content": "Once the job has finished, the results will be stored in the <bpt id=\"p34\">__</bpt>wasb:///example/out/shotestpaths<ept id=\"p34\">__</ept><ph id=\"ph33\"/> directory. The files created will begin with <bpt id=\"p35\">__</bpt>part-m-<ept id=\"p35\">__</ept><ph id=\"ph34\"/> and end with a number indicating the first, second, etc. file. Use the following to view the output:",
      "nodes": [
        {
          "content": "Once the job has finished, the results will be stored in the <bpt id=\"p34\">__</bpt>wasb:///example/out/shotestpaths<ept id=\"p34\">__</ept><ph id=\"ph33\"/> directory.",
          "pos": [
            0,
            163
          ]
        },
        {
          "content": "The files created will begin with <bpt id=\"p35\">__</bpt>part-m-<ept id=\"p35\">__</ept><ph id=\"ph34\"/> and end with a number indicating the first, second, etc. file.",
          "pos": [
            164,
            327
          ]
        },
        {
          "content": "Use the following to view the output:",
          "pos": [
            328,
            365
          ]
        }
      ]
    },
    {
      "pos": [
        8500,
        8550
      ],
      "content": "The output should appear similar to the following:"
    },
    {
      "pos": [
        8637,
        8923
      ],
      "content": "The SimpleShortestPathComputation example is hard coded to start with object ID 1 and find the shortest path to other objects. So the output should be read as <ph id=\"ph35\">`destination_id distance`</ph>, where distance is the value (or weight) of the edges traveled between object ID 1 and the target ID.",
      "nodes": [
        {
          "content": "The SimpleShortestPathComputation example is hard coded to start with object ID 1 and find the shortest path to other objects.",
          "pos": [
            0,
            126
          ]
        },
        {
          "content": "So the output should be read as <ph id=\"ph35\">`destination_id distance`</ph>, where distance is the value (or weight) of the edges traveled between object ID 1 and the target ID.",
          "pos": [
            127,
            305
          ]
        }
      ]
    },
    {
      "pos": [
        8929,
        9230
      ],
      "content": "Visualizing this, you can verify the results by traveling the shortest paths between ID 1 and all other objects. Note that the shortest path between ID 1 and ID 4 is 5. This is the total distance between <ph id=\"ph36\">&lt;span style=\"color:orange\"&gt;</ph>ID 1 and 3<ph id=\"ph37\">&lt;/span&gt;</ph>, and then <ph id=\"ph38\">&lt;span style=\"color:red\"&gt;</ph>ID 3 and 4<ph id=\"ph39\">&lt;/span&gt;</ph>.",
      "nodes": [
        {
          "content": "Visualizing this, you can verify the results by traveling the shortest paths between ID 1 and all other objects.",
          "pos": [
            0,
            112
          ]
        },
        {
          "content": "Note that the shortest path between ID 1 and ID 4 is 5.",
          "pos": [
            113,
            168
          ]
        },
        {
          "content": "This is the total distance between <ph id=\"ph36\">&lt;span style=\"color:orange\"&gt;</ph>ID 1 and 3<ph id=\"ph37\">&lt;/span&gt;</ph>, and then <ph id=\"ph38\">&lt;span style=\"color:red\"&gt;</ph>ID 3 and 4<ph id=\"ph39\">&lt;/span&gt;</ph>.",
          "pos": [
            169,
            401
          ]
        }
      ]
    },
    {
      "pos": [
        9236,
        9370
      ],
      "content": "<ph id=\"ph40\">![</ph>Drawing of objects as circles with shortest paths drawn between<ph id=\"ph41\">](./media/hdinsight-hadoop-giraph-install-linux/giraph-graph-out.png)</ph>"
    },
    {
      "pos": [
        9376,
        9386
      ],
      "content": "Next steps"
    },
    {
      "pos": [
        9390,
        9609
      ],
      "content": "<bpt id=\"p36\">[</bpt>Install and use Hue on HDInsight clusters<ept id=\"p36\">](hdinsight-hadoop-hue-linux.md)</ept>. Hue is a web UI that makes it easy to create, run and save Pig and Hive jobs, as well as browse the default storage for your HDInsight cluster.",
      "nodes": [
        {
          "content": "<bpt id=\"p36\">[</bpt>Install and use Hue on HDInsight clusters<ept id=\"p36\">](hdinsight-hadoop-hue-linux.md)</ept>.",
          "pos": [
            0,
            115
          ]
        },
        {
          "content": "Hue is a web UI that makes it easy to create, run and save Pig and Hive jobs, as well as browse the default storage for your HDInsight cluster.",
          "pos": [
            116,
            259
          ]
        }
      ]
    },
    {
      "pos": [
        9613,
        9953
      ],
      "content": "<bpt id=\"p37\">[</bpt>Install and use Spark on HDInsight clusters<ept id=\"p37\">](hdinsight-hadoop-spark-install-linux.md)</ept>: Instructions on how to use cluster customization to install and use Spark on HDInsight Hadoop clusters. Spark is an open-source parallel processing framework that supports in-memory processing to boost the performance of big-data analytic applications.",
      "nodes": [
        {
          "content": "<bpt id=\"p37\">[</bpt>Install and use Spark on HDInsight clusters<ept id=\"p37\">](hdinsight-hadoop-spark-install-linux.md)</ept>: Instructions on how to use cluster customization to install and use Spark on HDInsight Hadoop clusters.",
          "pos": [
            0,
            231
          ]
        },
        {
          "content": "Spark is an open-source parallel processing framework that supports in-memory processing to boost the performance of big-data analytic applications.",
          "pos": [
            232,
            380
          ]
        }
      ]
    },
    {
      "pos": [
        9957,
        10408
      ],
      "content": "<bpt id=\"p38\">[</bpt>Install R on HDInsight clusters<ept id=\"p38\">](hdinsight-hadoop-r-scripts-linux.md)</ept>: Instructions on how to use cluster customization to install and use R on HDInsight Hadoop clusters. R is an open-source language and environment for statistical computing. It provides hundreds of built-in statistical functions and its own programming language that combines aspects of functional and object-oriented programming. It also provides extensive graphical capabilities.",
      "nodes": [
        {
          "content": "<bpt id=\"p38\">[</bpt>Install R on HDInsight clusters<ept id=\"p38\">](hdinsight-hadoop-r-scripts-linux.md)</ept>: Instructions on how to use cluster customization to install and use R on HDInsight Hadoop clusters.",
          "pos": [
            0,
            211
          ]
        },
        {
          "content": "R is an open-source language and environment for statistical computing.",
          "pos": [
            212,
            283
          ]
        },
        {
          "content": "It provides hundreds of built-in statistical functions and its own programming language that combines aspects of functional and object-oriented programming.",
          "pos": [
            284,
            440
          ]
        },
        {
          "content": "It also provides extensive graphical capabilities.",
          "pos": [
            441,
            491
          ]
        }
      ]
    },
    {
      "pos": [
        10412,
        10631
      ],
      "content": "<bpt id=\"p39\">[</bpt>Install Solr on HDInsight clusters<ept id=\"p39\">](hdinsight-hadoop-solr-install-linux.md)</ept>. Use cluster customization to install Solr on HDInsight Hadoop clusters. Solr allows you to perform powerful search operations on data stored.",
      "nodes": [
        {
          "content": "<bpt id=\"p39\">[</bpt>Install Solr on HDInsight clusters<ept id=\"p39\">](hdinsight-hadoop-solr-install-linux.md)</ept>.",
          "pos": [
            0,
            117
          ]
        },
        {
          "content": "Use cluster customization to install Solr on HDInsight Hadoop clusters.",
          "pos": [
            118,
            189
          ]
        },
        {
          "content": "Solr allows you to perform powerful search operations on data stored.",
          "pos": [
            190,
            259
          ]
        }
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Install and use Giraph on Linux-based HDInsight (Hadoop) | Microsoft Azure\"\n    description=\"Learn how to install Giraph on Linux-based HDInsight clusters using Script Actions. Script Actions allow you to customize the cluster during creation, by changing cluster configuration or installing services and utilities.\"\n    services=\"hdinsight\"\n    documentationCenter=\"\"\n    authors=\"Blackmist\"\n    manager=\"paulettm\"\n    editor=\"cgronlun\"\n    tags=\"azure-portal\"/>\n\n<tags\n    ms.service=\"hdinsight\"\n    ms.workload=\"big-data\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"02/05/2016\"\n    ms.author=\"larryfr\"/>\n\n# Install Giraph on HDInsight Hadoop clusters, and use Giraph to process large-scale graphs\n\nYou can install Giraph on any type of cluster in Hadoop on Azure HDInsight by using **Script Action** cluster customization. Script Action lets you run scripts to customize a cluster, only when the cluster is being created. For more information, see [Customize HDInsight clusters using Script Action](hdinsight-hadoop-customize-cluster-linux.md).\n\nIn this topic, you will learn how to install Giraph by using Script Action. Once you have installed Giraph, you'll also learn how to use Giraph for most typical applications, which is to process large-scale graphs.\n\n> [AZURE.NOTE] The information in this article is specific to Linux-based HDInsight clusters. For information on working with Windows-based clusters, see [Install Giraph on HDInsight Hadoop clusters (Windows)](hdinsight-hadoop-giraph-install.md)\n\n## <a name=\"whatis\"></a>What is Giraph?\n\n[Apache Giraph](http://giraph.apache.org/) allows you to perform graph processing by using Hadoop, and can be used with Azure HDInsight. Graphs model relationships between objects, such as the connections between routers on a large network like the Internet, or relationships between people on social networks (sometimes referred to as a social graph). Graph processing allows you to reason about the relationships between objects in a graph, such as:\n\n- Identifying potential friends based on your current relationships.\n- Identifying the shortest route between two computers in a network.\n- Calculating the page rank of webpages.\n\n##What the script does\n\nThis script performs the following actions:\n\n* Installs Giraph to `/usr/hdp/current/giraph`\n* Copies the `giraph-examples.jar` file to default storage (WASB) for your cluster: `/example/jars/giraph-examples.jar`\n\n## <a name=\"install\"></a>Install Giraph using Script Actions\n\nA sample script to install Giraph on an HDInsight cluster is available from a read-only Azure storage blob at [https://hdiconfigactions.blob.core.windows.net/linuxgiraphconfigactionv01/giraph-installer-v01.sh](https://hdiconfigactions.blob.core.windows.net/linuxgiraphconfigactionv01/giraph-installer-v01.sh). This section provides instructions on how to use the sample script while creating the cluster by using the Azure Classic Portal.\n\n> [AZURE.NOTE] You can also use Azure PowerShell or the HDInsight .NET SDK to create a cluster using this script. For more information on using these methods, see [Customize HDInsight clusters with Script Actions](hdinsight-hadoop-customize-cluster-linux.md).\n\n1. Start creating a cluster by using the steps in [Create Linux-based HDInsight clusters](hdinsight-provision-linux-clusters.md#portal), but do not complete creation.\n\n2. On the **Optional Configuration** blade, select **Script Actions**, and provide the information below:\n\n    * __NAME__: Enter a friendly name for the script action.\n    * __SCRIPT URI__: https://hdiconfigactions.blob.core.windows.net/linuxgiraphconfigactionv01/giraph-installer-v01.sh\n    * __HEAD__: Check this option\n    * __WORKER__: Check this option\n    * __ZOOKEEPER__: Check this option to install on the Zookeeper node.\n    * __PARAMETERS__: Leave this field blank\n\n3. At the bottom of the **Script Actions**, use the **Select** button to save the configuration. Finally, use the **Select** button at the bottom of the **Optional Configuration** blade to save the optional configuration information.\n\n4. Continue creating the cluster as described in [Create Linux-based HDInsight clusters](hdinsight-hadoop-create-linux-clusters-portal.md).\n\n## <a name=\"usegiraph\"></a>How do I use Giraph in HDInsight?\n\nOnce the cluster has finished creating, use the following steps to run the SimpleShortestPathsComputation example included with Giraph. This implements the basic <a href = \"http://people.apache.org/~edwardyoon/documents/pregel.pdf\">Pregel</a> implementation for finding the shortest path between objects in a graph.\n\n1. Connect to the HDInsight cluster using SSH:\n\n        ssh USERNAME@CLUSTERNAME-ssh.azurehdinsight.net\n\n    For more information on using SSH with HDInsight, see the following:\n\n    * [Use SSH with Linux-based Hadoop on HDInsight from Linux, Unix, or OS X](hdinsight-hadoop-linux-use-ssh-unix.md)\n\n    * [Use SSH with Linux-based Hadoop on HDInsight from Windows](hdinsight-hadoop-linux-use-ssh-windows.md)\n\n1. Use the following to create a new file named __tiny_graph.txt__:\n\n        nano tiny_graph.txt\n\n    Use the following as the contents of this file:\n\n        [0,0,[[1,1],[3,3]]]\n        [1,0,[[0,1],[2,2],[3,1]]]\n        [2,0,[[1,2],[4,4]]]\n        [3,0,[[0,3],[1,1],[4,4]]]\n        [4,0,[[3,4],[2,4]]]\n\n    This data describes a relationship between objects in a directed graph, by using the format [source\\_id, source\\_value,[[dest\\_id], [edge\\_value],...]]. Each line represents a relationship between a **source\\_id** object and one or more **dest\\_id** objects. The **edge\\_value** (or weight) can be thought of as the strength or distance of the connection between **source_id** and **dest\\_id**.\n\n    Drawn out, and using the value (or weight) as the distance between objects, the above data might look like this:\n\n    ![tiny_graph.txt drawn as circles with lines of varying distance between](./media/hdinsight-hadoop-giraph-install-linux/giraph-graph.png)\n\n2. To save the file, use __Ctrl+X__, then __Y__, and finally __Enter__ to accept the file name.\n\n3. Use the following to store the data into primary storage for your HDInsight cluster:\n\n        hadoop fs -copyFromLocal tiny_graph.txt /example/data/tiny_graph.txt\n\n3. Use the following to get the fully qualified domain name (FQDN) of the cluster head node:\n\n        hostname -f\n        \n4. Run the SimpleShortestPathsComputation example using the following command. Replace __HEADNODE__ with the FQDN returned from the previous step:\n\n         hadoop jar /usr/hdp/current/giraph/giraph-examples.jar org.apache.giraph.GiraphRunner org.apache.giraph.examples.SimpleShortestPathsComputation -ca mapred.job.tracker=HEADNODE:9010 -vif org.apache.giraph.io.formats.JsonLongDoubleFloatDoubleVertexInputFormat -vip /example/data/tiny_graph.txt -vof org.apache.giraph.io.formats.IdWithValueTextOutputFormat -op /example/output/shortestpaths -w 2\n\n    The parameters used with this command are described in the following table.\n\n    | Parameter | What it does |\n    | --------- | ------------ |\n    | `jar /usr/hdp/current/giraph/giraph-examples.jar` | The jar file containing the examples. |\n    | `org.apache.giraph.GiraphRunner` | The class used to start the examples. |\n    | `org.apache.giraph.examples.SimpleShortestPathsCoputation` | The example that will be ran. In this case, it will compute the shortest path between ID 1 and all other IDs in the graph. |\n    | `-ca mapred.job.tracker=HEADNODE:9010` | The headnode for the cluster. |\n    | `-vif org.apache.giraph.io.formats.JsonLongDoubleFloatDoubleVertexInputFromat` | The input format to use for the input data. |\n    | `-vip /example/data/tiny_graph.txt` | The input data file. |\n    | `-vof org.apache.giraph.io.formats.IdWithValueTextOutputFormat` | The output format. In this case, ID and value as plain text. |\n    | `-op /example/output/shortestpaths` | The output location. |\n    | `-w 2` | The number of workers to use. In this case, 2. |\n\n    For more information on these, and other parameters used with Giraph samples, see the [Giraph quickstart](http://giraph.apache.org/quick_start.html).\n\n5. Once the job has finished, the results will be stored in the __wasb:///example/out/shotestpaths__ directory. The files created will begin with __part-m-__ and end with a number indicating the first, second, etc. file. Use the following to view the output:\n\n        hadoop fs -text /example/output/shortestpaths/*\n\n    The output should appear similar to the following:\n\n        0   1.0\n        4   5.0\n        2   2.0\n        1   0.0\n        3   1.0\n\n    The SimpleShortestPathComputation example is hard coded to start with object ID 1 and find the shortest path to other objects. So the output should be read as `destination_id distance`, where distance is the value (or weight) of the edges traveled between object ID 1 and the target ID.\n\n    Visualizing this, you can verify the results by traveling the shortest paths between ID 1 and all other objects. Note that the shortest path between ID 1 and ID 4 is 5. This is the total distance between <span style=\"color:orange\">ID 1 and 3</span>, and then <span style=\"color:red\">ID 3 and 4</span>.\n\n    ![Drawing of objects as circles with shortest paths drawn between](./media/hdinsight-hadoop-giraph-install-linux/giraph-graph-out.png)\n\n\n## Next steps\n\n- [Install and use Hue on HDInsight clusters](hdinsight-hadoop-hue-linux.md). Hue is a web UI that makes it easy to create, run and save Pig and Hive jobs, as well as browse the default storage for your HDInsight cluster.\n\n- [Install and use Spark on HDInsight clusters](hdinsight-hadoop-spark-install-linux.md): Instructions on how to use cluster customization to install and use Spark on HDInsight Hadoop clusters. Spark is an open-source parallel processing framework that supports in-memory processing to boost the performance of big-data analytic applications.\n\n- [Install R on HDInsight clusters](hdinsight-hadoop-r-scripts-linux.md): Instructions on how to use cluster customization to install and use R on HDInsight Hadoop clusters. R is an open-source language and environment for statistical computing. It provides hundreds of built-in statistical functions and its own programming language that combines aspects of functional and object-oriented programming. It also provides extensive graphical capabilities.\n\n- [Install Solr on HDInsight clusters](hdinsight-hadoop-solr-install-linux.md). Use cluster customization to install Solr on HDInsight Hadoop clusters. Solr allows you to perform powerful search operations on data stored.\n"
}