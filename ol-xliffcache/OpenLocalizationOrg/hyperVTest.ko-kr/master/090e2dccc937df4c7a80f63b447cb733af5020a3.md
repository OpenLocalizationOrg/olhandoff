ms입니다. ContentId: 5bbac9eb-c31e-40db-97b1-f33ea59ac3a3
제목: 진행 중인 작업

#진행 중인 작업

여기서 해결 하 여 문제를 참조 하지 않거나 질문이 하지 않는 경우에 게시 된 [포럼](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).

-----------------------


##일반 기능

###Windows 컨테이너 이미지 컨테이너 호스트를 정확히 일치 해야 합니다.

Windows 서버 컨테이너를 빌드하고 패치 수준 점에서 컨테이너 호스트와 일치 하는 운영 체제 이미지를 필요 합니다.
불일치가는 컨테이너 및/또는 호스트에 대 한 불안정 하거나 예상 하지 못한 동작이 발생 합니다.

Windows 컨테이너에 대 한 업데이트를 설치 하는 경우 호스트 OS가 일치 하는 업데이트를 컨테이너 기본 OS 이미지를 업데이트 해야 합니다.


**해결 방법:**   
다운로드 하 고 컨테이너 호스트의 운영 체제 버전과 패치 수준 일치 하는 컨테이너의 기본 이미지를 설치 합니다.


###산발적 명령 실패-다시 시도 하십시오.

이 테스트에서는 명령을 가끔 해야할 여러 번 실행할 수 있습니다.
다른 작업에 동일한 원칙이 적용 됩니다.
예, 새 파일을 만들고 나타나지 않는 경우 파일 접해 보십시오.

이 작업을 수행 해야하는 경우 알려주십시오 통해 [포럼](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).

** 해결: **  
빌드 스크립트 명령이 여러 번 시도할 수 있도록 합니다.
명령이 실패 하면 다시 시도 하십시오.

###모든 비-c: 드라이브에 자동으로 새 컨테이너에 매핑됩니다 /

모든 비-c: / 컨테이너 호스트에 드라이브를 사용할 수 있는 새로운 실행 중인 Windows 서버 컨테이너에 자동으로 매핑됩니다.

이 시점에서 자동으로 매핑된 드라이브는 임시 해결 하는 대로 선택적으로 폴더를 컨테이너에 매핑할 수 없는 방법이 있습니다.

** 해결: **  
보고서 갤 최선을 다하고 있습니다.
향후 여기에서 폴더를 공유 합니다.


###Windows Server 컨테이너는 매우 느리게 시작

컨테이너를 시작 30 초 이상 소요 되, 많은 중복 바이러스 검사 수행 될 수 있습니다.

많은 맬웨어 방지 솔루션, Windows Defender, 어쩌면 컨테이너 OS 이미지의 모든 OS 이진 파일 및 파일을 비롯 한 파일 컨테이너에 이미지를 불필요 하 게 스캔 등입니다.
이 게 새 컨테이너가 만들어지면와 맬웨어의 관점에서의 모든 "컨테이너의 파일" 유사 이전에 검색 되지 않은 새 파일에 발생 합니다.
따라서 프로세스 컨테이너 내에서 이러한 파일을 읽을 하려고 할 때 맬웨어 방지 구성 요소가 먼저 스캔할 파일에 대 한 액세스를 허용 하기 전에 합니다.
실제로 컨테이너 이미지 가져오거나 서버로 가져올 때 이러한 파일 검색 이미 했습니다.
나중에 미리 보기 새로운 인프라 구성 됩니다 Windows Defender를 비롯 하 여 맬웨어 방지 솔루션을 이러한 상황을 인식 하 고 여러 검색을 방지 하려면 적절 하 게 작동할 수 있습니다.

--------------------------


##네트워킹

###컨테이너 당 네트워크 구획의 수

이 릴리스에서 컨테이너 당 하나의 네트워크 구획을 지원합니다.
즉, 여러 네트워크 어댑터가 있는 컨테이너를 설정한 경우 각 어댑터에 동일한 네트워크 포트 액세스할 수 없습니다 (예: 인 및 192.168.0.2:80 동일한 컨테이너에 속하는).

** 해결: **  
여러 끝점을 컨테이너에 의해 노출 될 필요가 NAT 포트 매핑을 사용 합니다.

###Windows 컨테이너 Ip를 받고 있지 않으면

DHCP VM 스위치와 함께 windows server 컨테이너에 연결 하는 경우 컨테이너는 그렇지 않습니다는 IP wwhile 받을 컨테이너 호스트에 대 한 것이 같습니다.

컨테이너는 169.254를 가져옵니다.***. *** APIPA IP 주소입니다.

**해결 방법:**
이것이 커널 공유의 부작용입니다.
모든 컨테이너는 동일한 mac 주소를가지고 되 돌아와야 합니다.

MAC 주소 스푸핑 컨테이너 호스트에서 사용 하도록 설정 합니다.

PowerShell을 사용 하 여 수행할 수 있습니다.
```
Get-VMNetworkAdapter -VMName "[YourVMNameHere]"  | Set-VMNetworkAdapter -MacAddressSpoofing On
```

###파일 공유를 만드는 컨테이너에서 작동 하지 않음

현재 컨테이너 내에서 파일 공유를 만들 수는 없습니다.
실행 하는 경우 `net 공유` 다음과 같은 오류가 표시 됩니다.

```
The Server service is not started.

Is it OK to start it? (Y/N) [Y]: y
The Server service is starting.
The Server service could not be started.

A service specific error occurred: 2182.

More help is available by typing NET HELPMSG 3547.
```

** 해결: **
컨테이너에 파일을 복사 하려는 경우에 실행 하 여 라운드 다른 방법으로 사용할 수 있습니다 `사용 하 여 net` 컨테이너 내에서.
예:
```
net use S: \\your\sources\here /User:shareuser [yourpassword]
```

--------------------------


##응용 프로그램 호환성

응용 프로그램 호환성 정보를 중단 하기로 결정 mnay 질문에 대 한 응용 프로그램 작동과 Windows Server 컨테이너에서 작동 하지 않는 있으므로 [자체 문서](../reference/app_compat.md).

가장 일반적인 문제 중 일부 있는 여기도 합니다.

###WinRM은 Windows 서버 컨테이너에서 시작 되지 않음

WinRM 시작 하 고, 오류를 throw 및 다시 중지 합니다.
오류는 이벤트 로그에 로깅되지 않습니다.

**해결 방법:**
WMI를 사용 하 여 [RDP](#RemoteDesktopAccessOfContainers), 또는 Enter-pssession ContainerID

###DISM을 사용 하 여 컨테이너에는 IIS와 ASP.NET 4.5 또는 ASP.NET 3.5를 설치할 수 없습니다.

컨테이너의 ASPNET45 IIS 설치는 Windows Server 컨테이너 내 작동 하지 않습니다.
설치 진행 상태 스틱 95.5% 정도입니다.

``` PowerShell
Enable-WindowsOptionalFeature -Online -FeatureName IIS-ASPNET45
```

ASP.NET 4.5는 컨테이너에서 실행 하지 않는이 실패 합니다.

**해결 방법:**  
대신 IIS를 사용 하도록 웹 서버 역할을 설치 합니다.
ASP 5.0 작동 합니다.

``` PowerShell
Enable-WindowsOptionalFeature -Online -FeatureName Web-Server
```

참조는 [응용 프로그램 호환성 문서](../reference/app_compat.md) 어떤 응용 프로그램을 containerized 수에 대 한 자세한 내용은 합니다.

--------------------------



##Docker 관리

###기본적으로 보안 되지 않은 docker 클라이언트

이 시험판 docker 통신은를 찾을 위치를 알고 있는 경우에 public입니다.

###Windows Server 컨테이너와 작동 하지 않는 docker 명령

실패를 인식 하는 명령:

| **Docker 명령**| **실행 위치**| **오류**| **참고**|
|:-----|:-----|:-----|:-----|
| **docker 커밋**| 이미지| Docker는 컨테이너 실행이 중지 되 고 올바른 오류 메시지를 표시 하지 않습니다.| 중지 된 컨테이너 works를 커밋하고 있습니다.컨테이너를 실행 하기 위한: 최선을 다하고 갤:)|
| **docker 차이**| 데몬| 오류: windows graphdriver Changes()를 지원 하지 않습니다.| |
| **docker kill**| 컨테이너| 오류: 잘못 된 신호: KILL 오류: 컨테이너를 정지 하지 못했습니다:| |
| **docker 부하**| 이미지| 자동으로 실패| 하나는 오류가 발생 하지 않지만 이미지 로드 되지 않습니다.|
| **docker 일시 중지**| 컨테이너| 오류: Windows 컨테이너 일시 중지할 수 없습니다.하지 지원 될 수 있습니다.| |
| **docker 포트**| 컨테이너| | 없는 포트는 표시를 가져오는 것도 RDP를 수 있습니다.
| **docker 끌어오기**| 데몬| 오류: 시스템 파일 경로 찾을 수 없습니다.우리가이 이미지를 사용 하 여 실행할 수 없음 컨테이너입니다.| 이미지를 추가 하기는 사용할 수 없습니다.최선을 다하고 갤:)|
| **docker 다시 시작**| 컨테이너| 오류: 시스템 종료 진행중에서입니다.| |
| **docker 일시 중지를 해제합니다**| 컨테이너| | 일시 중지 아직 작동 하지 않으므로 테스트할 수 없습니다.|
이에 없는 모든 항목 목록 실패 (또는 경우 명령이 실패 예상 다르게) 알려주십시오 하는 경우이 통해 알고 [포럼](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).



###부분적으로 Windows 서버 컨테이너에서 작동 하는 docker 명령

부분 기능으로는 명령:

| **Docker 명령**| **실행 하는 중...**| **매개 변수**| **참고**|
|:-----|:-----|:-----|:-----|
| **docker 연결**| 컨테이너| -아니요 stdin = false| 때 명령을 종료 하지 않는 Ctrl-P 및 Q CTRL 눌려질|
| | | -sig 프록시 = true| 작동 하는|
| **docker 빌드**| 이미지| -f,--파일| 오류: 컨텍스트를 준비할 수 없습니다: synlinks를 가져올 수 없습니다.|
| | | -force rm = false| 작동 하는|
| | | -캐시 없음 = false| 작동 하는|
| | | -q,--quiet = false| |
| | | -rm = true| 작동 하는|
| | | -t,--태그 = ""| 작동 하는|
| **docker 로그인**| 데몬| -e-p,-u| sporratic 동작|
| **docker 푸시**| 데몬| | 가끔 가져오기 "리포지토리 종료 하지 않습니다." 오류입니다.|
| **docker rm**| 컨테이너| -f| 오류: 시스템 종료 진행중에서입니다.|
이 목록에 없는 오류가 발생 하면, 실패 한 명령이 예상과 다르게 또는 해결을 찾을 경우 알려주십시오 통해 [포럼](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).


###50 자로 제한 됩니다 명령을 대화형 Docker 세션에 붙여 넣는 방법

대화형 Docker 세션에는 명령줄을 복사 하는 경우 현재 50 자로 제한 됩니다.
단순히 붙여넣은 문자열이 잘립니다.

이 작업이 실패 하지, 노력 하 고 제한을 떼지에 합니다.

###net 사용 하 여 사용자 이름 또는 암호에 대 한 메시지를 표시 하는 대신 1223 시스템 오류를 반환 합니다.

해결 방법: net 사용 하 여 실행할 때 사용자 이름과 암호를 모두를 지정 합니다.
예:
```
net use S: \\your\sources\here /User:shareuser [yourpassword]
```

###새 컨테이너 이미지를 만들 때 HCS Shim 오류

다음과 같은 오류 메시지 발생 하는 경우:
```
hcsshim::ExportLayer - Win32 API call returned error r1=2147942523 err=The filename, directory name, or volume label syntax is incorrect. layerId=606a2c430fccd1091b9ad2f930bae009956856cf4e6c66062b188aac48aa2e34 flavour=1 folder=C:\ProgramData\docker\windowsfilter\606a2c430fccd1091b9ad2f930bae009956856cf4e6c66062b188aac48aa2e34-1868857733
```

0 일 패치에 대 한 Windows Server 2016 TP3가 주소를 지정 하는 문제에 도달 하 있습니다.
이 오류는 Python 3.4.3.msi 설치 관리자 또는 노드 v0.12.7.msi 컨테이너에서 실행 하는 경우에 발생할 수 있습니다.

다른 hcsshim 오류를 발생 하면 알려주십시오 통해 [포럼](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).


##원격 데스크톱을 사용 하는 windows 서버 컨테이너에 액세스

Windows Server 컨테이너 관리/작용할 RDP 세션을 통해 될 수 있습니다.

다음 단계에 RDP를 사용 하 여 Windows 서버 컨테이너를 원격으로 연결할 필요 합니다.
컨테이너는 NAT 스위치를 통해 네트워크에 연결 되어 있는지 간주 됩니다.
설치 스크립트 또는 Azure에서 새 VM을 만들어 통해 컨테이너 호스트를 설정할 때 이것이 기본값입니다.

**에 연결 하려는 컨테이너에서 **

다음 단계를 수행 하려면 관리 Docker를 사용 하 여 또는 PowerShell을 사용 하는 경우를 지정 하는 컨테이너 중 하나는 `-RunAsAdministrator` 컨테이너에 연결할 때 전환 합니다.
에 연결 하려면 컨테이너의 다음 단계를 수행 하십시오.

1. 컨테이너의 IP 주소 가져오기

  ```
  ipconfig
  ```

이와 유사한 반환합니다.

  ```
  Windows IP Configuration

  Ethernet adapter vEthernet (Virtual Switch-f758a5a9519e1956cc3bef06eb03e5728d3fb61cf6d310246185587be490210a-0):

  Connection-specific DNS Suffix  . :
  Link-local IPv6 Address . . . . . : fe80::91cd:fb4c:4ea5:51df%17
  IPv4 Address. . . . . . . . . . . : 172.16.0.2
  Subnet Mask . . . . . . . . . . . : 255.240.0.0
  Default Gateway . . . . . . . . . : 172.16.0.1
  ```

형식 172.16.x.x 일반적으로 IPv4 주소를 note 하십시오

2. 컨테이너에 대 한 기본 제공 관리자가 사용자에 대 한 암호 설정

  ```
  net user administrator [yourpassword]
  ```

3. 컨테이너에 대 한 기본 제공 관리자가 사용자를 사용 하도록 설정

  ```
  net user administrator /active:yes
  ```

** 컨테이너 호스트에서 **

Windows Server는 기본적으로 사용 하는 고급 보안이 포함 된 Windows 방화벽 있으므로 작동 하려면 RDP에 대 한 순서 대로 통신에 대 한 일부 포트를 열어야 해야 합니다.
또한 컨테이너는 컨테이너 호스트에서 포트를 통해 연결할 수 있도록 포트 매핑을 생성 됩니다.

다음 단계는 PowerShell 컨테이너 호스트에서 관리자 권한으로 실행 해야 합니다.

1. 기본 Windows 고급 방화벽을 통해 RDP 포트를 허용

  ```
  New-NetFirewallRule -Name "RDP" -DisplayName "Remote Desktop Protocol" -Protocol TCP -LocalPort @(3389) -Action Allow
  ```

2. 컨테이너에 RDP 연결에 대 한 추가 포트를 허용 합니다.

  ```
  New-NetFirewallRule -Name "ContainerRDP" -DisplayName "RDP Port for connecting to Container" -Protocol TCP -LocalPort @(3390) -Action Allow
  ```

이 단계는 호스트의 포트 3390에 컨테이너를 엽니다.
컨테이너에 대 한 RDP 세션을 열려면 사용 됩니다.
여러 컨테이너에 연결 하려는 경우 추가 포트 번호를 제공 하는 동안이 단계를 반복할 수 있습니다.

3. 기존 NAT에 대 한 포트 매핑을 추가합니다
   
   이 단계에서는 컨테이너 내에서 1 단계에서 IP 주소 필요

  ```
  Add-NetNatStaticMapping -NatName ContainerNAT -Protocol TCP -ExternalPort 3390 -ExternalIPAddress 0.0.0.0 -InternalPort 3389 -InternalIPAddress [your container IP]
  ```

여기서 실행 되도록 하기 3390 포트에서 들어오는 컨테이너 호스트로 통신 포트 3389 컨테이너에 리디렉션됩니다 지정 하는 IP 주소에 있습니다.

** RDP 통해 컨테이너에 연결 합니다. **

마지막으로 RDP를 사용 하 여 컨테이너에 연결할 수 있습니다.
파일을 수집 하려면 원격 데스크톱 클라이언트에 있는 시스템에서 다음 명령을 실행 하십시오 (예: 컨테이너 호스트 VM을 실행 하 여 시스템)를 설치 합니다.

```
mstsc /v:[ContainerHostIP]:3390 /prompt
```

지정 하십시오 `관리자` 사용자 이름과 암호는 암호와 선택한으로 합니다.

인증서 오류와 관계 없이 시스템에 연결할 것인지 요청 원격 데스크톱 연결 합니다.
"Yes"을 선택 하면 RDP 연결이 열립니다.

**참고:** 로그 오프 컨테이너를 종료 하지 못할 수 있습니다 없이 컨테이너 RDP 세션을 종료 합니다.
컨테이너를 종료 하기 전에 ("exit" 또는 방금 RDP 창을 닫으면) 하는 대신 "로그 오프"를 입력 하 여 RDP 세션을 종료 하려면 있는지 확인 하십시오.

--------------------------


##PowerShell 관리

###Enter-pssession containerid 인수가, New-pssession 하지 않습니다.

이 맞습니다.
계획 전체 cimsession 지원에 나중에 있습니다.


음성 기능 요청에서 자유롭게 [포럼](https://social.msdn.microsoft.com/Forums/en-US/home?forum=windowscontainers).

--------------------------

[컨테이너 홈으로 돌아가기](../containers_welcome.md)



