{
  "nodes": [
    {
      "content": "Using the DB2 Connector in Microsoft Azure App Service | Microsoft Azure",
      "pos": [
        26,
        98
      ]
    },
    {
      "content": "How to use the DB2 Connector with Logic App triggers and actions",
      "pos": [
        116,
        180
      ]
    },
    {
      "content": "DB2 Connector",
      "pos": [
        504,
        517
      ]
    },
    {
      "content": "Microsoft Connector for DB2 is an API app for connecting applications through Azure App Service to resources stored in an IBM DB2 database.",
      "pos": [
        519,
        658
      ]
    },
    {
      "content": "Connector includes a Microsoft Client to connect to remote DB2 server computers across a TCP/IP network connection, including Azure hybrid connections to on-premises DB2 servers using the Azure Service Bus Relay.",
      "pos": [
        659,
        871
      ]
    },
    {
      "content": "Connector supports the following database operations:",
      "pos": [
        872,
        925
      ]
    },
    {
      "content": "Read rows using SELECT",
      "pos": [
        929,
        951
      ]
    },
    {
      "content": "Poll to read rows using SELECT COUNT followed by SELECT",
      "pos": [
        954,
        1009
      ]
    },
    {
      "content": "Add one row or multiple (bulk) rows using INSERT",
      "pos": [
        1012,
        1060
      ]
    },
    {
      "content": "Alter one row or multiple (bulk) rows using UPDATE",
      "pos": [
        1063,
        1113
      ]
    },
    {
      "content": "Remove one row or multiple (bulk) rows using DELETE",
      "pos": [
        1116,
        1167
      ]
    },
    {
      "content": "Read to alter rows using SELECT CURSOR followed by UPDATE WHERE CURRENT OF CURSOR",
      "pos": [
        1170,
        1251
      ]
    },
    {
      "content": "Read to remove rows using SELECT CURSOR followed by UPDATE WHERE CURRENT OF CURSOR",
      "pos": [
        1254,
        1336
      ]
    },
    {
      "content": "Run procedure with input and output parameters, return value, resultset, using CALL",
      "pos": [
        1339,
        1422
      ]
    },
    {
      "content": "Custom commands and composite operations using SELECT, INSERT, UPDATE, DELETE",
      "pos": [
        1425,
        1502
      ]
    },
    {
      "content": "Triggers and Actions",
      "pos": [
        1507,
        1527
      ]
    },
    {
      "content": "Connector supports the following Logic app triggers and actions:",
      "pos": [
        1528,
        1592
      ]
    },
    {
      "content": "Triggers",
      "pos": [
        1594,
        1602
      ]
    },
    {
      "content": "Actions",
      "pos": [
        1605,
        1612
      ]
    },
    {
      "content": "Poll Data",
      "pos": [
        1631,
        1640
      ]
    },
    {
      "content": "Bulk Insert",
      "pos": [
        1661,
        1672
      ]
    },
    {
      "content": "Insert",
      "pos": [
        1681,
        1687
      ]
    },
    {
      "content": "Bulk Update",
      "pos": [
        1696,
        1707
      ]
    },
    {
      "content": "Update",
      "pos": [
        1716,
        1722
      ]
    },
    {
      "content": "Call",
      "pos": [
        1731,
        1735
      ]
    },
    {
      "content": "Bulk Delete",
      "pos": [
        1744,
        1755
      ]
    },
    {
      "content": "Delete",
      "pos": [
        1764,
        1770
      ]
    },
    {
      "content": "Select",
      "pos": [
        1779,
        1785
      ]
    },
    {
      "content": "Conditional update",
      "pos": [
        1794,
        1812
      ]
    },
    {
      "content": "Post to EntitySet",
      "pos": [
        1821,
        1838
      ]
    },
    {
      "content": "Conditional delete",
      "pos": [
        1847,
        1865
      ]
    },
    {
      "content": "Select single entity",
      "pos": [
        1874,
        1894
      ]
    },
    {
      "content": "Delete",
      "pos": [
        1903,
        1909
      ]
    },
    {
      "content": "Upsert to EntitySet",
      "pos": [
        1918,
        1937
      ]
    },
    {
      "content": "Custom commands",
      "pos": [
        1946,
        1961
      ]
    },
    {
      "content": "Composite operations",
      "pos": [
        1970,
        1990
      ]
    },
    {
      "content": "Create the DB2 Connector",
      "pos": [
        2006,
        2030
      ]
    },
    {
      "content": "You can define a connector within a logic app or from the Azure Marketplace, like in the following example:",
      "pos": [
        2031,
        2138
      ]
    },
    {
      "pos": [
        2145,
        2193
      ],
      "content": "In the Azure startboard, select <bpt id=\"p1\">**</bpt>Marketplace<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        2197,
        2302
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Everything<ept id=\"p1\">**</ept> blade, type <bpt id=\"p2\">**</bpt>db2<ept id=\"p2\">**</ept> in the <bpt id=\"p3\">**</bpt>Search Everything<ept id=\"p3\">**</ept> box, and then click the enter key."
    },
    {
      "pos": [
        2306,
        2370
      ],
      "content": "In the search everything results pane, select <bpt id=\"p1\">**</bpt>DB2 Connector<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        2374,
        2432
      ],
      "content": "In the DB2 Connector description blade, select <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>."
    },
    {
      "content": "In the DB2 Connector package blade, enter the Name (e.g. \"Db2ConnectorNewOrders\"), App Service Plan, and other properties.",
      "pos": [
        2436,
        2558
      ]
    },
    {
      "pos": [
        2562,
        2632
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>Package settings<ept id=\"p1\">**</ept>, and enter the following package settings:"
    },
    {
      "content": "Name | Required |  Description",
      "pos": [
        2640,
        2670
      ]
    },
    {
      "content": "--- | --- | ---",
      "pos": [
        2671,
        2686
      ]
    },
    {
      "content": "ConnectionString | Yes | DB2 Client connection string (e.g., \"Network Address=servername;Network Port=50000;User ID=username;Password=password;Initial Catalog=SAMPLE;Package Collection=NWIND;Default Schema=NWIND\").",
      "pos": [
        2687,
        2901
      ]
    },
    {
      "content": "Tables | Yes | Comma separated list of table, view and alias names required for OData operations and to generate swagger documentation with examples (e.g. \"<bpt id=\"p1\">*</bpt>NEWORDERS<ept id=\"p1\">*</ept>\").",
      "pos": [
        2902,
        3072
      ]
    },
    {
      "content": "Procedures | Yes | Comma separated list of procedure and function names (e.g. \"SPORDERID\").",
      "pos": [
        3073,
        3164
      ]
    },
    {
      "content": "OnPremise | No | Deploy on-premises using Azure Service Bus Relay.",
      "pos": [
        3165,
        3231
      ]
    },
    {
      "content": "ServiceBusConnectionString | No | Azure Service Bus Relay connection string.",
      "pos": [
        3232,
        3308
      ]
    },
    {
      "content": "PollToCheckData | No | SELECT COUNT statement to use with a Logic app trigger (e.g. \"SELECT COUNT(\\*) FROM NEWORDERS WHERE SHIPDATE IS NULL\").",
      "pos": [
        3309,
        3451
      ]
    },
    {
      "content": "PollToReadData | No | SELECT statement to use with a Logic app trigger (e.g. \"SELECT \\* FROM NEWORDERS WHERE SHIPDATE IS NULL FOR UPDATE\").",
      "pos": [
        3452,
        3591
      ]
    },
    {
      "content": "PollToAlterData | No | UPDATE or DELETE statement to use with a Logic app trigger (e.g. \"UPDATE NEWORDERS SET SHIPDATE = CURRENT DATE WHERE CURRENT OF &amp;lt;CURSOR&amp;gt;\").",
      "pos": [
        3592,
        3760
      ]
    },
    {
      "pos": [
        3765,
        3807
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>, and then Select <bpt id=\"p2\">**</bpt>Create<ept id=\"p2\">**</ept>."
    },
    {
      "content": "When complete, the Package Settings look similar to the following:",
      "pos": [
        3811,
        3877
      ]
    },
    {
      "content": "Logic App with DB2 Connector Action to Add Data",
      "pos": [
        3892,
        3939
      ]
    },
    {
      "content": "You can define a Logic app action to add data to a DB2 table using an API Insert or Post to Entity OData operation.",
      "pos": [
        3943,
        4058
      ]
    },
    {
      "content": "For example, you can insert a new customer order record, by processing a SQL INSERT statement against a table defined with an identity column, returning the identity value or the rows affected to the Logic app (SELECT ORDID FROM FINAL TABLE (INSERT INTO NWIND.NEWORDERS (CUSTID,SHIPNAME,SHIPADDR,SHIPCITY,SHIPREG,SHIPZIP) VALUES (?,?,?,?,?,?))).",
      "pos": [
        4059,
        4404
      ]
    },
    {
      "pos": [
        4408,
        4531
      ],
      "content": "<ph id=\"ph1\">[AZURE.TIP]</ph> DB2 Connection \"<bpt id=\"p1\">*</bpt>Post to EntitySet<ept id=\"p1\">*</ept>\" returns the identity column value and \"<bpt id=\"p2\">*</bpt>API Insert<ept id=\"p2\">*</ept>\" returns rows affected"
    },
    {
      "pos": [
        4536,
        4628
      ],
      "content": "In the Azure startboard, select <bpt id=\"p1\">**</bpt>+<ept id=\"p1\">**</ept> (plus sign), <bpt id=\"p2\">**</bpt>Web + Mobile<ept id=\"p2\">**</ept>, and then <bpt id=\"p3\">**</bpt>Logic App<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        4632,
        4733
      ],
      "content": "Enter the Name (e.g. \"NewOrdersDb2\"), App Service Plan, other properties, and then select <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        4737,
        4849
      ],
      "content": "In the Azure startboard, select the Logic app you just created, <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept>, and then <bpt id=\"p2\">**</bpt>Triggers and actions<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        4853,
        4950
      ],
      "content": "In the Triggers and actions blade, select <bpt id=\"p1\">**</bpt>Create from Scratch<ept id=\"p1\">**</ept> within the Logic App Templates."
    },
    {
      "pos": [
        4954,
        5053
      ],
      "content": "In the API Apps panel, select <bpt id=\"p1\">**</bpt>Recurrence<ept id=\"p1\">**</ept>, set a frequency and interval, and then <bpt id=\"p2\">**</bpt>checkmark<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        5057,
        5168
      ],
      "content": "In the API Apps panel, select <bpt id=\"p1\">**</bpt>DB2 Connector<ept id=\"p1\">**</ept>, expand the operations list to select <bpt id=\"p2\">**</bpt>Insert into NEWORDER<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Expand the parameters list to enter the following values:",
      "pos": [
        5172,
        5229
      ]
    },
    {
      "content": "Name | Value",
      "pos": [
        5237,
        5249
      ]
    },
    {
      "content": "--- | ---",
      "pos": [
        5250,
        5259
      ]
    },
    {
      "content": "CUSTID | 10042",
      "pos": [
        5261,
        5275
      ]
    },
    {
      "content": "SHIPNAME | Lazy K Kountry Store",
      "pos": [
        5276,
        5307
      ]
    },
    {
      "content": "SHIPADDR | 12 Orchestra Terrace",
      "pos": [
        5309,
        5340
      ]
    },
    {
      "content": "SHIPCITY | Walla Walla",
      "pos": [
        5341,
        5363
      ]
    },
    {
      "content": "SHIPREG | WA",
      "pos": [
        5365,
        5377
      ]
    },
    {
      "content": "SHIPZIP | 99362",
      "pos": [
        5378,
        5393
      ]
    },
    {
      "pos": [
        5399,
        5471
      ],
      "content": "Select the <bpt id=\"p1\">**</bpt>checkmark<ept id=\"p1\">**</ept> to save the action settings, and then <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>."
    },
    {
      "content": "The settings should look as follows:",
      "pos": [
        5475,
        5511
      ]
    },
    {
      "pos": [
        5526,
        5620
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>All runs<ept id=\"p1\">**</ept> list under <bpt id=\"p2\">**</bpt>Operations<ept id=\"p2\">**</ept>, select the first-listed item (most recent run)."
    },
    {
      "pos": [
        5626,
        5711
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app run<ept id=\"p1\">**</ept> blade, select the <bpt id=\"p2\">**</bpt>ACTION<ept id=\"p2\">**</ept> item <bpt id=\"p3\">**</bpt>db2connectorneworders<ept id=\"p3\">**</ept>."
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app action<ept id=\"p1\">**</ept> blade, select the <bpt id=\"p2\">**</bpt>INPUTS LINK<ept id=\"p2\">**</ept>.",
      "pos": [
        5716,
        5778
      ]
    },
    {
      "content": "DB2 Connector uses the inputs to process a parameterized INSERT statement.",
      "pos": [
        5779,
        5853
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app action<ept id=\"p1\">**</ept> blade, select the <bpt id=\"p2\">**</bpt>OUTPUTS LINK<ept id=\"p2\">**</ept>.",
      "pos": [
        5858,
        5921
      ]
    },
    {
      "content": "The inputs should look as follows:",
      "pos": [
        5922,
        5956
      ]
    },
    {
      "content": "What you need to know",
      "pos": [
        5972,
        5993
      ]
    },
    {
      "content": "Connector truncates DB2 table names when forming Logic app action names.",
      "pos": [
        5997,
        6069
      ]
    },
    {
      "content": "For example, the operation <bpt id=\"p1\">**</bpt>Insert into NEWORDERS<ept id=\"p1\">**</ept> is truncated to <bpt id=\"p2\">**</bpt>Insert into NEWORDER<ept id=\"p2\">**</ept>.",
      "pos": [
        6070,
        6164
      ]
    },
    {
      "content": "After saving the Logic app <bpt id=\"p1\">**</bpt>Triggers and actions<ept id=\"p1\">**</ept>, Logic app processes the operation.",
      "pos": [
        6167,
        6254
      ]
    },
    {
      "content": "There may be a delay of a number of seconds (e.g. 3-5 seconds) before Logic app processes the operation.",
      "pos": [
        6255,
        6359
      ]
    },
    {
      "content": "Optionally, you can click <bpt id=\"p1\">**</bpt>Run Now<ept id=\"p1\">**</ept> to process the operation.",
      "pos": [
        6360,
        6423
      ]
    },
    {
      "content": "DB2 Connector defines EntitySet members with attributes, including whether the member corresponds to a DB2 column with a default or generated columns (e.g. identity).",
      "pos": [
        6426,
        6592
      ]
    },
    {
      "content": "Logic app displays a red asterisk next to the EntitySet member ID name, to denote DB2 columns that require values.",
      "pos": [
        6593,
        6707
      ]
    },
    {
      "content": "You should not enter a value for the ORDID member, which corresponds to DB2 identity column.",
      "pos": [
        6708,
        6800
      ]
    },
    {
      "content": "You may enter values for other optional members (ITEMS, ORDDATE, REQDATE, SHIPID, FREIGHT, SHIPCTRY), which correspond to DB2 columns with default values.",
      "pos": [
        6801,
        6955
      ]
    },
    {
      "content": "DB2 Connector returns to Logic app the response on the Post to EntitySet that includes the values for identity columns, which is derived from the DRDA SQLDARD (SQL Data Area Reply Data) on the prepared SQL INSERT statement.",
      "pos": [
        6959,
        7182
      ]
    },
    {
      "content": "DB2 server does not return the inserted values for columns with default values.",
      "pos": [
        7183,
        7262
      ]
    },
    {
      "content": "Logic App with DB2 Connector Action to Add Bulk Data",
      "pos": [
        7270,
        7322
      ]
    },
    {
      "content": "You can define a Logic app action to add data to a DB2 table using an API Bulk Insert operation.",
      "pos": [
        7326,
        7422
      ]
    },
    {
      "content": "For example, you can insert two new customer order records, by processing a SQL INSERT statement using an array of row values against a table defined with an identity column, returning the rows affected to the Logic app (SELECT ORDID FROM FINAL TABLE (INSERT INTO NWIND.NEWORDERS (CUSTID,SHIPNAME,SHIPADDR,SHIPCITY,SHIPREG,SHIPZIP) VALUES (?,?,?,?,?,?))).",
      "pos": [
        7423,
        7778
      ]
    },
    {
      "pos": [
        7783,
        7875
      ],
      "content": "In the Azure startboard, select <bpt id=\"p1\">**</bpt>+<ept id=\"p1\">**</ept> (plus sign), <bpt id=\"p2\">**</bpt>Web + Mobile<ept id=\"p2\">**</ept>, and then <bpt id=\"p3\">**</bpt>Logic App<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        7879,
        7984
      ],
      "content": "Enter the Name (e.g. \"NewOrdersBulkDb2\"), App Service Plan, other properties, and then select <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        7988,
        8100
      ],
      "content": "In the Azure startboard, select the Logic app you just created, <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept>, and then <bpt id=\"p2\">**</bpt>Triggers and actions<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        8104,
        8201
      ],
      "content": "In the Triggers and actions blade, select <bpt id=\"p1\">**</bpt>Create from Scratch<ept id=\"p1\">**</ept> within the Logic App Templates."
    },
    {
      "pos": [
        8205,
        8304
      ],
      "content": "In the API Apps panel, select <bpt id=\"p1\">**</bpt>Recurrence<ept id=\"p1\">**</ept>, set a frequency and interval, and then <bpt id=\"p2\">**</bpt>checkmark<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        8308,
        8419
      ],
      "content": "In the API Apps panel, select <bpt id=\"p1\">**</bpt>DB2 Connector<ept id=\"p1\">**</ept>, expand the operations list to select <bpt id=\"p2\">**</bpt>Bulk Insert into NEW<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Enter the <bpt id=\"p1\">**</bpt>rows<ept id=\"p1\">**</ept> value as an array.",
      "pos": [
        8423,
        8460
      ]
    },
    {
      "content": "For example, copy and paste the following:",
      "pos": [
        8461,
        8503
      ]
    },
    {
      "content": "Select the <bpt id=\"p1\">**</bpt>checkmark<ept id=\"p1\">**</ept> to save the action settings, and then <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>.",
      "pos": [
        8842,
        8914
      ]
    },
    {
      "content": "The settings should look as follows:",
      "pos": [
        8915,
        8951
      ]
    },
    {
      "pos": [
        8965,
        9058
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>All runs<ept id=\"p1\">**</ept> list under <bpt id=\"p2\">**</bpt>Operations<ept id=\"p2\">**</ept>, click the first-listed item (most recent run)."
    },
    {
      "pos": [
        9063,
        9121
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app run<ept id=\"p1\">**</ept> blade, click the <bpt id=\"p2\">**</bpt>ACTION<ept id=\"p2\">**</ept> item."
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app action<ept id=\"p1\">**</ept> blade, click the <bpt id=\"p2\">**</bpt>INPUTS LINK<ept id=\"p2\">**</ept>.",
      "pos": [
        9126,
        9187
      ]
    },
    {
      "content": "The outputs should look as follows:",
      "pos": [
        9188,
        9223
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app action<ept id=\"p1\">**</ept> blade, click the <bpt id=\"p2\">**</bpt>OUTPUTS LINK<ept id=\"p2\">**</ept>.",
      "pos": [
        9236,
        9298
      ]
    },
    {
      "content": "The outputs should look as follows:",
      "pos": [
        9299,
        9334
      ]
    },
    {
      "content": "What you need to know",
      "pos": [
        9350,
        9371
      ]
    },
    {
      "content": "Connector truncates DB2 table names when forming Logic app action names.",
      "pos": [
        9375,
        9447
      ]
    },
    {
      "content": "For example, the operation <bpt id=\"p1\">**</bpt>Bulk Insert into NEWORDERS<ept id=\"p1\">**</ept> is truncated to <bpt id=\"p2\">**</bpt>Bulk Insert into NEW<ept id=\"p2\">**</ept>.",
      "pos": [
        9448,
        9547
      ]
    },
    {
      "content": "By omitting identity columns (e.g. ORDID), nullable columns (e.g. SHIPDATE), and columns with default values (e.g. ORDDATE, REQDATE, SHIPID, FREIGHT, SHIPCTRY), DB2 database generates values.",
      "pos": [
        9550,
        9741
      ]
    },
    {
      "content": "By specifying \"today\" and \"tomorrow\", DB2 Connector generates \"CURRENT DATE\" and \"CURRENT DATE + 1 DAY\" functions (e.g. REQDATE).",
      "pos": [
        9744,
        9873
      ]
    },
    {
      "content": "Logic App with DB2 Connector Trigger to Read, Alter or Delete Data",
      "pos": [
        9880,
        9946
      ]
    },
    {
      "content": "You can define a Logic app trigger to poll and read data from a DB2 table using an API Poll Data composite operation.",
      "pos": [
        9950,
        10067
      ]
    },
    {
      "content": "For example, you can read one or more new customer order records, returning the records to the logic app.",
      "pos": [
        10068,
        10173
      ]
    },
    {
      "content": "The DB2 Connection package/app settings should look as follows:",
      "pos": [
        10174,
        10237
      ]
    },
    {
      "content": "--- | --- | ---",
      "pos": [
        10263,
        10278
      ]
    },
    {
      "content": "PollToCheckData | SELECT COUNT(\\*) FROM NEWORDERS WHERE SHIPDATE IS NULL",
      "pos": [
        10279,
        10351
      ]
    },
    {
      "content": "PollToReadData | SELECT \\* FROM NEWORDERS WHERE SHIPDATE IS NULL FOR UPDATE",
      "pos": [
        10352,
        10427
      ]
    },
    {
      "content": "PollToAlterData |",
      "pos": [
        10428,
        10445
      ]
    },
    {
      "content": "Also, you can define a Logic app trigger to poll, read and alter data in a DB2 table using an API Poll Data composite operation.",
      "pos": [
        10469,
        10597
      ]
    },
    {
      "content": "For example, you can read one or more new customer order records, update the row values, returning the selected (before update) records to the logic app.",
      "pos": [
        10598,
        10751
      ]
    },
    {
      "content": "The DB2 Connection package/app settings should look as follows:",
      "pos": [
        10752,
        10815
      ]
    },
    {
      "content": "--- | --- | ---",
      "pos": [
        10841,
        10856
      ]
    },
    {
      "content": "PollToCheckData | SELECT COUNT(\\*) FROM NEWORDERS WHERE SHIPDATE IS NULL",
      "pos": [
        10857,
        10929
      ]
    },
    {
      "content": "PollToReadData | SELECT \\* FROM NEWORDERS WHERE SHIPDATE IS NULL FOR UPDATE",
      "pos": [
        10930,
        11005
      ]
    },
    {
      "content": "PollToAlterData | UPDATE NEWORDERS SET SHIPDATE = CURRENT DATE WHERE CURRENT OF &amp;lt;CURSOR&amp;gt;",
      "pos": [
        11006,
        11100
      ]
    },
    {
      "content": "Further, you can define a Logic app trigger to poll, read and remove data from a DB2 table using an API Poll Data composite operation.",
      "pos": [
        11103,
        11237
      ]
    },
    {
      "content": "For example, you can read one or more new customer order records, delete the rows, returning the selected (before delete) records to the logic app.",
      "pos": [
        11238,
        11385
      ]
    },
    {
      "content": "The DB2 Connection package/app settings should look as follows:",
      "pos": [
        11386,
        11449
      ]
    },
    {
      "content": "--- | --- | ---",
      "pos": [
        11475,
        11490
      ]
    },
    {
      "content": "PollToCheckData | SELECT COUNT(\\*) FROM NEWORDERS WHERE SHIPDATE IS NULL",
      "pos": [
        11491,
        11563
      ]
    },
    {
      "content": "PollToReadData | SELECT \\* FROM NEWORDERS WHERE SHIPDATE IS NULL FOR UPDATE",
      "pos": [
        11564,
        11639
      ]
    },
    {
      "content": "PollToAlterData | DELETE NEWORDERS WHERE CURRENT OF &amp;lt;CURSOR&amp;gt;",
      "pos": [
        11640,
        11706
      ]
    },
    {
      "content": "In this example, Logic app will poll, read, update, and then re-read data in the DB2 table.",
      "pos": [
        11708,
        11799
      ]
    },
    {
      "pos": [
        11804,
        11896
      ],
      "content": "In the Azure startboard, select <bpt id=\"p1\">**</bpt>+<ept id=\"p1\">**</ept> (plus sign), <bpt id=\"p2\">**</bpt>Web + Mobile<ept id=\"p2\">**</ept>, and then <bpt id=\"p3\">**</bpt>Logic App<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        11900,
        12002
      ],
      "content": "Enter the Name (e.g. \"ShipOrdersDb2\"), App Service Plan, other properties, and then select <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        12006,
        12118
      ],
      "content": "In the Azure startboard, select the Logic app you just created, <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept>, and then <bpt id=\"p2\">**</bpt>Triggers and actions<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        12122,
        12219
      ],
      "content": "In the Triggers and actions blade, select <bpt id=\"p1\">**</bpt>Create from Scratch<ept id=\"p1\">**</ept> within the Logic App Templates."
    },
    {
      "pos": [
        12223,
        12325
      ],
      "content": "In the API Apps panel, select <bpt id=\"p1\">**</bpt>DB2 Connector<ept id=\"p1\">**</ept>, set a frequency and interval, and then <bpt id=\"p2\">**</bpt>checkmark<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        12329,
        12441
      ],
      "content": "In the API Apps panel, select <bpt id=\"p1\">**</bpt>DB2 Connector<ept id=\"p1\">**</ept>, expand the operations list to select <bpt id=\"p2\">**</bpt>Select from NEWORDERS<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Select the <bpt id=\"p1\">**</bpt>checkmark<ept id=\"p1\">**</ept> to save the action settings, and then <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>.",
      "pos": [
        12445,
        12517
      ]
    },
    {
      "content": "The settings should look as follows:",
      "pos": [
        12518,
        12554
      ]
    },
    {
      "pos": [
        12570,
        12668
      ],
      "content": "Click to close the <bpt id=\"p1\">**</bpt>Triggers and actions<ept id=\"p1\">**</ept> blade, and then click to close the <bpt id=\"p2\">**</bpt>Settings<ept id=\"p2\">**</ept> blade."
    },
    {
      "pos": [
        12672,
        12765
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>All runs<ept id=\"p1\">**</ept> list under <bpt id=\"p2\">**</bpt>Operations<ept id=\"p2\">**</ept>, click the first-listed item (most recent run)."
    },
    {
      "pos": [
        12770,
        12828
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app run<ept id=\"p1\">**</ept> blade, click the <bpt id=\"p2\">**</bpt>ACTION<ept id=\"p2\">**</ept> item."
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app action<ept id=\"p1\">**</ept> blade, click the <bpt id=\"p2\">**</bpt>OUTPUTS LINK<ept id=\"p2\">**</ept>.",
      "pos": [
        12833,
        12895
      ]
    },
    {
      "content": "The outputs should look as follows:",
      "pos": [
        12896,
        12931
      ]
    },
    {
      "content": "Logic App with DB2 Connector Action to Remove Data",
      "pos": [
        12947,
        12997
      ]
    },
    {
      "content": "You can define a Logic app action to remove data from a DB2 table using an API Delete or Post to Entity OData operation.",
      "pos": [
        13001,
        13121
      ]
    },
    {
      "content": "For example, you can insert a new customer order record, by processing a SQL INSERT statement against a table defined with an identity column, returning the identity value or the rows affected to the Logic app (SELECT ORDID FROM FINAL TABLE (INSERT INTO NWIND.NEWORDERS (CUSTID,SHIPNAME,SHIPADDR,SHIPCITY,SHIPREG,SHIPZIP) VALUES (?,?,?,?,?,?))).",
      "pos": [
        13122,
        13467
      ]
    },
    {
      "content": "Create Logic App using DB2 Connector to Remove Data",
      "pos": [
        13472,
        13523
      ]
    },
    {
      "content": "You can create a new Logic app from within the Azure Marketplace, and then use the DB2 Connector as an action to remove customer orders.",
      "pos": [
        13527,
        13663
      ]
    },
    {
      "content": "For example, you can use the DB2 Connector conditional Delete operation to process a SQL DELETE statement (DELETE FROM NEWORDERS WHERE ORDID &gt;= 10000).",
      "pos": [
        13664,
        13815
      ]
    },
    {
      "pos": [
        13820,
        13944
      ],
      "content": "In the hub menu of the Azure <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept> board, click <bpt id=\"p2\">**</bpt>+<ept id=\"p2\">**</ept> (plus sign), click <bpt id=\"p3\">**</bpt>Web + Mobile<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Logic App<ept id=\"p4\">**</ept>."
    },
    {
      "pos": [
        13949,
        14033
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Create logic app<ept id=\"p1\">**</ept> blade, type a <bpt id=\"p2\">**</bpt>Name<ept id=\"p2\">**</ept>, for example <bpt id=\"p3\">**</bpt>RemoveOrdersDb2<ept id=\"p3\">**</ept>."
    },
    {
      "content": "Select or define values for the other settings (e.g. service plan, resource group).",
      "pos": [
        14037,
        14120
      ]
    },
    {
      "content": "The settings should look as follows.",
      "pos": [
        14124,
        14160
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>:",
      "pos": [
        14161,
        14178
      ]
    },
    {
      "pos": [
        14194,
        14252
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> blade, click <bpt id=\"p2\">**</bpt>Triggers and actions<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        14256,
        14362
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Triggers and actions<ept id=\"p1\">**</ept> blade, in the <bpt id=\"p2\">**</bpt>Logic App Templates<ept id=\"p2\">**</ept> list, click <bpt id=\"p3\">**</bpt>Create from Scratch<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        14366,
        14480
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Triggers and actions<ept id=\"p1\">**</ept> blade, in the <bpt id=\"p2\">**</bpt>API Apps<ept id=\"p2\">**</ept> panel, within the resource group, click <bpt id=\"p3\">**</bpt>Recurrence<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        14484,
        14688
      ],
      "content": "On the Logic app design surface, click the <bpt id=\"p1\">**</bpt>Recurrence<ept id=\"p1\">**</ept> item, set a <bpt id=\"p2\">**</bpt>Frequency<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Interval<ept id=\"p3\">**</ept>, for example <bpt id=\"p4\">**</bpt>Days<ept id=\"p4\">**</ept> and <bpt id=\"p5\">**</bpt>1<ept id=\"p5\">**</ept>, and then click the <bpt id=\"p6\">**</bpt>checkmark<ept id=\"p6\">**</ept> to save the recurrence item settings."
    },
    {
      "pos": [
        14692,
        14809
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Triggers and actions<ept id=\"p1\">**</ept> blade, in the <bpt id=\"p2\">**</bpt>API Apps<ept id=\"p2\">**</ept> panel, within the resource group, click <bpt id=\"p3\">**</bpt>DB2 Connector<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        14814,
        14993
      ],
      "content": "On the Logic app design surface, click the <bpt id=\"p1\">**</bpt>DB2 Connector<ept id=\"p1\">**</ept> action item, click the ellipses (<bpt id=\"p2\">**</bpt>...<ept id=\"p2\">**</ept>) to expand the operations list, and then click <bpt id=\"p3\">**</bpt>Conditional delete from N<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        14998,
        15114
      ],
      "content": "On the DB2 Connector action item, type <bpt id=\"p1\">**</bpt>ORDID ge 10000<ept id=\"p1\">**</ept> for an <bpt id=\"p2\">**</bpt>expression that identifies a subset of entries<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Click the <bpt id=\"p1\">**</bpt>checkmark<ept id=\"p1\">**</ept> to save the action settings, and then click <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>.",
      "pos": [
        15119,
        15196
      ]
    },
    {
      "content": "The settings should look as follows:",
      "pos": [
        15197,
        15233
      ]
    },
    {
      "pos": [
        15250,
        15348
      ],
      "content": "Click to close the <bpt id=\"p1\">**</bpt>Triggers and actions<ept id=\"p1\">**</ept> blade, and then click to close the <bpt id=\"p2\">**</bpt>Settings<ept id=\"p2\">**</ept> blade."
    },
    {
      "pos": [
        15353,
        15446
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>All runs<ept id=\"p1\">**</ept> list under <bpt id=\"p2\">**</bpt>Operations<ept id=\"p2\">**</ept>, click the first-listed item (most recent run)."
    },
    {
      "pos": [
        15451,
        15509
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app run<ept id=\"p1\">**</ept> blade, click the <bpt id=\"p2\">**</bpt>ACTION<ept id=\"p2\">**</ept> item."
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Logic app action<ept id=\"p1\">**</ept> blade, click the <bpt id=\"p2\">**</bpt>OUTPUTS LINK<ept id=\"p2\">**</ept>.",
      "pos": [
        15514,
        15576
      ]
    },
    {
      "content": "The outputs should look as follows:",
      "pos": [
        15577,
        15612
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Logic app designer truncates table names.",
      "pos": [
        15624,
        15675
      ]
    },
    {
      "content": "For example, the operation <bpt id=\"p1\">**</bpt>Conditional delete from NEWORDERS<ept id=\"p1\">**</ept> is truncated to <bpt id=\"p2\">**</bpt>Conditional delete from N<ept id=\"p2\">**</ept>.",
      "pos": [
        15676,
        15787
      ]
    },
    {
      "pos": [
        15792,
        15886
      ],
      "content": "<ph id=\"ph1\">[AZURE.TIP]</ph> Use the following SQL statements to create the sample table and stored procedures."
    },
    {
      "content": "You can create the sample NEWORDERS table using the following DB2 SQL DDL statements:",
      "pos": [
        15889,
        15974
      ]
    },
    {
      "content": "You can create the sample SPOERID stored procedure using the following DB2 DDL statement:",
      "pos": [
        16762,
        16851
      ]
    },
    {
      "content": "Hybrid Configuration (Optional)",
      "pos": [
        17162,
        17193
      ]
    },
    {
      "pos": [
        17197,
        17301
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> This step is required only if you are using DB2 Connector on-premises behind your firewall."
    },
    {
      "content": "App Service uses the Hybrid Configuration Manager to connect securely to your on-premises system.",
      "pos": [
        17303,
        17400
      ]
    },
    {
      "content": "If Connector uses an on-premises IBM DB2 Server for Windows, the Hybrid Connection Manager is required.",
      "pos": [
        17401,
        17504
      ]
    },
    {
      "pos": [
        17506,
        17596
      ],
      "content": "See <bpt id=\"p1\">[</bpt>Using the Hybrid Connection Manager<ept id=\"p1\">](app-service-logic-hybrid-connection-manager.md)</ept>."
    },
    {
      "content": "Do more with your Connector",
      "pos": [
        17602,
        17629
      ]
    },
    {
      "content": "Now that the connector is created, you can add it to a business workflow using a Logic App.",
      "pos": [
        17630,
        17721
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>What are Logic Apps?<ept id=\"p1\">](app-service-logic-what-are-logic-apps.md)</ept>.",
      "pos": [
        17722,
        17791
      ]
    },
    {
      "content": "Create the API Apps using REST APIs.",
      "pos": [
        17793,
        17829
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Connectors and API Apps Reference<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=529766)</ept>.",
      "pos": [
        17830,
        17919
      ]
    },
    {
      "content": "You can also review performance statistics and control security to the connector.",
      "pos": [
        17921,
        18002
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Manage and Monitor your built-in API Apps and Connectors<ept id=\"p1\">](app-service-logic-monitor-your-connectors.md)</ept>.",
      "pos": [
        18003,
        18112
      ]
    }
  ],
  "content": "<properties\n   pageTitle=\"Using the DB2 Connector in Microsoft Azure App Service | Microsoft Azure\"\n   description=\"How to use the DB2 Connector with Logic App triggers and actions\"\n   services=\"app-service\\logic\"\n   documentationCenter=\".net,nodejs,java\"\n   authors=\"gplarsen\"\n   manager=\"dwrede\"\n   editor=\"\"/>\n\n<tags\n   ms.service=\"app-service-logic\"\n   ms.devlang=\"multiple\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"na\"\n   ms.workload=\"integration\"\n   ms.date=\"12/03/2015\"\n   ms.author=\"plarsen\"/>\n\n# DB2 Connector\n\nMicrosoft Connector for DB2 is an API app for connecting applications through Azure App Service to resources stored in an IBM DB2 database. Connector includes a Microsoft Client to connect to remote DB2 server computers across a TCP/IP network connection, including Azure hybrid connections to on-premises DB2 servers using the Azure Service Bus Relay. Connector supports the following database operations:\n\n- Read rows using SELECT\n- Poll to read rows using SELECT COUNT followed by SELECT\n- Add one row or multiple (bulk) rows using INSERT\n- Alter one row or multiple (bulk) rows using UPDATE\n- Remove one row or multiple (bulk) rows using DELETE\n- Read to alter rows using SELECT CURSOR followed by UPDATE WHERE CURRENT OF CURSOR\n- Read to remove rows using SELECT CURSOR followed by UPDATE WHERE CURRENT OF CURSOR\n- Run procedure with input and output parameters, return value, resultset, using CALL\n- Custom commands and composite operations using SELECT, INSERT, UPDATE, DELETE\n\n## Triggers and Actions\nConnector supports the following Logic app triggers and actions:\n\nTriggers | Actions\n--- | ---\n<ul><li>Poll Data</li></ul> | <ul><li>Bulk Insert</li><li>Insert</li><li>Bulk Update</li><li>Update</li><li>Call</li><li>Bulk Delete</li><li>Delete</li><li>Select</li><li>Conditional update</li><li>Post to EntitySet</li><li>Conditional delete</li><li>Select single entity</li><li>Delete</li><li>Upsert to EntitySet</li><li>Custom commands</li><li>Composite operations</li></ul>\n\n\n## Create the DB2 Connector\nYou can define a connector within a logic app or from the Azure Marketplace, like in the following example:  \n\n1. In the Azure startboard, select **Marketplace**.\n2. In the **Everything** blade, type **db2** in the **Search Everything** box, and then click the enter key.\n3. In the search everything results pane, select **DB2 Connector**.\n4. In the DB2 Connector description blade, select **Create**.\n5. In the DB2 Connector package blade, enter the Name (e.g. \"Db2ConnectorNewOrders\"), App Service Plan, and other properties.\n6. Select **Package settings**, and enter the following package settings:  \n\n    Name | Required |  Description\n--- | --- | ---\nConnectionString | Yes | DB2 Client connection string (e.g., \"Network Address=servername;Network Port=50000;User ID=username;Password=password;Initial Catalog=SAMPLE;Package Collection=NWIND;Default Schema=NWIND\").\nTables | Yes | Comma separated list of table, view and alias names required for OData operations and to generate swagger documentation with examples (e.g. \"*NEWORDERS*\").\nProcedures | Yes | Comma separated list of procedure and function names (e.g. \"SPORDERID\").\nOnPremise | No | Deploy on-premises using Azure Service Bus Relay.\nServiceBusConnectionString | No | Azure Service Bus Relay connection string.\nPollToCheckData | No | SELECT COUNT statement to use with a Logic app trigger (e.g. \"SELECT COUNT(\\*) FROM NEWORDERS WHERE SHIPDATE IS NULL\").\nPollToReadData | No | SELECT statement to use with a Logic app trigger (e.g. \"SELECT \\* FROM NEWORDERS WHERE SHIPDATE IS NULL FOR UPDATE\").\nPollToAlterData | No | UPDATE or DELETE statement to use with a Logic app trigger (e.g. \"UPDATE NEWORDERS SET SHIPDATE = CURRENT DATE WHERE CURRENT OF &lt;CURSOR&gt;\").\n\n7. Select **OK**, and then Select **Create**.\n8. When complete, the Package Settings look similar to the following:  \n![][1]\n\n\n## Logic App with DB2 Connector Action to Add Data ##\nYou can define a Logic app action to add data to a DB2 table using an API Insert or Post to Entity OData operation. For example, you can insert a new customer order record, by processing a SQL INSERT statement against a table defined with an identity column, returning the identity value or the rows affected to the Logic app (SELECT ORDID FROM FINAL TABLE (INSERT INTO NWIND.NEWORDERS (CUSTID,SHIPNAME,SHIPADDR,SHIPCITY,SHIPREG,SHIPZIP) VALUES (?,?,?,?,?,?))).\n\n> [AZURE.TIP] DB2 Connection \"*Post to EntitySet*\" returns the identity column value and \"*API Insert*\" returns rows affected\n\n1. In the Azure startboard, select **+** (plus sign), **Web + Mobile**, and then **Logic App**.\n2. Enter the Name (e.g. \"NewOrdersDb2\"), App Service Plan, other properties, and then select **Create**.\n3. In the Azure startboard, select the Logic app you just created, **Settings**, and then **Triggers and actions**.\n4. In the Triggers and actions blade, select **Create from Scratch** within the Logic App Templates.\n5. In the API Apps panel, select **Recurrence**, set a frequency and interval, and then **checkmark**.\n6. In the API Apps panel, select **DB2 Connector**, expand the operations list to select **Insert into NEWORDER**.\n7. Expand the parameters list to enter the following values:  \n\n    Name | Value\n--- | --- \nCUSTID | 10042\nSHIPNAME | Lazy K Kountry Store \nSHIPADDR | 12 Orchestra Terrace\nSHIPCITY | Walla Walla \nSHIPREG | WA\nSHIPZIP | 99362 \n\n8. Select the **checkmark** to save the action settings, and then **Save**.\n9. The settings should look as follows:  \n![][3]\n\n10. In the **All runs** list under **Operations**, select the first-listed item (most recent run). \n11. In the **Logic app run** blade, select the **ACTION** item **db2connectorneworders**.\n12. In the **Logic app action** blade, select the **INPUTS LINK**. DB2 Connector uses the inputs to process a parameterized INSERT statement.\n13. In the **Logic app action** blade, select the **OUTPUTS LINK**. The inputs should look as follows:  \n![][4]\n\n#### What you need to know\n\n- Connector truncates DB2 table names when forming Logic app action names. For example, the operation **Insert into NEWORDERS** is truncated to **Insert into NEWORDER**.\n- After saving the Logic app **Triggers and actions**, Logic app processes the operation. There may be a delay of a number of seconds (e.g. 3-5 seconds) before Logic app processes the operation. Optionally, you can click **Run Now** to process the operation.\n- DB2 Connector defines EntitySet members with attributes, including whether the member corresponds to a DB2 column with a default or generated columns (e.g. identity). Logic app displays a red asterisk next to the EntitySet member ID name, to denote DB2 columns that require values. You should not enter a value for the ORDID member, which corresponds to DB2 identity column. You may enter values for other optional members (ITEMS, ORDDATE, REQDATE, SHIPID, FREIGHT, SHIPCTRY), which correspond to DB2 columns with default values. \n- DB2 Connector returns to Logic app the response on the Post to EntitySet that includes the values for identity columns, which is derived from the DRDA SQLDARD (SQL Data Area Reply Data) on the prepared SQL INSERT statement. DB2 server does not return the inserted values for columns with default values.  \n\n\n## Logic App with DB2 Connector Action to Add Bulk Data ##\nYou can define a Logic app action to add data to a DB2 table using an API Bulk Insert operation. For example, you can insert two new customer order records, by processing a SQL INSERT statement using an array of row values against a table defined with an identity column, returning the rows affected to the Logic app (SELECT ORDID FROM FINAL TABLE (INSERT INTO NWIND.NEWORDERS (CUSTID,SHIPNAME,SHIPADDR,SHIPCITY,SHIPREG,SHIPZIP) VALUES (?,?,?,?,?,?))).\n\n1. In the Azure startboard, select **+** (plus sign), **Web + Mobile**, and then **Logic App**.\n2. Enter the Name (e.g. \"NewOrdersBulkDb2\"), App Service Plan, other properties, and then select **Create**.\n3. In the Azure startboard, select the Logic app you just created, **Settings**, and then **Triggers and actions**.\n4. In the Triggers and actions blade, select **Create from Scratch** within the Logic App Templates.\n5. In the API Apps panel, select **Recurrence**, set a frequency and interval, and then **checkmark**.\n6. In the API Apps panel, select **DB2 Connector**, expand the operations list to select **Bulk Insert into NEW**.\n7. Enter the **rows** value as an array. For example, copy and paste the following:\n\n    ```\n    [{\"CUSTID\":10081,\"SHIPNAME\":\"Trail's Head Gourmet Provisioners\",\"SHIPADDR\":\"722 DaVinci Blvd.\",\"SHIPCITY\":\"Kirkland\",\"SHIPREG\":\"WA\",\"SHIPZIP\":\"98034\"},{\"CUSTID\":10088,\"SHIPNAME\":\"White Clover Markets\",\"SHIPADDR\":\"305 14th Ave. S. Suite 3B\",\"SHIPCITY\":\"Seattle\",\"SHIPREG\":\"WA\",\"SHIPZIP\":\"98128\",\"SHIPCTRY\":\"USA\"}]\n    ```\n\n8. Select the **checkmark** to save the action settings, and then **Save**. The settings should look as follows:  \n![][6]\n\n9. In the **All runs** list under **Operations**, click the first-listed item (most recent run).\n10. In the **Logic app run** blade, click the **ACTION** item.\n11. In the **Logic app action** blade, click the **INPUTS LINK**. The outputs should look as follows:  \n[][7]\n12. In the **Logic app action** blade, click the **OUTPUTS LINK**. The outputs should look as follows:  \n![][8]\n\n#### What you need to know\n\n- Connector truncates DB2 table names when forming Logic app action names. For example, the operation **Bulk Insert into NEWORDERS** is truncated to **Bulk Insert into NEW**.\n- By omitting identity columns (e.g. ORDID), nullable columns (e.g. SHIPDATE), and columns with default values (e.g. ORDDATE, REQDATE, SHIPID, FREIGHT, SHIPCTRY), DB2 database generates values.\n- By specifying \"today\" and \"tomorrow\", DB2 Connector generates \"CURRENT DATE\" and \"CURRENT DATE + 1 DAY\" functions (e.g. REQDATE). \n\n\n## Logic App with DB2 Connector Trigger to Read, Alter or Delete Data ##\nYou can define a Logic app trigger to poll and read data from a DB2 table using an API Poll Data composite operation. For example, you can read one or more new customer order records, returning the records to the logic app. The DB2 Connection package/app settings should look as follows:\n\n    App Setting | Value\n--- | --- | ---\nPollToCheckData | SELECT COUNT(\\*) FROM NEWORDERS WHERE SHIPDATE IS NULL\nPollToReadData | SELECT \\* FROM NEWORDERS WHERE SHIPDATE IS NULL FOR UPDATE\nPollToAlterData | <no value specified>\n\n\nAlso, you can define a Logic app trigger to poll, read and alter data in a DB2 table using an API Poll Data composite operation. For example, you can read one or more new customer order records, update the row values, returning the selected (before update) records to the logic app. The DB2 Connection package/app settings should look as follows:\n\n    App Setting | Value\n--- | --- | ---\nPollToCheckData | SELECT COUNT(\\*) FROM NEWORDERS WHERE SHIPDATE IS NULL\nPollToReadData | SELECT \\* FROM NEWORDERS WHERE SHIPDATE IS NULL FOR UPDATE\nPollToAlterData | UPDATE NEWORDERS SET SHIPDATE = CURRENT DATE WHERE CURRENT OF &lt;CURSOR&gt;\n\n\nFurther, you can define a Logic app trigger to poll, read and remove data from a DB2 table using an API Poll Data composite operation. For example, you can read one or more new customer order records, delete the rows, returning the selected (before delete) records to the logic app. The DB2 Connection package/app settings should look as follows:\n\n    App Setting | Value\n--- | --- | ---\nPollToCheckData | SELECT COUNT(\\*) FROM NEWORDERS WHERE SHIPDATE IS NULL\nPollToReadData | SELECT \\* FROM NEWORDERS WHERE SHIPDATE IS NULL FOR UPDATE\nPollToAlterData | DELETE NEWORDERS WHERE CURRENT OF &lt;CURSOR&gt;\n\nIn this example, Logic app will poll, read, update, and then re-read data in the DB2 table.\n\n1. In the Azure startboard, select **+** (plus sign), **Web + Mobile**, and then **Logic App**.\n2. Enter the Name (e.g. \"ShipOrdersDb2\"), App Service Plan, other properties, and then select **Create**.\n3. In the Azure startboard, select the Logic app you just created, **Settings**, and then **Triggers and actions**.\n4. In the Triggers and actions blade, select **Create from Scratch** within the Logic App Templates.\n5. In the API Apps panel, select **DB2 Connector**, set a frequency and interval, and then **checkmark**.\n6. In the API Apps panel, select **DB2 Connector**, expand the operations list to select **Select from NEWORDERS**.\n7. Select the **checkmark** to save the action settings, and then **Save**. The settings should look as follows:  \n![][10]  \n8. Click to close the **Triggers and actions** blade, and then click to close the **Settings** blade.\n9. In the **All runs** list under **Operations**, click the first-listed item (most recent run).\n10. In the **Logic app run** blade, click the **ACTION** item.\n11. In the **Logic app action** blade, click the **OUTPUTS LINK**. The outputs should look as follows:  \n![][11]\n\n\n## Logic App with DB2 Connector Action to Remove Data ##\nYou can define a Logic app action to remove data from a DB2 table using an API Delete or Post to Entity OData operation. For example, you can insert a new customer order record, by processing a SQL INSERT statement against a table defined with an identity column, returning the identity value or the rows affected to the Logic app (SELECT ORDID FROM FINAL TABLE (INSERT INTO NWIND.NEWORDERS (CUSTID,SHIPNAME,SHIPADDR,SHIPCITY,SHIPREG,SHIPZIP) VALUES (?,?,?,?,?,?))).\n\n## Create Logic App using DB2 Connector to Remove Data ##\nYou can create a new Logic app from within the Azure Marketplace, and then use the DB2 Connector as an action to remove customer orders. For example, you can use the DB2 Connector conditional Delete operation to process a SQL DELETE statement (DELETE FROM NEWORDERS WHERE ORDID >= 10000).\n\n1. In the hub menu of the Azure **Start** board, click **+** (plus sign), click **Web + Mobile**, and then click **Logic App**. \n2. In the **Create logic app** blade, type a **Name**, for example **RemoveOrdersDb2**.\n3. Select or define values for the other settings (e.g. service plan, resource group).\n4. The settings should look as follows. Click **Create**:  \n![][12]  \n5. In the **Settings** blade, click **Triggers and actions**.\n6. In the **Triggers and actions** blade, in the **Logic App Templates** list, click **Create from Scratch**.\n7. In the **Triggers and actions** blade, in the **API Apps** panel, within the resource group, click **Recurrence**.\n8. On the Logic app design surface, click the **Recurrence** item, set a **Frequency** and **Interval**, for example **Days** and **1**, and then click the **checkmark** to save the recurrence item settings.\n9. In the **Triggers and actions** blade, in the **API Apps** panel, within the resource group, click **DB2 Connector**.\n10. On the Logic app design surface, click the **DB2 Connector** action item, click the ellipses (**...**) to expand the operations list, and then click **Conditional delete from N**.\n11. On the DB2 Connector action item, type **ORDID ge 10000** for an **expression that identifies a subset of entries**.\n12. Click the **checkmark** to save the action settings, and then click **Save**. The settings should look as follows:  \n![][13]  \n13. Click to close the **Triggers and actions** blade, and then click to close the **Settings** blade.\n14. In the **All runs** list under **Operations**, click the first-listed item (most recent run).\n15. In the **Logic app run** blade, click the **ACTION** item.\n16. In the **Logic app action** blade, click the **OUTPUTS LINK**. The outputs should look as follows:  \n![][14]\n\n**Note:** Logic app designer truncates table names. For example, the operation **Conditional delete from NEWORDERS** is truncated to **Conditional delete from N**.\n\n\n> [AZURE.TIP] Use the following SQL statements to create the sample table and stored procedures. \n\nYou can create the sample NEWORDERS table using the following DB2 SQL DDL statements:\n \n    CREATE TABLE ORDERS (  \n        ORDID INT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 10000, INCREMENT BY 1) ,  \n        CUSTID INT NOT NULL ,  \n        EMPID INT NOT NULL DEFAULT 10000 ,  \n        ORDDATE DATE NOT NULL DEFAULT CURRENT DATE ,  \n        REQDATE DATE DEFAULT CURRENT DATE ,  \n        SHIPDATE DATE ,  \n        SHIPID INT NOT NULL DEFAULT 10000,  \n        FREIGHT DECIMAL (9,2) NOT NULL DEFAULT 0.00 ,  \n        SHIPNAME CHAR (40) NOT NULL ,  \n        SHIPADDR CHAR (60) NOT NULL ,  \n        SHIPCITY CHAR (20) NOT NULL ,  \n        SHIPREG CHAR (15) NOT NULL ,  \n        SHIPZIP CHAR (10) NOT NULL ,  \n        SHIPCTRY CHAR (15) NOT NULL DEFAULT 'USA' ,  \n        PRIMARY KEY(ORDID)  \n        )  \n \n    CREATE UNIQUE INDEX XORDID ON ORDERS (ORDID ASC)  \n\n\n\nYou can create the sample SPOERID stored procedure using the following DB2 DDL statement:\n \n    CREATE OR REPLACE PROCEDURE NWIND.SPORDERID (IN ORDERID VARCHAR(128))  \n        DYNAMIC RESULT SETS 1  \n    P1: BEGIN  \n        DECLARE CURSOR1 CURSOR WITH RETURN FOR  \n            SELECT * FROM NWIND.NEWORDERS  \n                WHERE ORDID = ORDERID;  \n        OPEN CURSOR1;  \n    END P1  \n    ') \n\n\n## Hybrid Configuration (Optional)\n\n> [AZURE.NOTE] This step is required only if you are using DB2 Connector on-premises behind your firewall.\n\nApp Service uses the Hybrid Configuration Manager to connect securely to your on-premises system. If Connector uses an on-premises IBM DB2 Server for Windows, the Hybrid Connection Manager is required.\n\nSee [Using the Hybrid Connection Manager](app-service-logic-hybrid-connection-manager.md).\n\n\n## Do more with your Connector\nNow that the connector is created, you can add it to a business workflow using a Logic App. See [What are Logic Apps?](app-service-logic-what-are-logic-apps.md).\n\nCreate the API Apps using REST APIs. See [Connectors and API Apps Reference](http://go.microsoft.com/fwlink/p/?LinkId=529766).\n\nYou can also review performance statistics and control security to the connector. See [Manage and Monitor your built-in API Apps and Connectors](app-service-logic-monitor-your-connectors.md).\n\n\n<!--Image references-->\n[1]: ./media/app-service-logic-connector-db2/ApiApp_Db2Connector_Create.png\n[2]: ./media/app-service-logic-connector-db2/LogicApp_NewOrdersDb2_Create.png\n[3]: ./media/app-service-logic-connector-db2/LogicApp_NewOrdersDb2_TriggersActions.png\n[4]: ./media/app-service-logic-connector-db2/LogicApp_NewOrdersDb2_Outputs.png\n[5]: ./media/app-service-logic-connector-db2/LogicApp_NewOrdersBulkDb2_Create.png\n[6]: ./media/app-service-logic-connector-db2/LogicApp_NewOrdersBulkDb2_TriggersActions.png\n[7]: ./media/app-service-logic-connector-db2/LogicApp_NewOrdersBulkDb2_Inputs.png\n[8]: ./media/app-service-logic-connector-db2/LogicApp_NewOrdersBulkDb2_Outputs.png\n[9]: ./media/app-service-logic-connector-db2/LogicApp_UpdateOrdersDb2_Create.png\n[10]: ./media/app-service-logic-connector-db2/LogicApp_UpdateOrdersDb2_TriggersActions.png\n[11]: ./media/app-service-logic-connector-db2/LogicApp_UpdateOrdersDb2_Outputs.png\n[12]: ./media/app-service-logic-connector-db2/LogicApp_RemoveOrdersDb2_Create.png\n[13]: ./media/app-service-logic-connector-db2/LogicApp_RemoveOrdersDb2_TriggersActions.png\n[14]: ./media/app-service-logic-connector-db2/LogicApp_RemoveOrdersDb2_Outputs.png\n\n\n\n"
}