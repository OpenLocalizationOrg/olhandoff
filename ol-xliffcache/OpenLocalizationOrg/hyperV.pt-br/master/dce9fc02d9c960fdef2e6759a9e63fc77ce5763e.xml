{
  "nodes": [
    {
      "content": "Network Security Group",
      "pos": [
        3,
        25
      ]
    },
    {
      "content": "An NSG resource enables the creation of security boundary for workloads, by implementing allow and deny rules.",
      "pos": [
        26,
        136
      ]
    },
    {
      "content": "Such rules can be applied to a VM, a NIC, or a subnet.",
      "pos": [
        137,
        191
      ]
    },
    {
      "content": "Property",
      "pos": [
        194,
        202
      ]
    },
    {
      "content": "Description",
      "pos": [
        203,
        214
      ]
    },
    {
      "content": "Sample values",
      "pos": [
        215,
        228
      ]
    },
    {
      "content": "subnets",
      "pos": [
        247,
        254
      ]
    },
    {
      "content": "List of subnet ids the NSG is applied to.",
      "pos": [
        257,
        298
      ]
    },
    {
      "content": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/virtualNetworks/TestVNet/subnets/FrontEnd",
      "pos": [
        299,
        442
      ]
    },
    {
      "content": "securityRules",
      "pos": [
        447,
        460
      ]
    },
    {
      "content": "List of security rules that make up the NSG",
      "pos": [
        463,
        506
      ]
    },
    {
      "pos": [
        507,
        548
      ],
      "content": "See <bpt id=\"p1\">[</bpt>Security rule<ept id=\"p1\">](#Security-rule)</ept> below"
    },
    {
      "content": "defaultSecurityRules",
      "pos": [
        553,
        573
      ]
    },
    {
      "content": "List of default security rules present in every NSG",
      "pos": [
        576,
        627
      ]
    },
    {
      "pos": [
        628,
        687
      ],
      "content": "See <bpt id=\"p1\">[</bpt>Default security rules<ept id=\"p1\">](#Default-security-rules)</ept> below"
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Security rule<ept id=\"p1\">**</ept> - An NSG can have multiple security rules defined.",
      "pos": [
        692,
        760
      ]
    },
    {
      "content": "Each rule can allow or deny different types of traffic.",
      "pos": [
        761,
        816
      ]
    },
    {
      "content": "Security rule",
      "pos": [
        822,
        835
      ]
    },
    {
      "content": "A security rule is a child resource of an NSG containing the properties below.",
      "pos": [
        836,
        914
      ]
    },
    {
      "content": "Property",
      "pos": [
        917,
        925
      ]
    },
    {
      "content": "Description",
      "pos": [
        926,
        937
      ]
    },
    {
      "content": "Sample values",
      "pos": [
        938,
        951
      ]
    },
    {
      "content": "description",
      "pos": [
        970,
        981
      ]
    },
    {
      "content": "Description for the rule",
      "pos": [
        984,
        1008
      ]
    },
    {
      "content": "Allow inbound traffic for all VMs in subnet X",
      "pos": [
        1009,
        1054
      ]
    },
    {
      "content": "protocol",
      "pos": [
        1059,
        1067
      ]
    },
    {
      "content": "Protocol to match for the rule",
      "pos": [
        1070,
        1100
      ]
    },
    {
      "content": "TCP, UDP, or *",
      "pos": [
        1101,
        1115
      ]
    },
    {
      "content": "sourcePortRange",
      "pos": [
        1120,
        1135
      ]
    },
    {
      "content": "Source port range to match for the rule",
      "pos": [
        1138,
        1177
      ]
    },
    {
      "content": "80, 100-200, *",
      "pos": [
        1178,
        1192
      ]
    },
    {
      "content": "destinationPortRange",
      "pos": [
        1197,
        1217
      ]
    },
    {
      "content": "Destination port range to match for the rule",
      "pos": [
        1220,
        1264
      ]
    },
    {
      "content": "80, 100-200, *",
      "pos": [
        1265,
        1279
      ]
    },
    {
      "content": "sourceAddressPrefix",
      "pos": [
        1284,
        1303
      ]
    },
    {
      "content": "Source address prefix to match for the rule",
      "pos": [
        1306,
        1349
      ]
    },
    {
      "content": "10.10.10.1, 10.10.10.0/24, VirtualNetwork",
      "pos": [
        1350,
        1391
      ]
    },
    {
      "content": "destinationAddressPrefix",
      "pos": [
        1396,
        1420
      ]
    },
    {
      "content": "Destination address prefix to match for the rule",
      "pos": [
        1423,
        1471
      ]
    },
    {
      "content": "10.10.10.1, 10.10.10.0/24, VirtualNetwork",
      "pos": [
        1472,
        1513
      ]
    },
    {
      "content": "direction",
      "pos": [
        1518,
        1527
      ]
    },
    {
      "content": "Direction of traffic to match for the rule",
      "pos": [
        1530,
        1572
      ]
    },
    {
      "content": "inbound or outbound",
      "pos": [
        1573,
        1592
      ]
    },
    {
      "content": "priority",
      "pos": [
        1597,
        1605
      ]
    },
    {
      "content": "Priority for the rule.",
      "pos": [
        1608,
        1630
      ]
    },
    {
      "content": "Rules are checked int he order of priority, once a rule applies, no more rules are tested for matching.",
      "pos": [
        1631,
        1734
      ]
    },
    {
      "content": "10, 100, 65000",
      "pos": [
        1735,
        1749
      ]
    },
    {
      "content": "access",
      "pos": [
        1754,
        1760
      ]
    },
    {
      "content": "Type of access to apply if the rule matches",
      "pos": [
        1763,
        1806
      ]
    },
    {
      "content": "allow or deny",
      "pos": [
        1807,
        1820
      ]
    },
    {
      "content": "Sample NSG in JSON format:",
      "pos": [
        1823,
        1849
      ]
    },
    {
      "content": "Default security rules",
      "pos": [
        3681,
        3703
      ]
    },
    {
      "content": "Default security rules have the same properties available in security rules.",
      "pos": [
        3704,
        3780
      ]
    },
    {
      "content": "They exist to provide basic connectivity between resources that have NSGs applied to them.",
      "pos": [
        3781,
        3871
      ]
    },
    {
      "content": "Make sure you know which <bpt id=\"p1\">[</bpt>default security rules<ept id=\"p1\">](./virtual-networks-nsg.md#Default-Rules)</ept> exist.",
      "pos": [
        3872,
        3969
      ]
    },
    {
      "content": "Additional resources",
      "pos": [
        3976,
        3996
      ]
    },
    {
      "pos": [
        4000,
        4059
      ],
      "content": "Get more information about <bpt id=\"p1\">[</bpt>NSGs<ept id=\"p1\">](virtual-networks-nsg.md)</ept>."
    },
    {
      "pos": [
        4062,
        4171
      ],
      "content": "Read the <bpt id=\"p1\">[</bpt>REST API reference documentation<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/mt163615.aspx)</ept> for NSGs."
    },
    {
      "pos": [
        4174,
        4293
      ],
      "content": "Read the <bpt id=\"p1\">[</bpt>REST API reference documentation<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/mt163580.aspx)</ept> for security rules."
    }
  ],
  "content": "## Network Security Group\nAn NSG resource enables the creation of security boundary for workloads, by implementing allow and deny rules. Such rules can be applied to a VM, a NIC, or a subnet.\n\n|Property|Description|Sample values|\n|---|---|---|\n|**subnets**|List of subnet ids the NSG is applied to.|/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/virtualNetworks/TestVNet/subnets/FrontEnd|\n|**securityRules**|List of security rules that make up the NSG|See [Security rule](#Security-rule) below|\n|**defaultSecurityRules**|List of default security rules present in every NSG|See [Default security rules](#Default-security-rules) below|\n\n- **Security rule** - An NSG can have multiple security rules defined. Each rule can allow or deny different types of traffic.\n\n### Security rule\nA security rule is a child resource of an NSG containing the properties below.\n\n|Property|Description|Sample values|\n|---|---|---|\n|**description**|Description for the rule|Allow inbound traffic for all VMs in subnet X|\n|**protocol**|Protocol to match for the rule|TCP, UDP, or *|\n|**sourcePortRange**|Source port range to match for the rule|80, 100-200, *|\n|**destinationPortRange**|Destination port range to match for the rule|80, 100-200, *|\n|**sourceAddressPrefix**|Source address prefix to match for the rule|10.10.10.1, 10.10.10.0/24, VirtualNetwork|\n|**destinationAddressPrefix**|Destination address prefix to match for the rule|10.10.10.1, 10.10.10.0/24, VirtualNetwork|\n|**direction**|Direction of traffic to match for the rule|inbound or outbound|\n|**priority**|Priority for the rule. Rules are checked int he order of priority, once a rule applies, no more rules are tested for matching.|10, 100, 65000|\n|**access**|Type of access to apply if the rule matches|allow or deny|\n\nSample NSG in JSON format:\n\n    {\n        \"name\": \"NSG-BackEnd\",\n        \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/networkSecurityGroups/NSG-BackEnd\",\n        \"etag\": \"W/\\\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\\\"\",\n        \"type\": \"Microsoft.Network/networkSecurityGroups\",\n        \"location\": \"westus\",\n        \"tags\": {\n            \"displayName\": \"NSG - Front End\"\n        },\n        \"properties\": {\n            \"provisioningState\": \"Succeeded\",\n            \"resourceGuid\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n            \"securityRules\": [\n                {\n                    \"name\": \"rdp-rule\",\n                    \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/networkSecurityGroups/NSG-BackEnd/securityRules/rdp-rule\",\n                    \"etag\": \"W/\\\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\\\"\",\n                    \"properties\": {\n                        \"provisioningState\": \"Succeeded\",\n                        \"description\": \"Allow RDP\",\n                        \"protocol\": \"Tcp\",\n                        \"sourcePortRange\": \"*\",\n                        \"destinationPortRange\": \"3389\",\n                        \"sourceAddressPrefix\": \"Internet\",\n                        \"destinationAddressPrefix\": \"*\",\n                        \"access\": \"Allow\",\n                        \"priority\": 100,\n                        \"direction\": \"Inbound\"\n                    }\n                }\n            ],\n            \"defaultSecurityRules\": [\n                { [...],\n            \"subnets\": [\n                {\n                    \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/virtualNetworks/TestVNet/subnets/FrontEnd\"\n                }\n            ]\n        }\n    }\n\n### Default security rules\nDefault security rules have the same properties available in security rules. They exist to provide basic connectivity between resources that have NSGs applied to them. Make sure you know which [default security rules](./virtual-networks-nsg.md#Default-Rules) exist. \n\n### Additional resources\n\n- Get more information about [NSGs](virtual-networks-nsg.md).\n- Read the [REST API reference documentation](https://msdn.microsoft.com/library/azure/mt163615.aspx) for NSGs.\n- Read the [REST API reference documentation](https://msdn.microsoft.com/library/azure/mt163580.aspx) for security rules.\n\n"
}