{
  "nodes": [
    {
      "content": "Using Azure AD Connect Health with AD FS | Microsoft Azure",
      "pos": [
        28,
        86
      ]
    },
    {
      "content": "This is the Azure AD Connect Health page how to monitor your on-premises AD FS infrastructure.",
      "pos": [
        106,
        200
      ]
    },
    {
      "content": "Using Azure AD Connect Health with AD FS",
      "pos": [
        543,
        583
      ]
    },
    {
      "content": "The following documentation is specific to monitoring your AD FS infrastructure with Azure AD Connect Health.",
      "pos": [
        585,
        694
      ]
    },
    {
      "content": "Alerts for AD FS",
      "pos": [
        699,
        715
      ]
    },
    {
      "content": "The Azure AD Connect Health Alerts section provides you the list of active alerts.",
      "pos": [
        716,
        798
      ]
    },
    {
      "content": "Each alert includes relevant information, resolution steps, and links to related documentation.",
      "pos": [
        799,
        894
      ]
    },
    {
      "content": "By selecting an active or resolved alert you will see a new blade with additional information, as well as steps you can take to resolve the alert, and links to additional documentation.",
      "pos": [
        895,
        1080
      ]
    },
    {
      "content": "You can also view historical data on alerts that were resolved in the past.",
      "pos": [
        1081,
        1156
      ]
    },
    {
      "content": "By selecting an alert you will be provided with additional information as well as steps you can take to resolve the alert and links to additional documentation.",
      "pos": [
        1158,
        1318
      ]
    },
    {
      "content": "Azure AD Connect Health Portal",
      "pos": [
        1322,
        1352
      ]
    },
    {
      "content": "Usage Analytics for AD FS",
      "pos": [
        1415,
        1440
      ]
    },
    {
      "content": "Azure AD Connect Health Usage Analytics analyzes the authentication traffic of your federation servers.",
      "pos": [
        1441,
        1544
      ]
    },
    {
      "content": "Selecting the usage analytics box will open the usage analytics blade, which will show you the metrics and groupings.",
      "pos": [
        1545,
        1662
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> In order to use Usage Analytics with AD FS, you must ensure that AD FS auditing is enabled.",
      "pos": [
        1665,
        1769
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Enable Auditing for AD FS<ept id=\"p1\">](active-directory-aadconnect-health-operations.md#enable-auditing-for-ad-fs)</ept>.",
      "pos": [
        1770,
        1900
      ]
    },
    {
      "content": "Azure AD Connect Health Portal",
      "pos": [
        1905,
        1935
      ]
    },
    {
      "content": "To select additional metrics, specify a time range, or to change the grouping, simply right-click on the usage analytics chart and select Edit Chart.",
      "pos": [
        1994,
        2143
      ]
    },
    {
      "content": "Then you can specify the time range, change or select metrics and change the grouping.",
      "pos": [
        2144,
        2230
      ]
    },
    {
      "content": "You can view the distribution of the authentication traffic based on different \"metrics\" and group each metric using relevant \"group by\" parameters described below.",
      "pos": [
        2231,
        2395
      ]
    },
    {
      "content": "Metric",
      "pos": [
        2399,
        2405
      ]
    },
    {
      "content": "Group By",
      "pos": [
        2408,
        2416
      ]
    },
    {
      "content": "What the grouping means and why it's useful?",
      "pos": [
        2419,
        2463
      ]
    },
    {
      "content": "Total Requests: The total number of request processed by the federation service",
      "pos": [
        2537,
        2616
      ]
    },
    {
      "content": "All",
      "pos": [
        2619,
        2622
      ]
    },
    {
      "content": "This will show the count of total number of requests without grouping.",
      "pos": [
        2625,
        2695
      ]
    },
    {
      "content": "Application",
      "pos": [
        2703,
        2714
      ]
    },
    {
      "content": "This option will group the total requests based on the targeted relying party.",
      "pos": [
        2717,
        2795
      ]
    },
    {
      "content": "This grouping is useful to understand which application is receiving how much percentage of the total traffic.",
      "pos": [
        2796,
        2906
      ]
    },
    {
      "content": "Server",
      "pos": [
        2914,
        2920
      ]
    },
    {
      "content": "This option will group the total requests based on the server that processed the request.",
      "pos": [
        2923,
        3012
      ]
    },
    {
      "content": "This grouping is useful to understand the load distribution of the total traffic.",
      "pos": [
        3013,
        3094
      ]
    },
    {
      "content": "Workplace Join",
      "pos": [
        3102,
        3116
      ]
    },
    {
      "content": "This option will group the total requests based on if the requests are coming from devices that are workplace joined (known).",
      "pos": [
        3119,
        3244
      ]
    },
    {
      "content": "This grouping is useful to understand if your resources are accessed using devices that are unknown to the identity infrastructure.",
      "pos": [
        3245,
        3376
      ]
    },
    {
      "content": "Authentication Method",
      "pos": [
        3384,
        3405
      ]
    },
    {
      "content": "This option will group the total requests based on the authentication method used for authentication.",
      "pos": [
        3408,
        3509
      ]
    },
    {
      "content": "This grouping is useful to understand the common authentication method that gets used for authentication.",
      "pos": [
        3510,
        3615
      ]
    },
    {
      "content": "Following are the possible authentication methods",
      "pos": [
        3616,
        3665
      ]
    },
    {
      "content": "Windows Integrated Authentication (Windows)",
      "pos": [
        3675,
        3718
      ]
    },
    {
      "content": "Forms Based Authentication (Forms)",
      "pos": [
        3728,
        3762
      ]
    },
    {
      "content": "SSO (Single Sign On)",
      "pos": [
        3772,
        3792
      ]
    },
    {
      "content": "X509 Certificate Authentication (Certificate)",
      "pos": [
        3802,
        3847
      ]
    },
    {
      "content": "Please note that a request is counted as SSO (Single Sign On) if the federation servers receive the request with an SSO Cookie.",
      "pos": [
        3857,
        3984
      ]
    },
    {
      "content": "In such cases, if the cookie is valid, the user is not asked to provide credentials and gets seamless access to the application.",
      "pos": [
        3985,
        4113
      ]
    },
    {
      "content": "This is common if you have multiple relying parties protected by the federation servers.",
      "pos": [
        4114,
        4202
      ]
    },
    {
      "content": "Network Location",
      "pos": [
        4210,
        4226
      ]
    },
    {
      "content": "This option will group the total requests based on the network location of the user.",
      "pos": [
        4229,
        4313
      ]
    },
    {
      "content": "It can be either intranet or extranet.",
      "pos": [
        4314,
        4352
      ]
    },
    {
      "content": "This grouping is useful to know what percentage of the traffic is coming from the intranet verses extranet.",
      "pos": [
        4353,
        4460
      ]
    },
    {
      "content": "Total Failed Requests: The total number failed requests processed by the federation service.",
      "pos": [
        4465,
        4557
      ]
    },
    {
      "content": "(This metric is only available on AD FS for Windows Server 2012 R2)",
      "pos": [
        4563,
        4630
      ]
    },
    {
      "content": "Error Type",
      "pos": [
        4632,
        4642
      ]
    },
    {
      "content": "This will show the number of errors based on predefined error types.",
      "pos": [
        4645,
        4713
      ]
    },
    {
      "content": "This grouping is useful to understand the common types of errors.",
      "pos": [
        4714,
        4779
      ]
    },
    {
      "content": "Incorrect Username or Password: Errors due to incorrect username or password.",
      "pos": [
        4788,
        4865
      ]
    },
    {
      "content": "\"Extranet Lockout\": Failures due to the requests received from a user that was locked out from extranet",
      "pos": [
        4875,
        4978
      ]
    },
    {
      "content": "\"Expired Password\": Failures due to users logging in with an expired password.",
      "pos": [
        4989,
        5067
      ]
    },
    {
      "content": "\"Disabled Account\": Failures due to users logging with a disabled account.",
      "pos": [
        5076,
        5150
      ]
    },
    {
      "content": "\"Device Authentication\": Failures due to users failing to authenticate using Device Authentication.",
      "pos": [
        5159,
        5258
      ]
    },
    {
      "content": "\"User Certificate Authentication\": Failures due to users failing to authenticate because of an invalid certificate.",
      "pos": [
        5267,
        5382
      ]
    },
    {
      "content": "\"MFA\": Failures due to user failing to authenticate using Multi Factor Authentication.",
      "pos": [
        5391,
        5477
      ]
    },
    {
      "content": "\"Other Credential\": \"Issuance Authorization\": Failures due to authorization failures.",
      "pos": [
        5486,
        5571
      ]
    },
    {
      "content": "\"Issuance Delegation\": Failures due to issuance delegation errors.",
      "pos": [
        5580,
        5646
      ]
    },
    {
      "content": "\"Token Acceptance\": Failures due to ADFS rejecting the token from a 3rd party Identity Provider.",
      "pos": [
        5655,
        5751
      ]
    },
    {
      "content": "\"Protocol\": Failure due to protocol errors.",
      "pos": [
        5760,
        5803
      ]
    },
    {
      "content": "\"Unknown\": Catch all.",
      "pos": [
        5812,
        5833
      ]
    },
    {
      "content": "Any other failures that do not fit into the defined categories.",
      "pos": [
        5834,
        5897
      ]
    },
    {
      "content": "Server",
      "pos": [
        5910,
        5916
      ]
    },
    {
      "content": "This will group the errors based on the server.",
      "pos": [
        5919,
        5966
      ]
    },
    {
      "content": "This is useful to understand the error distribution across servers.",
      "pos": [
        5967,
        6034
      ]
    },
    {
      "content": "Uneven distribution could be an indicator of a server in a faulty state.",
      "pos": [
        6035,
        6107
      ]
    },
    {
      "content": "Network Location",
      "pos": [
        6115,
        6131
      ]
    },
    {
      "content": "This will group the errors based on the network location of the requests (intranet vs extranet).",
      "pos": [
        6134,
        6230
      ]
    },
    {
      "content": "This is useful to understand the type of requests that are failing.",
      "pos": [
        6231,
        6298
      ]
    },
    {
      "content": "Application",
      "pos": [
        6306,
        6317
      ]
    },
    {
      "content": "This will group the failures based on the targeted application (relying party).",
      "pos": [
        6320,
        6399
      ]
    },
    {
      "content": "This is useful to understand which targeted application is seeing most number of errors.",
      "pos": [
        6400,
        6488
      ]
    },
    {
      "content": "User Count: Average number of unique users active in the system",
      "pos": [
        6493,
        6556
      ]
    },
    {
      "content": "All",
      "pos": [
        6559,
        6562
      ]
    },
    {
      "content": "This provides a count of average number of users using the federation service in the selected time slice.",
      "pos": [
        6565,
        6670
      ]
    },
    {
      "content": "The users are not grouped.",
      "pos": [
        6671,
        6697
      ]
    },
    {
      "content": "The average will depend on the time slice selected.",
      "pos": [
        6702,
        6753
      ]
    },
    {
      "content": "Application",
      "pos": [
        6761,
        6772
      ]
    },
    {
      "content": "This will group the average number of users based on the targeted application (relying party).",
      "pos": [
        6775,
        6869
      ]
    },
    {
      "content": "This is useful to understand how many users are using which application.",
      "pos": [
        6870,
        6942
      ]
    },
    {
      "content": "Performance Monitoring for AD FS",
      "pos": [
        6950,
        6982
      ]
    },
    {
      "content": "Azure AD Connect Health Performance Monitoring provides monitoring information on metrics.",
      "pos": [
        6983,
        7073
      ]
    },
    {
      "content": "By selecting the Monitoring box, a blade will open up that provides detailed information on the metrics.",
      "pos": [
        7074,
        7178
      ]
    },
    {
      "content": "Azure AD Connect Health Portal",
      "pos": [
        7183,
        7213
      ]
    },
    {
      "content": "By selecting the Filter option at the top of the blade, you can filter by server to see an individual server’s metrics.",
      "pos": [
        7271,
        7390
      ]
    },
    {
      "content": "To change metrics, simply right-click on the monitoring chart under the monitoring blade and select Edit Chart.",
      "pos": [
        7391,
        7502
      ]
    },
    {
      "content": "Then, from the new blade that opens up, you can select additional metrics from the drop-down and specify a time range for viewing the performance data.",
      "pos": [
        7503,
        7654
      ]
    },
    {
      "content": "Related links",
      "pos": [
        7662,
        7675
      ]
    },
    {
      "content": "Azure AD Connect Health",
      "pos": [
        7680,
        7703
      ]
    },
    {
      "content": "Azure AD Connect Health Agent Installation",
      "pos": [
        7747,
        7789
      ]
    },
    {
      "content": "Azure AD Connect Health Operations",
      "pos": [
        7847,
        7881
      ]
    },
    {
      "content": "Using Azure AD Connect Health for sync",
      "pos": [
        7936,
        7974
      ]
    },
    {
      "content": "Azure AD Connect Health FAQ",
      "pos": [
        8023,
        8050
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Using Azure AD Connect Health with AD FS | Microsoft Azure\" \n    description=\"This is the Azure AD Connect Health page how to monitor your on-premises AD FS infrastructure.\" \n    services=\"active-directory\" \n    documentationCenter=\"\" \n    authors=\"billmath\" \n    manager=\"stevenpo\" \n    editor=\"curtand\"/>\n\n<tags \n    ms.service=\"active-directory\" \n    ms.workload=\"identity\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"get-started-article\" \n    ms.date=\"08/14/2015\" \n    ms.author=\"billmath\"/>\n\n# Using Azure AD Connect Health with AD FS \nThe following documentation is specific to monitoring your AD FS infrastructure with Azure AD Connect Health.\n\n## Alerts for AD FS\nThe Azure AD Connect Health Alerts section provides you the list of active alerts. Each alert includes relevant information, resolution steps, and links to related documentation. By selecting an active or resolved alert you will see a new blade with additional information, as well as steps you can take to resolve the alert, and links to additional documentation. You can also view historical data on alerts that were resolved in the past.\n\nBy selecting an alert you will be provided with additional information as well as steps you can take to resolve the alert and links to additional documentation.\n\n![Azure AD Connect Health Portal](./media/active-directory-aadconnect-health/alert2.png)\n\n\n\n## Usage Analytics for AD FS\nAzure AD Connect Health Usage Analytics analyzes the authentication traffic of your federation servers. Selecting the usage analytics box will open the usage analytics blade, which will show you the metrics and groupings.\n\n>[AZURE.NOTE] In order to use Usage Analytics with AD FS, you must ensure that AD FS auditing is enabled. For more information, see [Enable Auditing for AD FS](active-directory-aadconnect-health-operations.md#enable-auditing-for-ad-fs). \n\n![Azure AD Connect Health Portal](./media/active-directory-aadconnect-health/report1.png)\n\nTo select additional metrics, specify a time range, or to change the grouping, simply right-click on the usage analytics chart and select Edit Chart. Then you can specify the time range, change or select metrics and change the grouping. You can view the distribution of the authentication traffic based on different \"metrics\" and group each metric using relevant \"group by\" parameters described below.\n\n| Metric | Group By | What the grouping means and why it's useful? |\n| ------ | -------- | -------------------------------------------- |\n| Total Requests: The total number of request processed by the federation service | All | This will show the count of total number of requests without grouping. |\n|  | Application | This option will group the total requests based on the targeted relying party. This grouping is useful to understand which application is receiving how much percentage of the total traffic. |\n|  | Server | This option will group the total requests based on the server that processed the request. This grouping is useful to understand the load distribution of the total traffic. |\n|  | Workplace Join | This option will group the total requests based on if the requests are coming from devices that are workplace joined (known). This grouping is useful to understand if your resources are accessed using devices that are unknown to the identity infrastructure. |\n|  | Authentication Method | This option will group the total requests based on the authentication method used for authentication. This grouping is useful to understand the common authentication method that gets used for authentication. Following are the possible authentication methods <ol> <li>Windows Integrated Authentication (Windows)</li> <li>Forms Based Authentication (Forms)</li> <li>SSO (Single Sign On)</li> <li>X509 Certificate Authentication (Certificate)</li> <br>Please note that a request is counted as SSO (Single Sign On) if the federation servers receive the request with an SSO Cookie. In such cases, if the cookie is valid, the user is not asked to provide credentials and gets seamless access to the application. This is common if you have multiple relying parties protected by the federation servers. |\n|  | Network Location | This option will group the total requests based on the network location of the user. It can be either intranet or extranet. This grouping is useful to know what percentage of the traffic is coming from the intranet verses extranet. |\n| Total Failed Requests: The total number failed requests processed by the federation service. <br> (This metric is only available on AD FS for Windows Server 2012 R2)| Error Type | This will show the number of errors based on predefined error types. This grouping is useful to understand the common types of errors. <ul><li>Incorrect Username or Password: Errors due to incorrect username or password.</li> <li>\"Extranet Lockout\": Failures due to the requests received from a user that was locked out from extranet </li><li> \"Expired Password\": Failures due to users logging in with an expired password.</li><li>\"Disabled Account\": Failures due to users logging with a disabled account.</li><li>\"Device Authentication\": Failures due to users failing to authenticate using Device Authentication.</li><li>\"User Certificate Authentication\": Failures due to users failing to authenticate because of an invalid certificate.</li><li>\"MFA\": Failures due to user failing to authenticate using Multi Factor Authentication.</li><li>\"Other Credential\": \"Issuance Authorization\": Failures due to authorization failures.</li><li>\"Issuance Delegation\": Failures due to issuance delegation errors.</li><li>\"Token Acceptance\": Failures due to ADFS rejecting the token from a 3rd party Identity Provider.</li><li>\"Protocol\": Failure due to protocol errors.</li><li>\"Unknown\": Catch all. Any other failures that do not fit into the defined categories.</li> |\n|  | Server | This will group the errors based on the server. This is useful to understand the error distribution across servers. Uneven distribution could be an indicator of a server in a faulty state. |\n|  | Network Location | This will group the errors based on the network location of the requests (intranet vs extranet). This is useful to understand the type of requests that are failing. |\n|  | Application | This will group the failures based on the targeted application (relying party). This is useful to understand which targeted application is seeing most number of errors. |\n| User Count: Average number of unique users active in the system | All | This provides a count of average number of users using the federation service in the selected time slice. The users are not grouped. <br>The average will depend on the time slice selected. |\n|  | Application | This will group the average number of users based on the targeted application (relying party). This is useful to understand how many users are using which application. |\n\n\n## Performance Monitoring for AD FS\nAzure AD Connect Health Performance Monitoring provides monitoring information on metrics. By selecting the Monitoring box, a blade will open up that provides detailed information on the metrics.\n\n\n![Azure AD Connect Health Portal](./media/active-directory-aadconnect-health/perf1.png)\n\n\nBy selecting the Filter option at the top of the blade, you can filter by server to see an individual server’s metrics. To change metrics, simply right-click on the monitoring chart under the monitoring blade and select Edit Chart. Then, from the new blade that opens up, you can select additional metrics from the drop-down and specify a time range for viewing the performance data.\n\n\n\n\n## Related links\n\n* [Azure AD Connect Health](active-directory-aadconnect-health.md)\n* [Azure AD Connect Health Agent Installation](active-directory-aadconnect-health-agent-install.md)\n* [Azure AD Connect Health Operations](active-directory-aadconnect-health-operations.md)\n* [Using Azure AD Connect Health for sync](active-directory-aadconnect-health-sync.md)\n* [Azure AD Connect Health FAQ](active-directory-aadconnect-health-faq.md)\n\n\n"
}