{
  "nodes": [
    {
      "content": "Azure AD Connect: Ports | Microsoft Azure",
      "pos": [
        27,
        68
      ]
    },
    {
      "content": "This page is a technical reference page for ports that are required to be open for Azure AD Connect",
      "pos": [
        87,
        186
      ]
    },
    {
      "content": "Hybrid Identity Required Ports and Protocols",
      "pos": [
        505,
        549
      ]
    },
    {
      "content": "The following document is a technical reference to provide information on the required ports and protocols that are required for implementing a hybrid identity solution.",
      "pos": [
        551,
        720
      ]
    },
    {
      "content": "Use the illustration below and refer to the corresponding table.",
      "pos": [
        722,
        786
      ]
    },
    {
      "content": "What is Azure AD Connect",
      "pos": [
        790,
        814
      ]
    },
    {
      "content": "Table 1 - Azure AD Connect and On-premises AD",
      "pos": [
        878,
        923
      ]
    },
    {
      "content": "This table describes the ports and protocols that are required for communication between the Azure AD Connect server and on-premises AD.",
      "pos": [
        924,
        1060
      ]
    },
    {
      "content": "Protocol",
      "pos": [
        1064,
        1072
      ]
    },
    {
      "content": "Ports",
      "pos": [
        1074,
        1079
      ]
    },
    {
      "content": "Description",
      "pos": [
        1081,
        1092
      ]
    },
    {
      "content": "DNS",
      "pos": [
        1132,
        1135
      ]
    },
    {
      "content": "53 (TCP/UDP)",
      "pos": [
        1136,
        1148
      ]
    },
    {
      "content": "DNS lookups on the destination forest.",
      "pos": [
        1150,
        1188
      ]
    },
    {
      "content": "Kerberos",
      "pos": [
        1190,
        1198
      ]
    },
    {
      "content": "88 (TCP/UDP)",
      "pos": [
        1199,
        1211
      ]
    },
    {
      "content": "Kerberos authentication to the AD forest.",
      "pos": [
        1213,
        1254
      ]
    },
    {
      "content": "MS-RPC",
      "pos": [
        1256,
        1262
      ]
    },
    {
      "content": "135 (TCP/UDP)",
      "pos": [
        1264,
        1277
      ]
    },
    {
      "content": "Used during the initial configuration of the Azure AD Connect wizard when it binds to the AD forest.",
      "pos": [
        1279,
        1379
      ]
    },
    {
      "content": "LDAP",
      "pos": [
        1381,
        1385
      ]
    },
    {
      "content": "389 (TCP/UDP)",
      "pos": [
        1386,
        1399
      ]
    },
    {
      "content": "Used for data import from AD.",
      "pos": [
        1400,
        1429
      ]
    },
    {
      "content": "Data is encrypted with Kerberos Sign &amp; Seal.",
      "pos": [
        1431,
        1475
      ]
    },
    {
      "content": "LDAP/SSL",
      "pos": [
        1477,
        1485
      ]
    },
    {
      "content": "636 (TCP/UDP)",
      "pos": [
        1486,
        1499
      ]
    },
    {
      "content": "Used for data import from AD.",
      "pos": [
        1500,
        1529
      ]
    },
    {
      "content": "The data transfer is signed and encrypted.",
      "pos": [
        1531,
        1573
      ]
    },
    {
      "content": "Only used if you are using SSL.",
      "pos": [
        1575,
        1606
      ]
    },
    {
      "content": "RPC",
      "pos": [
        1608,
        1611
      ]
    },
    {
      "content": "1024-65353 (Random high RPC Port)(TCP/UDP)",
      "pos": [
        1613,
        1655
      ]
    },
    {
      "content": "Used during the initial configuration of Azure AD Connect when it binds to the AD forests.",
      "pos": [
        1656,
        1746
      ]
    },
    {
      "content": "Table 2 - Azure AD Connect and Azure AD",
      "pos": [
        1751,
        1790
      ]
    },
    {
      "content": "This table describes the ports and protocols that are required for communication between the Azure AD Connect server and Azure AD.",
      "pos": [
        1791,
        1921
      ]
    },
    {
      "content": "Protocol",
      "pos": [
        1925,
        1933
      ]
    },
    {
      "content": "Ports",
      "pos": [
        1935,
        1940
      ]
    },
    {
      "content": "Description",
      "pos": [
        1942,
        1953
      ]
    },
    {
      "content": "HTTP",
      "pos": [
        1993,
        1997
      ]
    },
    {
      "content": "80 (TCP/UDP)",
      "pos": [
        1998,
        2010
      ]
    },
    {
      "content": "Used to download CRLs (Certificate Revocation Lists) to verify SSL certificates.",
      "pos": [
        2011,
        2091
      ]
    },
    {
      "content": "HTTPS",
      "pos": [
        2093,
        2098
      ]
    },
    {
      "content": "443(TCP/UDP)",
      "pos": [
        2099,
        2111
      ]
    },
    {
      "content": "Used to synchronize with Azure AD.",
      "pos": [
        2112,
        2146
      ]
    },
    {
      "pos": [
        2148,
        2349
      ],
      "content": "For a list of Office 365 ports and IP address see <bpt id=\"p1\">[</bpt>Office 365 URLs and IP address ranges.<ept id=\"p1\">](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)</ept>"
    },
    {
      "content": "Table 3 - Azure AD Connect and Federation Servers/WAP",
      "pos": [
        2354,
        2407
      ]
    },
    {
      "content": "This table describes the ports and protocols that are required for communication between the Azure AD Connect server and Federation/WAP servers.",
      "pos": [
        2408,
        2552
      ]
    },
    {
      "content": "Protocol",
      "pos": [
        2558,
        2566
      ]
    },
    {
      "content": "Ports",
      "pos": [
        2568,
        2573
      ]
    },
    {
      "content": "Description",
      "pos": [
        2575,
        2586
      ]
    },
    {
      "content": "HTTP",
      "pos": [
        2626,
        2630
      ]
    },
    {
      "content": "80 (TCP/UDP)",
      "pos": [
        2631,
        2643
      ]
    },
    {
      "content": "Used to download CRLs (Certificate Revocation Lists) to verify SSL certificates.",
      "pos": [
        2644,
        2724
      ]
    },
    {
      "content": "HTTPS",
      "pos": [
        2726,
        2731
      ]
    },
    {
      "content": "443(TCP/UDP)",
      "pos": [
        2732,
        2744
      ]
    },
    {
      "content": "Used to synchronize with Azure AD.",
      "pos": [
        2745,
        2779
      ]
    },
    {
      "content": "WinRM",
      "pos": [
        2781,
        2786
      ]
    },
    {
      "content": "5985",
      "pos": [
        2787,
        2791
      ]
    },
    {
      "content": "WinRM Listener",
      "pos": [
        2793,
        2807
      ]
    },
    {
      "content": "Table 4 - WAP and Federation Servers",
      "pos": [
        2812,
        2848
      ]
    },
    {
      "content": "This table describes the ports and protocols that are required for communication between the Federation servers and WAP servers.",
      "pos": [
        2849,
        2977
      ]
    },
    {
      "content": "Protocol",
      "pos": [
        2981,
        2989
      ]
    },
    {
      "content": "Ports",
      "pos": [
        2991,
        2996
      ]
    },
    {
      "content": "Description",
      "pos": [
        2998,
        3009
      ]
    },
    {
      "content": "HTTPS",
      "pos": [
        3048,
        3053
      ]
    },
    {
      "content": "443(TCP/UDP)",
      "pos": [
        3054,
        3066
      ]
    },
    {
      "content": "Used for authentication.",
      "pos": [
        3067,
        3091
      ]
    },
    {
      "content": "Table 5 - WAP and Users",
      "pos": [
        3096,
        3119
      ]
    },
    {
      "content": "This table describes the ports and protocols that are required for communication between users and the WAP servers.",
      "pos": [
        3120,
        3235
      ]
    },
    {
      "content": "Protocol",
      "pos": [
        3239,
        3247
      ]
    },
    {
      "content": "Ports",
      "pos": [
        3249,
        3254
      ]
    },
    {
      "content": "Description",
      "pos": [
        3256,
        3267
      ]
    },
    {
      "content": "HTTPS",
      "pos": [
        3306,
        3311
      ]
    },
    {
      "content": "443(TCP/UDP)",
      "pos": [
        3312,
        3324
      ]
    },
    {
      "content": "Used for device authentication.",
      "pos": [
        3325,
        3356
      ]
    },
    {
      "content": "TCP",
      "pos": [
        3358,
        3361
      ]
    },
    {
      "content": "49443 (TCP)",
      "pos": [
        3362,
        3373
      ]
    },
    {
      "content": "Used for certificate authentication.",
      "pos": [
        3374,
        3410
      ]
    },
    {
      "content": "Table 6a &amp; 6b - Azure AD Connect Health agent for (AD FS/Sync) and Azure AD",
      "pos": [
        3416,
        3491
      ]
    },
    {
      "content": "The following tables describe the endpoints, ports and protocols that are required for communication between Azure AD Connect Health agents and Azure AD",
      "pos": [
        3492,
        3644
      ]
    },
    {
      "content": "Table 6a - Ports and Protocols for Azure AD Connect Health agent for (AD FS/Sync) and Azure AD",
      "pos": [
        3650,
        3744
      ]
    },
    {
      "content": "This table describes the following outbound ports and protocols that are required for communication between the Azure AD Connect Health agents and Azure AD.",
      "pos": [
        3745,
        3901
      ]
    },
    {
      "content": "Protocol",
      "pos": [
        3907,
        3915
      ]
    },
    {
      "content": "Ports",
      "pos": [
        3917,
        3922
      ]
    },
    {
      "content": "Description",
      "pos": [
        3925,
        3936
      ]
    },
    {
      "content": "HTTPS",
      "pos": [
        3975,
        3980
      ]
    },
    {
      "content": "443(TCP/UDP)",
      "pos": [
        3981,
        3993
      ]
    },
    {
      "content": "Outbound",
      "pos": [
        3995,
        4003
      ]
    },
    {
      "content": "Azure Service Bus",
      "pos": [
        4005,
        4022
      ]
    },
    {
      "content": "5671 (TCP/UDP)",
      "pos": [
        4023,
        4037
      ]
    },
    {
      "content": "Outbound",
      "pos": [
        4039,
        4047
      ]
    },
    {
      "content": "6b - Endpoints for Azure AD Connect Health agent for (AD FS/Sync) and Azure AD",
      "pos": [
        4053,
        4131
      ]
    },
    {
      "pos": [
        4132,
        4276
      ],
      "content": "For a list of endpoints see <bpt id=\"p1\">[</bpt>the Requirements section for the Azure AD Connect Health agent<ept id=\"p1\">](active-directory-aadconnect-health.md#requirements)</ept>"
    }
  ],
  "content": "<properties\n    pageTitle=\"Azure AD Connect: Ports | Microsoft Azure\"\n    description=\"This page is a technical reference page for ports that are required to be open for Azure AD Connect\"\n    services=\"active-directory\"\n    documentationCenter=\"\"\n    authors=\"billmath\"\n    manager=\"stevenpo\"\n    editor=\"curtand\"/>\n\n<tags\n    ms.service=\"active-directory\"\n    ms.workload=\"identity\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"02/09/2016\"\n    ms.author=\"billmath\"/>\n\n# Hybrid Identity Required Ports and Protocols\n\nThe following document is a technical reference to provide information on the required ports and protocols that are required for implementing a hybrid identity solution.  Use the illustration below and refer to the corresponding table.\n\n![What is Azure AD Connect](./media/active-directory-aadconnect-ports/required1.png)\n\n\n## Table 1 - Azure AD Connect and On-premises AD\nThis table describes the ports and protocols that are required for communication between the Azure AD Connect server and on-premises AD.\n\n| Protocol |Ports |Description\n| --------- | --------- |--------- |\n| DNS|53 (TCP/UDP)| DNS lookups on the destination forest.\n|Kerberos|88 (TCP/UDP)| Kerberos authentication to the AD forest.\n|MS-RPC |135 (TCP/UDP)| Used during the initial configuration of the Azure AD Connect wizard when it binds to the AD forest.\n|LDAP|389 (TCP/UDP)|Used for data import from AD.  Data is encrypted with Kerberos Sign & Seal.\n|LDAP/SSL|636 (TCP/UDP)|Used for data import from AD.  The data transfer is signed and encrypted.  Only used if you are using SSL.\n|RPC |1024-65353 (Random high RPC Port)(TCP/UDP)|Used during the initial configuration of Azure AD Connect when it binds to the AD forests.\n\n## Table 2 - Azure AD Connect and Azure AD\nThis table describes the ports and protocols that are required for communication between the Azure AD Connect server and Azure AD.\n\n| Protocol |Ports |Description\n| --------- | --------- |--------- |\n| HTTP|80 (TCP/UDP)|Used to download CRLs (Certificate Revocation Lists) to verify SSL certificates.\n|HTTPS|443(TCP/UDP)|Used to synchronize with Azure AD.\n\nFor a list of Office 365 ports and IP address see [Office 365 URLs and IP address ranges.](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)\n\n## Table 3 - Azure AD Connect and Federation Servers/WAP\nThis table describes the ports and protocols that are required for communication between the Azure AD Connect server and Federation/WAP servers.  \n\n| Protocol |Ports |Description\n| --------- | --------- |--------- |\n| HTTP|80 (TCP/UDP)|Used to download CRLs (Certificate Revocation Lists) to verify SSL certificates.\n|HTTPS|443(TCP/UDP)|Used to synchronize with Azure AD.\n|WinRM|5985| WinRM Listener\n\n## Table 4 - WAP and Federation Servers\nThis table describes the ports and protocols that are required for communication between the Federation servers and WAP servers.\n\n| Protocol |Ports |Description\n| --------- | --------- |--------- |\n|HTTPS|443(TCP/UDP)|Used for authentication.\n\n## Table 5 - WAP and Users\nThis table describes the ports and protocols that are required for communication between users and the WAP servers.\n\n| Protocol |Ports |Description\n| --------- | --------- |--------- |\n|HTTPS|443(TCP/UDP)|Used for device authentication.\n|TCP|49443 (TCP)|Used for certificate authentication.\n\n\n## Table 6a & 6b - Azure AD Connect Health agent for (AD FS/Sync) and Azure AD\nThe following tables describe the endpoints, ports and protocols that are required for communication between Azure AD Connect Health agents and Azure AD\n\n### Table 6a - Ports and Protocols for Azure AD Connect Health agent for (AD FS/Sync) and Azure AD\nThis table describes the following outbound ports and protocols that are required for communication between the Azure AD Connect Health agents and Azure AD.  \n\n| Protocol |Ports  |Description\n| --------- | --------- |--------- |\n|HTTPS|443(TCP/UDP)| Outbound\n|Azure Service Bus|5671 (TCP/UDP)| Outbound\n\n### 6b - Endpoints for Azure AD Connect Health agent for (AD FS/Sync) and Azure AD\nFor a list of endpoints see [the Requirements section for the Azure AD Connect Health agent](active-directory-aadconnect-health.md#requirements)\n"
}