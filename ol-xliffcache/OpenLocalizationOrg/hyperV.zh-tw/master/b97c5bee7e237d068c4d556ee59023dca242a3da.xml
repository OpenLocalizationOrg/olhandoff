{
  "nodes": [
    {
      "content": "Azure AD Connect sync: Generic SQL Connector",
      "pos": [
        26,
        70
      ]
    },
    {
      "content": "This article describes how to configure Microsoft's Generic SQL Connector.",
      "pos": [
        88,
        162
      ]
    },
    {
      "content": "Generic SQL Connector technical reference",
      "pos": [
        462,
        503
      ]
    },
    {
      "content": "This article describes the Generic SQL Connector.",
      "pos": [
        505,
        554
      ]
    },
    {
      "content": "The article applies to the following products:",
      "pos": [
        555,
        601
      ]
    },
    {
      "content": "Microsoft Identity Manager 2016 (MIM2016)",
      "pos": [
        605,
        646
      ]
    },
    {
      "content": "Forefront Identity Manager 2010 R2 (FIM2010R2)",
      "pos": [
        649,
        695
      ]
    },
    {
      "pos": [
        704,
        794
      ],
      "content": "Must use hotfix 4.1.3461.0 or later <bpt id=\"p1\">[</bpt>KB2870703<ept id=\"p1\">](https://support.microsoft.com/kb/2870703)</ept>."
    },
    {
      "pos": [
        796,
        947
      ],
      "content": "For MIM2016 and FIM2010R2 the Connector is available as a download from the <bpt id=\"p1\">[</bpt>Microsoft Download Center<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=717495)</ept>."
    },
    {
      "content": "Overview of the Generic SQL Connector",
      "pos": [
        952,
        989
      ]
    },
    {
      "content": "The Generic SQL Connector enable you to integrate the synchronization service with a database system that offer ODBC connectivity.",
      "pos": [
        991,
        1121
      ]
    },
    {
      "content": "From a high level perspective, the following features supported by the current release of the connector:",
      "pos": [
        1125,
        1229
      ]
    },
    {
      "content": "Feature",
      "pos": [
        1233,
        1240
      ]
    },
    {
      "content": "Support",
      "pos": [
        1243,
        1250
      ]
    },
    {
      "content": "Connected data source",
      "pos": [
        1269,
        1290
      ]
    },
    {
      "content": "The Connector is supported with all 64-bit ODBC drivers.",
      "pos": [
        1293,
        1349
      ]
    },
    {
      "content": "It has been tested with the following:",
      "pos": [
        1350,
        1388
      ]
    },
    {
      "content": "Microsoft SQL Server &amp; SQL Azure",
      "pos": [
        1393,
        1425
      ]
    },
    {
      "content": "IBM DB2 10.x",
      "pos": [
        1434,
        1446
      ]
    },
    {
      "content": "IBM DB2 9.x",
      "pos": [
        1455,
        1466
      ]
    },
    {
      "content": "Oracle 10 &amp; 11g",
      "pos": [
        1475,
        1490
      ]
    },
    {
      "content": "MySQL 5.x",
      "pos": [
        1499,
        1508
      ]
    },
    {
      "content": "Scenarios",
      "pos": [
        1516,
        1525
      ]
    },
    {
      "content": "Object Lifecycle Management",
      "pos": [
        1532,
        1559
      ]
    },
    {
      "content": "Password Management",
      "pos": [
        1568,
        1587
      ]
    },
    {
      "content": "Operations",
      "pos": [
        1597,
        1607
      ]
    },
    {
      "content": "Full Import and Delta Import, Export",
      "pos": [
        1614,
        1650
      ]
    },
    {
      "content": "For Export: Add, Delete, Update, and Replace",
      "pos": [
        1659,
        1703
      ]
    },
    {
      "content": "Set Password, Change Password",
      "pos": [
        1712,
        1741
      ]
    },
    {
      "content": "Schema",
      "pos": [
        1749,
        1755
      ]
    },
    {
      "content": "Dynamic discovery of objects and attributes",
      "pos": [
        1762,
        1805
      ]
    },
    {
      "content": "Prerequisites",
      "pos": [
        1816,
        1829
      ]
    },
    {
      "content": "Before you use the Connector, make sure you have the following on the synchronization server in addition to any hotfix mentioned above:",
      "pos": [
        1831,
        1966
      ]
    },
    {
      "content": "Microsoft .NET 4.5.2 Framework or later",
      "pos": [
        1970,
        2009
      ]
    },
    {
      "content": "64-bit ODBC client drivers",
      "pos": [
        2012,
        2038
      ]
    },
    {
      "content": "Permissions in connected data source",
      "pos": [
        2044,
        2080
      ]
    },
    {
      "content": "To create or perform any of the supported tasks in Generic SQL connector, you must have:",
      "pos": [
        2082,
        2170
      ]
    },
    {
      "content": "db_datareader",
      "pos": [
        2174,
        2187
      ]
    },
    {
      "content": "db_datawriter",
      "pos": [
        2190,
        2203
      ]
    },
    {
      "content": "Ports and protocols",
      "pos": [
        2209,
        2228
      ]
    },
    {
      "content": "For the ports required for the ODBC driver to work, please consult the database vendor's documentation.",
      "pos": [
        2230,
        2333
      ]
    },
    {
      "content": "Create a new Connector",
      "pos": [
        2338,
        2360
      ]
    },
    {
      "content": "To Create a Generic SQL connector, in <bpt id=\"p1\">**</bpt>Synchronization Service<ept id=\"p1\">**</ept> select <bpt id=\"p2\">**</bpt>Management Agent<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Create<ept id=\"p3\">**</ept>.",
      "pos": [
        2362,
        2471
      ]
    },
    {
      "content": "Select the <bpt id=\"p1\">**</bpt>Generic SQL (Microsoft)<ept id=\"p1\">**</ept> Connector.",
      "pos": [
        2472,
        2521
      ]
    },
    {
      "content": "CreateConnector",
      "pos": [
        2525,
        2540
      ]
    },
    {
      "content": "Connectivity",
      "pos": [
        2629,
        2641
      ]
    },
    {
      "content": "The Connector uses an ODBC DSN file for connectivity.",
      "pos": [
        2643,
        2696
      ]
    },
    {
      "content": "Create the DSN file using <bpt id=\"p1\">**</bpt>ODBC Data Sources<ept id=\"p1\">**</ept> found in the start menu under <bpt id=\"p2\">**</bpt>Administrative Tools<ept id=\"p2\">**</ept>.",
      "pos": [
        2697,
        2800
      ]
    },
    {
      "content": "In the administrative tool, create a <bpt id=\"p1\">**</bpt>File DSN<ept id=\"p1\">**</ept> so it can be provided to the Connector.",
      "pos": [
        2801,
        2890
      ]
    },
    {
      "content": "CreateConnector",
      "pos": [
        2894,
        2909
      ]
    },
    {
      "content": "The Connectivity screen is the first when you create a new Generic SQL Connector.",
      "pos": [
        2991,
        3072
      ]
    },
    {
      "content": "You first need to provide the following information:",
      "pos": [
        3073,
        3125
      ]
    },
    {
      "content": "DSN file path",
      "pos": [
        3129,
        3142
      ]
    },
    {
      "content": "Authentication",
      "pos": [
        3145,
        3159
      ]
    },
    {
      "content": "User Name",
      "pos": [
        3166,
        3175
      ]
    },
    {
      "content": "Password",
      "pos": [
        3182,
        3190
      ]
    },
    {
      "content": "The database should support one of the authentication methods mentioned below.",
      "pos": [
        3192,
        3270
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Windows authentication<ept id=\"p1\">**</ept>: The authenticating database will use the Windows credentials to verify the user.",
      "pos": [
        3274,
        3382
      ]
    },
    {
      "content": "In this case the service account used by the synchronization service will be used.",
      "pos": [
        3383,
        3465
      ]
    },
    {
      "content": "This account will need permissions to the database.",
      "pos": [
        3466,
        3517
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>SQL authentication<ept id=\"p1\">**</ept>: The authenticating database will use the user name/password defined one the Connectivity screen to connect to the database.",
      "pos": [
        3520,
        3667
      ]
    },
    {
      "content": "If you store the user name/pasword in the DSN file, the credentials provided on the Connectivity screen has precedence.",
      "pos": [
        3668,
        3787
      ]
    },
    {
      "pos": [
        3790,
        3962
      ],
      "content": "<bpt id=\"p1\">**</bpt>Azure SQL Database authentication<ept id=\"p1\">**</ept>: For more information see <bpt id=\"p2\">[</bpt>Connect to SQL Database By Using Azure Active Directory Authentication<ept id=\"p2\">](sql-database-aad-authentication.md)</ept>"
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>DN is Anchor<ept id=\"p1\">**</ept>: If you select this option, the DN will also be used as the anchor attribute.",
      "pos": [
        3964,
        4058
      ]
    },
    {
      "content": "It can be used for a simple implementation but also has the following limitations:",
      "pos": [
        4059,
        4141
      ]
    },
    {
      "content": "Connector supports only 1 object type.",
      "pos": [
        4147,
        4185
      ]
    },
    {
      "content": "Therefore any reference attributes can only reference the same object type.",
      "pos": [
        4186,
        4261
      ]
    },
    {
      "pos": [
        4263,
        4447
      ],
      "content": "<bpt id=\"p1\">**</bpt>Export Type: Object Replace<ept id=\"p1\">**</ept>: During export when only some attributes have been changed, the entire object with all attributes will be exported and will replace the existing object."
    },
    {
      "content": "Schema 1 (Detect object types)",
      "pos": [
        4453,
        4483
      ]
    },
    {
      "content": "On this page you are going to configure how the Connector is going to find the different object types in the database.",
      "pos": [
        4485,
        4603
      ]
    },
    {
      "pos": [
        4605,
        4723
      ],
      "content": "Every object type will be presented as a partition and configured further on <bpt id=\"p1\">**</bpt>Configure Partitions and Hierarchies<ept id=\"p1\">**</ept>."
    },
    {
      "content": "schema1a",
      "pos": [
        4727,
        4735
      ]
    },
    {
      "pos": [
        4813,
        4906
      ],
      "content": "<bpt id=\"p1\">**</bpt>Object Type detection method<ept id=\"p1\">**</ept>: The Connector supports these object type detection methods."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Fixed Value<ept id=\"p1\">**</ept>: You provide the list of object types with a comma separated list.",
      "pos": [
        4910,
        4992
      ]
    },
    {
      "content": "E.g.",
      "pos": [
        4993,
        4997
      ]
    },
    {
      "content": "User,Group,Department.",
      "pos": [
        4998,
        5020
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>schema1b<ph id=\"ph2\">](./media/active-directory-aadconnectsync-connector-genericsql/schema1b.png)</ph>",
      "pos": [
        5023,
        5109
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Table/View/Stored Procedure<ept id=\"p1\">**</ept>: Provide the name of the table/view/stored procedure and then the column name which will provide the list of object types.",
      "pos": [
        5112,
        5266
      ]
    },
    {
      "content": "If you use a stored procedure then also provide parameters for it in the format <bpt id=\"p1\">**</bpt>[Name]:[Direction]:[Value]<ept id=\"p1\">**</ept>.",
      "pos": [
        5267,
        5378
      ]
    },
    {
      "content": "Provide each parameter on a separate line (use Ctrl+Enter to get a new line).",
      "pos": [
        5379,
        5456
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>schema1c<ph id=\"ph2\">](./media/active-directory-aadconnectsync-connector-genericsql/schema1c.png)</ph>",
      "pos": [
        5459,
        5545
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>SQL Query<ept id=\"p1\">**</ept>: This option allow you to provide a SQL query which will return a single column with object types, e.g. <ph id=\"ph1\">`SELECT [Column Name] FROM TABLENAME`</ph>.",
      "pos": [
        5548,
        5704
      ]
    },
    {
      "content": "The returned column must be of type string (varchar).",
      "pos": [
        5705,
        5758
      ]
    },
    {
      "content": "Schema 2 (Detect attribute types)",
      "pos": [
        5764,
        5797
      ]
    },
    {
      "content": "On this page you are going to configure how the attribute names and types are going to be detected.",
      "pos": [
        5799,
        5898
      ]
    },
    {
      "content": "The configuration options are listed for every object type detected on the previous page.",
      "pos": [
        5899,
        5988
      ]
    },
    {
      "content": "schema2a",
      "pos": [
        5992,
        6000
      ]
    },
    {
      "pos": [
        6078,
        6229
      ],
      "content": "<bpt id=\"p1\">**</bpt>Attribute Type detection method<ept id=\"p1\">**</ept>: The Connector supports these  attribute type detection methods with every detected object type in Schema 1 screen."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Table/View/Stored Procedure<ept id=\"p1\">**</ept>: Provide the name of the table/view/stored procedure which should be used to find the attribute names.",
      "pos": [
        6233,
        6367
      ]
    },
    {
      "content": "If you use a stored procedure then also provide parameters for it in the format <bpt id=\"p1\">**</bpt>[Name]:[Direction]:[Value]<ept id=\"p1\">**</ept>.",
      "pos": [
        6368,
        6479
      ]
    },
    {
      "content": "Provide each parameter on a separate line (use Ctrl+Enter to get a new line).",
      "pos": [
        6480,
        6557
      ]
    },
    {
      "content": "To detect the attribute names in a multi-valued attribute, provide a comma separated list of Tables or Views.",
      "pos": [
        6558,
        6667
      ]
    },
    {
      "content": "Multivalued scenarios are not supported if parent and child table have same column names.",
      "pos": [
        6668,
        6757
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>SQL query<ept id=\"p1\">**</ept> This option allow you to provide a SQL query which will return a single column with attribute names, e.g. <ph id=\"ph1\">`SELECT [Column Name] FROM TABLENAME`</ph>.",
      "pos": [
        6760,
        6918
      ]
    },
    {
      "content": "The returned column must be of type string (varchar).",
      "pos": [
        6919,
        6972
      ]
    },
    {
      "content": "Schema 3 (Define anchor and DN)",
      "pos": [
        6978,
        7009
      ]
    },
    {
      "content": "This page allows you to configure anchor and DN attribute for each detected object type.",
      "pos": [
        7011,
        7099
      ]
    },
    {
      "content": "You can select multiple attribute to make the anchor unique.",
      "pos": [
        7100,
        7160
      ]
    },
    {
      "content": "schema3a",
      "pos": [
        7164,
        7172
      ]
    },
    {
      "content": "Multi-valued and Boolean attributes are not listed.",
      "pos": [
        7252,
        7303
      ]
    },
    {
      "pos": [
        7306,
        7412
      ],
      "content": "Same attribute cannot use for DN and anchor, unless <bpt id=\"p1\">**</bpt>DN is Anchor<ept id=\"p1\">**</ept> is selected on the Connectivity page."
    },
    {
      "content": "If <bpt id=\"p1\">**</bpt>DN is Anchor<ept id=\"p1\">**</ept> is selected on the Connectivity page, this page requires only the DN attribute.",
      "pos": [
        7415,
        7514
      ]
    },
    {
      "content": "This attribute would also be used as the anchor attribute.",
      "pos": [
        7515,
        7573
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>schema3b<ph id=\"ph2\">](./media/active-directory-aadconnectsync-connector-genericsql/schema3b.png)</ph>",
      "pos": [
        7574,
        7660
      ]
    },
    {
      "content": "Schema 4 (Define attribute type, reference, and direction)",
      "pos": [
        7666,
        7724
      ]
    },
    {
      "content": "This page allows you to configure the attribute type like integer, reference, string, binary, or Boolean and direction for each attribute.",
      "pos": [
        7726,
        7864
      ]
    },
    {
      "content": "All attributes from page <bpt id=\"p1\">**</bpt>schema 2<ept id=\"p1\">**</ept> are listed including multi-valued attributes.",
      "pos": [
        7865,
        7948
      ]
    },
    {
      "content": "schema4a",
      "pos": [
        7952,
        7960
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>DataType<ept id=\"p1\">**</ept>: Used to map the attribute type to those known by the sync engine.",
      "pos": [
        8040,
        8119
      ]
    },
    {
      "content": "The default is to use the same type as detected in the SQL schema, but DateTime and Reference are not easily detactable.",
      "pos": [
        8120,
        8240
      ]
    },
    {
      "content": "For those you need to specify <bpt id=\"p1\">**</bpt>DateTime<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Reference<ept id=\"p2\">**</ept>.",
      "pos": [
        8241,
        8301
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Direction<ept id=\"p1\">**</ept>: You can set the attribute direction to Import, Export or ImportExport.",
      "pos": [
        8304,
        8389
      ]
    },
    {
      "content": "ImportExport is default.",
      "pos": [
        8390,
        8414
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>schema4b<ph id=\"ph2\">](./media/active-directory-aadconnectsync-connector-genericsql/schema4b.png)</ph>",
      "pos": [
        8415,
        8501
      ]
    },
    {
      "content": "Notes:",
      "pos": [
        8503,
        8509
      ]
    },
    {
      "content": "If an attribute type is not detectable by the Connector, it will use the String data type.",
      "pos": [
        8513,
        8603
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Nested tables<ept id=\"p1\">**</ept> can be considered one-column database tables.",
      "pos": [
        8606,
        8669
      ]
    },
    {
      "content": "Oracle stores the rows of a nested table in no particular order.",
      "pos": [
        8670,
        8734
      ]
    },
    {
      "content": "However, when you retrieve the nested table into a PL/SQL variable, the rows are given consecutive subscripts starting at 1.",
      "pos": [
        8735,
        8859
      ]
    },
    {
      "content": "That gives you array-like access to individual rows.",
      "pos": [
        8860,
        8912
      ]
    },
    {
      "pos": [
        8915,
        8961
      ],
      "content": "<bpt id=\"p1\">**</bpt>VARRYS<ept id=\"p1\">**</ept> are not supported in the connector."
    },
    {
      "content": "Schema 5 (Define partition for reference attributes)",
      "pos": [
        8967,
        9019
      ]
    },
    {
      "content": "On this page you will configure for all reference attributes which partition, i.e. object type, an attribute is referring to.",
      "pos": [
        9021,
        9146
      ]
    },
    {
      "content": "schema5",
      "pos": [
        9150,
        9157
      ]
    },
    {
      "content": "If you use <bpt id=\"p1\">**</bpt>DN is anchor<ept id=\"p1\">**</ept> then you must use the same object type as the one you are referring from.",
      "pos": [
        9234,
        9335
      ]
    },
    {
      "content": "You cannot reference another object type.",
      "pos": [
        9336,
        9377
      ]
    },
    {
      "content": "Global Parameters",
      "pos": [
        9383,
        9400
      ]
    },
    {
      "content": "The Global Parameters page is used to configure Delta Import, Date/Time format, and Password method.",
      "pos": [
        9402,
        9502
      ]
    },
    {
      "content": "globalparameters1",
      "pos": [
        9506,
        9523
      ]
    },
    {
      "content": "The Generic SQL Connector supports the following methods for Delta Import:",
      "pos": [
        9610,
        9684
      ]
    },
    {
      "pos": [
        9688,
        9798
      ],
      "content": "<bpt id=\"p1\">**</bpt>Trigger<ept id=\"p1\">**</ept>: See <bpt id=\"p2\">[</bpt>Generating Delta Views Using Triggers<ept id=\"p2\">](https://technet.microsoft.com/library/cc708665.aspx)</ept>."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Watermark<ept id=\"p1\">**</ept>: This is a generic approach and can be used with any database.",
      "pos": [
        9801,
        9877
      ]
    },
    {
      "content": "The watermark query is pre-populated based on the database vendor.",
      "pos": [
        9878,
        9944
      ]
    },
    {
      "content": "A watermark column must be present on every table/view used.",
      "pos": [
        9945,
        10005
      ]
    },
    {
      "content": "This must track inserts and updates to the tables as well as its dependent (multi-valued or child) tables.",
      "pos": [
        10006,
        10112
      ]
    },
    {
      "content": "The clocks between Synchronization Service and the database server must be synchronized.",
      "pos": [
        10113,
        10201
      ]
    },
    {
      "content": "If not, some entries in the delta import might be omitted.",
      "pos": [
        10202,
        10260
      ]
    },
    {
      "content": "Limitation:",
      "pos": [
        10263,
        10274
      ]
    },
    {
      "content": "Watermark strategy does not supports deleted objects.",
      "pos": [
        10281,
        10334
      ]
    },
    {
      "pos": [
        10337,
        10482
      ],
      "content": "<bpt id=\"p1\">**</bpt>Snapshot<ept id=\"p1\">**</ept> (Works only with Microsoft SQL Server) <bpt id=\"p2\">[</bpt>Generating Delta Views Using Snapshots<ept id=\"p2\">](https://technet.microsoft.com/library/cc720640.aspx)</ept>"
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Change Tracking<ept id=\"p1\">**</ept> (Works only with Microsoft SQL Server) <bpt id=\"p2\">[</bpt>About Change Tracking<ept id=\"p2\">](https://msdn.microsoft.com/library/bb933875.aspx)</ept>",
      "pos": [
        10485,
        10617
      ]
    },
    {
      "content": "Limitations:",
      "pos": [
        10620,
        10632
      ]
    },
    {
      "content": "Anchor &amp; DN attribute must be part of primary key for the selected object in the table.",
      "pos": [
        10639,
        10726
      ]
    },
    {
      "content": "SQL query is unsupported during Import and Export with Change Tracking.",
      "pos": [
        10733,
        10804
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Additional Parameters<ept id=\"p1\">**</ept>: Specify the Database Server Time Zone indicating where your Database server is located.",
      "pos": [
        10806,
        10920
      ]
    },
    {
      "content": "This value is used to support the various format of date &amp; time attributes.",
      "pos": [
        10921,
        10996
      ]
    },
    {
      "content": "The Connector will always store date and date-time in UTC format.",
      "pos": [
        10998,
        11063
      ]
    },
    {
      "content": "To be able to correctly convert the date and times the time zone of the database server and the format used must be specified.",
      "pos": [
        11064,
        11190
      ]
    },
    {
      "content": "The format should be expressed in .Net format.",
      "pos": [
        11191,
        11237
      ]
    },
    {
      "content": "During export every date time attribute must be provided to the Connector in UTC time format.",
      "pos": [
        11239,
        11332
      ]
    },
    {
      "content": "globalparameters2",
      "pos": [
        11336,
        11353
      ]
    },
    {
      "pos": [
        11440,
        11566
      ],
      "content": "<bpt id=\"p1\">**</bpt>Password Configuration<ept id=\"p1\">**</ept>: The connector provides password synchronization capabilities and supports set and change password."
    },
    {
      "content": "The Connector provides two methods to support password synchronization:",
      "pos": [
        11568,
        11639
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Stored Procedure<ept id=\"p1\">**</ept>: This method required two stored procedures to support Set &amp; Change password.",
      "pos": [
        11643,
        11741
      ]
    },
    {
      "content": "Type all parameters for add and change the password operation in Set Password SP and Change Password SP Parameters respectively as per below example.",
      "pos": [
        11742,
        11891
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>globalparameters3<ph id=\"ph2\">](./media/active-directory-aadconnectsync-connector-genericsql/globalparameters3.png)</ph>",
      "pos": [
        11892,
        11996
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Password Extension<ept id=\"p1\">**</ept>: This method requires Password extension DLL (you need to provide the Extension DLL Name that is implementing <bpt id=\"p2\">[</bpt>IMAExtensible2Password<ept id=\"p2\">](https://msdn.microsoft.com/library/microsoft.metadirectoryservices.imaextensible2password.aspx)</ept> interface).",
      "pos": [
        11999,
        12264
      ]
    },
    {
      "content": "Password extension assembly must be placed in extension folder so that connector can load the DLL at runtime.",
      "pos": [
        12265,
        12374
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>globalparameters4<ph id=\"ph2\">](./media/active-directory-aadconnectsync-connector-genericsql/globalparameters4.png)</ph>",
      "pos": [
        12375,
        12479
      ]
    },
    {
      "content": "You also have to enable the Password Management on the <bpt id=\"p1\">**</bpt>Configure Extension<ept id=\"p1\">**</ept> page.",
      "pos": [
        12481,
        12565
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>globalparameters5<ph id=\"ph2\">](./media/active-directory-aadconnectsync-connector-genericsql/globalparameters5.png)</ph>",
      "pos": [
        12566,
        12670
      ]
    },
    {
      "content": "Configure Partitions and Hierarchies",
      "pos": [
        12676,
        12712
      ]
    },
    {
      "content": "On the partitions and hierarchies page, select all object types.",
      "pos": [
        12714,
        12778
      ]
    },
    {
      "content": "Each object type is in its own partition.",
      "pos": [
        12779,
        12820
      ]
    },
    {
      "content": "partitions1",
      "pos": [
        12824,
        12835
      ]
    },
    {
      "pos": [
        12916,
        13011
      ],
      "content": "You can also override the values defined on the <bpt id=\"p1\">**</bpt>Connectivity<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Global Parameters<ept id=\"p2\">**</ept> page."
    },
    {
      "content": "partitions2",
      "pos": [
        13015,
        13026
      ]
    },
    {
      "content": "Configure Anchors",
      "pos": [
        13111,
        13128
      ]
    },
    {
      "content": "This page is read-only since the anchor has already been defined.",
      "pos": [
        13130,
        13195
      ]
    },
    {
      "content": "The selected anchor attribute is always appended with the object type to ensure it will remain unique across object types.",
      "pos": [
        13196,
        13318
      ]
    },
    {
      "content": "anchors",
      "pos": [
        13322,
        13329
      ]
    },
    {
      "content": "Configure Run Step Parameter",
      "pos": [
        13409,
        13437
      ]
    },
    {
      "content": "These steps are configured on the run profiles on the Connector.",
      "pos": [
        13439,
        13503
      ]
    },
    {
      "content": "These configurations will do the actual work of importing and exporting data.",
      "pos": [
        13504,
        13581
      ]
    },
    {
      "content": "Full and Delta Import",
      "pos": [
        13587,
        13608
      ]
    },
    {
      "content": "Generic SQL Connector support Full and Delta Import using these methods:",
      "pos": [
        13610,
        13682
      ]
    },
    {
      "content": "Table",
      "pos": [
        13686,
        13691
      ]
    },
    {
      "content": "View",
      "pos": [
        13694,
        13698
      ]
    },
    {
      "content": "Stored Procedure",
      "pos": [
        13701,
        13717
      ]
    },
    {
      "content": "SQL Query",
      "pos": [
        13720,
        13729
      ]
    },
    {
      "content": "runstep1",
      "pos": [
        13733,
        13741
      ]
    },
    {
      "content": "Table/View",
      "pos": [
        13821,
        13831
      ]
    },
    {
      "pos": [
        13835,
        14059
      ],
      "content": "To import multi-valued attributes for an object, you have to provide the comma separated table/view name in <bpt id=\"p1\">**</bpt>Name of Multi-Valued table/views<ept id=\"p1\">**</ept> and respective join conditions in the <bpt id=\"p2\">**</bpt>Join condition<ept id=\"p2\">**</ept> with the parent table."
    },
    {
      "content": "Example: You want to import the Employee object and all its multi-valued attributes.",
      "pos": [
        14061,
        14145
      ]
    },
    {
      "content": "There are two tables named Employee (main table) and Department (multi-valued) table.",
      "pos": [
        14146,
        14231
      ]
    },
    {
      "content": "Do the following:",
      "pos": [
        14232,
        14249
      ]
    },
    {
      "pos": [
        14253,
        14292
      ],
      "content": "Type <bpt id=\"p1\">**</bpt>Employee<ept id=\"p1\">**</ept> in <bpt id=\"p2\">**</bpt>Table/View/SP<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        14295,
        14351
      ],
      "content": "Type Department in <bpt id=\"p1\">**</bpt>Name of Multi-Valued table/views<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Type the join condition between Employee &amp; Department in <bpt id=\"p1\">**</bpt>Join Condition<ept id=\"p1\">**</ept>, e.g.",
      "pos": [
        14354,
        14435
      ]
    },
    {
      "content": "<ph id=\"ph1\">`Employee.DEPTID=Department.DepartmentID`</ph>.",
      "pos": [
        14436,
        14478
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>runstep2<ph id=\"ph2\">](./media/active-directory-aadconnectsync-connector-genericsql/runstep2.png)</ph>",
      "pos": [
        14479,
        14565
      ]
    },
    {
      "content": "Stored procedures",
      "pos": [
        14569,
        14586
      ]
    },
    {
      "content": "runstep3",
      "pos": [
        14592,
        14600
      ]
    },
    {
      "content": "If you have a lot of data it is recommended to implement pagination with your Stored Procedures.",
      "pos": [
        14680,
        14776
      ]
    },
    {
      "content": "For your Stored Procedure to support pagination to need to provide Start Index and End Index.",
      "pos": [
        14779,
        14872
      ]
    },
    {
      "content": "See: <bpt id=\"p1\">[</bpt>Efficiently Paging Through Large Amounts of Data<ept id=\"p1\">](https://msdn.microsoft.com/library/bb445504.aspx)</ept>.",
      "pos": [
        14873,
        14979
      ]
    },
    {
      "content": "@StartIndex and @EndIndex will be replaced at execution time with respective page size value configured on <bpt id=\"p1\">**</bpt>Configure Step<ept id=\"p1\">**</ept> page.",
      "pos": [
        14982,
        15113
      ]
    },
    {
      "content": "Example: If connector retrieve first page and the page size is set 500, in such situation @StartIndex would be 1 and @EndIndex considered as 500 and this values, increases as connector retrieve subsequent pages and change the @StartIndex &amp; @EndIndex value.",
      "pos": [
        15114,
        15370
      ]
    },
    {
      "content": "To execute parameterized Stored Procedure, provide the parameters in <ph id=\"ph1\">`[Name]:[Direction]:[Value]`</ph> format.",
      "pos": [
        15373,
        15478
      ]
    },
    {
      "content": "Enter each parameter on a separate line (Use Ctrl + Enter to get a new line).",
      "pos": [
        15479,
        15556
      ]
    },
    {
      "content": "Generic SQL connector also supports Import operation from distributed environment, e.g. Linked Servers in Microsoft SQL Server.",
      "pos": [
        15559,
        15686
      ]
    },
    {
      "content": "In case information is to be retrieved from a Table in Linked server then Table is to be provided in the format: <ph id=\"ph1\">`[ServerName].[Database].[Schema].[TableName]`</ph>",
      "pos": [
        15687,
        15846
      ]
    },
    {
      "content": "In distributed environments the Connector only supports Microsoft linked server.",
      "pos": [
        15853,
        15933
      ]
    },
    {
      "content": "Generic SQL Connector supports only those objects that have the similar structure (both alias name and data type) between run steps information and schema detection.",
      "pos": [
        15936,
        16101
      ]
    },
    {
      "content": "If the selected object from schema and provided information at run step is different, then SQL Connector will unable to support this type of scenarios.",
      "pos": [
        16102,
        16253
      ]
    },
    {
      "content": "SQL Query",
      "pos": [
        16257,
        16266
      ]
    },
    {
      "content": "runstep4",
      "pos": [
        16272,
        16280
      ]
    },
    {
      "content": "runstep5",
      "pos": [
        16360,
        16368
      ]
    },
    {
      "content": "Multiple result set queries not supported.",
      "pos": [
        16448,
        16490
      ]
    },
    {
      "content": "SQL query supports the pagination and provide start Index and End Index as a variable to support pagination.",
      "pos": [
        16493,
        16601
      ]
    },
    {
      "content": "Delta Import",
      "pos": [
        16607,
        16619
      ]
    },
    {
      "content": "runstep6",
      "pos": [
        16623,
        16631
      ]
    },
    {
      "content": "Delta Import configuration require some more configuration along with other supported method like in Full Import.",
      "pos": [
        16709,
        16822
      ]
    },
    {
      "pos": [
        16826,
        17003
      ],
      "content": "If users chooses the Trigger or Snapshot approach to track delta changes, user can provide History Table or Snapshot database in <bpt id=\"p1\">**</bpt>History Table or Snapshot database name<ept id=\"p1\">**</ept> box."
    },
    {
      "content": "User also need to provide join condition between History table and Parent table.",
      "pos": [
        17006,
        17086
      ]
    },
    {
      "content": "Example: <ph id=\"ph1\">`Employee.ID=History.EmployeeID`</ph>",
      "pos": [
        17087,
        17128
      ]
    },
    {
      "content": "Track the transaction on parent table from the history table user must provide column name that contains the operation information like (Add/Update/Delete).",
      "pos": [
        17131,
        17287
      ]
    },
    {
      "content": "If user chooses Watermark to track the delta changes, user must provide the column name that contains the operation information in <bpt id=\"p1\">**</bpt>Water Mark Column Name<ept id=\"p1\">**</ept>.",
      "pos": [
        17290,
        17448
      ]
    },
    {
      "content": "Therefore, connector can consider this column while performing Delta Import.",
      "pos": [
        17449,
        17525
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>change Type attribute<ept id=\"p1\">**</ept> column is required for the change type.",
      "pos": [
        17528,
        17597
      ]
    },
    {
      "content": "This column maps a change that occurs in the primary table or multi-value table to a change type in the delta view.",
      "pos": [
        17598,
        17713
      ]
    },
    {
      "content": "This column can contain the Modify_Attribute change type for attribute-level change or an Add, Modify, or Delete change type for an object-level change type.",
      "pos": [
        17714,
        17871
      ]
    },
    {
      "content": "If it is something other than the default value Add, Modify, or Delete user can define those values using this option.",
      "pos": [
        17872,
        17990
      ]
    },
    {
      "content": "Export",
      "pos": [
        17996,
        18002
      ]
    },
    {
      "content": "runstep7",
      "pos": [
        18006,
        18014
      ]
    },
    {
      "content": "Generic SQL Connector support Export using four supported methods such as:",
      "pos": [
        18092,
        18166
      ]
    },
    {
      "content": "Table",
      "pos": [
        18170,
        18175
      ]
    },
    {
      "content": "View",
      "pos": [
        18178,
        18182
      ]
    },
    {
      "content": "Stored Procedure",
      "pos": [
        18185,
        18201
      ]
    },
    {
      "content": "SQL Query",
      "pos": [
        18204,
        18213
      ]
    },
    {
      "content": "Table/View",
      "pos": [
        18217,
        18227
      ]
    },
    {
      "content": "If users chooses the Table/View option, than connector will generate the respective queries and perform the Export.",
      "pos": [
        18231,
        18346
      ]
    },
    {
      "content": "Stored procedures",
      "pos": [
        18350,
        18367
      ]
    },
    {
      "content": "runstep8",
      "pos": [
        18373,
        18381
      ]
    },
    {
      "content": "If users chooses the Stored Procedure option, Export require 3 different Stored procedures to perform various Insert/Update/Delete operation.",
      "pos": [
        18459,
        18600
      ]
    },
    {
      "pos": [
        18604,
        18708
      ],
      "content": "<bpt id=\"p1\">**</bpt>Add SP Name<ept id=\"p1\">**</ept>, This SP execute if any object comes to connector for insertion in the respective table."
    },
    {
      "pos": [
        18711,
        18815
      ],
      "content": "<bpt id=\"p1\">**</bpt>Update SP Name<ept id=\"p1\">**</ept>, This SP execute if any object comes to connector for update in the respective table."
    },
    {
      "pos": [
        18818,
        18924
      ],
      "content": "<bpt id=\"p1\">**</bpt>Delete SP Name<ept id=\"p1\">**</ept>, This SP execute if any object comes to connector for deletion in the respective table."
    },
    {
      "content": "Attribute selected from the schema used as a parameter value to the stored procedure.",
      "pos": [
        18927,
        19012
      ]
    },
    {
      "content": "Example: EmployeeName: INPUT: @EmployeeName (EmployeeName is selected in the connector schema and connector replace the respective value while performing export)",
      "pos": [
        19013,
        19174
      ]
    },
    {
      "content": "Executing parameterized stored procedure type all parameters in <ph id=\"ph1\">`[Name]:[Direction]:[Value]`</ph> format.",
      "pos": [
        19177,
        19277
      ]
    },
    {
      "content": "Enter each parameter on a separate line (Use Ctrl + Enter to get a new line).",
      "pos": [
        19278,
        19355
      ]
    },
    {
      "content": "SQL query",
      "pos": [
        19359,
        19368
      ]
    },
    {
      "content": "runstep9",
      "pos": [
        19374,
        19382
      ]
    },
    {
      "content": "If users chooses the SQL query option, Export require 3 different queries to perform various Insert/Update/Delete operations.",
      "pos": [
        19460,
        19585
      ]
    },
    {
      "pos": [
        19589,
        19697
      ],
      "content": "<bpt id=\"p1\">**</bpt>Insert Query<ept id=\"p1\">**</ept>: This query execute if any object comes to connector for insertion in the respective table."
    },
    {
      "pos": [
        19700,
        19805
      ],
      "content": "<bpt id=\"p1\">**</bpt>Update Query<ept id=\"p1\">**</ept>: This query execute if any object comes to connector for update in the respective table."
    },
    {
      "pos": [
        19808,
        19915
      ],
      "content": "<bpt id=\"p1\">**</bpt>Delete Query<ept id=\"p1\">**</ept>: This query execute if any object comes to connector for deletion in the respective table."
    },
    {
      "content": "Attribute selected from the schema used as a parameter value to the query.",
      "pos": [
        19918,
        19992
      ]
    },
    {
      "content": "Example: <ph id=\"ph1\">`Insert into Employee (ID, Name) Values (@ID, @EmployeeName)`</ph>",
      "pos": [
        19993,
        20063
      ]
    },
    {
      "content": "Troubleshooting",
      "pos": [
        20068,
        20083
      ]
    },
    {
      "pos": [
        20089,
        20259
      ],
      "content": "For information on how to enable logging to troubleshoot the connector, see the <bpt id=\"p1\">[</bpt>How to Enable ETW Tracing for Connectors<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=335731)</ept>."
    }
  ],
  "content": "<properties\n   pageTitle=\"Azure AD Connect sync: Generic SQL Connector\"\n   description=\"This article describes how to configure Microsoft's Generic SQL Connector.\"\n   services=\"active-directory\"\n   documentationCenter=\"\"\n   authors=\"AndKjell\"\n   manager=\"stevenpo\"\n   editor=\"\"/>\n\n<tags\n   ms.service=\"active-directory\"\n   ms.workload=\"identity\"\n   ms.tgt_pltfrm=\"na\"\n   ms.devlang=\"na\"\n   ms.topic=\"article\"\n   ms.date=\"12/11/2015\"\n   ms.author=\"andkjell\"/>\n\n# Generic SQL Connector technical reference\n\nThis article describes the Generic SQL Connector. The article applies to the following products:\n\n- Microsoft Identity Manager 2016 (MIM2016)\n- Forefront Identity Manager 2010 R2 (FIM2010R2)\n    -   Must use hotfix 4.1.3461.0 or later [KB2870703](https://support.microsoft.com/kb/2870703).\n\nFor MIM2016 and FIM2010R2 the Connector is available as a download from the [Microsoft Download Center](http://go.microsoft.com/fwlink/?LinkId=717495).\n\n## Overview of the Generic SQL Connector\n\nThe Generic SQL Connector enable you to integrate the synchronization service with a database system that offer ODBC connectivity.  \n\nFrom a high level perspective, the following features supported by the current release of the connector:\n\n| Feature | Support |\n| --- | --- |\n| Connected data source | The Connector is supported with all 64-bit ODBC drivers. It has been tested with the following: <li>Microsoft SQL Server & SQL Azure</li><li>IBM DB2 10.x</li><li>IBM DB2 9.x</li><li>Oracle 10 & 11g</li><li>MySQL 5.x</li>\n| Scenarios | <li>Object Lifecycle Management</li><li>Password Management</li> |\n| Operations | <li>Full Import and Delta Import, Export</li><li>For Export: Add, Delete, Update, and Replace</li><li>Set Password, Change Password</li>\n| Schema | <li>Dynamic discovery of objects and attributes</li>\n\n### Prerequisites\n\nBefore you use the Connector, make sure you have the following on the synchronization server in addition to any hotfix mentioned above:\n\n- Microsoft .NET 4.5.2 Framework or later\n- 64-bit ODBC client drivers\n\n### Permissions in connected data source\n\nTo create or perform any of the supported tasks in Generic SQL connector, you must have:\n\n- db_datareader\n- db_datawriter\n\n### Ports and protocols\n\nFor the ports required for the ODBC driver to work, please consult the database vendor's documentation.\n\n## Create a new Connector\n\nTo Create a Generic SQL connector, in **Synchronization Service** select **Management Agent** and **Create**. Select the **Generic SQL (Microsoft)** Connector.\n\n![CreateConnector](./media/active-directory-aadconnectsync-connector-genericsql/createconnector.png)\n\n### Connectivity\n\nThe Connector uses an ODBC DSN file for connectivity. Create the DSN file using **ODBC Data Sources** found in the start menu under **Administrative Tools**. In the administrative tool, create a **File DSN** so it can be provided to the Connector.\n\n![CreateConnector](./media/active-directory-aadconnectsync-connector-genericsql/connectivity.png)\n\nThe Connectivity screen is the first when you create a new Generic SQL Connector. You first need to provide the following information:\n\n- DSN file path\n- Authentication\n    - User Name\n    - Password\n\nThe database should support one of the authentication methods mentioned below.\n\n- **Windows authentication**: The authenticating database will use the Windows credentials to verify the user. In this case the service account used by the synchronization service will be used. This account will need permissions to the database.\n- **SQL authentication**: The authenticating database will use the user name/password defined one the Connectivity screen to connect to the database. If you store the user name/pasword in the DSN file, the credentials provided on the Connectivity screen has precedence.\n- **Azure SQL Database authentication**: For more information see [Connect to SQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md)\n\n**DN is Anchor**: If you select this option, the DN will also be used as the anchor attribute. It can be used for a simple implementation but also has the following limitations:\n\n-   Connector supports only 1 object type. Therefore any reference attributes can only reference the same object type.\n\n**Export Type: Object Replace**: During export when only some attributes have been changed, the entire object with all attributes will be exported and will replace the existing object.\n\n### Schema 1 (Detect object types)\n\nOn this page you are going to configure how the Connector is going to find the different object types in the database.\n\nEvery object type will be presented as a partition and configured further on **Configure Partitions and Hierarchies**.\n\n![schema1a](./media/active-directory-aadconnectsync-connector-genericsql/schema1a.png)\n\n**Object Type detection method**: The Connector supports these object type detection methods.\n\n- **Fixed Value**: You provide the list of object types with a comma separated list. E.g. User,Group,Department.  \n![schema1b](./media/active-directory-aadconnectsync-connector-genericsql/schema1b.png)\n- **Table/View/Stored Procedure**: Provide the name of the table/view/stored procedure and then the column name which will provide the list of object types. If you use a stored procedure then also provide parameters for it in the format **[Name]:[Direction]:[Value]**. Provide each parameter on a separate line (use Ctrl+Enter to get a new line).  \n![schema1c](./media/active-directory-aadconnectsync-connector-genericsql/schema1c.png)\n- **SQL Query**: This option allow you to provide a SQL query which will return a single column with object types, e.g. `SELECT [Column Name] FROM TABLENAME`. The returned column must be of type string (varchar).\n\n### Schema 2 (Detect attribute types)\n\nOn this page you are going to configure how the attribute names and types are going to be detected. The configuration options are listed for every object type detected on the previous page.\n\n![schema2a](./media/active-directory-aadconnectsync-connector-genericsql/schema2a.png)\n\n**Attribute Type detection method**: The Connector supports these  attribute type detection methods with every detected object type in Schema 1 screen.\n\n- **Table/View/Stored Procedure**: Provide the name of the table/view/stored procedure which should be used to find the attribute names. If you use a stored procedure then also provide parameters for it in the format **[Name]:[Direction]:[Value]**. Provide each parameter on a separate line (use Ctrl+Enter to get a new line). To detect the attribute names in a multi-valued attribute, provide a comma separated list of Tables or Views. Multivalued scenarios are not supported if parent and child table have same column names.\n- **SQL query** This option allow you to provide a SQL query which will return a single column with attribute names, e.g. `SELECT [Column Name] FROM TABLENAME`. The returned column must be of type string (varchar).\n\n### Schema 3 (Define anchor and DN)\n\nThis page allows you to configure anchor and DN attribute for each detected object type. You can select multiple attribute to make the anchor unique.\n\n![schema3a](./media/active-directory-aadconnectsync-connector-genericsql/schema3a.png)\n\n- Multi-valued and Boolean attributes are not listed.\n- Same attribute cannot use for DN and anchor, unless **DN is Anchor** is selected on the Connectivity page.\n- If **DN is Anchor** is selected on the Connectivity page, this page requires only the DN attribute. This attribute would also be used as the anchor attribute.\n![schema3b](./media/active-directory-aadconnectsync-connector-genericsql/schema3b.png)\n\n### Schema 4 (Define attribute type, reference, and direction)\n\nThis page allows you to configure the attribute type like integer, reference, string, binary, or Boolean and direction for each attribute. All attributes from page **schema 2** are listed including multi-valued attributes.\n\n![schema4a](./media/active-directory-aadconnectsync-connector-genericsql/schema4a.png)\n\n- **DataType**: Used to map the attribute type to those known by the sync engine. The default is to use the same type as detected in the SQL schema, but DateTime and Reference are not easily detactable. For those you need to specify **DateTime** or **Reference**.\n- **Direction**: You can set the attribute direction to Import, Export or ImportExport. ImportExport is default.\n![schema4b](./media/active-directory-aadconnectsync-connector-genericsql/schema4b.png)\n\nNotes:\n\n- If an attribute type is not detectable by the Connector, it will use the String data type.\n- **Nested tables** can be considered one-column database tables. Oracle stores the rows of a nested table in no particular order. However, when you retrieve the nested table into a PL/SQL variable, the rows are given consecutive subscripts starting at 1. That gives you array-like access to individual rows.\n- **VARRYS** are not supported in the connector.\n\n### Schema 5 (Define partition for reference attributes)\n\nOn this page you will configure for all reference attributes which partition, i.e. object type, an attribute is referring to.\n\n![schema5](./media/active-directory-aadconnectsync-connector-genericsql/schema5.png)\n\nIf you use **DN is anchor** then you must use the same object type as the one you are referring from. You cannot reference another object type.\n\n### Global Parameters\n\nThe Global Parameters page is used to configure Delta Import, Date/Time format, and Password method.\n\n![globalparameters1](./media/active-directory-aadconnectsync-connector-genericsql/globalparameters1.png)\n\nThe Generic SQL Connector supports the following methods for Delta Import:\n\n- **Trigger**: See [Generating Delta Views Using Triggers](https://technet.microsoft.com/library/cc708665.aspx).\n- **Watermark**: This is a generic approach and can be used with any database. The watermark query is pre-populated based on the database vendor. A watermark column must be present on every table/view used. This must track inserts and updates to the tables as well as its dependent (multi-valued or child) tables. The clocks between Synchronization Service and the database server must be synchronized. If not, some entries in the delta import might be omitted.  \nLimitation:\n    - Watermark strategy does not supports deleted objects.\n- **Snapshot** (Works only with Microsoft SQL Server) [Generating Delta Views Using Snapshots](https://technet.microsoft.com/library/cc720640.aspx)\n- **Change Tracking** (Works only with Microsoft SQL Server) [About Change Tracking](https://msdn.microsoft.com/library/bb933875.aspx)  \nLimitations:\n    - Anchor & DN attribute must be part of primary key for the selected object in the table.\n    - SQL query is unsupported during Import and Export with Change Tracking.\n\n**Additional Parameters**: Specify the Database Server Time Zone indicating where your Database server is located. This value is used to support the various format of date & time attributes.\n\nThe Connector will always store date and date-time in UTC format. To be able to correctly convert the date and times the time zone of the database server and the format used must be specified. The format should be expressed in .Net format.\n\nDuring export every date time attribute must be provided to the Connector in UTC time format.\n\n![globalparameters2](./media/active-directory-aadconnectsync-connector-genericsql/globalparameters2.png)\n\n**Password Configuration**: The connector provides password synchronization capabilities and supports set and change password.\n\nThe Connector provides two methods to support password synchronization:\n\n- **Stored Procedure**: This method required two stored procedures to support Set & Change password. Type all parameters for add and change the password operation in Set Password SP and Change Password SP Parameters respectively as per below example.\n![globalparameters3](./media/active-directory-aadconnectsync-connector-genericsql/globalparameters3.png)\n- **Password Extension**: This method requires Password extension DLL (you need to provide the Extension DLL Name that is implementing [IMAExtensible2Password](https://msdn.microsoft.com/library/microsoft.metadirectoryservices.imaextensible2password.aspx) interface). Password extension assembly must be placed in extension folder so that connector can load the DLL at runtime.\n![globalparameters4](./media/active-directory-aadconnectsync-connector-genericsql/globalparameters4.png)\n\nYou also have to enable the Password Management on the **Configure Extension** page.\n![globalparameters5](./media/active-directory-aadconnectsync-connector-genericsql/globalparameters5.png)\n\n### Configure Partitions and Hierarchies\n\nOn the partitions and hierarchies page, select all object types. Each object type is in its own partition.\n\n![partitions1](./media/active-directory-aadconnectsync-connector-genericsql/partitions1.png)\n\nYou can also override the values defined on the **Connectivity** or **Global Parameters** page.\n\n![partitions2](./media/active-directory-aadconnectsync-connector-genericsql/partitions2.png)\n\n### Configure Anchors\n\nThis page is read-only since the anchor has already been defined. The selected anchor attribute is always appended with the object type to ensure it will remain unique across object types.\n\n![anchors](./media/active-directory-aadconnectsync-connector-genericsql/anchors.png)\n\n## Configure Run Step Parameter\n\nThese steps are configured on the run profiles on the Connector. These configurations will do the actual work of importing and exporting data.\n\n### Full and Delta Import\n\nGeneric SQL Connector support Full and Delta Import using these methods:\n\n- Table\n- View\n- Stored Procedure\n- SQL Query\n\n![runstep1](./media/active-directory-aadconnectsync-connector-genericsql/runstep1.png)\n\n**Table/View**\n\nTo import multi-valued attributes for an object, you have to provide the comma separated table/view name in **Name of Multi-Valued table/views** and respective join conditions in the **Join condition** with the parent table.\n\nExample: You want to import the Employee object and all its multi-valued attributes. There are two tables named Employee (main table) and Department (multi-valued) table.\nDo the following:\n\n- Type **Employee** in **Table/View/SP**.\n- Type Department in **Name of Multi-Valued table/views**.\n- Type the join condition between Employee & Department in **Join Condition**, e.g.\n`Employee.DEPTID=Department.DepartmentID`.\n![runstep2](./media/active-directory-aadconnectsync-connector-genericsql/runstep2.png)\n\n**Stored procedures**\n\n![runstep3](./media/active-directory-aadconnectsync-connector-genericsql/runstep3.png)\n\n- If you have a lot of data it is recommended to implement pagination with your Stored Procedures.\n- For your Stored Procedure to support pagination to need to provide Start Index and End Index. See: [Efficiently Paging Through Large Amounts of Data](https://msdn.microsoft.com/library/bb445504.aspx).\n- @StartIndex and @EndIndex will be replaced at execution time with respective page size value configured on **Configure Step** page. Example: If connector retrieve first page and the page size is set 500, in such situation @StartIndex would be 1 and @EndIndex considered as 500 and this values, increases as connector retrieve subsequent pages and change the @StartIndex & @EndIndex value.\n- To execute parameterized Stored Procedure, provide the parameters in `[Name]:[Direction]:[Value]` format. Enter each parameter on a separate line (Use Ctrl + Enter to get a new line).\n- Generic SQL connector also supports Import operation from distributed environment, e.g. Linked Servers in Microsoft SQL Server. In case information is to be retrieved from a Table in Linked server then Table is to be provided in the format: `[ServerName].[Database].[Schema].[TableName]`\n    - In distributed environments the Connector only supports Microsoft linked server.\n- Generic SQL Connector supports only those objects that have the similar structure (both alias name and data type) between run steps information and schema detection. If the selected object from schema and provided information at run step is different, then SQL Connector will unable to support this type of scenarios.\n\n**SQL Query**\n\n![runstep4](./media/active-directory-aadconnectsync-connector-genericsql/runstep4.png)\n\n![runstep5](./media/active-directory-aadconnectsync-connector-genericsql/runstep5.png)\n\n- Multiple result set queries not supported.\n- SQL query supports the pagination and provide start Index and End Index as a variable to support pagination.\n\n### Delta Import\n\n![runstep6](./media/active-directory-aadconnectsync-connector-genericsql/runstep6.png)\n\nDelta Import configuration require some more configuration along with other supported method like in Full Import.\n\n- If users chooses the Trigger or Snapshot approach to track delta changes, user can provide History Table or Snapshot database in **History Table or Snapshot database name** box.\n- User also need to provide join condition between History table and Parent table.\nExample: `Employee.ID=History.EmployeeID`\n- Track the transaction on parent table from the history table user must provide column name that contains the operation information like (Add/Update/Delete).\n- If user chooses Watermark to track the delta changes, user must provide the column name that contains the operation information in **Water Mark Column Name**. Therefore, connector can consider this column while performing Delta Import.\n- The **change Type attribute** column is required for the change type. This column maps a change that occurs in the primary table or multi-value table to a change type in the delta view. This column can contain the Modify_Attribute change type for attribute-level change or an Add, Modify, or Delete change type for an object-level change type. If it is something other than the default value Add, Modify, or Delete user can define those values using this option.\n\n### Export\n\n![runstep7](./media/active-directory-aadconnectsync-connector-genericsql/runstep7.png)\n\nGeneric SQL Connector support Export using four supported methods such as:\n\n- Table\n- View\n- Stored Procedure\n- SQL Query\n\n**Table/View**\n\nIf users chooses the Table/View option, than connector will generate the respective queries and perform the Export.\n\n**Stored procedures**\n\n![runstep8](./media/active-directory-aadconnectsync-connector-genericsql/runstep8.png)\n\nIf users chooses the Stored Procedure option, Export require 3 different Stored procedures to perform various Insert/Update/Delete operation.\n\n- **Add SP Name**, This SP execute if any object comes to connector for insertion in the respective table.\n- **Update SP Name**, This SP execute if any object comes to connector for update in the respective table.\n- **Delete SP Name**, This SP execute if any object comes to connector for deletion in the respective table.\n- Attribute selected from the schema used as a parameter value to the stored procedure. Example: EmployeeName: INPUT: @EmployeeName (EmployeeName is selected in the connector schema and connector replace the respective value while performing export)\n- Executing parameterized stored procedure type all parameters in `[Name]:[Direction]:[Value]` format. Enter each parameter on a separate line (Use Ctrl + Enter to get a new line).\n\n**SQL query**\n\n![runstep9](./media/active-directory-aadconnectsync-connector-genericsql/runstep9.png)\n\nIf users chooses the SQL query option, Export require 3 different queries to perform various Insert/Update/Delete operations.\n\n- **Insert Query**: This query execute if any object comes to connector for insertion in the respective table.\n- **Update Query**: This query execute if any object comes to connector for update in the respective table.\n- **Delete Query**: This query execute if any object comes to connector for deletion in the respective table.\n- Attribute selected from the schema used as a parameter value to the query. Example: `Insert into Employee (ID, Name) Values (@ID, @EmployeeName)`\n\n## Troubleshooting\n\n-   For information on how to enable logging to troubleshoot the connector, see the [How to Enable ETW Tracing for Connectors](http://go.microsoft.com/fwlink/?LinkId=335731).\n\n\n"
}