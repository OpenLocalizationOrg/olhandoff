{
  "nodes": [
    {
      "content": "How to configure Microsoft Account authentication for your App Services application",
      "pos": [
        27,
        110
      ]
    },
    {
      "content": "Learn how to configure Microsoft Account authentication for your App Services application.",
      "pos": [
        129,
        219
      ]
    },
    {
      "content": "How to configure your App Service application to use Microsoft Account login",
      "pos": [
        529,
        605
      ]
    },
    {
      "content": "This topic shows you how to configure Azure App Service to use Microsoft Account as an authentication provider.",
      "pos": [
        731,
        842
      ]
    },
    {
      "pos": [
        848,
        942
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"register-windows-dev-center\"&gt;</ph> <ph id=\"ph2\">&lt;/a&gt;</ph>Register your Windows app at the Windows Dev Center"
    },
    {
      "content": "Universal Windows apps and Windows store apps must be registered through the Windows Dev Center.",
      "pos": [
        944,
        1040
      ]
    },
    {
      "content": "This enables you to more more easily configure push notifications for your app in the future.",
      "pos": [
        1041,
        1134
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>Skip this section for Windows Phone 8, Windows Phone 8.1 Silverlight, and all other non-Windows apps.",
      "pos": [
        1139,
        1252
      ]
    },
    {
      "content": "If you have already configured push notifications for your Windows app, you can also skip this section.",
      "pos": [
        1253,
        1356
      ]
    },
    {
      "content": "Log on to the <bpt id=\"p1\">[</bpt><ept id=\"p1\">Azure portal]</ept>, and navigate to your application.",
      "pos": [
        1361,
        1424
      ]
    },
    {
      "content": "Copy your <bpt id=\"p1\">**</bpt>URL<ept id=\"p1\">**</ept>.",
      "pos": [
        1425,
        1443
      ]
    },
    {
      "content": "You will use this to configure your app with Microsoft Account.",
      "pos": [
        1444,
        1507
      ]
    },
    {
      "pos": [
        1512,
        1765
      ],
      "content": "If you have not already registered your app, navigate to the <bpt id=\"p1\">[</bpt>Windows Dev Center<ept id=\"p1\">](https://dev.windows.com/dashboard/Application/New)</ept>, log on with your Microsoft account, type a name for your app, verify its availability, then click <bpt id=\"p2\">**</bpt>Reserve app name<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        1770,
        1941
      ],
      "content": "Open your Windows app project in Visual Studio, then in Solution Explorer right-click the Windows Store app project, click <bpt id=\"p1\">**</bpt>Store<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Associate App with the Store...<ept id=\"p2\">**</ept>."
    },
    {
      "content": "In the wizard, click <bpt id=\"p1\">**</bpt>Sign in<ept id=\"p1\">**</ept> and sign-in with your Microsoft account, select the app name you reserved, then click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Associate<ept id=\"p3\">**</ept>.",
      "pos": [
        2066,
        2210
      ]
    },
    {
      "content": "For a universal Windows 8.1 app, you must repeat steps 4 and 5 for the Windows Phone Store project.",
      "pos": [
        2213,
        2312
      ]
    },
    {
      "pos": [
        2317,
        2415
      ],
      "content": "Back in the Windows Dev Center page for your new app, click <bpt id=\"p1\">**</bpt>Services<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Push notifications<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        2420,
        2572
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Push notifications<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Live Services site<ept id=\"p2\">**</ept> under <bpt id=\"p3\">**</bpt>Windows Push Notification Services (WNS) and Microsoft Azure Mobile Services<ept id=\"p3\">**</ept>."
    },
    {
      "content": "Next, you will configure Microsoft account authentication for your Windows app.",
      "pos": [
        2574,
        2653
      ]
    },
    {
      "pos": [
        2659,
        2741
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"register-microsoft-account\"&gt;</ph> <ph id=\"ph2\">&lt;/a&gt;</ph>Register your app with Microsoft Account"
    },
    {
      "content": "If you have already registered your Windows app in the previous section, you can skip to step 4.",
      "pos": [
        2743,
        2839
      ]
    },
    {
      "content": "Log on to the <bpt id=\"p1\">[</bpt><ept id=\"p1\">Azure portal]</ept>, and navigate to your application.",
      "pos": [
        2845,
        2908
      ]
    },
    {
      "content": "Copy your <bpt id=\"p1\">**</bpt>URL<ept id=\"p1\">**</ept>.",
      "pos": [
        2909,
        2927
      ]
    },
    {
      "content": "You will use this to configure your app with Microsoft Account.",
      "pos": [
        2928,
        2991
      ]
    },
    {
      "pos": [
        2996,
        3130
      ],
      "content": "Navigate to the <bpt id=\"p1\">[</bpt><ept id=\"p1\">My Applications]</ept> page in the Microsoft Account Developer Center, and log on with your Microsoft account, if required."
    },
    {
      "pos": [
        3135,
        3222
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Create application<ept id=\"p1\">**</ept>, then type an <bpt id=\"p2\">**</bpt>Application name<ept id=\"p2\">**</ept> and click <bpt id=\"p3\">**</bpt>I accept<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        3227,
        3374
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>API Settings<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept> for <bpt id=\"p3\">**</bpt>Mobile or desktop client app<ept id=\"p3\">**</ept>, supply the <bpt id=\"p4\">**</bpt>Redirect URL<ept id=\"p4\">**</ept> for your application, then click <bpt id=\"p5\">**</bpt>Save<ept id=\"p5\">**</ept>."
    },
    {
      "pos": [
        3395,
        3664
      ],
      "content": "[AZURE.NOTE]Your redirect URI is the URL of your application appended with the path, _/.auth/login/microsoftaccount/callback_. For example, `https://contoso.azurewebsites.net/.auth/login/microsoftaccount/callback`.   \nMake sure that you are using the HTTPS scheme.",
      "leadings": [
        "",
        "    >"
      ],
      "nodes": [
        {
          "content": "[AZURE.NOTE]Your redirect URI is the URL of your application appended with the path, _/.auth/login/microsoftaccount/callback_. For example, `https://contoso.azurewebsites.net/.auth/login/microsoftaccount/callback`. ",
          "pos": [
            0,
            215
          ],
          "nodes": [
            {
              "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>Your redirect URI is the URL of your application appended with the path, <bpt id=\"p1\">_</bpt>/.auth/login/microsoftaccount/callback<ept id=\"p1\">_</ept>.",
              "pos": [
                0,
                126
              ]
            },
            {
              "content": "For example, <ph id=\"ph1\">`https://contoso.azurewebsites.net/.auth/login/microsoftaccount/callback`</ph>.",
              "pos": [
                127,
                214
              ]
            }
          ]
        },
        {
          "content": "Make sure that you are using the HTTPS scheme.",
          "pos": [
            218,
            264
          ]
        }
      ]
    },
    {
      "pos": [
        3669,
        3765
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>App Settings<ept id=\"p1\">**</ept> and make a note of the values of the <bpt id=\"p2\">**</bpt>Client ID<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Client secret<ept id=\"p3\">**</ept>."
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> The client secret is an important security credential.",
      "pos": [
        3773,
        3845
      ]
    },
    {
      "content": "Do not share the client secret with anyone or distribute it within a client application.",
      "pos": [
        3846,
        3934
      ]
    },
    {
      "pos": [
        3939,
        4027
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"secrets\"&gt;</ph> <ph id=\"ph2\">&lt;/a&gt;</ph>Add Microsoft Account information to your App Service application"
    },
    {
      "pos": [
        4032,
        4146
      ],
      "content": "Back in the <bpt id=\"p1\">[</bpt><ept id=\"p1\">Azure portal]</ept>, navigate to your application, click <bpt id=\"p2\">**</bpt>Settings<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Authentication / Authorization<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        4151,
        4230
      ],
      "content": "If the Authentication / Authorization feature is not enabled, switch it <bpt id=\"p1\">**</bpt>On<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Microsoft Account<ept id=\"p1\">**</ept>.",
      "pos": [
        4235,
        4263
      ]
    },
    {
      "content": "Paste in the App ID and App Secret values which you obtained previously, and optionally enable any scopes your application requires.",
      "pos": [
        4264,
        4396
      ]
    },
    {
      "content": "Then click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.",
      "pos": [
        4397,
        4415
      ]
    },
    {
      "content": "By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.",
      "pos": [
        4433,
        4551
      ]
    },
    {
      "content": "You must authorize users in your app code.",
      "pos": [
        4552,
        4594
      ]
    },
    {
      "content": "(Optional) To restrict access to your site to only users authenticated by Microsoft account, set <bpt id=\"p1\">**</bpt>Action to take when request is not authenticated<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>Microsoft Account<ept id=\"p2\">**</ept>.",
      "pos": [
        4599,
        4774
      ]
    },
    {
      "content": "This requires that all requests be authenticated, and all unauthenticated requests are redirected to Microsoft account for authentication.",
      "pos": [
        4775,
        4913
      ]
    },
    {
      "pos": [
        4918,
        4933
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>."
    },
    {
      "content": "You are now ready to use Microsoft Account for authentication in your app.",
      "pos": [
        4935,
        5009
      ]
    },
    {
      "pos": [
        5014,
        5060
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"related-content\"&gt;</ph> <ph id=\"ph2\">&lt;/a&gt;</ph>Related content"
    }
  ],
  "content": "<properties\n    pageTitle=\"How to configure Microsoft Account authentication for your App Services application\"\n    description=\"Learn how to configure Microsoft Account authentication for your App Services application.\"\n    authors=\"mattchenderson\"\n    services=\"app-service\"\n    documentationCenter=\"\"\n    manager=\"erikre\"\n    editor=\"\"/>\n\n<tags\n    ms.service=\"app-service\"\n    ms.workload=\"mobile\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"multiple\"\n    ms.topic=\"article\"\n    ms.date=\"02/24/2016\"\n    ms.author=\"mahender\"/>\n\n# How to configure your App Service application to use Microsoft Account login\n\n[AZURE.INCLUDE [app-service-mobile-selector-authentication](../../includes/app-service-mobile-selector-authentication.md)]\n\nThis topic shows you how to configure Azure App Service to use Microsoft Account as an authentication provider. \n\n## <a name=\"register-windows-dev-center\"> </a>Register your Windows app at the Windows Dev Center\n\nUniversal Windows apps and Windows store apps must be registered through the Windows Dev Center. This enables you to more more easily configure push notifications for your app in the future.  \n\n>[AZURE.NOTE]Skip this section for Windows Phone 8, Windows Phone 8.1 Silverlight, and all other non-Windows apps. If you have already configured push notifications for your Windows app, you can also skip this section.\n\n1. Log on to the [Azure portal], and navigate to your application. Copy your **URL**. You will use this to configure your app with Microsoft Account.\n\n2. If you have not already registered your app, navigate to the [Windows Dev Center](https://dev.windows.com/dashboard/Application/New), log on with your Microsoft account, type a name for your app, verify its availability, then click **Reserve app name**.\n\n3. Open your Windows app project in Visual Studio, then in Solution Explorer right-click the Windows Store app project, click **Store** > **Associate App with the Store...**.\n\n    ![](./media/app-service-mobile-how-to-configure-microsoft-authentication/mobile-app-windows-store-association.png)\n\n4. In the wizard, click **Sign in** and sign-in with your Microsoft account, select the app name you reserved, then click **Next** > **Associate**.  \nFor a universal Windows 8.1 app, you must repeat steps 4 and 5 for the Windows Phone Store project.\n\n6. Back in the Windows Dev Center page for your new app, click **Services** > **Push notifications**.\n\n7. In the **Push notifications** page, click **Live Services site** under **Windows Push Notification Services (WNS) and Microsoft Azure Mobile Services**.\n\nNext, you will configure Microsoft account authentication for your Windows app.\n\n\n## <a name=\"register-microsoft-account\"> </a>Register your app with Microsoft Account\n\nIf you have already registered your Windows app in the previous section, you can skip to step 4. \n\n1. Log on to the [Azure portal], and navigate to your application. Copy your **URL**. You will use this to configure your app with Microsoft Account.\n\n2. Navigate to the [My Applications] page in the Microsoft Account Developer Center, and log on with your Microsoft account, if required.\n\n3. Click **Create application**, then type an **Application name** and click **I accept**.\n\n4. Click **API Settings**, select **Yes** for **Mobile or desktop client app**, supply the **Redirect URL** for your application, then click **Save**. \n \n    ![][0]\n\n    >[AZURE.NOTE]Your redirect URI is the URL of your application appended with the path, _/.auth/login/microsoftaccount/callback_. For example, `https://contoso.azurewebsites.net/.auth/login/microsoftaccount/callback`.   \n    >Make sure that you are using the HTTPS scheme.\n\n6. Click **App Settings** and make a note of the values of the **Client ID** and **Client secret**.\n\n    > [AZURE.IMPORTANT] The client secret is an important security credential. Do not share the client secret with anyone or distribute it within a client application.\n\n## <a name=\"secrets\"> </a>Add Microsoft Account information to your App Service application\n\n1. Back in the [Azure portal], navigate to your application, click **Settings** > **Authentication / Authorization**.\n\n2. If the Authentication / Authorization feature is not enabled, switch it **On**.\n\n3. Click **Microsoft Account**. Paste in the App ID and App Secret values which you obtained previously, and optionally enable any scopes your application requires. Then click **OK**.\n\n    ![][1]\n\n    By default, App Service provides authentication but does not restrict authorized access to your site content and APIs. You must authorize users in your app code.\n\n4. (Optional) To restrict access to your site to only users authenticated by Microsoft account, set **Action to take when request is not authenticated** to **Microsoft Account**. This requires that all requests be authenticated, and all unauthenticated requests are redirected to Microsoft account for authentication.\n\n5. Click **Save**.\n\nYou are now ready to use Microsoft Account for authentication in your app.\n\n## <a name=\"related-content\"> </a>Related content\n\n[AZURE.INCLUDE [app-service-mobile-related-content-get-started-users](../../includes/app-service-mobile-related-content-get-started-users.md)]\n\n<!-- Authenticate your app with Live Connect Single Sign-On: [Windows](windows-liveconnect) -->\n\n\n\n<!-- Images. -->\n\n[0]: ./media/app-service-mobile-how-to-configure-microsoft-authentication/app-service-microsoftaccount-redirect.png\n[1]: ./media/app-service-mobile-how-to-configure-microsoft-authentication/mobile-app-microsoftaccount-settings.png\n\n<!-- URLs. -->\n\n[My Applications]: http://go.microsoft.com/fwlink/p/?LinkId=262039\n[Azure portal]: https://portal.azure.com/\n"
}