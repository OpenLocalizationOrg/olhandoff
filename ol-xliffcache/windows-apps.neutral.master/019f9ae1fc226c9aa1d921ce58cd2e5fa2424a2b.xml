{"nodes":[{"content":"This case study, which builds on the info given in Bookstore, begins with a Windows Phone Silverlight app that displays grouped data in a LongListSelector.","pos":[84,239]},{"content":"Windows Phone Silverlight to UWP case study, Bookstore2","pos":[247,302]},{"content":"Windows Phone Silverlight to UWP case study: Bookstore2","pos":[310,365]},{"content":"Updated for UWP apps on Windows 10.","pos":[370,405]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[406,498]},{"content":"This case study—which builds on the info given in <bpt id=\"p1\">[</bpt>Bookstore1<ept id=\"p1\">](wpsl-to-uwp-case-study-bookstore1.md)</ept>—begins with a Windows Phone Silverlight app that displays grouped data in a <bpt id=\"p2\">**</bpt>LongListSelector<ept id=\"p2\">**</ept>.","pos":[503,701]},{"content":"In the view model, each instance of the class <bpt id=\"p1\">**</bpt>Author<ept id=\"p1\">**</ept> represents the group of the books written by that author, and in the <bpt id=\"p2\">**</bpt>LongListSelector<ept id=\"p2\">**</ept>, we can either view the list of books grouped by author or we can zoom out to see a jump list of authors.","pos":[702,954]},{"content":"The jump list affords much quicker navigation than scrolling through the list of books.","pos":[955,1042]},{"content":"We walk through the steps of porting the app to a Windows 10 Universal Windows Platform (UWP) app.","pos":[1043,1141]},{"pos":[1143,1367],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>   When opening Bookstore2Universal<ph id=\"ph1\">\\_</ph>10 in Visual Studio, if you see the message \"Visual Studio update required\", then follow the steps in <bpt id=\"p2\">[</bpt>TargetPlatformVersion<ept id=\"p2\">](w8x-to-uwp-troubleshooting.md#targetplatformversion)</ept>."},{"content":"Downloads","pos":[1372,1381]},{"pos":[1383,1493],"content":"<bpt id=\"p1\">[</bpt>Download the Bookstore2WPSL8 Windows Phone Silverlight app<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=522601)</ept>."},{"pos":[1495,1596],"content":"<bpt id=\"p1\">[</bpt>Download the Bookstore2Universal<ph id=\"ph1\">\\_</ph>10 Windows 10 app<ept id=\"p1\">](http://go.microsoft.com/fwlink/?linkid=532952)</ept>."},{"content":"The Windows Phone Silverlight app","pos":[1602,1635]},{"content":"The illustration below shows what Bookstore2WPSL8—the app that we're going to port—looks like.","pos":[1637,1731]},{"content":"It's a vertically-scrolling <bpt id=\"p1\">**</bpt>LongListSelector<ept id=\"p1\">**</ept> of books grouped by author.","pos":[1732,1808]},{"content":"You can zoom out to the jump list, and from there, you can navigate back into any group.","pos":[1809,1897]},{"content":"There are two main pieces to this app: the view model that provides the grouped data source, and the user interface that binds to that view model.","pos":[1898,2044]},{"content":"As we'll see, both of these pieces port easily from Windows Phone Silverlight technology to the Universal Windows Platform (UWP).","pos":[2045,2174]},{"content":"how bookstore2wpsl8 looks","pos":[2178,2203]},{"content":"Porting to a Windows 10 project","pos":[2277,2308]},{"content":"It's a quick task to create a new project in Visual Studio, copy files over to it from Bookstore2WPSL8, and include the copied files in the new project.","pos":[2310,2462]},{"content":"Start by creating a new Blank Application (Windows Universal) project.","pos":[2463,2533]},{"content":"Name it Bookstore2Universal<ph id=\"ph1\">\\_</ph>10.","pos":[2534,2566]},{"content":"These are the files to copy over from Bookstore2WPSL8 to Bookstore2Universal<ph id=\"ph1\">\\_</ph>10.","pos":[2567,2648]},{"content":"Copy the folder containing the book cover image PNG files (the folder is <ph id=\"ph1\">\\\\</ph>Assets<ph id=\"ph2\">\\\\</ph>CoverImages).","pos":[2654,2750]},{"content":"After copying the folder, in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, make sure <bpt id=\"p2\">**</bpt>Show All Files<ept id=\"p2\">**</ept> is toggled on.","pos":[2751,2846]},{"content":"Right-click the folder that you copied and click <bpt id=\"p1\">**</bpt>Include In Project<ept id=\"p1\">**</ept>.","pos":[2847,2919]},{"content":"That command is what we mean by \"including\" files or folders in a project.","pos":[2920,2994]},{"content":"Each time you copy a file or folder, click <bpt id=\"p1\">**</bpt>Refresh<ept id=\"p1\">**</ept> in <bpt id=\"p2\">**</bpt>Solution Explorer<ept id=\"p2\">**</ept> and then include the file or folder in the project.","pos":[2995,3126]},{"content":"There's no need to do this for files that you're replacing in the destination.","pos":[3127,3205]},{"content":"Copy the folder containing the view model source file (the folder is <ph id=\"ph1\">\\\\</ph>ViewModel).","pos":[3210,3292]},{"content":"Copy MainPage.xaml and replace the file in the destination.","pos":[3297,3356]},{"content":"We can keep the App.xaml, and App.xaml.cs that Visual Studio generated for us in the Windows 10 project.","pos":[3358,3462]},{"content":"Edit the source code and markup files that you just copied and change any references to the Bookstore2WPSL8 namespace to Bookstore2Universal<ph id=\"ph1\">\\_</ph>10.","pos":[3464,3609]},{"content":"A quick way to do that is to use the <bpt id=\"p1\">**</bpt>Replace In Files<ept id=\"p1\">**</ept> feature.","pos":[3610,3676]},{"content":"In the imperative code in the view model source file, these porting changes are needed.","pos":[3677,3764]},{"content":"Change <ph id=\"ph1\">`System.ComponentModel.DesignerProperties`</ph> to <ph id=\"ph2\">`DesignMode`</ph> and then use the <bpt id=\"p1\">**</bpt>Resolve<ept id=\"p1\">**</ept> command on it.","pos":[3770,3879]},{"content":"Delete the <ph id=\"ph1\">`IsInDesignTool`</ph> property and use IntelliSense to add the correct property name: <ph id=\"ph2\">`DesignModeEnabled`</ph>.","pos":[3880,3992]},{"pos":[3997,4042],"content":"Use the <bpt id=\"p1\">**</bpt>Resolve<ept id=\"p1\">**</ept> command on <ph id=\"ph1\">`ImageSource`</ph>."},{"pos":[4047,4092],"content":"Use the <bpt id=\"p1\">**</bpt>Resolve<ept id=\"p1\">**</ept> command on <ph id=\"ph1\">`BitmapImage`</ph>."},{"pos":[4097,4176],"content":"Delete <ph id=\"ph1\">`using System.Windows.Media;`</ph> and <ph id=\"ph2\">`using System.Windows.Media.Imaging;`</ph>."},{"pos":[4181,4326],"content":"Change the value returned by the <bpt id=\"p1\">**</bpt>Bookstore2Universal<ph id=\"ph1\">\\_</ph>10.BookstoreViewModel.AppName<ept id=\"p1\">**</ept> property from \"BOOKSTORE2WPSL8\" to \"BOOKSTORE2UNIVERSAL\"."},{"pos":[4331,4563],"content":"Just as we did for <bpt id=\"p1\">[</bpt>Bookstore1<ept id=\"p1\">](wpsl-to-uwp-case-study-bookstore1.md)</ept>, update the implementation of the <bpt id=\"p2\">**</bpt>BookSku.CoverImage<ept id=\"p2\">**</ept> property (see <bpt id=\"p3\">[</bpt>Binding an Image to a view model<ept id=\"p3\">](wpsl-to-uwp-case-study-bookstore1.md#binding-an-image)</ept>)."},{"content":"In MainPage.xaml, these initial porting changes are needed.","pos":[4565,4624]},{"pos":[4630,4731],"content":"Change <ph id=\"ph1\">`phone:PhoneApplicationPage`</ph> to <ph id=\"ph2\">`Page`</ph> (including the occurrences in property element syntax)."},{"pos":[4736,4797],"content":"Delete the <ph id=\"ph1\">`phone`</ph> and <ph id=\"ph2\">`shell`</ph> namespace prefix declarations."},{"content":"Change \"clr-namespace\" to \"using\" in the remaining namespace prefix declaration.","pos":[4802,4882]},{"pos":[4887,5034],"content":"Delete <ph id=\"ph1\">`SupportedOrientations=\"Portrait\"`</ph>, and <ph id=\"ph2\">`Orientation=\"Portrait\"`</ph>, and configure <bpt id=\"p1\">**</bpt>Portrait<ept id=\"p1\">**</ept> in the app package manifest in the new project."},{"pos":[5039,5082],"content":"Delete <ph id=\"ph1\">`shell:SystemTray.IsVisible=\"True\"`</ph>."},{"content":"The types of the jump list item converters (which are present in the markup as resources) have moved to the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.UI.Xaml.Controls.Primitives<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br209818)</ept> namespace.","pos":[5087,5305]},{"content":"So, add the namespace prefix declaration Windows<ph id=\"ph1\">\\_</ph>UI<ph id=\"ph2\">\\_</ph>Xaml<ph id=\"ph3\">\\_</ph>Controls<ph id=\"ph4\">\\_</ph>Primitives and map it to <bpt id=\"p1\">**</bpt>Windows.UI.Xaml.Controls.Primitives<ept id=\"p1\">**</ept>.","pos":[5306,5441]},{"content":"On the jump list item converter resources, change the prefix from <ph id=\"ph1\">`phone:`</ph> to <ph id=\"ph2\">`Windows_UI_Xaml_Controls_Primitives:`</ph>.","pos":[5442,5559]},{"pos":[5564,5944],"content":"Just as we did for <bpt id=\"p1\">[</bpt>Bookstore1<ept id=\"p1\">](wpsl-to-uwp-case-study-bookstore1.md)</ept>, replace all references to the <ph id=\"ph1\">`PhoneTextExtraLargeStyle`</ph><bpt id=\"p2\"> **</bpt>TextBlock<ept id=\"p2\">**</ept> style with a reference to <ph id=\"ph2\">`SubtitleTextBlockStyle`</ph>, replace <ph id=\"ph3\">`PhoneTextSubtleStyle`</ph> with <ph id=\"ph4\">`SubtitleTextBlockStyle`</ph>, replace <ph id=\"ph5\">`PhoneTextNormalStyle`</ph> with <ph id=\"ph6\">`CaptionTextBlockStyle`</ph>, and replace <ph id=\"ph7\">`PhoneTextTitle1Style`</ph> with <ph id=\"ph8\">`HeaderTextBlockStyle`</ph>."},{"content":"There is one exception in <ph id=\"ph1\">`BookTemplate`</ph>.","pos":[5949,5990]},{"content":"The style of the second <bpt id=\"p1\">**</bpt>TextBlock<ept id=\"p1\">**</ept> should reference <ph id=\"ph1\">`CaptionTextBlockStyle`</ph>.","pos":[5991,6070]},{"pos":[6075,6286],"content":"Remove the FontFamily attribute from the <bpt id=\"p1\">**</bpt>TextBlock<ept id=\"p1\">**</ept> inside <ph id=\"ph1\">`AuthorGroupHeaderTemplate`</ph> and set the Background of the <bpt id=\"p2\">**</bpt>Border<ept id=\"p2\">**</ept> to reference <ph id=\"ph2\">`SystemControlBackgroundAccentBrush`</ph> instead of <ph id=\"ph3\">`PhoneAccentBrush`</ph>."},{"pos":[6291,6486],"content":"Because of <bpt id=\"p1\">[</bpt>changes related to view pixels<ept id=\"p1\">](wpsl-to-uwp-porting-xaml-and-ui.md#effective-pixels)</ept>, go through the markup and multiply any fixed size dimension (margins, width, height, etc) by 0.8."},{"content":"Replacing the LongListSelector","pos":[6491,6521]},{"content":"Replacing the <bpt id=\"p1\">**</bpt>LongListSelector<ept id=\"p1\">**</ept> with a <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>SemanticZoom<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/hh702601)</ept> control will take several steps, so let's make a start on that.","pos":[6524,6706]},{"content":"A <bpt id=\"p1\">**</bpt>LongListSelector<ept id=\"p1\">**</ept> binds directly to the grouped data source, but a <bpt id=\"p2\">**</bpt>SemanticZoom<ept id=\"p2\">**</ept> contains <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>ListView<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br242878)</ept> or <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>GridView<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/br242705)</ept> controls, which bind indirectly to the data via a <bpt id=\"p7\">[</bpt><bpt id=\"p8\">**</bpt>CollectionViewSource<ept id=\"p8\">**</ept><ept id=\"p7\">](https://msdn.microsoft.com/library/windows/apps/br209833)</ept> adapter.","pos":[6707,7097]},{"content":"The <bpt id=\"p1\">**</bpt>CollectionViewSource<ept id=\"p1\">**</ept> needs to be present in the markup as a resource, so let's begin by adding that to the markup in MainPage.xaml inside <ph id=\"ph1\">`&lt;Page.Resources&gt;`</ph>.","pos":[7098,7263]},{"content":"Note that the binding on <bpt id=\"p1\">**</bpt>LongListSelector.ItemsSource<ept id=\"p1\">**</ept> becomes the value of <bpt id=\"p2\">**</bpt>CollectionViewSource.Source<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>LongListSelector.IsGroupingEnabled<ept id=\"p3\">**</ept> becomes <bpt id=\"p4\">**</bpt>CollectionViewSource.IsSourceGrouped<ept id=\"p4\">**</ept>.","pos":[7418,7622]},{"content":"The <bpt id=\"p1\">**</bpt>CollectionViewSource<ept id=\"p1\">**</ept> has a name (note: not a key, as you might expect) so that we can bind to it.","pos":[7623,7728]},{"pos":[7730,7854],"content":"Next, replace the <ph id=\"ph1\">`phone:LongListSelector`</ph> with this markup, which will give us a preliminary <bpt id=\"p1\">**</bpt>SemanticZoom<ept id=\"p1\">**</ept> to work with."},{"content":"The <bpt id=\"p1\">**</bpt>LongListSelector<ept id=\"p1\">**</ept> notion of flat list and jump list modes is answered in the <bpt id=\"p2\">**</bpt>SemanticZoom<ept id=\"p2\">**</ept> notion of a zoomed-in and a zoomed-out view, respectively.","pos":[8704,8863]},{"content":"The zoomed-in view is a property, and you set that property to an instance of a <bpt id=\"p1\">**</bpt>ListView<ept id=\"p1\">**</ept>.","pos":[8864,8957]},{"content":"In this case, the zoomed-out view is also set to a <bpt id=\"p1\">**</bpt>ListView<ept id=\"p1\">**</ept>, and both <bpt id=\"p2\">**</bpt>ListView<ept id=\"p2\">**</ept> controls are bound to our <bpt id=\"p3\">**</bpt>CollectionViewSource<ept id=\"p3\">**</ept>.","pos":[8958,9096]},{"content":"The zoomed-in view uses the same item template, group header template, and <bpt id=\"p1\">**</bpt>HideEmptyGroups<ept id=\"p1\">**</ept> setting (now named <bpt id=\"p2\">**</bpt>HidesIfEmpty<ept id=\"p2\">**</ept>) as the <bpt id=\"p3\">**</bpt>LongListSelector<ept id=\"p3\">**</ept>'s flat list does.","pos":[9097,9274]},{"content":"And the zoomed-out view uses an item template very much like the one inside the <bpt id=\"p1\">**</bpt>LongListSelector<ept id=\"p1\">**</ept>'s jump list style (<ph id=\"ph1\">`AuthorNameJumpListStyle`</ph>).","pos":[9275,9422]},{"content":"Also, note that the zoomed-out view binds to a special property of the <bpt id=\"p1\">**</bpt>CollectionViewSource<ept id=\"p1\">**</ept> named <bpt id=\"p2\">**</bpt>CollectionGroups<ept id=\"p2\">**</ept>, which is a collection containing the groups rather than the items.","pos":[9423,9613]},{"content":"We no longer need <ph id=\"ph1\">`AuthorNameJumpListStyle`</ph>, at least not all of it.","pos":[9615,9683]},{"content":"We only need the data template for the groups (which are authors in this app) in the zoomed-out view.","pos":[9684,9785]},{"content":"So, we delete the <ph id=\"ph1\">`AuthorNameJumpListStyle`</ph> style and replace it with this data template.","pos":[9786,9875]},{"pos":[10338,10472],"content":"Note that, since the data context of this data template is a group rather than an item, we bind to a special property named <bpt id=\"p1\">**</bpt>Group<ept id=\"p1\">**</ept>."},{"content":"You can build and run the app now.","pos":[10474,10508]},{"content":"Here's how it looks on the mobile emulator.","pos":[10509,10552]},{"content":"the uwp app on mobile with initial source code changes","pos":[10556,10610]},{"content":"The view model and the zoomed-in and zoomed-out views are working together correctly, although one issue is that we need to do a little more styling and templating work.","pos":[10691,10860]},{"content":"For example, the correct styles and brushes are not yet being used, so the text is invisible on the group headers that you can click to zoom out.","pos":[10861,11006]},{"content":"If you run the app on a desktop device, then you'll see a second issue, which is that the app doesn't yet adapt its user-interface to give the best experience and use of space on larger devices where windows can be potentially much larger than the screen of a mobile device.","pos":[11007,11281]},{"content":"So, in the next few sections (<bpt id=\"p1\">[</bpt>Initial styling and templating<ept id=\"p1\">](#initial-styling-and-templating)</ept>, <bpt id=\"p2\">[</bpt>Adaptive UI<ept id=\"p2\">](#adaptive-ui)</ept>, and <bpt id=\"p3\">[</bpt>Final styling<ept id=\"p3\">](#final-styling)</ept>), we'll remedy those issues.","pos":[11282,11472]},{"content":"Initial styling and templating","pos":[11477,11507]},{"pos":[11509,11637],"content":"To space out the group headers nicely, edit <ph id=\"ph1\">`AuthorGroupHeaderTemplate`</ph> and set a <bpt id=\"p1\">**</bpt>Margin<ept id=\"p1\">**</ept> of <ph id=\"ph2\">`\"0,0,0,9.6\"`</ph> on the <bpt id=\"p2\">**</bpt>Border<ept id=\"p2\">**</ept>."},{"pos":[11639,11754],"content":"To space out the book items nicely, Edit <ph id=\"ph1\">`BookTemplate`</ph> and set the <bpt id=\"p1\">**</bpt>Margin<ept id=\"p1\">**</ept> to <ph id=\"ph2\">`\"9.6,0\"`</ph> on both <bpt id=\"p2\">**</bpt>TextBlock<ept id=\"p2\">**</ept>s."},{"content":"To lay out the app name and the page title a little better, inside <ph id=\"ph1\">`TitlePanel`</ph>, remove the top <bpt id=\"p1\">**</bpt>Margin<ept id=\"p1\">**</ept> on the second <bpt id=\"p2\">**</bpt>TextBlock<ept id=\"p2\">**</ept> by setting the value to <ph id=\"ph2\">`\"7.2,0,0,0\"`</ph>.","pos":[11756,11929]},{"content":"And on <ph id=\"ph1\">`TitlePanel`</ph> itself, set the margin to <ph id=\"ph2\">`0`</ph> (or whatever value looks good to you)","pos":[11930,12017]},{"pos":[12019,12111],"content":"Change <ph id=\"ph1\">`LayoutRoot`</ph>'s Background to <ph id=\"ph2\">`\"{ThemeResource ApplicationPageBackgroundThemeBrush}\"`</ph>."},{"content":"Adaptive UI","pos":[12116,12127]},{"content":"Because we started out with a phone app, it's no surprise that our ported app's UI layout really only makes sense for small devices and narrow windows at this stage in the process.","pos":[12129,12309]},{"content":"But, we'd really like the UI layout to adapt itself and make better use of space when the app is running in a wide window (which is only possible on a device with a large screen), and for it only to use the UI that we have currently when the app's window is narrow (which happens on a small device, and can also happen on a large device).","pos":[12310,12648]},{"content":"We can use the adaptive Visual State Manager feature to achieve this.","pos":[12650,12719]},{"content":"We'll set properties on visual elements so that, by default, the UI is laid out in the narrow state using the templates that we're using right now.","pos":[12720,12867]},{"content":"Then, we'll detect when the app's window is wider-than-or-equal-to a specific size (measured in units of <bpt id=\"p1\">[</bpt>effective pixels<ept id=\"p1\">](wpsl-to-uwp-porting-xaml-and-ui.md#effective-pixels)</ept>), and in response, we'll change the properties of visual elements so that we get a larger, and wider, layout.","pos":[12868,13154]},{"content":"We'll put those property changes in a visual state, and we'll use an adaptive trigger to continuously monitor and determine whether to apply that visual state, or not, depending on the width of the window in effective pixels.","pos":[13155,13380]},{"content":"We're triggering on window width in this case, but it's possible to trigger on window height, too.","pos":[13381,13479]},{"content":"A minimum window width of 548 epx is appropriate for this use case because that's the size of the smallest device we would want to show the wide layout on.","pos":[13481,13636]},{"content":"Phones are typically smaller than 548 epx, so on a small device like that, we'd remain in the default narrow layout.","pos":[13637,13753]},{"content":"On a PC, the window will launch by default wide enough to trigger the switch to the wide state, which will display 250x250-sized items.","pos":[13754,13889]},{"content":"From there, you'll be able to drag the window narrow enough to display a minimum of two columns of the 250x250 items.","pos":[13890,14007]},{"content":"Any narrower than that and the trigger will deactivate, the wide visual state will be removed, and the default narrow layout will be in effect.","pos":[14008,14151]},{"content":"Before tackling the adaptive Visual State Manager piece, we first need to design the wide state and that means adding some new visual elements and templates to our markup.","pos":[14153,14324]},{"content":"These steps describe how to do that.","pos":[14325,14361]},{"content":"By way of naming conventions for visual elements and templates, we'll include the word \"wide\" in the name of any element or template that is for the wide state.","pos":[14362,14522]},{"content":"If an element or template does not contain the word \"wide\", then you can assume that it is for the narrow state, which is the default state and whose property values are set as local values on visual elements in the page.","pos":[14523,14744]},{"content":"Only the property values for the wide state are set via an actual Visual State in the markup.","pos":[14745,14838]},{"content":"Make a copy of the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SemanticZoom<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh702601)</ept> control in the markup and set <ph id=\"ph1\">`x:Name=\"narrowSeZo\"`</ph> on the copy.","pos":[14844,15004]},{"content":"On the original, set <ph id=\"ph1\">`x:Name=\"wideSeZo\"`</ph> and also set <ph id=\"ph2\">`Visibility=\"Collapsed\"`</ph> so that the wide one is not visible by default.","pos":[15005,15131]},{"pos":[15136,15244],"content":"In <ph id=\"ph1\">`wideSeZo`</ph>, change the <bpt id=\"p1\">**</bpt>ListView<ept id=\"p1\">**</ept>s to <bpt id=\"p2\">**</bpt>GridView<ept id=\"p2\">**</ept>s in both the zoomed-in view and the zoomed-out view."},{"content":"Make a copy of these three resources <ph id=\"ph1\">`AuthorGroupHeaderTemplate`</ph>, <ph id=\"ph2\">`ZoomedOutAuthorTemplate`</ph>, and <ph id=\"ph3\">`BookTemplate`</ph> and append the word <ph id=\"ph4\">`Wide`</ph> to the keys of the copies.","pos":[15249,15414]},{"content":"Also, update <ph id=\"ph1\">`wideSeZo`</ph> so that it references the keys of these new resources.","pos":[15415,15493]},{"pos":[15498,15645],"content":"Replace the contents of <ph id=\"ph1\">`AuthorGroupHeaderTemplateWide`</ph> with <ph id=\"ph2\">`&lt;TextBlock Style=\"{StaticResource SubheaderTextBlockStyle}\" Text=\"{Binding Name}\"/&gt;`</ph>."},{"pos":[15650,15709],"content":"Replace the contents of <ph id=\"ph1\">`ZoomedOutAuthorTemplateWide`</ph> with:"},{"pos":[16256,16304],"content":"Replace the contents of <ph id=\"ph1\">`BookTemplateWide`</ph> with:"},{"content":"For the wide state, the groups in the zoomed-in view will need more vertical breathing space around them.","pos":[17284,17389]},{"content":"Creating and referencing an items panel template will give us the results we want.","pos":[17390,17472]},{"content":"Here's how the markup looks.","pos":[17473,17501]},{"pos":[17889,17981],"content":"Finally, add the appropriate Visual State Manager markup as the first child of <ph id=\"ph1\">`LayoutRoot`</ph>."},{"content":"Final styling","pos":[18689,18702]},{"content":"All that remains are some final styling tweaks.","pos":[18704,18751]},{"pos":[18757,18901],"content":"In <ph id=\"ph1\">`AuthorGroupHeaderTemplate`</ph>, set <ph id=\"ph2\">`Foreground=\"White\"`</ph> on the <bpt id=\"p1\">**</bpt>TextBlock<ept id=\"p1\">**</ept> so that it looks correct when running on the mobile device family."},{"pos":[18906,19021],"content":"Add <ph id=\"ph1\">`FontWeight=\"SemiBold\"`</ph> to the <bpt id=\"p1\">**</bpt>TextBlock<ept id=\"p1\">**</ept> in both <ph id=\"ph2\">`AuthorGroupHeaderTemplate`</ph> and <ph id=\"ph3\">`ZoomedOutAuthorTemplate`</ph>."},{"content":"In <ph id=\"ph1\">`narrowSeZo`</ph>, the group headers and the authors in the zoomed-out view are left-aligned instead of stretched, so let's work on that.","pos":[19026,19161]},{"content":"We'll create a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>HeaderContainerStyle<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn251841)</ept> for the zoomed-in view with <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>HorizontalContentAlignment<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br209417)</ept> set to <ph id=\"ph1\">`Stretch`</ph>.","pos":[19162,19398]},{"content":"And we'll create an <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ItemContainerStyle<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242817)</ept> for the zoomed-out view containing that same <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Setter<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br208817)</ept>.","pos":[19399,19618]},{"content":"Here's what that looks like.","pos":[19619,19647]},{"content":"That last sequence of styling operations leaves the app looking like this.","pos":[20520,20594]},{"content":"the ported windows 10 app running on a desktop device, zoomed-in view, two sizes of window","pos":[20598,20688]},{"pos":[20751,20937],"content":"The ported Windows 10 app running on a Desktop device, zoomed-in view, two sizes of window <ph id=\"ph1\"> \n![</ph>the ported windows 10 app running on a desktop device, zoomed-out view, two sizes of window"},{"content":"The ported Windows 10 app running on a Desktop device, zoomed-out view, two sizes of window","pos":[21000,21091]},{"content":"the ported windows 10 app running on a mobile device, zoomed-in view","pos":[21095,21163]},{"content":"The ported Windows 10 app running on a Mobile device, zoomed-in view","pos":[21225,21293]},{"content":"the ported windows 10 app running on a mobile device, zoomed-out view","pos":[21297,21366]},{"content":"The ported Windows 10 app running on a Mobile device, zoomed-out view","pos":[21428,21497]},{"content":"Making the view model more flexible","pos":[21502,21537]},{"content":"This section contains an example of facilities that open up to us by virtue of having moved our app to use the UWP.","pos":[21539,21654]},{"content":"Here, we explain optional steps that you can follow to make your view model more flexible when accessed via a <bpt id=\"p1\">**</bpt>CollectionViewSource<ept id=\"p1\">**</ept>.","pos":[21655,21790]},{"content":"The view model (the source file is in ViewModel<ph id=\"ph1\">\\\\</ph>BookstoreViewModel.cs) that we ported from the Windows Phone Silverlight app Bookstore2WPSL8 contains a class named Author, which derives from <bpt id=\"p1\">**</bpt>List<ph id=\"ph2\">&amp;lt;</ph>T<ph id=\"ph3\">&amp;gt;</ph><ept id=\"p1\">**</ept>, where <bpt id=\"p2\">**</bpt>T<ept id=\"p2\">**</ept> is BookSku.","pos":[21791,22025]},{"content":"That means that the Author class <bpt id=\"p1\">*</bpt>is a<ept id=\"p1\">*</ept> group of BookSku.","pos":[22026,22083]},{"content":"When we bind <bpt id=\"p1\">**</bpt>CollectionViewSource.Source<ept id=\"p1\">**</ept> to Authors, the only thing we're communicating is that each Author in Authors is a group of <bpt id=\"p2\">*</bpt>something<ept id=\"p2\">*</ept>.","pos":[22085,22234]},{"content":"We leave it to the <bpt id=\"p1\">**</bpt>CollectionViewSource<ept id=\"p1\">**</ept> to determine that Author is, in this case, a group of BookSku.","pos":[22235,22341]},{"content":"That works: but it's not flexible.","pos":[22342,22376]},{"content":"What if we want Author to be <bpt id=\"p1\">*</bpt>both<ept id=\"p1\">*</ept> a group of BookSku <bpt id=\"p2\">*</bpt>and<ept id=\"p2\">*</ept> a group of the addresses where the author has lived?","pos":[22377,22490]},{"content":"Author can't <bpt id=\"p1\">*</bpt>be<ept id=\"p1\">*</ept> both of those groups.","pos":[22491,22530]},{"content":"But, Author can <bpt id=\"p1\">*</bpt>have<ept id=\"p1\">*</ept> any number of groups.","pos":[22531,22575]},{"content":"And that's the solution: use the <bpt id=\"p1\">*</bpt>has-a-group<ept id=\"p1\">*</ept> pattern instead of, or in addition to, the <bpt id=\"p2\">*</bpt>is-a-group<ept id=\"p2\">*</ept> pattern that we're using currently.","pos":[22576,22714]},{"content":"Here's how:","pos":[22715,22726]},{"pos":[22732,22798],"content":"Change Author so that it no longer derives from <bpt id=\"p1\">**</bpt>List<ph id=\"ph1\">&amp;lt;</ph>T<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">**</ept>."},{"pos":[22803,22917],"content":"Add this field to Author: <ph id=\"ph1\">`private ObservableCollection&lt;BookSku&gt; bookSkus = new ObservableCollection&lt;BookSku&gt;();`</ph>."},{"pos":[22922,23033],"content":"Add this property to Author: <ph id=\"ph1\">`public ObservableCollection&lt;BookSku&gt; BookSkus { get { return this.bookSkus; } }`</ph>."},{"content":"And of course we can repeat the above two steps to add as many groups to Author as we need.","pos":[23038,23129]},{"pos":[23134,23218],"content":"Change the implementation of the AddBookSku method to <ph id=\"ph1\">`this.BookSkus.Add(bookSku);`</ph>."},{"content":"Now that Author <bpt id=\"p1\">*</bpt>has<ept id=\"p1\">*</ept> at least one group, we need to communicate to the <bpt id=\"p2\">**</bpt>CollectionViewSource<ept id=\"p2\">**</ept> which of those groups it should use.","pos":[23223,23356]},{"content":"To do that, add this property to the <bpt id=\"p1\">**</bpt>CollectionViewSource<ept id=\"p1\">**</ept>:","pos":[23357,23419]},{"content":"Those changes leave this app functionally unchanged, but you now know how you could extend Author, and the <bpt id=\"p1\">**</bpt>CollectionViewSource<ept id=\"p1\">**</ept>, should you need to.","pos":[23444,23596]},{"content":"Let's make one last change to Author so that, if we use it <bpt id=\"p1\">*</bpt>without<ept id=\"p1\">*</ept> specifying <bpt id=\"p2\">**</bpt>CollectionViewSource.ItemsPath<ept id=\"p2\">**</ept>, a default group of our choosing will be used:","pos":[23597,23758]},{"pos":[24125,24234],"content":"And now we can choose to remove <ph id=\"ph1\">`ItemsPath=\"BookSkus\"`</ph> if we like and the app will still behave the same way."},{"content":"Conclusion","pos":[24239,24249]},{"content":"This case study involved a more ambitious user interface than the previous one.","pos":[24251,24330]},{"content":"All of the facilities and concepts of the Windows Phone Silverlight<bpt id=\"p1\"> **</bpt>LongListSelector<ept id=\"p1\">**</ept>—and more—were found to be available to a UWP app in the form of <bpt id=\"p2\">**</bpt>SemanticZoom<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>ListView<ept id=\"p3\">**</ept>, <bpt id=\"p4\">**</bpt>GridView<ept id=\"p4\">**</ept>, and <bpt id=\"p5\">**</bpt>CollectionViewSource<ept id=\"p5\">**</ept>.","pos":[24331,24559]},{"content":"We showed how to re-use, or copy-and-edit, both imperative code and markup in a UWP app to achieve functionality, UI, and interactions tailored to suit the narrowest and widest Windows device form factors and all sizes in-between.","pos":[24560,24790]}],"content":"---\nauthor: mcleblanc\nms.assetid: 333f67f5-f012-4981-917f-c6fd271267c6\ndescription: This case study, which builds on the info given in Bookstore, begins with a Windows Phone Silverlight app that displays grouped data in a LongListSelector.\ntitle: Windows Phone Silverlight to UWP case study, Bookstore2\n---\n\n# Windows Phone Silverlight to UWP case study: Bookstore2\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nThis case study—which builds on the info given in [Bookstore1](wpsl-to-uwp-case-study-bookstore1.md)—begins with a Windows Phone Silverlight app that displays grouped data in a **LongListSelector**. In the view model, each instance of the class **Author** represents the group of the books written by that author, and in the **LongListSelector**, we can either view the list of books grouped by author or we can zoom out to see a jump list of authors. The jump list affords much quicker navigation than scrolling through the list of books. We walk through the steps of porting the app to a Windows 10 Universal Windows Platform (UWP) app.\n\n**Note**   When opening Bookstore2Universal\\_10 in Visual Studio, if you see the message \"Visual Studio update required\", then follow the steps in [TargetPlatformVersion](w8x-to-uwp-troubleshooting.md#targetplatformversion).\n\n## Downloads\n\n[Download the Bookstore2WPSL8 Windows Phone Silverlight app](http://go.microsoft.com/fwlink/p/?linkid=522601).\n\n[Download the Bookstore2Universal\\_10 Windows 10 app](http://go.microsoft.com/fwlink/?linkid=532952).\n\n##  The Windows Phone Silverlight app\n\nThe illustration below shows what Bookstore2WPSL8—the app that we're going to port—looks like. It's a vertically-scrolling **LongListSelector** of books grouped by author. You can zoom out to the jump list, and from there, you can navigate back into any group. There are two main pieces to this app: the view model that provides the grouped data source, and the user interface that binds to that view model. As we'll see, both of these pieces port easily from Windows Phone Silverlight technology to the Universal Windows Platform (UWP).\n\n![how bookstore2wpsl8 looks](images/wpsl-to-uwp-case-studies/c02-01-wpsl-how-the-app-looks.png)\n\n##  Porting to a Windows 10 project\n\nIt's a quick task to create a new project in Visual Studio, copy files over to it from Bookstore2WPSL8, and include the copied files in the new project. Start by creating a new Blank Application (Windows Universal) project. Name it Bookstore2Universal\\_10. These are the files to copy over from Bookstore2WPSL8 to Bookstore2Universal\\_10.\n\n-   Copy the folder containing the book cover image PNG files (the folder is \\\\Assets\\\\CoverImages). After copying the folder, in **Solution Explorer**, make sure **Show All Files** is toggled on. Right-click the folder that you copied and click **Include In Project**. That command is what we mean by \"including\" files or folders in a project. Each time you copy a file or folder, click **Refresh** in **Solution Explorer** and then include the file or folder in the project. There's no need to do this for files that you're replacing in the destination.\n-   Copy the folder containing the view model source file (the folder is \\\\ViewModel).\n-   Copy MainPage.xaml and replace the file in the destination.\n\nWe can keep the App.xaml, and App.xaml.cs that Visual Studio generated for us in the Windows 10 project.\n\nEdit the source code and markup files that you just copied and change any references to the Bookstore2WPSL8 namespace to Bookstore2Universal\\_10. A quick way to do that is to use the **Replace In Files** feature. In the imperative code in the view model source file, these porting changes are needed.\n\n-   Change `System.ComponentModel.DesignerProperties` to `DesignMode` and then use the **Resolve** command on it. Delete the `IsInDesignTool` property and use IntelliSense to add the correct property name: `DesignModeEnabled`.\n-   Use the **Resolve** command on `ImageSource`.\n-   Use the **Resolve** command on `BitmapImage`.\n-   Delete `using System.Windows.Media;` and `using System.Windows.Media.Imaging;`.\n-   Change the value returned by the **Bookstore2Universal\\_10.BookstoreViewModel.AppName** property from \"BOOKSTORE2WPSL8\" to \"BOOKSTORE2UNIVERSAL\".\n-   Just as we did for [Bookstore1](wpsl-to-uwp-case-study-bookstore1.md), update the implementation of the **BookSku.CoverImage** property (see [Binding an Image to a view model](wpsl-to-uwp-case-study-bookstore1.md#binding-an-image)).\n\nIn MainPage.xaml, these initial porting changes are needed.\n\n-   Change `phone:PhoneApplicationPage` to `Page` (including the occurrences in property element syntax).\n-   Delete the `phone` and `shell` namespace prefix declarations.\n-   Change \"clr-namespace\" to \"using\" in the remaining namespace prefix declaration.\n-   Delete `SupportedOrientations=\"Portrait\"`, and `Orientation=\"Portrait\"`, and configure **Portrait** in the app package manifest in the new project.\n-   Delete `shell:SystemTray.IsVisible=\"True\"`.\n-   The types of the jump list item converters (which are present in the markup as resources) have moved to the [**Windows.UI.Xaml.Controls.Primitives**](https://msdn.microsoft.com/library/windows/apps/br209818) namespace. So, add the namespace prefix declaration Windows\\_UI\\_Xaml\\_Controls\\_Primitives and map it to **Windows.UI.Xaml.Controls.Primitives**. On the jump list item converter resources, change the prefix from `phone:` to `Windows_UI_Xaml_Controls_Primitives:`.\n-   Just as we did for [Bookstore1](wpsl-to-uwp-case-study-bookstore1.md), replace all references to the `PhoneTextExtraLargeStyle` **TextBlock** style with a reference to `SubtitleTextBlockStyle`, replace `PhoneTextSubtleStyle` with `SubtitleTextBlockStyle`, replace `PhoneTextNormalStyle` with `CaptionTextBlockStyle`, and replace `PhoneTextTitle1Style` with `HeaderTextBlockStyle`.\n-   There is one exception in `BookTemplate`. The style of the second **TextBlock** should reference `CaptionTextBlockStyle`.\n-   Remove the FontFamily attribute from the **TextBlock** inside `AuthorGroupHeaderTemplate` and set the Background of the **Border** to reference `SystemControlBackgroundAccentBrush` instead of `PhoneAccentBrush`.\n-   Because of [changes related to view pixels](wpsl-to-uwp-porting-xaml-and-ui.md#effective-pixels), go through the markup and multiply any fixed size dimension (margins, width, height, etc) by 0.8.\n\n## Replacing the LongListSelector\n\n\nReplacing the **LongListSelector** with a [**SemanticZoom**](https://msdn.microsoft.com/library/windows/apps/hh702601) control will take several steps, so let's make a start on that. A **LongListSelector** binds directly to the grouped data source, but a **SemanticZoom** contains [**ListView**](https://msdn.microsoft.com/library/windows/apps/br242878) or [**GridView**](https://msdn.microsoft.com/library/windows/apps/br242705) controls, which bind indirectly to the data via a [**CollectionViewSource**](https://msdn.microsoft.com/library/windows/apps/br209833) adapter. The **CollectionViewSource** needs to be present in the markup as a resource, so let's begin by adding that to the markup in MainPage.xaml inside `<Page.Resources>`.\n\n```xml\n    <CollectionViewSource\n        x:Name=\"AuthorHasACollectionOfBookSku\"\n        Source=\"{Binding Authors}\"\n        IsSourceGrouped=\"true\"/>\n```\n\nNote that the binding on **LongListSelector.ItemsSource** becomes the value of **CollectionViewSource.Source**, and **LongListSelector.IsGroupingEnabled** becomes **CollectionViewSource.IsSourceGrouped**. The **CollectionViewSource** has a name (note: not a key, as you might expect) so that we can bind to it.\n\nNext, replace the `phone:LongListSelector` with this markup, which will give us a preliminary **SemanticZoom** to work with.\n\n```xml\n    <SemanticZoom>\n        <SemanticZoom.ZoomedInView>\n            <ListView\n                ItemsSource=\"{Binding Source={StaticResource AuthorHasACollectionOfBookSku}}\"\n                ItemTemplate=\"{StaticResource BookTemplate}\">\n                <ListView.GroupStyle>\n                    <GroupStyle\n                        HeaderTemplate=\"{StaticResource AuthorGroupHeaderTemplate}\"\n                        HidesIfEmpty=\"True\"/>\n                </ListView.GroupStyle>\n            </ListView>\n        </SemanticZoom.ZoomedInView>\n        <SemanticZoom.ZoomedOutView>\n            <ListView\n                ItemsSource=\"{Binding CollectionGroups, Source={StaticResource AuthorHasACollectionOfBookSku}}\"\n                ItemTemplate=\"{StaticResource ZoomedOutAuthorTemplate}\"/>\n        </SemanticZoom.ZoomedOutView>\n    </SemanticZoom>\n```\n\nThe **LongListSelector** notion of flat list and jump list modes is answered in the **SemanticZoom** notion of a zoomed-in and a zoomed-out view, respectively. The zoomed-in view is a property, and you set that property to an instance of a **ListView**. In this case, the zoomed-out view is also set to a **ListView**, and both **ListView** controls are bound to our **CollectionViewSource**. The zoomed-in view uses the same item template, group header template, and **HideEmptyGroups** setting (now named **HidesIfEmpty**) as the **LongListSelector**'s flat list does. And the zoomed-out view uses an item template very much like the one inside the **LongListSelector**'s jump list style (`AuthorNameJumpListStyle`). Also, note that the zoomed-out view binds to a special property of the **CollectionViewSource** named **CollectionGroups**, which is a collection containing the groups rather than the items.\n\nWe no longer need `AuthorNameJumpListStyle`, at least not all of it. We only need the data template for the groups (which are authors in this app) in the zoomed-out view. So, we delete the `AuthorNameJumpListStyle` style and replace it with this data template.\n\n```xml\n   <DataTemplate x:Key=\"ZoomedOutAuthorTemplate\">\n        <Border Margin=\"9.6,0.8\" Background=\"{Binding Converter={StaticResource JumpListItemBackgroundConverter}}\">\n            <TextBlock Margin=\"9.6,0,9.6,4.8\" Text=\"{Binding Group.Name}\" Style=\"{StaticResource SubtitleTextBlockStyle}\"\n            Foreground=\"{Binding Converter={StaticResource JumpListItemForegroundConverter}}\" VerticalAlignment=\"Bottom\"/>\n        </Border>\n    </DataTemplate>\n```\n\nNote that, since the data context of this data template is a group rather than an item, we bind to a special property named **Group**.\n\nYou can build and run the app now. Here's how it looks on the mobile emulator.\n\n![the uwp app on mobile with initial source code changes](images/wpsl-to-uwp-case-studies/c02-02-mob10-initial-source-code-changes.png)\n\nThe view model and the zoomed-in and zoomed-out views are working together correctly, although one issue is that we need to do a little more styling and templating work. For example, the correct styles and brushes are not yet being used, so the text is invisible on the group headers that you can click to zoom out. If you run the app on a desktop device, then you'll see a second issue, which is that the app doesn't yet adapt its user-interface to give the best experience and use of space on larger devices where windows can be potentially much larger than the screen of a mobile device. So, in the next few sections ([Initial styling and templating](#initial-styling-and-templating), [Adaptive UI](#adaptive-ui), and [Final styling](#final-styling)), we'll remedy those issues.\n\n## Initial styling and templating\n\nTo space out the group headers nicely, edit `AuthorGroupHeaderTemplate` and set a **Margin** of `\"0,0,0,9.6\"` on the **Border**.\n\nTo space out the book items nicely, Edit `BookTemplate` and set the **Margin** to `\"9.6,0\"` on both **TextBlock**s.\n\nTo lay out the app name and the page title a little better, inside `TitlePanel`, remove the top **Margin** on the second **TextBlock** by setting the value to `\"7.2,0,0,0\"`. And on `TitlePanel` itself, set the margin to `0` (or whatever value looks good to you)\n\nChange `LayoutRoot`'s Background to `\"{ThemeResource ApplicationPageBackgroundThemeBrush}\"`.\n\n## Adaptive UI\n\nBecause we started out with a phone app, it's no surprise that our ported app's UI layout really only makes sense for small devices and narrow windows at this stage in the process. But, we'd really like the UI layout to adapt itself and make better use of space when the app is running in a wide window (which is only possible on a device with a large screen), and for it only to use the UI that we have currently when the app's window is narrow (which happens on a small device, and can also happen on a large device).\n\nWe can use the adaptive Visual State Manager feature to achieve this. We'll set properties on visual elements so that, by default, the UI is laid out in the narrow state using the templates that we're using right now. Then, we'll detect when the app's window is wider-than-or-equal-to a specific size (measured in units of [effective pixels](wpsl-to-uwp-porting-xaml-and-ui.md#effective-pixels)), and in response, we'll change the properties of visual elements so that we get a larger, and wider, layout. We'll put those property changes in a visual state, and we'll use an adaptive trigger to continuously monitor and determine whether to apply that visual state, or not, depending on the width of the window in effective pixels. We're triggering on window width in this case, but it's possible to trigger on window height, too.\n\nA minimum window width of 548 epx is appropriate for this use case because that's the size of the smallest device we would want to show the wide layout on. Phones are typically smaller than 548 epx, so on a small device like that, we'd remain in the default narrow layout. On a PC, the window will launch by default wide enough to trigger the switch to the wide state, which will display 250x250-sized items. From there, you'll be able to drag the window narrow enough to display a minimum of two columns of the 250x250 items. Any narrower than that and the trigger will deactivate, the wide visual state will be removed, and the default narrow layout will be in effect.\n\nBefore tackling the adaptive Visual State Manager piece, we first need to design the wide state and that means adding some new visual elements and templates to our markup. These steps describe how to do that. By way of naming conventions for visual elements and templates, we'll include the word \"wide\" in the name of any element or template that is for the wide state. If an element or template does not contain the word \"wide\", then you can assume that it is for the narrow state, which is the default state and whose property values are set as local values on visual elements in the page. Only the property values for the wide state are set via an actual Visual State in the markup.\n\n-   Make a copy of the [**SemanticZoom**](https://msdn.microsoft.com/library/windows/apps/hh702601) control in the markup and set `x:Name=\"narrowSeZo\"` on the copy. On the original, set `x:Name=\"wideSeZo\"` and also set `Visibility=\"Collapsed\"` so that the wide one is not visible by default.\n-   In `wideSeZo`, change the **ListView**s to **GridView**s in both the zoomed-in view and the zoomed-out view.\n-   Make a copy of these three resources `AuthorGroupHeaderTemplate`, `ZoomedOutAuthorTemplate`, and `BookTemplate` and append the word `Wide` to the keys of the copies. Also, update `wideSeZo` so that it references the keys of these new resources.\n-   Replace the contents of `AuthorGroupHeaderTemplateWide` with `<TextBlock Style=\"{StaticResource SubheaderTextBlockStyle}\" Text=\"{Binding Name}\"/>`.\n-   Replace the contents of `ZoomedOutAuthorTemplateWide` with:\n\n```xml\n    <Grid HorizontalAlignment=\"Left\" Width=\"250\" Height=\"250\" >\n        <Border Background=\"{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}\"/>\n        <StackPanel VerticalAlignment=\"Bottom\" Background=\"{StaticResource ListViewItemOverlayBackgroundThemeBrush}\">\n          <TextBlock Foreground=\"{StaticResource ListViewItemOverlayForegroundThemeBrush}\"\n              Style=\"{StaticResource SubtitleTextBlockStyle}\"\n            Height=\"80\" Margin=\"15,0\" Text=\"{Binding Group.Name}\"/>\n        </StackPanel>\n    </Grid>\n```\n\n-   Replace the contents of `BookTemplateWide` with:\n\n```xml\n    <Grid HorizontalAlignment=\"Left\" Width=\"250\" Height=\"250\">\n        <Border Background=\"{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}\"/>\n        <Image Source=\"{Binding CoverImage}\" Stretch=\"UniformToFill\"/>\n        <StackPanel VerticalAlignment=\"Bottom\" Background=\"{StaticResource ListViewItemOverlayBackgroundThemeBrush}\">\n            <TextBlock Style=\"{StaticResource SubtitleTextBlockStyle}\"\n                Foreground=\"{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}\"\n                TextWrapping=\"NoWrap\" TextTrimming=\"CharacterEllipsis\"\n                Margin=\"12,0,24,0\" Text=\"{Binding Title}\"/>\n            <TextBlock Style=\"{StaticResource CaptionTextBlockStyle}\" Text=\"{Binding Author.Name}\"\n                Foreground=\"{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}\" TextWrapping=\"NoWrap\"\n                TextTrimming=\"CharacterEllipsis\" Margin=\"12,0,12,12\"/>\n        </StackPanel>\n    </Grid>\n```\n\n-   For the wide state, the groups in the zoomed-in view will need more vertical breathing space around them. Creating and referencing an items panel template will give us the results we want. Here's how the markup looks.\n\n```xml\n   <ItemsPanelTemplate x:Key=\"ZoomedInItemsPanelTemplate\">\n        <ItemsWrapGrid Orientation=\"Horizontal\" GroupPadding=\"0,0,0,20\"/>\n    </ItemsPanelTemplate>\n    ...\n\n    <SemanticZoom x:Name=\"wideSeZo\" ... >\n        <SemanticZoom.ZoomedInView>\n            <GridView\n            ...\n            ItemsPanel=\"{StaticResource ZoomedInItemsPanelTemplate}\">\n            ...\n```\n\n-   Finally, add the appropriate Visual State Manager markup as the first child of `LayoutRoot`.\n\n```xml\n    <Grid x:Name=\"LayoutRoot\" ... >\n        <VisualStateManager.VisualStateGroups>\n            <VisualStateGroup>\n                <VisualState x:Name=\"WideState\">\n                    <VisualState.StateTriggers>\n                        <AdaptiveTrigger MinWindowWidth=\"548\"/>\n                    </VisualState.StateTriggers>\n                    <VisualState.Setters>\n                        <Setter Target=\"wideSeZo.Visibility\" Value=\"Visible\"/>\n                        <Setter Target=\"narrowSeZo.Visibility\" Value=\"Collapsed\"/>\n                    </VisualState.Setters>\n                </VisualState>\n            </VisualStateGroup>\n        </VisualStateManager.VisualStateGroups>\n\n    ...\n```\n\n## Final styling\n\nAll that remains are some final styling tweaks.\n\n-   In `AuthorGroupHeaderTemplate`, set `Foreground=\"White\"` on the **TextBlock** so that it looks correct when running on the mobile device family.\n-   Add `FontWeight=\"SemiBold\"` to the **TextBlock** in both `AuthorGroupHeaderTemplate` and `ZoomedOutAuthorTemplate`.\n-   In `narrowSeZo`, the group headers and the authors in the zoomed-out view are left-aligned instead of stretched, so let's work on that. We'll create a [**HeaderContainerStyle**](https://msdn.microsoft.com/library/windows/apps/dn251841) for the zoomed-in view with [**HorizontalContentAlignment**](https://msdn.microsoft.com/library/windows/apps/br209417) set to `Stretch`. And we'll create an [**ItemContainerStyle**](https://msdn.microsoft.com/library/windows/apps/br242817) for the zoomed-out view containing that same [**Setter**](https://msdn.microsoft.com/library/windows/apps/br208817). Here's what that looks like.\n\n```xml\n   <Style x:Key=\"AuthorGroupHeaderContainerStyle\" TargetType=\"ListViewHeaderItem\">\n        <Setter Property=\"HorizontalContentAlignment\" Value=\"Stretch\"/>\n    </Style>\n\n    <Style x:Key=\"ZoomedOutAuthorItemContainerStyle\" TargetType=\"ListViewItem\">\n        <Setter Property=\"HorizontalContentAlignment\" Value=\"Stretch\"/>\n    </Style>\n\n    ...\n\n    <SemanticZoom x:Name=\"narrowSeZo\" ... >\n        <SemanticZoom.ZoomedInView>\n            <ListView\n            ...\n                <ListView.GroupStyle>\n                    <GroupStyle\n                    ...\n                    HeaderContainerStyle=\"{StaticResource AuthorGroupHeaderContainerStyle}\"\n                    ...\n        <SemanticZoom.ZoomedOutView>\n            <ListView\n                ...\n                ItemContainerStyle=\"{StaticResource ZoomedOutAuthorItemContainerStyle}\"\n                ...\n```\n\nThat last sequence of styling operations leaves the app looking like this.\n\n![the ported windows 10 app running on a desktop device, zoomed-in view, two sizes of window](images/w8x-to-uwp-case-studies/c02-07-desk10-zi-ported.png)\n\nThe ported Windows 10 app running on a Desktop device, zoomed-in view, two sizes of window\n \n![the ported windows 10 app running on a desktop device, zoomed-out view, two sizes of window](images/w8x-to-uwp-case-studies/c02-08-desk10-zo-ported.png)\n\nThe ported Windows 10 app running on a Desktop device, zoomed-out view, two sizes of window\n\n![the ported windows 10 app running on a mobile device, zoomed-in view](images/w8x-to-uwp-case-studies/c02-09-mob10-zi-ported.png)\n\nThe ported Windows 10 app running on a Mobile device, zoomed-in view\n\n![the ported windows 10 app running on a mobile device, zoomed-out view](images/w8x-to-uwp-case-studies/c02-10-mob10-zo-ported.png)\n\nThe ported Windows 10 app running on a Mobile device, zoomed-out view\n\n## Making the view model more flexible\n\nThis section contains an example of facilities that open up to us by virtue of having moved our app to use the UWP. Here, we explain optional steps that you can follow to make your view model more flexible when accessed via a **CollectionViewSource**. The view model (the source file is in ViewModel\\\\BookstoreViewModel.cs) that we ported from the Windows Phone Silverlight app Bookstore2WPSL8 contains a class named Author, which derives from **List&lt;T&gt;**, where **T** is BookSku. That means that the Author class *is a* group of BookSku.\n\nWhen we bind **CollectionViewSource.Source** to Authors, the only thing we're communicating is that each Author in Authors is a group of *something*. We leave it to the **CollectionViewSource** to determine that Author is, in this case, a group of BookSku. That works: but it's not flexible. What if we want Author to be *both* a group of BookSku *and* a group of the addresses where the author has lived? Author can't *be* both of those groups. But, Author can *have* any number of groups. And that's the solution: use the *has-a-group* pattern instead of, or in addition to, the *is-a-group* pattern that we're using currently. Here's how:\n\n-   Change Author so that it no longer derives from **List&lt;T&gt;**.\n-   Add this field to Author: `private ObservableCollection<BookSku> bookSkus = new ObservableCollection<BookSku>();`.\n-   Add this property to Author: `public ObservableCollection<BookSku> BookSkus { get { return this.bookSkus; } }`.\n-   And of course we can repeat the above two steps to add as many groups to Author as we need.\n-   Change the implementation of the AddBookSku method to `this.BookSkus.Add(bookSku);`.\n-   Now that Author *has* at least one group, we need to communicate to the **CollectionViewSource** which of those groups it should use. To do that, add this property to the **CollectionViewSource**: `ItemsPath=\"BookSkus\"`\n\nThose changes leave this app functionally unchanged, but you now know how you could extend Author, and the **CollectionViewSource**, should you need to. Let's make one last change to Author so that, if we use it *without* specifying **CollectionViewSource.ItemsPath**, a default group of our choosing will be used:\n\n```csharp\n    public class Author : IEnumerable<BookSku>\n    {\n        ...\n\n        public IEnumerator<BookSku> GetEnumerator()\n        {\n            return this.BookSkus.GetEnumerator();\n        }\n        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()\n        {\n            return this.BookSkus.GetEnumerator();\n        }\n    }\n```\n\nAnd now we can choose to remove `ItemsPath=\"BookSkus\"` if we like and the app will still behave the same way.\n\n## Conclusion\n\nThis case study involved a more ambitious user interface than the previous one. All of the facilities and concepts of the Windows Phone Silverlight **LongListSelector**—and more—were found to be available to a UWP app in the form of **SemanticZoom**, **ListView**, **GridView**, and **CollectionViewSource**. We showed how to re-use, or copy-and-edit, both imperative code and markup in a UWP app to achieve functionality, UI, and interactions tailored to suit the narrowest and widest Windows device form factors and all sizes in-between.\n"}