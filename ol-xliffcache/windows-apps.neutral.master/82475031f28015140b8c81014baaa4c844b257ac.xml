{"nodes":[{"content":"Enumerate devices","pos":[77,94]},{"content":"The enumeration namespace enables you to find devices that are internally connected to the system, externally connected, or detectable over wireless or networking protocols.","pos":[108,281]},{"content":"Enumerate devices","pos":[288,305]},{"content":"Updated for UWP apps on Windows 10.","pos":[310,345]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[346,438]},{"content":"Important APIs","pos":[447,461]},{"content":"Windows.Devices.Enumeration","pos":[473,500]},{"content":"The enumeration namespace enables you to find devices that are internally connected to the system, externally connected, or detectable over wireless or networking protocols.","pos":[563,736]},{"content":"The APIs that you use to enumerate through the possible devices are the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.Devices.Enumeration<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225459)</ept> namespace.","pos":[737,911]},{"content":"Some reasons for using these APIs include the following.","pos":[912,968]},{"content":"Finding a device to connect to with your application.","pos":[974,1027]},{"content":"Getting information about devices connected to or discoverable by the system.","pos":[1032,1109]},{"content":"Have an app receive notifications when devices are added, connect, disconnect, change online status, or change other properties.","pos":[1114,1242]},{"content":"Have an app receive background triggers when devices connect, disconnect, change online status, or change other properties.","pos":[1247,1370]},{"content":"These APIs can enumerate devices over any of the following protocols and buses, provided the individual device and the system running the app support that technology.","pos":[1372,1538]},{"content":"This is not an exhaustive list, and other protocols may be supported by a specific device.","pos":[1539,1629]},{"content":"Physically connected buses.","pos":[1635,1662]},{"content":"This includes PCI and USB.","pos":[1663,1689]},{"content":"For example, anything that you can see in the <bpt id=\"p1\">**</bpt>Device Manager<ept id=\"p1\">**</ept>.","pos":[1690,1755]},{"content":"UPnP","pos":[1761,1765]},{"content":"Digital Living Network Alliance (DLNA)","pos":[1832,1870]},{"content":"Discovery and Launch (DIAL)","pos":[1878,1905]},{"content":"DNS Service Discovery (DNS-SD)","pos":[1974,2004]},{"content":"Web Services on Devices (WSD)","pos":[2071,2100]},{"content":"Bluetooth","pos":[2168,2177]},{"content":"Wi-Fi Direct","pos":[2247,2259]},{"content":"WiGig","pos":[2325,2330]},{"content":"Point of Service","pos":[2338,2354]},{"content":"In many cases, you will not need to worry about using the enumeration APIs.","pos":[2417,2492]},{"content":"This is because many APIs that use devices will automatically select the appropriate default device or provide a more streamlined enumeration API.","pos":[2493,2639]},{"content":"For example, <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>MediaElement<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR242926)</ept> will automatically use the default audio renderer device.","pos":[2640,2787]},{"content":"As long as your app can use the default device, there is no need to use the enumeration APIs in your application.","pos":[2788,2901]},{"content":"The enumeration APIs provide a general and flexible way for you to discover and connect to available devices.","pos":[2902,3011]},{"content":"This topic provides information about enumerating devices and describes the four common ways to enumerate devices.","pos":[3012,3126]},{"pos":[3132,3221],"content":"Using the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DevicePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn930841)</ept> UI"},{"content":"Enumerating a snapshot of devices currently discoverable by the system","pos":[3226,3296]},{"content":"Enumerating devices currently discoverable and watch for changes","pos":[3301,3365]},{"content":"Enumerating devices currently discoverable and watch for changes in a background task","pos":[3370,3455]},{"content":"DeviceInformation objects","pos":[3460,3485]},{"content":"Working with the enumeration APIs, you will frequently need to use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> objects.","pos":[3488,3645]},{"content":"These objects contain most of the available information about the device.","pos":[3646,3719]},{"content":"The following table explains some of the <bpt id=\"p1\">**</bpt>DeviceInformation<ept id=\"p1\">**</ept> properties you will be interested in.","pos":[3720,3820]},{"content":"For a complete list, see the reference page for <bpt id=\"p1\">**</bpt>DeviceInformation<ept id=\"p1\">**</ept>.","pos":[3821,3891]},{"content":"Property","pos":[3895,3903]},{"content":"Comments","pos":[3930,3938]},{"content":"DeviceInformation.Id","pos":[4899,4919]},{"content":"This is the unique identifier of the device and is provided as a string variable.","pos":[4932,5013]},{"content":"In most cases, this is an opaque value you will just pass from one method to another to indicate the specific device you are interested in.","pos":[5014,5153]},{"content":"You can also use this property and the <bpt id=\"p1\">**</bpt>DeviceInformation.Kind<ept id=\"p1\">**</ept> property after closing down your app and reopening it.","pos":[5154,5274]},{"content":"This will ensure that you can recover and reuse the same <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> object.","pos":[5275,5421]},{"content":"DeviceInformation.Kind","pos":[5428,5450]},{"content":"This indicates the kind of device object represented by the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> object.","pos":[5461,5610]},{"content":"This is not the device category or type of device.","pos":[5611,5661]},{"content":"A single device can be represented by several different <bpt id=\"p1\">**</bpt>DeviceInformation<ept id=\"p1\">**</ept> objects of different kinds.","pos":[5662,5767]},{"content":"The possible values for this property are listed in <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformationKind<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393kind)</ept> as well as how they relate to one another.","pos":[5768,5952]},{"content":"DeviceInformation.Properties","pos":[5985,6013]},{"content":"This property bag contains information that is requested for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> object.","pos":[6018,6172]},{"content":"The most common properties are easily referenced as properties of the <bpt id=\"p1\">**</bpt>DeviceInformation<ept id=\"p1\">**</ept> object, such as with <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>DeviceInformation.Name<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.name)</ept>.","pos":[6173,6415]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Device information properties<ept id=\"p1\">](device-information-properties.md)</ept>.","pos":[6416,6508]},{"content":"DevicePicker UI","pos":[6581,6596]},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DevicePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn930841)</ept> is a control provided by Windows that creates a small UI that enables the user to select a device from a list.","pos":[6599,6790]},{"content":"You can customize the <bpt id=\"p1\">**</bpt>DevicePicker<ept id=\"p1\">**</ept> window in a few ways.","pos":[6791,6851]},{"content":"You can control the devices that are displayed in the UI by adding a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SupportedDeviceSelectors<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn930841filter_supporteddeviceselectors)</ept>, a <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>SupportedDeviceClasses<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Dn930841filter_supporteddeviceclasses)</ept>, or both to the <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>DevicePicker.Filter<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.filter)</ept>.","pos":[6857,7304]},{"content":"In most cases, you only need to add one selector or class, but if you do need more than one you can add multiple.","pos":[7305,7418]},{"content":"If you do add multiple selectors or classes, they are conjoined using an OR logic function.","pos":[7419,7510]},{"content":"You can specify the properties you want to retrieve for the devices.","pos":[7515,7583]},{"content":"You can do this by adding properties to <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DevicePicker.RequestedProperties<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.requestedproperties)</ept>.","pos":[7584,7773]},{"pos":[7778,8015],"content":"You can alter the appearance of the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DevicePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn930841)</ept> using <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Appearance<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.appearance)</ept>."},{"pos":[8020,8163],"content":"You can specify the size and location of the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DevicePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn930841)</ept> when it is displayed."},{"pos":[8165,8361],"content":"While the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DevicePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn930841)</ept> is displayed, the contents of the UI will be automatically updated if devices are added, removed, or updated."},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  You cannot specify the <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>DeviceInformationKind<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/BR225393kind)</ept> using the <bpt id=\"p4\">[</bpt><bpt id=\"p5\">**</bpt>DevicePicker<ept id=\"p5\">**</ept><ept id=\"p4\">](https://msdn.microsoft.com/library/windows/apps/Dn930841)</ept>.","pos":[8363,8573]},{"content":"If you want to have devices of a specific <bpt id=\"p1\">**</bpt>DeviceInformationKind<ept id=\"p1\">**</ept>, you will need to build a <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>DeviceWatcher<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept> and provide your own UI.","pos":[8574,8770]},{"content":"Casting media content and DIAL also each provide their own pickers if you want to use them.","pos":[8775,8866]},{"content":"They are <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CastingDevicePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn972525)</ept> and <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>DialDevicePicker<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Dn946783)</ept>, respectively.","pos":[8867,9059]},{"content":"Enumerate a snapshot of devices","pos":[9064,9095]},{"content":"In some scenarios, the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DevicePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn930841)</ept> will not be suitable for your needs and you need something more flexible.","pos":[9098,9271]},{"content":"Perhaps you want to build your own UI or need to enumerate devices without displaying a UI to the user.","pos":[9272,9375]},{"content":"In these situations, you could enumerate a snapshot of devices.","pos":[9376,9439]},{"content":"This involves looking through the devices that are currently connected to or paired with the system.","pos":[9440,9540]},{"content":"However, you need to be aware that this method only looks at a snapshot of devices that are available, so you will not be able to find devices that connect after you enumerate through the list.","pos":[9541,9734]},{"content":"You also will not be notified if a device is updated or removed.","pos":[9735,9799]},{"content":"Another potential downside to be aware of is that this method will hold back any results until the entire enumeration is completed.","pos":[9800,9931]},{"content":"For this reason, you should not use this method when you are interested in <bpt id=\"p1\">**</bpt>AssociationEndpoint<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>AssociationEndpointContainer<ept id=\"p2\">**</ept>, or <bpt id=\"p3\">**</bpt>AssociationEndpointService<ept id=\"p3\">**</ept> objects since they are found over a network or wireless protocol.","pos":[9932,10165]},{"content":"This can take up to 30 seconds to complete.","pos":[10166,10209]},{"content":"In that scenario, you should use a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcher<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept> object to enumerate through the possible devices.","pos":[10210,10372]},{"content":"To enumerate through a snapshot of devices, use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>FindAllAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx)</ept> method.","pos":[10374,10571]},{"content":"This method waits until the entire enumeration process is complete and returns all the results as one <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformationCollection<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformationcollection.aspx)</ept> object.","pos":[10572,10831]},{"content":"This method is also overloaded to provide you with several options for filtering your results and limiting them to the devices that you are interested in.","pos":[10832,10986]},{"content":"You can do this by providing a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceClass<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225381)</ept> or passing in a device selector.","pos":[10987,11126]},{"content":"The device selector is an AQS string that specifies the devices you want to enumerate.","pos":[11127,11213]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Build a device selector<ept id=\"p1\">](build-a-device-selector.md)</ept>.","pos":[11214,11294]},{"content":"In addition to limiting the results, you can also specify the properties that you want to retrieve for the devices.","pos":[11296,11411]},{"content":"If you do, the specified properties will be available in the property bag for each of the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> objects returned in the collection.","pos":[11412,11619]},{"content":"It is important to note that not all properties are available for all device kinds.","pos":[11620,11703]},{"content":"To see what properties are available for which device kinds, see <bpt id=\"p1\">[</bpt>Device information properties<ept id=\"p1\">](device-information-properties.md)</ept>.","pos":[11704,11835]},{"content":"Enumerate and watch devices","pos":[11840,11867]},{"content":"A more powerful and flexible method of enumerating devices is creating a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcher<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept>.","pos":[11870,12021]},{"content":"This option provides the most flexibility when you are enumerating devices.","pos":[12022,12097]},{"content":"It allows you to enumerate devices that are currently present, and also receive notifications when devices that match your device selector are added, removed, or properties change.","pos":[12098,12278]},{"content":"When you create a <bpt id=\"p1\">**</bpt>DeviceWatcher<ept id=\"p1\">**</ept>, you provide a device selector.","pos":[12279,12346]},{"content":"For more information about device selectors, see <bpt id=\"p1\">[</bpt>Build a device selector<ept id=\"p1\">](build-a-device-selector.md)</ept>.","pos":[12347,12450]},{"content":"After creating the watcher, you will receive the following notifications for any device that matches your provided criteria.","pos":[12451,12575]},{"content":"Add notification when a new device is added.","pos":[12581,12625]},{"content":"Update notification when a property you are interested in is changed.","pos":[12630,12699]},{"content":"Remove notification when a device is no longer available or no longer matches your filter.","pos":[12704,12794]},{"content":"In most cases where you are using a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcher<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept>, you are maintaining a list of devices and adding to it, removing items from it, or updating items as your watcher receives updates from the devices that you are watching.","pos":[12796,13081]},{"content":"When you receive an update notification, the updated information will be available as a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformationUpdate<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393update)</ept> object.","pos":[13082,13271]},{"content":"In order to update your list of devices, first find the appropriate <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> that changed.","pos":[13272,13435]},{"content":"Then call the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Update<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.update)</ept> method for that object, providing the <bpt id=\"p3\">**</bpt>DeviceInformationUpdate<ept id=\"p3\">**</ept> object.","pos":[13436,13638]},{"content":"This is a convenience function that will automatically update your <bpt id=\"p1\">**</bpt>DeviceInformation<ept id=\"p1\">**</ept> object.","pos":[13639,13735]},{"pos":[13737,14125],"content":"Since a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcher<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept> sends notifications as devices arrive and when they change, you should use this method of enumerating devices when you are interested in <bpt id=\"p3\">**</bpt>AssociationEndpoint<ept id=\"p3\">**</ept>, <bpt id=\"p4\">**</bpt>AssociationEndpointContainer<ept id=\"p4\">**</ept>, or <bpt id=\"p5\">**</bpt>AssociationEndpointService<ept id=\"p5\">**</ept> objects since they are enumerated over networking or wireless protocols."},{"content":"To create a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcher<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept>, use one of the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>CreateWatcher<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.createwatcher.aspx)</ept> methods.","pos":[14127,14381]},{"content":"These methods are overloaded to enable you to specify the devices that you are interested in.","pos":[14382,14475]},{"content":"You can do this by providing a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceClass<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225381)</ept> or passing in a device selector.","pos":[14476,14615]},{"content":"The device selector is an AQS string that specifies the devices you want to enumerate.","pos":[14616,14702]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Build a device selector<ept id=\"p1\">](build-a-device-selector.md)</ept>.","pos":[14703,14783]},{"content":"You can also specify the properties that you want to retrieve for the devices and are interested in.","pos":[14784,14884]},{"content":"If you do, the specified properties will be available in the property bag for each of the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> objects returned in the collection.","pos":[14885,15092]},{"content":"It is important to note that not all properties are available for all device kinds.","pos":[15093,15176]},{"content":"To see what properties are available for which device kinds, see <bpt id=\"p1\">[</bpt>Device information properties<ept id=\"p1\">](device-information-properties.md)</ept>","pos":[15177,15307]},{"content":"Watch devices as a background task","pos":[15312,15346]},{"content":"Watching devices as a background task is very similar to creating a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcher<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept> as described above.","pos":[15349,15514]},{"content":"In fact, you will still need to create a normal <bpt id=\"p1\">**</bpt>DeviceWatcher<ept id=\"p1\">**</ept> object first as described in the previous section.","pos":[15515,15631]},{"content":"Once you create it, you call <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetBackgroundTrigger<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.devicewatcher.enumerationcompleted.aspx)</ept> instead of <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>DeviceWatcher.Start<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicewatcher.start)</ept>.","pos":[15632,15945]},{"content":"When you call <bpt id=\"p1\">**</bpt>GetBackgroundTrigger<ept id=\"p1\">**</ept>, you must specify which of the notifications you are interested in: add, remove, or update.","pos":[15946,16076]},{"content":"You cannot request update or remove without requesting add as well.","pos":[16077,16144]},{"content":"Once you register the trigger, the <bpt id=\"p1\">**</bpt>DeviceWatcher<ept id=\"p1\">**</ept> will start running immediately in the background.","pos":[16145,16247]},{"content":"From this point forward, whenever it receives a new notification for your application that matches your criteria, the background task will trigger and it will provide you the latest changes since it last triggered your application.","pos":[16248,16479]},{"content":"<bpt id=\"p1\">**</bpt>Important<ept id=\"p1\">**</ept>  The first time that a <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>DeviceWatcherTrigger<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/Dn913838)</ept> triggers your application will be when the watcher reaches the <bpt id=\"p4\">**</bpt>EnumerationCompleted<ept id=\"p4\">**</ept> state.","pos":[16481,16697]},{"content":"This means it will contain all of the initial results.","pos":[16698,16752]},{"content":"Any future times it triggers your application, it will only contain the add, update, and remove notifications that have occurred since the last trigger.","pos":[16753,16905]},{"content":"This is slightly different from a foreground <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcher<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept> object because the initial results do not come in one at a time and are only delivered in a bundle after the <bpt id=\"p3\">**</bpt>EnumerationCompleted<ept id=\"p3\">**</ept> is reached.","pos":[16906,17174]},{"content":"Some wireless protocols behave differently if they are scanning in the background versus the foreground, or they may not support scanning in the background at all.","pos":[17179,17342]},{"content":"There are three possibilities with relation to background scanning.","pos":[17343,17410]},{"content":"The following table lists the possibilities and the effects this may have on your application.","pos":[17411,17505]},{"content":"For example, Bluetooth and Wi-Fi Direct do not support background scans, so by extension, they do not support a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcherTrigger<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn913838)</ept>.","pos":[17506,17703]},{"content":"Behavior","pos":[17707,17715]},{"content":"Impact","pos":[17751,17757]},{"content":"Same behavior in background","pos":[18075,18102]},{"content":"None","pos":[18119,18123]},{"content":"Only passive scans possible in background","pos":[18259,18300]},{"content":"Device may take longer to discover while waiting for a passive scan to occur.","pos":[18303,18380]},{"content":"Background scans not supported","pos":[18443,18473]},{"pos":[18487,18642],"content":"No devices will be detectable by the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcherTrigger<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn913838)</ept>, and no updates will be reported."},{"content":"If your <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcherTrigger<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn913838)</ept> includes a protocol that does not support scanning in as a background task, your trigger will still work.","pos":[18649,18847]},{"content":"However, you will not be able to get any updates or results over that protocol.","pos":[18848,18927]},{"content":"The updates for other protocols or devices will still be detected normally.","pos":[18928,19003]},{"content":"Using DeviceInformationKind","pos":[19008,19035]},{"content":"In most scenarios, you will not need to worry about the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformationKind<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393kind)</ept> of a <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>DeviceInformation<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> object.","pos":[19038,19278]},{"content":"This is because the device selector returned by the device API you're using will often guarantee you are getting the correct kinds of device objects to use with their API.","pos":[19279,19450]},{"content":"However, in some scenarios you will want to get the <bpt id=\"p1\">**</bpt>DeviceInformation<ept id=\"p1\">**</ept> for devices, but there is not a corresponding device API to provide a device selector.","pos":[19451,19611]},{"content":"In these cases you will need to build your own selector.","pos":[19612,19668]},{"content":"For example, Web Services on Devices does not have a dedicated API, but you can discover those devices and get information about them using the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.Devices.Enumeration<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225459)</ept> APIs and then use them using the socket APIs.","pos":[19669,19950]},{"content":"If you are building your own device selector to enumerate through device objects, <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformationKind<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393kind)</ept> will be important for you to understand.","pos":[19952,20164]},{"content":"All of the possible kinds, as well as how they relate to one another, are described on the reference page for <bpt id=\"p1\">**</bpt>DeviceInformationKind<ept id=\"p1\">**</ept>.","pos":[20165,20301]},{"content":"One of the most common uses of <bpt id=\"p1\">**</bpt>DeviceInformationKind<ept id=\"p1\">**</ept> is to specify what kind of devices you are searching for when submitting a query in conjunction with a device selector.","pos":[20302,20478]},{"content":"By doing this, it makes sure that you only enumerate over devices that match the provided <bpt id=\"p1\">**</bpt>DeviceInformationKind<ept id=\"p1\">**</ept>.","pos":[20479,20595]},{"content":"For example, you could find a <bpt id=\"p1\">**</bpt>DeviceInterface<ept id=\"p1\">**</ept> object and then run a query to get the information for the parent <bpt id=\"p2\">**</bpt>Device<ept id=\"p2\">**</ept> object.","pos":[20596,20730]},{"content":"That parent object may contain additional information.","pos":[20731,20785]},{"content":"It is important to note that the properties available in the property bag for a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> object will vary depending on the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>DeviceInformationKind<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/BR225393kind)</ept> of the device.","pos":[20787,21087]},{"content":"Certain properties are only available with certain kinds.","pos":[21088,21145]},{"content":"For more information about which properties are available for which kinds, see <bpt id=\"p1\">[</bpt>Device information properties<ept id=\"p1\">](device-information-properties.md)</ept>.","pos":[21146,21291]},{"content":"Hence, in the above example, searching for the parent <bpt id=\"p1\">**</bpt>Device<ept id=\"p1\">**</ept> will give you access to more information that was not available from the <bpt id=\"p2\">**</bpt>DeviceInterface<ept id=\"p2\">**</ept> device object.","pos":[21292,21464]},{"content":"Because of this, when you create your AQS filter strings, it is important to ensure that the requested properties are available for the <bpt id=\"p1\">**</bpt>DeviceInformationKind<ept id=\"p1\">**</ept> objects you are enumerating.","pos":[21465,21655]},{"content":"For more information about building a filter, see <bpt id=\"p1\">[</bpt>Build a device selector<ept id=\"p1\">](build-a-device-selector.md)</ept>.","pos":[21656,21760]},{"content":"When enumerating <bpt id=\"p1\">**</bpt>AssociationEndpoint<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>AssociationEndpointContainer<ept id=\"p2\">**</ept>, or <bpt id=\"p3\">**</bpt>AssociationEndpointService<ept id=\"p3\">**</ept> objects, you are enumerating over a wireless or network protocol.","pos":[21762,21937]},{"content":"In these situations, we recommend that you don't use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>FindAllAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx)</ept> and instead use <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>CreateWatcher<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.createwatcher.aspx)</ept>.","pos":[21938,22285]},{"content":"This is because searching over a network often results in search operations that won't timeout for 10 or more seconds before generating <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>EnumerationCompleted<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.devicewatcher.enumerationcompleted.aspx)</ept>.","pos":[22286,22572]},{"content":"<bpt id=\"p1\">**</bpt>FindAllAsync<ept id=\"p1\">**</ept> doesn't complete its operation until <bpt id=\"p2\">**</bpt>EnumerationCompleted<ept id=\"p2\">**</ept> is triggered.","pos":[22573,22665]},{"content":"If you are using a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceWatcher<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225446)</ept>, you'll get results closer to real time regardless of when <bpt id=\"p3\">**</bpt>EnumerationCompleted<ept id=\"p3\">**</ept> is called.","pos":[22666,22857]},{"content":"Save a device for later use","pos":[22862,22889]},{"content":"Any <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DeviceInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225393)</ept> object is uniquely identified by a combination of two pieces of information: <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>DeviceInformation.Id<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.id)</ept> and <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>DeviceInformation.Kind<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.kind.aspx)</ept>.","pos":[22892,23324]},{"content":"If you keep these two pieces of information, you can recreate the <bpt id=\"p1\">**</bpt>DeviceInformation<ept id=\"p1\">**</ept> object after it lost by supplying this information to <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>CreateFromIdAsync<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.createfromidasync_907774063)</ept>.","pos":[23325,23614]},{"content":"If you do this, you can save user preferences for a device that integrates with your app.","pos":[23615,23704]},{"content":"Sample","pos":[23709,23715]},{"pos":[23718,23920],"content":"To download a sample showing how to use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.Devices.Enumeration<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225459)</ept> APIs, click <bpt id=\"p3\">[</bpt>here<ept id=\"p3\">](http://go.microsoft.com/fwlink/?LinkID=620536)</ept>."}],"content":"---\nauthor: DBirtolo\nms.assetid: 4311D293-94F0-4BBD-A22D-F007382B4DB8\ntitle: Enumerate devices\ndescription: The enumeration namespace enables you to find devices that are internally connected to the system, externally connected, or detectable over wireless or networking protocols.\n---\n# Enumerate devices\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n\n** Important APIs **\n\n-   [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459)\n\nThe enumeration namespace enables you to find devices that are internally connected to the system, externally connected, or detectable over wireless or networking protocols. The APIs that you use to enumerate through the possible devices are the [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) namespace. Some reasons for using these APIs include the following.\n\n-   Finding a device to connect to with your application.\n-   Getting information about devices connected to or discoverable by the system.\n-   Have an app receive notifications when devices are added, connect, disconnect, change online status, or change other properties.\n-   Have an app receive background triggers when devices connect, disconnect, change online status, or change other properties.\n\nThese APIs can enumerate devices over any of the following protocols and buses, provided the individual device and the system running the app support that technology. This is not an exhaustive list, and other protocols may be supported by a specific device.\n\n-   Physically connected buses. This includes PCI and USB. For example, anything that you can see in the **Device Manager**.\n-   [UPnP](https://msdn.microsoft.com/library/windows/desktop/Aa382303)\n-   Digital Living Network Alliance (DLNA)\n-   [**Discovery and Launch (DIAL)**](https://msdn.microsoft.com/library/windows/apps/Dn946818)\n-   [**DNS Service Discovery (DNS-SD)**](https://msdn.microsoft.com/library/windows/apps/Dn895183)\n-   [Web Services on Devices (WSD)](https://msdn.microsoft.com/library/windows/desktop/Aa826001)\n-   [Bluetooth](https://msdn.microsoft.com/library/windows/desktop/Aa362932)\n-   [**Wi-Fi Direct**](https://msdn.microsoft.com/library/windows/apps/Dn297687)\n-   WiGig\n-   [**Point of Service**](https://msdn.microsoft.com/library/windows/apps/Dn298071)\n\nIn many cases, you will not need to worry about using the enumeration APIs. This is because many APIs that use devices will automatically select the appropriate default device or provide a more streamlined enumeration API. For example, [**MediaElement**](https://msdn.microsoft.com/library/windows/apps/BR242926) will automatically use the default audio renderer device. As long as your app can use the default device, there is no need to use the enumeration APIs in your application. The enumeration APIs provide a general and flexible way for you to discover and connect to available devices. This topic provides information about enumerating devices and describes the four common ways to enumerate devices.\n\n-   Using the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) UI\n-   Enumerating a snapshot of devices currently discoverable by the system\n-   Enumerating devices currently discoverable and watch for changes\n-   Enumerating devices currently discoverable and watch for changes in a background task\n\n## DeviceInformation objects\n\n\nWorking with the enumeration APIs, you will frequently need to use [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) objects. These objects contain most of the available information about the device. The following table explains some of the **DeviceInformation** properties you will be interested in. For a complete list, see the reference page for **DeviceInformation**.\n\n| Property                         | Comments                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n|----------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **DeviceInformation.Id**         | This is the unique identifier of the device and is provided as a string variable. In most cases, this is an opaque value you will just pass from one method to another to indicate the specific device you are interested in. You can also use this property and the **DeviceInformation.Kind** property after closing down your app and reopening it. This will ensure that you can recover and reuse the same [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object. |\n| **DeviceInformation.Kind**       | This indicates the kind of device object represented by the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object. This is not the device category or type of device. A single device can be represented by several different **DeviceInformation** objects of different kinds. The possible values for this property are listed in [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/BR225393kind) as well as how they relate to one another.                           |\n| **DeviceInformation.Properties** | This property bag contains information that is requested for the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object. The most common properties are easily referenced as properties of the **DeviceInformation** object, such as with [**DeviceInformation.Name**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.name). For more information, see [Device information properties](device-information-properties.md).                                                                |\n\n \n\n## DevicePicker UI\n\n\nThe [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) is a control provided by Windows that creates a small UI that enables the user to select a device from a list. You can customize the **DevicePicker** window in a few ways.\n\n-   You can control the devices that are displayed in the UI by adding a [**SupportedDeviceSelectors**](https://msdn.microsoft.com/library/windows/apps/Dn930841filter_supporteddeviceselectors), a [**SupportedDeviceClasses**](https://msdn.microsoft.com/library/windows/apps/Dn930841filter_supporteddeviceclasses), or both to the [**DevicePicker.Filter**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.filter). In most cases, you only need to add one selector or class, but if you do need more than one you can add multiple. If you do add multiple selectors or classes, they are conjoined using an OR logic function.\n-   You can specify the properties you want to retrieve for the devices. You can do this by adding properties to [**DevicePicker.RequestedProperties**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.requestedproperties).\n-   You can alter the appearance of the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) using [**Appearance**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.appearance).\n-   You can specify the size and location of the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) when it is displayed.\n\nWhile the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) is displayed, the contents of the UI will be automatically updated if devices are added, removed, or updated.\n\n**Note**  You cannot specify the [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/BR225393kind) using the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841). If you want to have devices of a specific **DeviceInformationKind**, you will need to build a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) and provide your own UI.\n\n \n\nCasting media content and DIAL also each provide their own pickers if you want to use them. They are [**CastingDevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn972525) and [**DialDevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn946783), respectively.\n\n## Enumerate a snapshot of devices\n\n\nIn some scenarios, the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) will not be suitable for your needs and you need something more flexible. Perhaps you want to build your own UI or need to enumerate devices without displaying a UI to the user. In these situations, you could enumerate a snapshot of devices. This involves looking through the devices that are currently connected to or paired with the system. However, you need to be aware that this method only looks at a snapshot of devices that are available, so you will not be able to find devices that connect after you enumerate through the list. You also will not be notified if a device is updated or removed. Another potential downside to be aware of is that this method will hold back any results until the entire enumeration is completed. For this reason, you should not use this method when you are interested in **AssociationEndpoint**, **AssociationEndpointContainer**, or **AssociationEndpointService** objects since they are found over a network or wireless protocol. This can take up to 30 seconds to complete. In that scenario, you should use a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) object to enumerate through the possible devices.\n\nTo enumerate through a snapshot of devices, use the [**FindAllAsync**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx) method. This method waits until the entire enumeration process is complete and returns all the results as one [**DeviceInformationCollection**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformationcollection.aspx) object. This method is also overloaded to provide you with several options for filtering your results and limiting them to the devices that you are interested in. You can do this by providing a [**DeviceClass**](https://msdn.microsoft.com/library/windows/apps/BR225381) or passing in a device selector. The device selector is an AQS string that specifies the devices you want to enumerate. For more information, see [Build a device selector](build-a-device-selector.md).\n\nIn addition to limiting the results, you can also specify the properties that you want to retrieve for the devices. If you do, the specified properties will be available in the property bag for each of the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) objects returned in the collection. It is important to note that not all properties are available for all device kinds. To see what properties are available for which device kinds, see [Device information properties](device-information-properties.md).\n\n## Enumerate and watch devices\n\n\nA more powerful and flexible method of enumerating devices is creating a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446). This option provides the most flexibility when you are enumerating devices. It allows you to enumerate devices that are currently present, and also receive notifications when devices that match your device selector are added, removed, or properties change. When you create a **DeviceWatcher**, you provide a device selector. For more information about device selectors, see [Build a device selector](build-a-device-selector.md). After creating the watcher, you will receive the following notifications for any device that matches your provided criteria.\n\n-   Add notification when a new device is added.\n-   Update notification when a property you are interested in is changed.\n-   Remove notification when a device is no longer available or no longer matches your filter.\n\nIn most cases where you are using a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446), you are maintaining a list of devices and adding to it, removing items from it, or updating items as your watcher receives updates from the devices that you are watching. When you receive an update notification, the updated information will be available as a [**DeviceInformationUpdate**](https://msdn.microsoft.com/library/windows/apps/BR225393update) object. In order to update your list of devices, first find the appropriate [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) that changed. Then call the [**Update**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.update) method for that object, providing the **DeviceInformationUpdate** object. This is a convenience function that will automatically update your **DeviceInformation** object.\n\nSince a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) sends notifications as devices arrive and when they change, you should use this method of enumerating devices when you are interested in **AssociationEndpoint**, **AssociationEndpointContainer**, or **AssociationEndpointService** objects since they are enumerated over networking or wireless protocols.\n\nTo create a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446), use one of the [**CreateWatcher**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.createwatcher.aspx) methods. These methods are overloaded to enable you to specify the devices that you are interested in. You can do this by providing a [**DeviceClass**](https://msdn.microsoft.com/library/windows/apps/BR225381) or passing in a device selector. The device selector is an AQS string that specifies the devices you want to enumerate. For more information, see [Build a device selector](build-a-device-selector.md). You can also specify the properties that you want to retrieve for the devices and are interested in. If you do, the specified properties will be available in the property bag for each of the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) objects returned in the collection. It is important to note that not all properties are available for all device kinds. To see what properties are available for which device kinds, see [Device information properties](device-information-properties.md)\n\n## Watch devices as a background task\n\n\nWatching devices as a background task is very similar to creating a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) as described above. In fact, you will still need to create a normal **DeviceWatcher** object first as described in the previous section. Once you create it, you call [**GetBackgroundTrigger**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.devicewatcher.enumerationcompleted.aspx) instead of [**DeviceWatcher.Start**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicewatcher.start). When you call **GetBackgroundTrigger**, you must specify which of the notifications you are interested in: add, remove, or update. You cannot request update or remove without requesting add as well. Once you register the trigger, the **DeviceWatcher** will start running immediately in the background. From this point forward, whenever it receives a new notification for your application that matches your criteria, the background task will trigger and it will provide you the latest changes since it last triggered your application.\n\n**Important**  The first time that a [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838) triggers your application will be when the watcher reaches the **EnumerationCompleted** state. This means it will contain all of the initial results. Any future times it triggers your application, it will only contain the add, update, and remove notifications that have occurred since the last trigger. This is slightly different from a foreground [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) object because the initial results do not come in one at a time and are only delivered in a bundle after the **EnumerationCompleted** is reached.\n\n \n\nSome wireless protocols behave differently if they are scanning in the background versus the foreground, or they may not support scanning in the background at all. There are three possibilities with relation to background scanning. The following table lists the possibilities and the effects this may have on your application. For example, Bluetooth and Wi-Fi Direct do not support background scans, so by extension, they do not support a [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838).\n\n| Behavior                                  | Impact                                                                                                                                  |\n|-------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|\n| Same behavior in background               | None                                                                                                                                    |\n| Only passive scans possible in background | Device may take longer to discover while waiting for a passive scan to occur.                                                           |\n| Background scans not supported            | No devices will be detectable by the [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838), and no updates will be reported. |\n\n \n\nIf your [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838) includes a protocol that does not support scanning in as a background task, your trigger will still work. However, you will not be able to get any updates or results over that protocol. The updates for other protocols or devices will still be detected normally.\n\n## Using DeviceInformationKind\n\n\nIn most scenarios, you will not need to worry about the [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/BR225393kind) of a [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object. This is because the device selector returned by the device API you're using will often guarantee you are getting the correct kinds of device objects to use with their API. However, in some scenarios you will want to get the **DeviceInformation** for devices, but there is not a corresponding device API to provide a device selector. In these cases you will need to build your own selector. For example, Web Services on Devices does not have a dedicated API, but you can discover those devices and get information about them using the [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) APIs and then use them using the socket APIs.\n\nIf you are building your own device selector to enumerate through device objects, [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/BR225393kind) will be important for you to understand. All of the possible kinds, as well as how they relate to one another, are described on the reference page for **DeviceInformationKind**. One of the most common uses of **DeviceInformationKind** is to specify what kind of devices you are searching for when submitting a query in conjunction with a device selector. By doing this, it makes sure that you only enumerate over devices that match the provided **DeviceInformationKind**. For example, you could find a **DeviceInterface** object and then run a query to get the information for the parent **Device** object. That parent object may contain additional information.\n\nIt is important to note that the properties available in the property bag for a [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object will vary depending on the [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/BR225393kind) of the device. Certain properties are only available with certain kinds. For more information about which properties are available for which kinds, see [Device information properties](device-information-properties.md). Hence, in the above example, searching for the parent **Device** will give you access to more information that was not available from the **DeviceInterface** device object. Because of this, when you create your AQS filter strings, it is important to ensure that the requested properties are available for the **DeviceInformationKind** objects you are enumerating. For more information about building a filter, see [Build a device selector](build-a-device-selector.md).\n\nWhen enumerating **AssociationEndpoint**, **AssociationEndpointContainer**, or **AssociationEndpointService** objects, you are enumerating over a wireless or network protocol. In these situations, we recommend that you don't use [**FindAllAsync**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx) and instead use [**CreateWatcher**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.createwatcher.aspx). This is because searching over a network often results in search operations that won't timeout for 10 or more seconds before generating [**EnumerationCompleted**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.devicewatcher.enumerationcompleted.aspx). **FindAllAsync** doesn't complete its operation until **EnumerationCompleted** is triggered. If you are using a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446), you'll get results closer to real time regardless of when **EnumerationCompleted** is called.\n\n## Save a device for later use\n\n\nAny [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object is uniquely identified by a combination of two pieces of information: [**DeviceInformation.Id**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.id) and [**DeviceInformation.Kind**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.kind.aspx). If you keep these two pieces of information, you can recreate the **DeviceInformation** object after it lost by supplying this information to [**CreateFromIdAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.createfromidasync_907774063). If you do this, you can save user preferences for a device that integrates with your app.\n\n## Sample\n\n\nTo download a sample showing how to use the [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) APIs, click [here](http://go.microsoft.com/fwlink/?LinkID=620536).\n\n \n\n \n\n\n\n\n"}