{"nodes":[{"content":"Visual Layer","pos":[78,90]},{"content":"The Windows.UI.Composition API gives you access to the composition layer between the framework layer (XAML), and the graphics layer (DirectX).","pos":[104,246]},{"content":"Visual Layer","pos":[253,265]},{"content":"Updated for UWP apps on Windows 10.","pos":[270,305]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[306,398]},{"content":"In Windows 10, significant work was done to create a new unified compositor and rendering engine for all Windows applications, be it desktop or mobile.","pos":[403,554]},{"content":"A result of that work was the unified Composition WinRT API called Windows.UI.Composition that offers access to new lightweight Composition objects along with new Compositor driven Animations and Effects.","pos":[555,759]},{"content":"Windows.UI.Composition is a declarative, <bpt id=\"p1\">[</bpt>Retained-Mode<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/desktop/ff684178.aspx)</ept> API that can be called from any Universal Windows Platform (UWP) Application to create composition objects, animations and effects directly in an application.","pos":[761,1042]},{"content":"The API is a powerful supplement to existing frameworks such as XAML to give developers of UWP applications a familiar C# surface to add to their application.","pos":[1043,1201]},{"content":"These APIs can be used to create DX style framework-less applications.","pos":[1202,1272]},{"content":"A XAML developer can “drop down” to the composition layer in C# to do custom work in the composition layer using WinRT to create a “Composition Island” of objects in their XAML application rather than dropping all the way down to the graphics layer and using DirectX and C++ for any custom UI work.","pos":[1274,1572]},{"pos":[1790,1828],"content":"Composition Objects and The Compositor"},{"content":"Composition objects are created by the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Compositor<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706789)</ept> which acts as a factory for composition objects.","pos":[1830,1992]},{"content":"The compositor can create <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Visual<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706858)</ept> objects, which allow for the creation of a visual tree structure on which all other features and Composition objects in the API use and build on.","pos":[1993,2235]},{"pos":[2237,2424],"content":"The API allows developers to define and create one or many <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Visual<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706858)</ept> objects each representing a single node in a Visual tree."},{"content":"Visuals can be containers for other Visuals or can host content Visuals.","pos":[2426,2498]},{"content":"The API allows for ease of use by providing a clear set of <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Visual<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706858)</ept> objects for specific tasks that exist in a hierarchy:","pos":[2499,2682]},{"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Visual<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706858)</ept> – The base object.","pos":[2688,2777]},{"content":"The majority of the properties are here, and inherited by the other Visual objects.","pos":[2778,2861]},{"pos":[2866,3078],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ContainerVisual<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706810)</ept> – Derives from <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Visual<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Dn706858)</ept>, and adds the ability to insert child visuals."},{"pos":[3083,3324],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SpriteVisual<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt589433)</ept> – Derives from <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>ContainerVisual<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Dn706810)</ept>, and contains content in the form of images, effects, and swapchains."},{"pos":[3329,3512],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Compositor<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706789)</ept> – The object factory that manages the relationship between an application and the system compositor process."},{"content":"The compositor is also a factory for a number of other composition objects used to clip or transform visuals in the tree as well as a rich set of animations and effects.","pos":[3514,3683]},{"pos":[3787,3801],"content":"Effects System"},{"content":"Windows.UI.Composition supports real time effects that can be animated, customized and chained.","pos":[3803,3898]},{"content":"Effects include 2D affine transforms, arithmetic composites, blends, color source, composite, contrast, exposure, grayscale, gamma transfer, hue rotate, invert, saturate, sepia, temperature and tint.","pos":[3899,4098]},{"pos":[4100,4185],"content":"For more information, see the <bpt id=\"p1\">[</bpt>Composition Effects<ept id=\"p1\">](composition-effects.md)</ept> overview."},{"pos":[4295,4311],"content":"Animation System"},{"content":"Windows.UI.Composition contains an expressive, framework agnostic animation system that allows you to set up two types of Animations: key frame animations and expression animations.","pos":[4313,4494]},{"content":"These are used to move visual objects, drive a transform or a clip, or animate an effect.","pos":[4495,4584]},{"content":"By running directly in the compositor process, this ensures smoothness and scale, letting you run large numbers of concurrent, unique animations.","pos":[4585,4730]},{"pos":[4732,4822],"content":"For more information, see the <bpt id=\"p1\">[</bpt>Composition animations<ept id=\"p1\">](composition-animation.md)</ept> overview."},{"pos":[4941,4960],"content":"XAML Interoperation"},{"pos":[4962,5273],"content":"In addition to creating a visual tree from scratch, the Composition API can interoperate with an existing XAML UI using the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ElementCompositionPreview<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt608976)</ept> class in <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Windows.UI.Xaml.Hosting<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Hh701908)</ept>."},{"content":"Note","pos":[5278,5282]},{"content":"This article is for Windows 10 developers writing Universal Windows Platform (UWP) apps.","pos":[5287,5375]},{"content":"If you’re developing for Windows 8.x or Windows Phone 8.x, see the <bpt id=\"p1\">[</bpt>archived documentation<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>.","pos":[5376,5517]},{"pos":[5645,5666],"content":"Additional Resources:"},{"pos":[5672,5817],"content":"Read Kenny Kerr's MSDN Article on this API: <bpt id=\"p1\">[</bpt>Graphics and Animation - Windows Composition Turns 10<ept id=\"p1\">](https://msdn.microsoft.com/magazine/mt590968)</ept>"},{"pos":[5822,5912],"content":"Composition samples in the <bpt id=\"p1\">[</bpt>Composition GitHub<ept id=\"p1\">](https://github.com/Microsoft/composition)</ept>."},{"pos":[5917,6022],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Full reference documentation for the API<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706878)</ept>."},{"pos":[6027,6135],"content":"Known issues: <bpt id=\"p1\">[</bpt>Known Issues<ept id=\"p1\">](https://social.msdn.microsoft.com/Forums/en-US/home?forum=Win10SDKToolsIssues)</ept>."}],"content":"---\nauthor: scottmill\nms.assetid: a2751e22-6842-073a-daec-425fb981bafe\ntitle: Visual Layer\ndescription: The Windows.UI.Composition API gives you access to the composition layer between the framework layer (XAML), and the graphics layer (DirectX).\n---\n# Visual Layer\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nIn Windows 10, significant work was done to create a new unified compositor and rendering engine for all Windows applications, be it desktop or mobile. A result of that work was the unified Composition WinRT API called Windows.UI.Composition that offers access to new lightweight Composition objects along with new Compositor driven Animations and Effects.\n\nWindows.UI.Composition is a declarative, [Retained-Mode](https://msdn.microsoft.com/library/windows/desktop/ff684178.aspx) API that can be called from any Universal Windows Platform (UWP) Application to create composition objects, animations and effects directly in an application. The API is a powerful supplement to existing frameworks such as XAML to give developers of UWP applications a familiar C# surface to add to their application. These APIs can be used to create DX style framework-less applications.\n\nA XAML developer can “drop down” to the composition layer in C# to do custom work in the composition layer using WinRT to create a “Composition Island” of objects in their XAML application rather than dropping all the way down to the graphics layer and using DirectX and C++ for any custom UI work.\n\n![](images/layers-win-ui-composition.png)\n## <span id=\"Composition_Objects_and_The_Compositor\"></span><span id=\"composition_objects_and_the_compositor\"></span><span id=\"COMPOSITION_OBJECTS_AND_THE_COMPOSITOR\"></span>Composition Objects and The Compositor\n\nComposition objects are created by the [**Compositor**](https://msdn.microsoft.com/library/windows/apps/Dn706789) which acts as a factory for composition objects. The compositor can create [**Visual**](https://msdn.microsoft.com/library/windows/apps/Dn706858) objects, which allow for the creation of a visual tree structure on which all other features and Composition objects in the API use and build on.\n\nThe API allows developers to define and create one or many [**Visual**](https://msdn.microsoft.com/library/windows/apps/Dn706858) objects each representing a single node in a Visual tree.\n\nVisuals can be containers for other Visuals or can host content Visuals. The API allows for ease of use by providing a clear set of [**Visual**](https://msdn.microsoft.com/library/windows/apps/Dn706858) objects for specific tasks that exist in a hierarchy:\n\n-   [**Visual**](https://msdn.microsoft.com/library/windows/apps/Dn706858) – The base object. The majority of the properties are here, and inherited by the other Visual objects.\n-   [**ContainerVisual**](https://msdn.microsoft.com/library/windows/apps/Dn706810) – Derives from [**Visual**](https://msdn.microsoft.com/library/windows/apps/Dn706858), and adds the ability to insert child visuals.\n-   [**SpriteVisual**](https://msdn.microsoft.com/library/windows/apps/Mt589433) – Derives from [**ContainerVisual**](https://msdn.microsoft.com/library/windows/apps/Dn706810), and contains content in the form of images, effects, and swapchains.\n-   [**Compositor**](https://msdn.microsoft.com/library/windows/apps/Dn706789) – The object factory that manages the relationship between an application and the system compositor process.\n\nThe compositor is also a factory for a number of other composition objects used to clip or transform visuals in the tree as well as a rich set of animations and effects.\n\n## <span id=\"Effects_System\"></span><span id=\"effects_system\"></span><span id=\"EFFECTS_SYSTEM\"></span>Effects System\n\nWindows.UI.Composition supports real time effects that can be animated, customized and chained. Effects include 2D affine transforms, arithmetic composites, blends, color source, composite, contrast, exposure, grayscale, gamma transfer, hue rotate, invert, saturate, sepia, temperature and tint.\n\nFor more information, see the [Composition Effects](composition-effects.md) overview.\n\n## <span id=\"Animation_System\"></span><span id=\"animation_system\"></span><span id=\"ANIMATION_SYSTEM\"></span>Animation System\n\nWindows.UI.Composition contains an expressive, framework agnostic animation system that allows you to set up two types of Animations: key frame animations and expression animations. These are used to move visual objects, drive a transform or a clip, or animate an effect. By running directly in the compositor process, this ensures smoothness and scale, letting you run large numbers of concurrent, unique animations.\n\nFor more information, see the [Composition animations](composition-animation.md) overview.\n\n## <span id=\"XAML_Interoperation\"></span><span id=\"xaml_interoperation\"></span><span id=\"XAML_INTEROPERATION\"></span>XAML Interoperation\n\nIn addition to creating a visual tree from scratch, the Composition API can interoperate with an existing XAML UI using the [**ElementCompositionPreview**](https://msdn.microsoft.com/library/windows/apps/Mt608976) class in [**Windows.UI.Xaml.Hosting**](https://msdn.microsoft.com/library/windows/apps/Hh701908).\n\n\n**Note**  \nThis article is for Windows 10 developers writing Universal Windows Platform (UWP) apps. If you’re developing for Windows 8.x or Windows Phone 8.x, see the [archived documentation](http://go.microsoft.com/fwlink/p/?linkid=619132).\n\n \n\n## <span id=\"Additional_Resources_\"></span><span id=\"additional_resources_\"></span><span id=\"ADDITIONAL_RESOURCES_\"></span>Additional Resources:\n\n-   Read Kenny Kerr's MSDN Article on this API: [Graphics and Animation - Windows Composition Turns 10](https://msdn.microsoft.com/magazine/mt590968)\n-   Composition samples in the [Composition GitHub](https://github.com/Microsoft/composition).\n-   [**Full reference documentation for the API**](https://msdn.microsoft.com/library/windows/apps/Dn706878).\n-   Known issues: [Known Issues](https://social.msdn.microsoft.com/Forums/en-US/home?forum=Win10SDKToolsIssues).\n\n \n\n \n\n\n\n\n"}