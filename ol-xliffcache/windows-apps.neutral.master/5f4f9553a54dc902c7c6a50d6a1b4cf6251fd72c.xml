{"nodes":[{"content":"Learn how to tailor the UI of your app when showing or hiding the touch keyboard.","pos":[47,128]},{"content":"Respond to the presence of the touch keyboard","pos":[136,181]},{"content":"Respond to the presence of the touch keyboard","pos":[312,357]},{"content":"Learn how to tailor the UI of your app when showing or hiding the touch keyboard.","pos":[359,440]},{"content":"Important APIs","pos":[445,459]},{"content":"AutomationPeer","pos":[470,484]},{"content":"InputPane","pos":[553,562]},{"content":"the touch keyboard in default layout mode","pos":[629,670]},{"pos":[713,766],"content":"The<ph id=\"ph1\">\\\\</ph> touch<ph id=\"ph2\">\\\\</ph> keyboard<ph id=\"ph3\">\\\\</ph> in<ph id=\"ph4\">\\\\</ph> default<ph id=\"ph5\">\\\\</ph> layout<ph id=\"ph6\">\\\\</ph> mode"},{"content":"The touch keyboard enables text entry for devices that support touch.","pos":[774,843]},{"content":"Universal Windows Platform (UWP) text input controls invoke the touch keyboard by default when a user taps on an editable input field.","pos":[844,978]},{"content":"The touch keyboard typically remains visible while the user navigates between controls in a form, but this behavior can vary based on the other control types within the form.","pos":[979,1153]},{"content":"To support corresponding touch keyboard behavior in a custom text input control that does not derive from a standard text input control, you must use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>AutomationPeer<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br209185)</ept> class to expose your controls to Microsoft UI Automation and implement the correct UI Automation control patterns.","pos":[1155,1502]},{"content":"See <bpt id=\"p1\">[</bpt>Keyboard accessibility<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt244347)</ept> and <bpt id=\"p2\">[</bpt>Custom automation peers<ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/mt297667)</ept>.","pos":[1503,1678]},{"content":"Once this support has been added to your custom control, you can respond appropriately to the presence of the touch keyboard.","pos":[1680,1805]},{"content":"Prerequisites:","pos":[1809,1823]},{"pos":[1829,1900],"content":"This topic builds on <bpt id=\"p1\">[</bpt>Keyboard interactions<ept id=\"p1\">](keyboard-interactions.md)</ept>."},{"content":"You should have a basic understanding of standard keyboard interactions, handling keyboard input and events, and UI Automation.","pos":[1902,2029]},{"content":"If you're new to developing Universal Windows Platform (UWP) apps, have a look through these topics to get familiar with the technologies discussed here.","pos":[2031,2184]},{"content":"Create your first app","pos":[2191,2212]},{"pos":[2276,2393],"content":"Learn about events with <bpt id=\"p1\">[</bpt>Events and routed events overview<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt185584)</ept>"},{"content":"User experience guidelines:","pos":[2397,2424]},{"pos":[2430,2611],"content":"For helpful tips about designing a useful and engaging app optimized for keyboard input, see <bpt id=\"p1\">[</bpt>Keyboard design guidelines<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh972345)</ept> ."},{"pos":[2763,2793],"content":"Touch keyboard and a custom UI"},{"content":"Here are a few basic recommendations for custom text input controls.","pos":[2796,2864]},{"content":"Display the touch keyboard throughout the entire interaction with your form.","pos":[2870,2946]},{"content":"Ensure that your custom controls have the appropriate UI Automation <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>AutomationControlType<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br209182)</ept> for the keyboard to persist when focus moves from a text input field while in the context of text entry.","pos":[2952,3210]},{"content":"For example, if you have a menu that's opened in the middle of a text-entry scenario, and you want the keyboard to persist, the menu must have the <bpt id=\"p1\">**</bpt>AutomationControlType<ept id=\"p1\">**</ept> of Menu.","pos":[3211,3392]},{"content":"Don't manipulate UI Automation properties to control the touch keyboard.","pos":[3398,3470]},{"content":"Other accessibility tools rely on the accuracy of UI Automation properties.","pos":[3471,3546]},{"content":"Ensure that users can always see the input field that they're interacting with.","pos":[3552,3631]},{"content":"Because the touch keyboard occludes a large portion of the screen, the UWP ensures that the input field with focus scrolls into view as a user navigates through the controls on the form, including controls that are not currently in view.","pos":[3637,3874]},{"pos":[3880,4237],"content":"When customizing your UI, provide similar behavior on the appearance of the touch keyboard by handling the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Showing<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242262)</ept> and <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Hiding<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br242260)</ept> events exposed by the <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>InputPane<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/br242255)</ept> object."},{"content":"a form with and without the touch keyboard showing","pos":[4245,4295]},{"content":"In some cases, there are UI elements that should stay on the screen the entire time.","pos":[4334,4418]},{"content":"Design the UI so that the form controls are contained in a panning region and the important UI elements are static.","pos":[4419,4534]},{"content":"For example:","pos":[4535,4547]},{"content":"a form that contains areas that should always stay in view","pos":[4555,4613]},{"pos":[4719,4757],"content":"Handling the Showing and Hiding events"},{"pos":[4760,4990],"content":"Here's an example of attaching event handlers for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>showing<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242262)</ept> and <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>hiding<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br242260)</ept> events of the touch keyboard."},{"pos":[6590,6606],"content":"Related articles"},{"content":"Keyboard interactions","pos":[6611,6632]},{"content":"Keyboard accessibility","pos":[6663,6685]},{"content":"Custom automation peers","pos":[6748,6771]},{"content":"Archive samples","pos":[6835,6850]},{"content":"Input: Touch keyboard sample","pos":[6856,6884]},{"content":"Responding to the appearance of the on-screen keyboard sample","pos":[6938,6999]},{"content":"XAML text editing sample","pos":[7053,7077]},{"content":"XAML accessibility sample","pos":[7131,7156]}],"content":"---\nauthor: Karl-Bridge-Microsoft\nDescription: Learn how to tailor the UI of your app when showing or hiding the touch keyboard.\ntitle: Respond to the presence of the touch keyboard\nms.assetid: 70C6130E-23A2-4F9D-88E7-7060062DA988\nlabel: Respond to the presence of the touch keyboard\ntemplate: detail.hbs\n---\n\n# Respond to the presence of the touch keyboard\n\nLearn how to tailor the UI of your app when showing or hiding the touch keyboard.\n\n\n**Important APIs**\n\n-   [**AutomationPeer**](https://msdn.microsoft.com/library/windows/apps/br209185)\n-   [**InputPane**](https://msdn.microsoft.com/library/windows/apps/br242255)\n\n\n\n![the touch keyboard in default layout mode](images/touchkeyboard-standard.png)\n\n<sup>The\\\\ touch\\\\ keyboard\\\\ in\\\\ default\\\\ layout\\\\ mode</sup>\n\nThe touch keyboard enables text entry for devices that support touch. Universal Windows Platform (UWP) text input controls invoke the touch keyboard by default when a user taps on an editable input field. The touch keyboard typically remains visible while the user navigates between controls in a form, but this behavior can vary based on the other control types within the form.\n\nTo support corresponding touch keyboard behavior in a custom text input control that does not derive from a standard text input control, you must use the [**AutomationPeer**](https://msdn.microsoft.com/library/windows/apps/br209185) class to expose your controls to Microsoft UI Automation and implement the correct UI Automation control patterns. See [Keyboard accessibility](https://msdn.microsoft.com/library/windows/apps/mt244347) and [Custom automation peers](https://msdn.microsoft.com/library/windows/apps/mt297667).\n\nOnce this support has been added to your custom control, you can respond appropriately to the presence of the touch keyboard.\n\n**Prerequisites:  **\n\nThis topic builds on [Keyboard interactions](keyboard-interactions.md).\n\nYou should have a basic understanding of standard keyboard interactions, handling keyboard input and events, and UI Automation.\n\nIf you're new to developing Universal Windows Platform (UWP) apps, have a look through these topics to get familiar with the technologies discussed here.\n\n-   [Create your first app](https://msdn.microsoft.com/library/windows/apps/bg124288)\n-   Learn about events with [Events and routed events overview](https://msdn.microsoft.com/library/windows/apps/mt185584)\n\n**User experience guidelines:  **\n\nFor helpful tips about designing a useful and engaging app optimized for keyboard input, see [Keyboard design guidelines](https://msdn.microsoft.com/library/windows/apps/hh972345) .\n\n## <span id=\"Touch_keyboard_and_a_custom_UI\"></span><span id=\"touch_keyboard_and_a_custom_ui\"></span><span id=\"TOUCH_KEYBOARD_AND_A_CUSTOM_UI\"></span>Touch keyboard and a custom UI\n\n\nHere are a few basic recommendations for custom text input controls.\n\n-   Display the touch keyboard throughout the entire interaction with your form.\n\n-   Ensure that your custom controls have the appropriate UI Automation [**AutomationControlType**](https://msdn.microsoft.com/library/windows/apps/br209182) for the keyboard to persist when focus moves from a text input field while in the context of text entry. For example, if you have a menu that's opened in the middle of a text-entry scenario, and you want the keyboard to persist, the menu must have the **AutomationControlType** of Menu.\n\n-   Don't manipulate UI Automation properties to control the touch keyboard. Other accessibility tools rely on the accuracy of UI Automation properties.\n\n-   Ensure that users can always see the input field that they're interacting with.\n\n    Because the touch keyboard occludes a large portion of the screen, the UWP ensures that the input field with focus scrolls into view as a user navigates through the controls on the form, including controls that are not currently in view.\n\n    When customizing your UI, provide similar behavior on the appearance of the touch keyboard by handling the [**Showing**](https://msdn.microsoft.com/library/windows/apps/br242262) and [**Hiding**](https://msdn.microsoft.com/library/windows/apps/br242260) events exposed by the [**InputPane**](https://msdn.microsoft.com/library/windows/apps/br242255) object.\n\n    ![a form with and without the touch keyboard showing](images/touch-keyboard-pan1.png)\n\n    In some cases, there are UI elements that should stay on the screen the entire time. Design the UI so that the form controls are contained in a panning region and the important UI elements are static. For example:\n\n    ![a form that contains areas that should always stay in view](images/touch-keyboard-pan2.png)\n\n## <span id=\"handling_events\"></span><span id=\"HANDLING_EVENTS\"></span>Handling the Showing and Hiding events\n\n\nHere's an example of attaching event handlers for the [**showing**](https://msdn.microsoft.com/library/windows/apps/br242262) and [**hiding**](https://msdn.microsoft.com/library/windows/apps/br242260) events of the touch keyboard.\n\n```CSharp\npublic class MyApplication\n{\n    public MyApplication()\n    {\n        // Grab the input pane for the main application window and attach\n        // touch keyboard event handlers.\n        Windows.Foundation.Application.InputPane.GetForCurrentView().Showing  \n            += new EventHandler(_OnInputPaneShowing);\n        Windows.Foundation.Application.InputPane.GetForCurrentView().Hiding \n            += new EventHandler(_OnInputPaneHiding);\n    }\n\n    private void _OnInputPaneShowing(object sender, IInputPaneVisibilityEventArgs eventArgs)\n    {\n        // If the size of this window is going to be too small, the app uses \n        // the Showing event to begin some element removal animations.\n        if (eventArgs.OccludedRect.Top < 400)\n        {\n            _StartElementRemovalAnimations();\n\n            // Don&#39;t use framework scroll- or visibility-related \n            // animations that might conflict with the app&#39;s logic.\n            eventArgs.EnsuredFocusedElementInView = true; \n        }\n    }\n\n    private void _OnInputPaneHiding(object sender, IInputPaneVisibilityEventArgs eventArgs)\n    {\n        if (_ResetToDefaultElements())\n        {\n            eventArgs.EnsuredFocusedElementInView = true; \n        }\n    }\n\n    private void _StartElementRemovalAnimations()\n    {\n        // This function starts the process of removing elements \n        // and starting the animation.\n    }\n\n    private void _ResetToDefaultElements()\n    {\n        // This function resets the window&#39;s elements to their default state.\n    }\n}\n```\n\n## <span id=\"related_topics\"></span>Related articles\n\n* [Keyboard interactions](keyboard-interactions.md)\n* [Keyboard accessibility](https://msdn.microsoft.com/library/windows/apps/mt244347)\n* [Custom automation peers](https://msdn.microsoft.com/library/windows/apps/mt297667)\n\n\n**Archive samples**\n* [Input: Touch keyboard sample](http://go.microsoft.com/fwlink/p/?linkid=246019)\n* [Responding to the appearance of the on-screen keyboard sample](http://go.microsoft.com/fwlink/p/?linkid=231633)\n* [XAML text editing sample](http://go.microsoft.com/fwlink/p/?LinkID=251417)\n* [XAML accessibility sample](http://go.microsoft.com/fwlink/p/?linkid=238570)\n \n\n \n\n\n\n\n"}