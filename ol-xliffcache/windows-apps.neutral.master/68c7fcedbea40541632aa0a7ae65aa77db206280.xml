{"nodes":[{"content":"Save a file with a picker","pos":[78,103]},{"content":"Use FileSavePicker to let users specify the name and location where they want your app to save a file.","pos":[117,219]},{"content":"Save a file with a picker","pos":[227,252]},{"content":"Updated for UWP apps on Windows 10.","pos":[258,293]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[294,386]},{"content":"Important APIs","pos":[394,408]},{"content":"FileSavePicker","pos":[419,433]},{"content":"StorageFile","pos":[502,513]},{"pos":[576,742],"content":"Use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>FileSavePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207871)</ept> to let users specify the name and location where they want your app to save a file."},{"pos":[746,839],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  Also see the <bpt id=\"p2\">[</bpt>File picker sample<ept id=\"p2\">](http://go.microsoft.com/fwlink/p/?linkid=619994)</ept>."},{"content":"Prerequisites","pos":[847,860]},{"content":"Understand async programming for Universal Windows Platform (UWP) apps","pos":[869,939]},{"content":"You can learn how to write asynchronous apps in C# or Visual Basic, see <bpt id=\"p1\">[</bpt>Call asynchronous APIs in C# or Visual Basic<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt187337)</ept>.","pos":[947,1124]},{"content":"To learn how to write asynchronous apps in C++, see <bpt id=\"p1\">[</bpt>Asynchronous programming in C++<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt187334)</ept>.","pos":[1125,1269]},{"content":"Access permissions to the location","pos":[1277,1311]},{"pos":[1319,1377],"content":"See <bpt id=\"p1\">[</bpt>File access permissions<ept id=\"p1\">](file-access-permissions.md)</ept>."},{"content":"FileSavePicker: step-by-step","pos":[1382,1410]},{"content":"Use a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>FileSavePicker<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207871)</ept> so that your users can specify the name, type, and location of a file to save.","pos":[1413,1576]},{"content":"Create, customize, and show a file picker object, and then save data via the returned <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>StorageFile<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227171)</ept> object that represents the file picked.","pos":[1577,1778]},{"content":"Create and customize the FileSavePicker","pos":[1786,1825]},{"content":"Set properties on the file picker object that are relevant to your users and your app.","pos":[2265,2351]},{"content":"For guidelines to help you decide how to customize the file picker, see <bpt id=\"p1\">[</bpt>Guidelines and checklist for file pickers<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh465182)</ept>.","pos":[2352,2526]},{"pos":[2528,2818],"content":"This example sets three properties: <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SuggestedStartLocation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207880)</ept>, <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>FileTypeChoices<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br207875)</ept> and <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>SuggestedFileName<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/br207878)</ept>."},{"pos":[2822,3037],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>FileSavePicker<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/br207871)</ept> objects display the file picker using the <bpt id=\"p4\">[</bpt><bpt id=\"p5\">**</bpt>PickerViewMode.List<ept id=\"p5\">**</ept><ept id=\"p4\">](https://msdn.microsoft.com/library/windows/apps/br207891)</ept>."},{"content":"Because our user is saving a document or text file, the sample sets <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SuggestedStartLocation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207880)</ept> to the app's local folder by using <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>LocalFolder<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br241621)</ept>.","pos":[3047,3313]},{"content":"Set <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SuggestedStartLocation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207854)</ept> to a location appropriate for the type of file being saved, for example Music, Pictures, Videos, or Documents.","pos":[3314,3515]},{"content":"From the start location, the user can navigate to other locations.","pos":[3516,3582]},{"content":"Because we want to make sure our app can open the file after it is saved, we use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>FileTypeChoices<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207875)</ept> to specify file types that the sample supports (Microsoft Word documents and text files).","pos":[3587,3837]},{"content":"Make sure all the file types that you specify are supported by your app.","pos":[3838,3910]},{"content":"Users will be able to save their file as any of the file types you specify.","pos":[3911,3986]},{"content":"They can also change the file type by selecting another of the file types that you specified.","pos":[3987,4080]},{"content":"The first file type choice in the list will be selected by default: to control that, set the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DefaultFileExtension<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207873)</ept> property.","pos":[4081,4268]},{"pos":[4272,4462],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  The file picker also uses the currently selected file type to filter which files it displays, so that only file types that match the selected files types are displayed to the user."},{"content":"To save the user some typing, the example sets a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SuggestedFileName<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207878)</ept>.","pos":[4466,4597]},{"content":"Make your suggested file name relevant to the file being saved.","pos":[4598,4661]},{"content":"For example, like Word, you can suggest the existing file name if there is one, or the first line of a document if the user is saving a file that does not yet have a name.","pos":[4662,4833]},{"content":"Show the FileSavePicker and save to the picked file","pos":[4841,4892]},{"content":"Display the file picker by calling <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>PickSaveFileAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br207876)</ept>.","pos":[4900,5017]},{"content":"After the user specifies the name, file type, and location, and confirms to save the file, <bpt id=\"p1\">**</bpt>PickSaveFileAsync<ept id=\"p1\">**</ept> returns a <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>StorageFile<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/br227171)</ept> object that represents the saved file.","pos":[5018,5255]},{"content":"You can capture and process this file now that you have read and write access to it.","pos":[5256,5340]},{"content":"The example checks that the file is valid and writes its own file name into it.","pos":[6453,6532]},{"content":"Also see <bpt id=\"p1\">[</bpt>Creating, writing, and reading a file<ept id=\"p1\">](quickstart-reading-and-writing-files.md)</ept>.","pos":[6533,6623]},{"content":"<bpt id=\"p1\">**</bpt>Tip<ept id=\"p1\">**</ept>  You should always check the saved file to make sure it is valid before you perform any other processing.","pos":[6625,6738]},{"content":"Then, you can save content to the file as appropriate for your app, and provide appropriate behavior if the picked file is not valid.","pos":[6739,6872]}],"content":"---\nauthor: TylerMSFT\nms.assetid: 8BDDE64A-77D2-4F9D-A1A0-E4C634BCD890\ntitle: Save a file with a picker\ndescription: Use FileSavePicker to let users specify the name and location where they want your app to save a file.\n---\n\n# Save a file with a picker\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n\n**Important APIs**\n\n-   [**FileSavePicker**](https://msdn.microsoft.com/library/windows/apps/br207871)\n-   [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171)\n\nUse [**FileSavePicker**](https://msdn.microsoft.com/library/windows/apps/br207871) to let users specify the name and location where they want your app to save a file.\n\n> **Note**  Also see the [File picker sample](http://go.microsoft.com/fwlink/p/?linkid=619994).\n\n \n\n## Prerequisites\n\n\n-   **Understand async programming for Universal Windows Platform (UWP) apps**\n\n    You can learn how to write asynchronous apps in C# or Visual Basic, see [Call asynchronous APIs in C# or Visual Basic](https://msdn.microsoft.com/library/windows/apps/mt187337). To learn how to write asynchronous apps in C++, see [Asynchronous programming in C++](https://msdn.microsoft.com/library/windows/apps/mt187334).\n\n-   **Access permissions to the location**\n\n    See [File access permissions](file-access-permissions.md).\n\n## FileSavePicker: step-by-step\n\n\nUse a [**FileSavePicker**](https://msdn.microsoft.com/library/windows/apps/br207871) so that your users can specify the name, type, and location of a file to save. Create, customize, and show a file picker object, and then save data via the returned [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171) object that represents the file picked.\n\n1.  **Create and customize the FileSavePicker**\n\n```cs\nvar savePicker = new Windows.Storage.Pickers.FileSavePicker();\nsavePicker.SuggestedStartLocation = \n    Windows.Storage.Pickers.PickerLocationId.DocumentsLibrary;\n// Dropdown of file types the user can save the file as\nsavePicker.FileTypeChoices.Add(\"Plain Text\", new List<string>() { \".txt\" });\n// Default file name if the user does not type one in or select a file to replace\nsavePicker.SuggestedFileName = \"New Document\";\n```\n\nSet properties on the file picker object that are relevant to your users and your app. For guidelines to help you decide how to customize the file picker, see [Guidelines and checklist for file pickers](https://msdn.microsoft.com/library/windows/apps/hh465182).\n\nThis example sets three properties: [**SuggestedStartLocation**](https://msdn.microsoft.com/library/windows/apps/br207880), [**FileTypeChoices**](https://msdn.microsoft.com/library/windows/apps/br207875) and [**SuggestedFileName**](https://msdn.microsoft.com/library/windows/apps/br207878).\n\n> **Note**  [**FileSavePicker**](https://msdn.microsoft.com/library/windows/apps/br207871) objects display the file picker using the [**PickerViewMode.List**](https://msdn.microsoft.com/library/windows/apps/br207891).\n\n     \n- Because our user is saving a document or text file, the sample sets [**SuggestedStartLocation**](https://msdn.microsoft.com/library/windows/apps/br207880) to the app's local folder by using [**LocalFolder**](https://msdn.microsoft.com/library/windows/apps/br241621). Set [**SuggestedStartLocation**](https://msdn.microsoft.com/library/windows/apps/br207854) to a location appropriate for the type of file being saved, for example Music, Pictures, Videos, or Documents. From the start location, the user can navigate to other locations.\n \n- Because we want to make sure our app can open the file after it is saved, we use [**FileTypeChoices**](https://msdn.microsoft.com/library/windows/apps/br207875) to specify file types that the sample supports (Microsoft Word documents and text files). Make sure all the file types that you specify are supported by your app. Users will be able to save their file as any of the file types you specify. They can also change the file type by selecting another of the file types that you specified. The first file type choice in the list will be selected by default: to control that, set the [**DefaultFileExtension**](https://msdn.microsoft.com/library/windows/apps/br207873) property.\n\n> **Note**  The file picker also uses the currently selected file type to filter which files it displays, so that only file types that match the selected files types are displayed to the user.\n\n- To save the user some typing, the example sets a [**SuggestedFileName**](https://msdn.microsoft.com/library/windows/apps/br207878). Make your suggested file name relevant to the file being saved. For example, like Word, you can suggest the existing file name if there is one, or the first line of a document if the user is saving a file that does not yet have a name.\n\n2.  **Show the FileSavePicker and save to the picked file**\n\n    Display the file picker by calling [**PickSaveFileAsync**](https://msdn.microsoft.com/library/windows/apps/br207876). After the user specifies the name, file type, and location, and confirms to save the file, **PickSaveFileAsync** returns a [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/br227171) object that represents the saved file. You can capture and process this file now that you have read and write access to it.\n\n```cs\nWindows.Storage.StorageFile file = await savePicker.PickSaveFileAsync();\n    if (file != null)\n    {\n        // Prevent updates to the remote version of the file until\n        // we finish making changes and call CompleteUpdatesAsync.\n        Windows.Storage.CachedFileManager.DeferUpdates(file);\n        // write to file\n        await Windows.Storage.FileIO.WriteTextAsync(file, file.Name);\n        // Let Windows know that we're finished changing the file so\n        // the other app can update the remote version of the file.\n        // Completing updates may require Windows to ask for user input.\n        Windows.Storage.Provider.FileUpdateStatus status = \n            await Windows.Storage.CachedFileManager.CompleteUpdatesAsync(file);\n        if (status == Windows.Storage.Provider.FileUpdateStatus.Complete)\n        {\n            this.textBlock.Text = \"File \" + file.Name + \" was saved.\";\n        }\n        else\n        {\n            this.textBlock.Text = \"File \" + file.Name + \" couldn't be saved.\";\n        }\n    }\n    else\n    {\n        this.textBlock.Text = \"Operation cancelled.\";\n    }\n```\n\nThe example checks that the file is valid and writes its own file name into it. Also see [Creating, writing, and reading a file](quickstart-reading-and-writing-files.md).\n\n**Tip**  You should always check the saved file to make sure it is valid before you perform any other processing. Then, you can save content to the file as appropriate for your app, and provide appropriate behavior if the picked file is not valid.\n\n     \n\n \n\n \n\n\n\n\n"}