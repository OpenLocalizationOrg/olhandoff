{"nodes":[{"content":"Use this method to renew a Windows Store key.","pos":[86,131]},{"content":"Renew a Windows Store ID key","pos":[139,167]},{"content":"Renew a Windows Store ID key","pos":[175,203]},{"content":"Updated for UWP apps on Windows 10.","pos":[209,244]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[245,337]},{"content":"Use this method to renew a Windows Store key.","pos":[342,387]},{"content":"When you generate a Windows Store ID key by calling the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetCustomerCollectionsIdAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt608674)</ept> or <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>GetCustomerPurchaseIdAsync<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/mt608675)</ept> method, the key is valid for 90 days.","pos":[388,669]},{"content":"After the key expires, you can use the expired key to renegotiate a new key by using this method.","pos":[670,767]},{"content":"Prerequisites","pos":[772,785]},{"content":"To use this method, you will need:","pos":[788,822]},{"pos":[828,925],"content":"An Azure AD access token that was created with the <ph id=\"ph1\">`https://onestore.microsoft.com`</ph> audience URI."},{"pos":[930,1225],"content":"An expired Windows Store ID key that was generated by calling the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetCustomerCollectionsIdAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt608674)</ept> or <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>GetCustomerPurchaseIdAsync<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/mt608675)</ept> method from client-side code in your app."},{"pos":[1227,1337],"content":"For more information, see <bpt id=\"p1\">[</bpt>View and grant products from a service<ept id=\"p1\">](view-and-grant-products-from-a-service.md)</ept>."},{"content":"Request","pos":[1342,1349]},{"content":"Request syntax","pos":[1356,1370]},{"content":"Key type","pos":[1374,1382]},{"content":"Method","pos":[1388,1394]},{"content":"Request URI","pos":[1397,1408]},{"content":"Collections","pos":[1542,1553]},{"content":"POST","pos":[1556,1560]},{"content":"Purchase","pos":[1628,1636]},{"content":"POST","pos":[1642,1646]},{"content":"Request header","pos":[1725,1739]},{"content":"Header","pos":[1743,1749]},{"content":"Type","pos":[1760,1764]},{"content":"Description","pos":[1769,1780]},{"content":"Host","pos":[2007,2011]},{"content":"string","pos":[2024,2030]},{"pos":[2033,2124],"content":"Must be set to the value <bpt id=\"p1\">**</bpt>collections.mp.microsoft.com<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>purchase.mp.microsoft.com<ept id=\"p2\">**</ept>."},{"content":"Content-Length","pos":[2139,2153]},{"content":"number","pos":[2156,2162]},{"content":"The length of the request body.","pos":[2165,2196]},{"content":"Content-Type","pos":[2271,2283]},{"content":"string","pos":[2288,2294]},{"content":"Specifies the request and response type.","pos":[2297,2337]},{"content":"Currently, the only supported value is <bpt id=\"p1\">**</bpt>application/json<ept id=\"p1\">**</ept>.","pos":[2338,2398]},{"content":"Request body","pos":[2414,2426]},{"content":"Parameter","pos":[2430,2439]},{"content":"Type","pos":[2446,2450]},{"content":"Description","pos":[2455,2466]},{"content":"Required","pos":[2491,2499]},{"content":"serviceTicket","pos":[2578,2591]},{"content":"string","pos":[2594,2600]},{"content":"The Azure AD access token.","pos":[2603,2629]},{"content":"Yes","pos":[2639,2642]},{"content":"key","pos":[2652,2655]},{"content":"string","pos":[2668,2674]},{"content":"The expired Windows Store ID key.","pos":[2677,2710]},{"content":"No","pos":[2713,2715]},{"content":"Request example","pos":[2737,2752]},{"content":"Response","pos":[3021,3029]},{"content":"Response body","pos":[3036,3049]},{"content":"Parameter","pos":[3053,3062]},{"content":"Type","pos":[3065,3069]},{"content":"Description","pos":[3074,3085]},{"content":"Required","pos":[3195,3203]},{"content":"key","pos":[3363,3366]},{"content":"string","pos":[3375,3381]},{"content":"The refreshed Windows Store key that can be used in future calls to the Windows Store collections API or purchase API.","pos":[3384,3502]},{"content":"No","pos":[3505,3507]},{"content":"Response example","pos":[3529,3545]},{"content":"Error codes","pos":[3855,3866]},{"content":"Code","pos":[3871,3875]},{"content":"Error","pos":[3878,3883]},{"content":"Inner error code","pos":[3893,3909]},{"content":"Description","pos":[3922,3933]},{"content":"401","pos":[4345,4348]},{"content":"Unauthorized","pos":[4352,4364]},{"content":"AuthenticationTokenInvalid","pos":[4367,4393]},{"content":"The Azure AD access token is invalid.","pos":[4396,4433]},{"content":"In some cases the details of the ServiceError will contain more information, such as when the token is expired or the <bpt id=\"p1\">*</bpt>appid<ept id=\"p1\">*</ept> claim is missing.","pos":[4434,4577]},{"content":"401","pos":[4582,4585]},{"content":"Unauthorized","pos":[4589,4601]},{"content":"InconsistentClientId","pos":[4604,4624]},{"pos":[4633,4746],"content":"The <bpt id=\"p1\">*</bpt>clientId<ept id=\"p1\">*</ept> claim in the Windows Store ID key and the <bpt id=\"p2\">*</bpt>appid<ept id=\"p2\">*</ept> claim in the Azure AD access token do not match."},{"content":"Related topics","pos":[4829,4843]},{"content":"View and grant products from a service","pos":[4849,4887]},{"content":"Query for products","pos":[4935,4953]},{"content":"Report consumable products as fulfilled","pos":[4981,5020]},{"content":"Grant free products","pos":[5069,5088]}],"content":"---\nauthor: mcleanbyron\nms.assetid: 3569C505-8D8C-4D85-B383-4839F13B2466\ndescription: Use this method to renew a Windows Store key.\ntitle: Renew a Windows Store ID key\n---\n\n# Renew a Windows Store ID key\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nUse this method to renew a Windows Store key. When you generate a Windows Store ID key by calling the [**GetCustomerCollectionsIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608674) or [**GetCustomerPurchaseIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608675) method, the key is valid for 90 days. After the key expires, you can use the expired key to renegotiate a new key by using this method.\n\n## Prerequisites\n\n\nTo use this method, you will need:\n\n-   An Azure AD access token that was created with the `https://onestore.microsoft.com` audience URI.\n-   An expired Windows Store ID key that was generated by calling the [**GetCustomerCollectionsIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608674) or [**GetCustomerPurchaseIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608675) method from client-side code in your app.\n\nFor more information, see [View and grant products from a service](view-and-grant-products-from-a-service.md).\n\n## Request\n\n\n### Request syntax\n\n| Key type    | Method | Request URI                                              |\n|-------------|--------|----------------------------------------------------------|\n| Collections | POST   | `https://collections.mp.microsoft.com/v6.0/b2b/keys/renew` |\n| Purchase    | POST   | `https://purchase.mp.microsoft.com/v6.0/b2b/keys/renew`    |\n\n<br/> \n\n### Request header\n\n| Header         | Type   | Description                                                                                           |\n|----------------|--------|-------------------------------------------------------------------------------------------------------|\n| Host           | string | Must be set to the value **collections.mp.microsoft.com** or **purchase.mp.microsoft.com**.           |\n| Content-Length | number | The length of the request body.                                                                       |\n| Content-Type   | string | Specifies the request and response type. Currently, the only supported value is **application/json**. |\n\n<br/> \n\n### Request body\n\n| Parameter     | Type   | Description                       | Required |\n|---------------|--------|-----------------------------------|----------|\n| serviceTicket | string | The Azure AD access token.        | Yes      |\n| key           | string | The expired Windows Store ID key. | No       |\n\n<br/> \n\n### Request example\n\n```syntax\nPOST https://collections.mp.microsoft.com/v6.0/b2b/keys/renew HTTP/1.1\nContent-Length: 2774\nContent-Type: application/json\nHost: collections.mp.microsoft.com\n\n{\n    \"serviceTicket\": \"eyJ0eXAiOiJKV1QiLCJhb….\",\n    \"Key\": \"eyJ0eXAiOiJKV1QiLCJhbG….\"\n}\n```\n\n## Response\n\n\n### Response body\n\n| Parameter | Type   | Description                                                                                                            | Required |\n|-----------|--------|------------------------------------------------------------------------------------------------------------------------|----------|\n| key       | string | The refreshed Windows Store key that can be used in future calls to the Windows Store collections API or purchase API. | No       |\n\n<br/> \n\n### Response example\n\n```syntax\nHTTP/1.1 200 OK\nContent-Length: 1646\nContent-Type: application/json\nMS-CorrelationId: bfebe80c-ff89-4c4b-8897-67b45b916e47\nMS-RequestId: 1b5fa630-d672-4971-b2c0-3713f4ea6c85\nMS-CV: xu2HW6SrSkyfHyFh.0.0\nMS-ServerId: 030011428\nDate: Tue, 13 Sep 2015 07:31:12 GMT\n\n{\n    \"key\":\"eyJ0eXAi…..\"\n}\n```\n\n## Error codes\n\n\n| Code | Error        | Inner error code           | Description                                                                                                                                                                           |\n|------|--------------|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| 401  | Unauthorized | AuthenticationTokenInvalid | The Azure AD access token is invalid. In some cases the details of the ServiceError will contain more information, such as when the token is expired or the *appid* claim is missing. |\n| 401  | Unauthorized | InconsistentClientId       | The *clientId* claim in the Windows Store ID key and the *appid* claim in the Azure AD access token do not match.                                                                     |\n\n<br/> \n\n## Related topics\n\n\n* [View and grant products from a service](view-and-grant-products-from-a-service.md)\n* [Query for products](query-for-products.md)\n* [Report consumable products as fulfilled](report-consumable-products-as-fulfilled.md)\n* [Grant free products](grant-free-products.md)\n"}