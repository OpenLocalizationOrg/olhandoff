{"nodes":[{"content":"The media player has customizable XAML transport controls to manage control of audio and video content.","pos":[32,135]},{"content":"Create custom media transport controls","pos":[143,181]},{"content":"Create custom transport controls","pos":[304,336]},{"content":"MediaElement has customizable XAML transport controls to manage control of audio and video content within a Universal Windows Platform (UWP) app.","pos":[338,483]},{"content":"Here, we demonstrate how to customize the MediaTransportControls template.","pos":[484,558]},{"content":"We’ll show you how to work with the overflow menu, add a custom button, modify the slider, and change colors.","pos":[559,668]},{"content":"Before starting, you should be familiar with the MediaElement and the MediaTransportControls classes.","pos":[670,771]},{"content":"For more info, see the MediaElement control guide.","pos":[772,822]},{"content":"<bpt id=\"p1\">**</bpt>Tip<ept id=\"p1\">**</ept><ph id=\"ph1\">&amp;nbsp;&amp;nbsp;</ph>The examples in this topic are based on the <bpt id=\"p2\">[</bpt>Media Transport Controls sample<ept id=\"p2\">](http://go.microsoft.com/fwlink/p/?LinkId=620023)</ept>.","pos":[827,973]},{"content":"You can download the sample to view and run the completed code.","pos":[974,1037]},{"pos":[1096,1110],"content":"Important APIs"},{"content":"MediaElement","pos":[1126,1138]},{"content":"MediaElement.AreTransportControlsEnabled","pos":[1207,1247]},{"content":"MediaTransportControls","pos":[1383,1405]},{"content":"When should you customize the template?","pos":[1471,1510]},{"content":"<bpt id=\"p1\">**</bpt>MediaElement<ept id=\"p1\">**</ept> has built-in transport controls that are designed to work well without modification in most video and audio playback apps.","pos":[1512,1651]},{"content":"They’re provided by the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>MediaTransportControls<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediatransportcontrols.aspx)</ept> class and include buttons to play, stop, and navigate media, adjust volume, toggle full screen, cast to a second device, enable captions, switch audio tracks, and adjust the playback rate.","pos":[1652,2000]},{"content":"MediaTransportControls has properties that let you control whether each button is shown and enabled.","pos":[2001,2101]},{"content":"You can also set the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>IsCompact<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediatransportcontrols.iscompact.aspx)</ept> property to specify whether the controls are shown in one row or two.","pos":[2102,2325]},{"content":"However, there may be scenarios where you need to further customize the look of the control or change its behavior.","pos":[2327,2442]},{"content":"Here are some examples:","pos":[2443,2466]},{"content":"Change the icons, slider behavior, and colors.","pos":[2469,2515]},{"content":"Move less commonly used command buttons into an overflow menu.","pos":[2518,2580]},{"content":"Change the order in which commands drop out when the control is resized.","pos":[2583,2655]},{"content":"Provide a command button that’s not in the default set.","pos":[2658,2713]},{"content":"You can customize the appearance of the control by modifying the default template.","pos":[2715,2797]},{"content":"To modify the control's behavior or add new commands, you can create a custom control that's derived from MediaTransportControls.","pos":[2798,2927]},{"content":"<bpt id=\"p1\">**</bpt>Tip<ept id=\"p1\">**</ept><ph id=\"ph1\">&amp;nbsp;&amp;nbsp;</ph>Customizable control templates are a powerful feature of the XAML platform, but there are also consequences that you should take into consideration.","pos":[2930,3097]},{"content":"When you customize a template, it becomes a static part of your app and therefore will not receive any platform updates that are made to the template by Microsoft.","pos":[3098,3261]},{"content":"If template updates are made by Microsoft, you should take the new template and re-modify it in order to get the benefits of the updated template.","pos":[3262,3408]},{"content":"Template structure","pos":[3413,3431]},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ControlTemplate<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.controltemplate.aspx)</ept> is part of the default style.","pos":[3433,3588]},{"content":"The transport control's default style is shown in the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>MediaTransportControls<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediatransportcontrols.aspx)</ept> class reference page.","pos":[3589,3800]},{"content":"You can copy this default style into your project to modify it.","pos":[3801,3864]},{"content":"The ControlTemplate is divided into sections similar to other XAML control templates.","pos":[3865,3950]},{"pos":[3953,4162],"content":"The first section of the template contains the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Style<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.style.aspx)</ept> definitions for the various components of the MediaTransportControls."},{"content":"The second section defines the various visual states that are used by the MediaTransportControls.","pos":[4165,4262]},{"pos":[4265,4505],"content":"The third section contains the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Grid<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.grid.aspx)</ept> that holds that various MediaTransportControls elements together and defines how the components are laid out."},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept><ph id=\"ph1\">&amp;nbsp;&amp;nbsp;</ph>For more info about modifying templates, see <bpt id=\"p2\">[</bpt>Control templates<ept id=\"p2\">]()</ept>.","pos":[4509,4596]},{"content":"You can use a text editor or similar editors in your IDE to open the XAML files in <ph id=\"ph1\">\\(</ph><bpt id=\"p1\">*</bpt>Program Files<ept id=\"p1\">*</ept>)\\Windows Kits\\10\\DesignTime\\CommonConfiguration\\Neutral\\UAP<ph id=\"ph2\">\\\\</ph>(<bpt id=\"p2\">*</bpt>SDK version<ept id=\"p2\">*</ept>)\\Generic.","pos":[4597,4783]},{"content":"The default style and template for each control is defined in the <bpt id=\"p1\">**</bpt>generic.xaml<ept id=\"p1\">**</ept> file.","pos":[4784,4872]},{"content":"You can find the MediaTransportControls template in generic.xaml by searching for \"MediaTransportControls\".","pos":[4873,4980]},{"content":"In the following sections, you learn how to customize several of the main elements of the transport controls:","pos":[4982,5091]},{"pos":[5095,5269],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Slider<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.slider.aspx)</ept>: allows a user to scrub through their media and also displays progress"},{"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CommandBar<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.commandbar.aspx)</ept>: contains all of the buttons.","pos":[5272,5413]},{"content":"For more info, see the Anatomy section of the MediaTransportControls reference topic.","pos":[5414,5499]},{"content":"Customize the transport controls","pos":[5505,5537]},{"content":"If you want to modify only the appearance of the MediaTransportControls, you can create a copy of the default control style and template, and modify that.","pos":[5539,5693]},{"content":"However, if you also want to add to or modify the functionality of the control, you need to create a new class that derives from MediaTransportControls.","pos":[5694,5846]},{"content":"Re-template the control","pos":[5852,5875]},{"content":"To customize the MediaTransportControls default style and template","pos":[5879,5945]},{"content":"Copy the default style from MediaTransportControls styles and templates into a ResourceDictionary in your project.","pos":[5951,6065]},{"content":"Give the Style an x:Key value to identify it, like this.","pos":[6069,6125]},{"content":"Add a MediaElement with MediaTransportControls to your UI.","pos":[6259,6317]},{"content":"Set the Style property of the MediaTransportControls element to your custom Style resource, as shown here.","pos":[6321,6427]},{"pos":[6667,6770],"content":"For more info about modifying styles and templates, see <bpt id=\"p1\">[</bpt>Styling controls<ept id=\"p1\">]()</ept> and <bpt id=\"p2\">[</bpt>Control templates<ept id=\"p2\">]()</ept>."},{"content":"Create a derived control","pos":[6776,6800]},{"content":"To add to or modify the functionality of the transport controls, you must create a new class that's derived from MediaTransportControls.","pos":[6802,6938]},{"content":"A derived class called <ph id=\"ph1\">`CustomMediaTransportControls`</ph> is shown in the <bpt id=\"p1\">[</bpt>Media Transport Controls sample<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=620023)</ept> and the remaining examples on this page.","pos":[6939,7132]},{"content":"To create a new class derived from MediaTransportControls","pos":[7136,7193]},{"content":"Add a new class file to your project.","pos":[7199,7236]},{"content":"In Visual Studio, select Project &gt; Add Class.","pos":[7243,7288]},{"content":"The Add New Item dialog opens.","pos":[7289,7319]},{"content":"In the Add New Item dialog, enter a name for the class file, then click Add.","pos":[7326,7402]},{"content":"(In the Media Transport Controls sample, the class is named <ph id=\"ph1\">`CustomMediaTransportControls`</ph>.)","pos":[7403,7495]},{"content":"Modify the class code to derive from the MediaTransportControls class.","pos":[7499,7569]},{"content":"Copy the default style for <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>MediaTransportControls<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediatransportcontrols.aspx)</ept> into a <bpt id=\"p3\">[</bpt>ResourceDictionary<ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.resourcedictionary.aspx)</ept> in your project.","pos":[7665,7966]},{"content":"This is the style and template you modify.","pos":[7967,8009]},{"content":"(In the Media Transport Controls sample, a new folder called \"Themes\" is created, and a ResourceDictionary file called generic.xaml is added to it.)","pos":[8010,8158]},{"content":"Change the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>TargetType<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.style.targettype.aspx)</ept> of the style to the new custom control type.","pos":[8162,8326]},{"content":"(In the sample, the TargetType is changed to <ph id=\"ph1\">`local:CustomMediaTransportControls`</ph>.)","pos":[8327,8410]},{"content":"Set the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DefaultStyleKey<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.control.defaultstylekey.aspx)</ept> of your custom class.","pos":[8536,8695]},{"content":"This tells your custom class to use a Style with a TargetType of <ph id=\"ph1\">`local:CustomMediaTransportControls`</ph>.","pos":[8696,8798]},{"content":"Add a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>MediaElement<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediaelement.aspx)</ept> to your XAML markup and add the custom transport controls to it.","pos":[9017,9203]},{"content":"One thing to note is that the APIs to hide, show, disable, and enable the default buttons still work with a customized template.","pos":[9204,9332]},{"content":"You can now modify the control style and template to update the look of your custom control, and the control code to update its behavior.","pos":[10148,10285]},{"content":"Working with the overflow menu","pos":[10291,10321]},{"content":"You can move MediaTransportControls command buttons into an overflow menu, so that less commonly used commands are hidden until the user needs them.","pos":[10323,10471]},{"content":"In the MediaTransportControls template, the command buttons are contained in a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CommandBar<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.commandbar.aspx)</ept> element.","pos":[10473,10672]},{"content":"The command bar has the concept of primary and secondary commands.","pos":[10673,10739]},{"content":"The primary commands are the buttons that appear in the control by default and are always visible (unless you disable or hide the button).","pos":[10740,10878]},{"content":"The secondary commands are shown in an overflow menu that appears when a user clicks the ellipsis (…) button.","pos":[10879,10988]},{"content":"For more info, see the <bpt id=\"p1\">[</bpt>App bars and command bars<ept id=\"p1\">](app-bars.md)</ept> article.","pos":[10989,11061]},{"content":"To move an element from the command bar primary commands to the overflow menu, you need to edit the XAML control template.","pos":[11063,11185]},{"content":"To move a command to the overflow menu:","pos":[11190,11229]},{"pos":[11235,11320],"content":"In the control template, find the CommandBar element named <ph id=\"ph1\">`MediaControlsCommandBar`</ph>."},{"content":"Add a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SecondaryCommands<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.commandbar.secondarycommands.aspx)</ept> section to the XAML for the CommandBar.","pos":[11324,11506]},{"content":"Put it after the closing tag for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>PrimaryCommands<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.commandbar.primarycommands.aspx)</ept>.","pos":[11507,11677]},{"content":"To populate the menu with commands, cut and paste the XAML for the desired <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>AppBarButton<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.appbarbutton.aspx)</ept> objects from the PrimaryCommands to the SecondaryCommands.","pos":[12289,12538]},{"content":"In this example, we move the <ph id=\"ph1\">`PlaybackRateButton`</ph> to the overflow menu.","pos":[12539,12610]},{"content":"Add a label to the button and remove the styling information, as shown here.","pos":[12615,12691]},{"content":"Because the overflow menu is comprised of text buttons, you must add a text label to the button and also remove the style that sets the height and width of the button.","pos":[12692,12859]},{"content":"Otherwise, it won't appear correctly in the overflow menu.","pos":[12860,12918]},{"content":"<bpt id=\"p1\">**</bpt>Important<ept id=\"p1\">**</ept><ph id=\"ph1\">&amp;nbsp;&amp;nbsp;</ph>You must still make the button visible and enable it in order to use it in the overflow menu.","pos":[13104,13222]},{"content":"In this example, the PlaybackRateButton element isn't visible in the overflow menu unless the IsPlaybackRateButtonVisible property is true.","pos":[13223,13362]},{"content":"It's not enabled unless the IsPlaybackRateEnabled property is true.","pos":[13363,13430]},{"content":"Setting these properties is shown in the previous section.","pos":[13431,13489]},{"content":"Adding a custom button","pos":[13495,13517]},{"content":"One reason you might want to customize MediaTransportControls is to add a custom command to the control.","pos":[13519,13623]},{"content":"Whether you add it as a primary command or a secondary command, the procedure for creating the command button and modifying its behavior is the same.","pos":[13624,13773]},{"content":"In the <bpt id=\"p1\">[</bpt>Media Transport Controls sample<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=620023)</ept>, a \"rating\" button is added to the primary commands.","pos":[13774,13916]},{"content":"To add a custom command button","pos":[13921,13951]},{"content":"Create an AppBarButton object and add it to the CommandBar in the control template.","pos":[13957,14040]},{"content":"In the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>OnApplyTemplate<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.frameworkelement.onapplytemplate.aspx)</ept> override, get the button from the template and register a handler for its <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Click<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.primitives.buttonbase.click.aspx)</ept> event.","pos":[14848,15189]},{"content":"This code goes in the <ph id=\"ph1\">`CustomMediaTransportControls`</ph> class.","pos":[15190,15249]},{"content":"Add code to the Click event handler to perform the action that occurs when the button is clicked.","pos":[15664,15761]},{"content":"Here's the complete code for the class.","pos":[15762,15801]},{"content":"Modifying the slider","pos":[16637,16657]},{"content":"The \"seek\" control of the MediaTransportControls is provided by a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Slider<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.slider.aspx)</ept> element.","pos":[16659,16837]},{"content":"One way you can customize it is to change the granularity of the seek behavior.","pos":[16838,16917]},{"content":"The default seek slider is divided into 100 parts, so the seek behavior is limited to that many sections.","pos":[16920,17025]},{"content":"You can change the granularity of the seek slider by getting the Slider from the XAML visual tree in your <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>MediaOpened<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediaelement.mediaopened.aspx)</ept> event handler.","pos":[17026,17273]},{"content":"This example shows how to use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>VisualTreeHelper<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.media.visualtreehelper.aspx)</ept> to get a reference to the Slider, then change the default step frequency of the slider from 1% to 0.1% (1000 steps) if the media is longer than 120 minutes.","pos":[17274,17581]},{"content":"The MediaElement is named <ph id=\"ph1\">`MediaElement1`</ph>.","pos":[17582,17624]},{"content":"Related articles","pos":[18146,18162]},{"content":"Media playback","pos":[18167,18181]}],"content":"---\nauthor: Jwmsft\nDescription: The media player has customizable XAML transport controls to manage control of audio and video content.\ntitle: Create custom media transport controls\nms.assetid: 6643A108-A6EB-42BC-B800-22EABD7B731B\nlabel: Create custom media transport controls\ntemplate: detail.hbs\n---\n# Create custom transport controls\n\nMediaElement has customizable XAML transport controls to manage control of audio and video content within a Universal Windows Platform (UWP) app. Here, we demonstrate how to customize the MediaTransportControls template. We’ll show you how to work with the overflow menu, add a custom button, modify the slider, and change colors.\n\nBefore starting, you should be familiar with the MediaElement and the MediaTransportControls classes. For more info, see the MediaElement control guide. \n\n> **Tip**&nbsp;&nbsp;The examples in this topic are based on the [Media Transport Controls sample](http://go.microsoft.com/fwlink/p/?LinkId=620023). You can download the sample to view and run the completed code.\n\n<span class=\"sidebar_heading\" style=\"font-weight: bold;\">Important APIs</span>\n\n-   [**MediaElement**](https://msdn.microsoft.com/library/windows/apps/br242926)\n-   [**MediaElement.AreTransportControlsEnabled**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediaelement.aretransportcontrolsenabled.aspx)\n-   [**MediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/dn278677)\n\n## When should you customize the template?\n\n**MediaElement** has built-in transport controls that are designed to work well without modification in most video and audio playback apps. They’re provided by the [**MediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediatransportcontrols.aspx) class and include buttons to play, stop, and navigate media, adjust volume, toggle full screen, cast to a second device, enable captions, switch audio tracks, and adjust the playback rate. MediaTransportControls has properties that let you control whether each button is shown and enabled. You can also set the [**IsCompact**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediatransportcontrols.iscompact.aspx) property to specify whether the controls are shown in one row or two.\n\nHowever, there may be scenarios where you need to further customize the look of the control or change its behavior. Here are some examples:\n- Change the icons, slider behavior, and colors.\n- Move less commonly used command buttons into an overflow menu.\n- Change the order in which commands drop out when the control is resized.\n- Provide a command button that’s not in the default set.\n\nYou can customize the appearance of the control by modifying the default template. To modify the control's behavior or add new commands, you can create a custom control that's derived from MediaTransportControls.\n\n>**Tip**&nbsp;&nbsp;Customizable control templates are a powerful feature of the XAML platform, but there are also consequences that you should take into consideration. When you customize a template, it becomes a static part of your app and therefore will not receive any platform updates that are made to the template by Microsoft. If template updates are made by Microsoft, you should take the new template and re-modify it in order to get the benefits of the updated template.\n\n## Template structure\n\nThe [**ControlTemplate**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.controltemplate.aspx) is part of the default style. The transport control's default style is shown in the [**MediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediatransportcontrols.aspx) class reference page. You can copy this default style into your project to modify it. The ControlTemplate is divided into sections similar to other XAML control templates.\n- The first section of the template contains the [**Style**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.style.aspx) definitions for the various components of the MediaTransportControls.\n- The second section defines the various visual states that are used by the MediaTransportControls.\n- The third section contains the [**Grid**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.grid.aspx) that holds that various MediaTransportControls elements together and defines how the components are laid out.\n\n> **Note**&nbsp;&nbsp;For more info about modifying templates, see [Control templates](). You can use a text editor or similar editors in your IDE to open the XAML files in \\(*Program Files*)\\Windows Kits\\10\\DesignTime\\CommonConfiguration\\Neutral\\UAP\\\\(*SDK version*)\\Generic. The default style and template for each control is defined in the **generic.xaml** file. You can find the MediaTransportControls template in generic.xaml by searching for \"MediaTransportControls\".\n\nIn the following sections, you learn how to customize several of the main elements of the transport controls: \n- [**Slider**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.slider.aspx): allows a user to scrub through their media and also displays progress\n- [**CommandBar**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.commandbar.aspx): contains all of the buttons.\nFor more info, see the Anatomy section of the MediaTransportControls reference topic. \n\n## Customize the transport controls\n\nIf you want to modify only the appearance of the MediaTransportControls, you can create a copy of the default control style and template, and modify that. However, if you also want to add to or modify the functionality of the control, you need to create a new class that derives from MediaTransportControls.\n\n### Re-template the control\n\n**To customize the MediaTransportControls default style and template**\n1. Copy the default style from MediaTransportControls styles and templates into a ResourceDictionary in your project.\n2. Give the Style an x:Key value to identify it, like this. \n```xaml\n<Style TargetType=\"MediaTransportControls\" x:Key=\"myTransportControlsStyle\">\n    <!-- Style content ... -->\n</Style>\n```\n3. Add a MediaElement with MediaTransportControls to your UI.\n4. Set the Style property of the MediaTransportControls element to your custom Style resource, as shown here. \n```xaml\n<MediaElement AreTransportControlsEnabled=\"True\">\n    <MediaElement.TransportControls>\n        <MediaTransportControls Style=\"{StaticResource myTransportControlsStyle}\"/>\n    </MediaElement.TransportControls>\n</MediaElement>\n```\n\nFor more info about modifying styles and templates, see [Styling controls]() and [Control templates]().\n\n### Create a derived control\n\nTo add to or modify the functionality of the transport controls, you must create a new class that's derived from MediaTransportControls. A derived class called `CustomMediaTransportControls` is shown in the [Media Transport Controls sample](http://go.microsoft.com/fwlink/p/?LinkId=620023) and the remaining examples on this page.\n\n**To create a new class derived from MediaTransportControls**\n1. Add a new class file to your project.\n    - In Visual Studio, select Project > Add Class. The Add New Item dialog opens.\n    - In the Add New Item dialog, enter a name for the class file, then click Add. (In the Media Transport Controls sample, the class is named `CustomMediaTransportControls`.)\n2. Modify the class code to derive from the MediaTransportControls class.\n```csharp\npublic sealed class CustomMediaTransportControls : MediaTransportControls\n{\n}\n```\n3. Copy the default style for [**MediaTransportControls**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediatransportcontrols.aspx) into a [ResourceDictionary](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.resourcedictionary.aspx) in your project. This is the style and template you modify.\n(In the Media Transport Controls sample, a new folder called \"Themes\" is created, and a ResourceDictionary file called generic.xaml is added to it.)\n4. Change the [**TargetType**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.style.targettype.aspx) of the style to the new custom control type. (In the sample, the TargetType is changed to `local:CustomMediaTransportControls`.)\n```xaml\nxmlns:local=\"using:CustomMediaTransportControls\">\n...\n<Style TargetType=\"local:CustomMediaTransportControls\">\n```\n5. Set the [**DefaultStyleKey**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.control.defaultstylekey.aspx) of your custom class. This tells your custom class to use a Style with a TargetType of `local:CustomMediaTransportControls`.\n```csharp\npublic sealed class CustomMediaTransportControls : MediaTransportControls\n{\n    public CustomMediaTransportControls()\n    {\n        this.DefaultStyleKey = typeof(CustomMediaTransportControls);\n    }\n}\n```\n6. Add a [**MediaElement**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediaelement.aspx) to your XAML markup and add the custom transport controls to it. One thing to note is that the APIs to hide, show, disable, and enable the default buttons still work with a customized template.\n```xaml\n<MediaElement Name=\"MediaElement1\" AreTransportControlsEnabled=\"True\" Source=\"video.mp4\">\n    <MediaElement.TransportControls>\n        <local:CustomMediaTransportControls x:Name=\"customMTC\"\n                                            IsFastForwardButtonVisible=\"True\"\n                                            IsFastForwardEnabled=\"True\"\n                                            IsFastRewindButtonVisible=\"True\"\n                                            IsFastRewindEnabled=\"True\"\n                                            IsPlaybackRateButtonVisible=\"True\"\n                                            IsPlaybackRateEnabled=\"True\"\n                                            IsCompact=\"False\">\n        </local:CustomMediaTransportControls>\n    </MediaElement.TransportControls>\n</MediaElement>\n```\nYou can now modify the control style and template to update the look of your custom control, and the control code to update its behavior.\n\n### Working with the overflow menu\n\nYou can move MediaTransportControls command buttons into an overflow menu, so that less commonly used commands are hidden until the user needs them.\n\nIn the MediaTransportControls template, the command buttons are contained in a [**CommandBar**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.commandbar.aspx) element. The command bar has the concept of primary and secondary commands. The primary commands are the buttons that appear in the control by default and are always visible (unless you disable or hide the button). The secondary commands are shown in an overflow menu that appears when a user clicks the ellipsis (…) button. For more info, see the [App bars and command bars](app-bars.md) article.\n\nTo move an element from the command bar primary commands to the overflow menu, you need to edit the XAML control template. \n\n**To move a command to the overflow menu:**\n1. In the control template, find the CommandBar element named `MediaControlsCommandBar`.\n2. Add a [**SecondaryCommands**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.commandbar.secondarycommands.aspx) section to the XAML for the CommandBar. Put it after the closing tag for the [**PrimaryCommands**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.commandbar.primarycommands.aspx). \n```xaml\n<CommandBar x:Name=\"MediaControlsCommandBar\" ... >  \n  <CommandBar.PrimaryCommands>\n...\n    <AppBarButton x:Name='PlaybackRateButton'\n                    Style='{StaticResource AppBarButtonStyle}'\n                    MediaTransportControlsHelper.DropoutOrder='4'\n                    Visibility='Collapsed'>\n      <AppBarButton.Icon>\n        <FontIcon Glyph=\"&#xEC57;\"/>\n      </AppBarButton.Icon>\n    </AppBarButton>\n...\n  </CommandBar.PrimaryCommands>\n<!-- Add secondary commands (overflow menu) here -->\n  <CommandBar.SecondaryCommands>\n    ...\n  </CommandBar.SecondaryCommands>\n</CommandBar>\n```\n3. To populate the menu with commands, cut and paste the XAML for the desired [**AppBarButton**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.appbarbutton.aspx) objects from the PrimaryCommands to the SecondaryCommands. In this example, we move the `PlaybackRateButton` to the overflow menu.\n\n4. Add a label to the button and remove the styling information, as shown here.\nBecause the overflow menu is comprised of text buttons, you must add a text label to the button and also remove the style that sets the height and width of the button. Otherwise, it won't appear correctly in the overflow menu.\n```xaml\n<CommandBar.SecondaryCommands>\n    <AppBarButton x:Name='PlaybackRateButton'\n                  Label='Playback Rate'>\n    </AppBarButton>\n</CommandBar.SecondaryCommands>\n```\n\n> **Important**&nbsp;&nbsp;You must still make the button visible and enable it in order to use it in the overflow menu. In this example, the PlaybackRateButton element isn't visible in the overflow menu unless the IsPlaybackRateButtonVisible property is true. It's not enabled unless the IsPlaybackRateEnabled property is true. Setting these properties is shown in the previous section.\n\n### Adding a custom button\n\nOne reason you might want to customize MediaTransportControls is to add a custom command to the control. Whether you add it as a primary command or a secondary command, the procedure for creating the command button and modifying its behavior is the same. In the [Media Transport Controls sample](http://go.microsoft.com/fwlink/p/?LinkId=620023), a \"rating\" button is added to the primary commands. \n\n**To add a custom command button**\n1. Create an AppBarButton object and add it to the CommandBar in the control template. \n```xaml\n<AppBarButton x:Name=\"LikeButton\" \n              Icon=\"Like\" \n              Style=\"{StaticResource AppBarButtonStyle}\" \n              MediaTransportControlsHelper.DropoutOrder=\"3\"\n              VerticalAlignment=\"Center\" />\n```\n    You must add it to the CommandBar in the appropriate location. (For more info, see the Working with the overflow menu section.) How it's positioned in the UI is determined by where the button is in the markup. For example, if you want this button to appear as the last element in the primary commands, add it at the very end of the primary commands list.\n    \n    You can also customize the icon for the button. For more info, see the [**AppBarButton**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.appbarbutton.aspx) reference.\n\n2. In the [**OnApplyTemplate**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.frameworkelement.onapplytemplate.aspx) override, get the button from the template and register a handler for its [**Click**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.primitives.buttonbase.click.aspx) event. This code goes in the `CustomMediaTransportControls` class. \n```csharp\npublic sealed class CustomMediaTransportControls :  MediaTransportControls\n{\n    // ...\n\n    protected override void OnApplyTemplate() \n    { \n        // Find the custom button and create an event handler for its Click event. \n        var likeButton = GetTemplateChild(\"LikeButton\") as Button; \n        likeButton.Click += LikeButton_Click; \n        base.OnApplyTemplate(); \n    } \n\n    //...\n}\n```\n\n3. Add code to the Click event handler to perform the action that occurs when the button is clicked.\nHere's the complete code for the class.\n```csharp\npublic sealed class CustomMediaTransportControls : MediaTransportControls\n{\n    public event EventHandler< EventArgs> Liked;\n\n    public CustomMediaTransportControls() \n    {\n        this.DefaultStyleKey = typeof(CustomMediaTransportControls);\n    }\n\n    protected override void OnApplyTemplate()\n    {\n        // Find the custom button and create an event handler for its Click event. \n        var likeButton = GetTemplateChild(\"LikeButton\") as Button;\n        likeButton.Click += LikeButton_Click;\n        base.OnApplyTemplate();\n    }\n\n    private void LikeButton_Click(object sender, RoutedEventArgs e)\n    {\n        // Raise an event on the custom control when 'like' is clicked. \n        var handler = Liked;\n        if (handler != null)\n        {\n            handler(this, EventArgs.Empty);\n        }\n    }\n}\n```\n\n### Modifying the slider\n\nThe \"seek\" control of the MediaTransportControls is provided by a [**Slider**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.slider.aspx) element. One way you can customize it is to change the granularity of the seek behavior. \n\nThe default seek slider is divided into 100 parts, so the seek behavior is limited to that many sections. You can change the granularity of the seek slider by getting the Slider from the XAML visual tree in your [**MediaOpened**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.controls.mediaelement.mediaopened.aspx) event handler. This example shows how to use [**VisualTreeHelper**](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.media.visualtreehelper.aspx) to get a reference to the Slider, then change the default step frequency of the slider from 1% to 0.1% (1000 steps) if the media is longer than 120 minutes. The MediaElement is named `MediaElement1`.\n\n```csharp\nprivate void MediaElement_MediaOpened(object sender, RoutedEventArgs e)\n{\n  FrameworkElement transportControlsTemplateRoot = (FrameworkElement)VisualTreeHelper.GetChild(MediaElement1.TransportControls, 0);\n  Slider sliderControl = (Slider)transportControlsTemplateRoot.FindName(\"ProgressSlider\");\n  if (sliderControl != null && MediaElement1.NaturalDuration.TimeSpan.TotalMinutes > 120)\n  {\n    // Default is 1%. Change to 0.1% for more granular seeking.\n    sliderControl.StepFrequency = 0.1;\n  }\n}\n```\n\n\n\n## Related articles\n\n- [Media playback](media-playback.md)\n"}