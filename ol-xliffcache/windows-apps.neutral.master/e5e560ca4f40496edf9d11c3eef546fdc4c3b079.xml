{"nodes":[{"content":"Code that integrates with the device itself and its sensors involves input from, and output to, the user.","pos":[35,140]},{"content":"Porting Windows Runtime 8.x to UWP for I/O, device, and app model'","pos":[148,214]},{"content":"Porting Windows Runtime 8.x to UWP for I/O, device, and app model","pos":[271,336]},{"content":"Updated for UWP apps on Windows 10.","pos":[342,377]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[378,470]},{"pos":[476,556],"content":"The previous topic was <bpt id=\"p1\">[</bpt>Porting XAML and UI<ept id=\"p1\">](w8x-to-uwp-porting-xaml-and-ui.md)</ept>."},{"content":"Code that integrates with the device itself and its sensors involves input from, and output to, the user.","pos":[558,663]},{"content":"It can also involve processing data.","pos":[664,700]},{"content":"But, this code is not generally thought of as either the UI layer <bpt id=\"p1\">*</bpt>or<ept id=\"p1\">*</ept> the data layer.","pos":[701,787]},{"content":"This code includes integration with the vibration controller, accelerometer, gyroscope, microphone and speaker (which intersect with speech recognition and synthesis), (geo)location, and input modalities such as touch, mouse, keyboard, and pen.","pos":[788,1032]},{"content":"Application lifecycle (process lifetime management)","pos":[1037,1088]},{"content":"For a Universal 8.1 app, there is a two-second \"debounce window\" of time between the app becoming inactive and the system raising the suspending event.","pos":[1091,1242]},{"content":"Using this debounce window as extra time to suspend state is unsafe, and for a Universal Windows Platform (UWP) app, there is no debounce window at all; the suspension event is raised as soon as an app becomes inactive.","pos":[1243,1462]},{"pos":[1464,1557],"content":"For more info, see <bpt id=\"p1\">[</bpt>App lifecycle<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt243287)</ept>."},{"content":"Background audio","pos":[1562,1578]},{"content":"For the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>MediaElement.AudioCategory<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227352)</ept> property, <bpt id=\"p3\">**</bpt>ForegroundOnlyMedia<ept id=\"p3\">**</ept> and <bpt id=\"p4\">**</bpt>BackgroundCapableMedia<ept id=\"p4\">**</ept> are deprecated for Windows 10 apps.","pos":[1581,1780]},{"content":"Use the Windows Phone Store app model instead.","pos":[1781,1827]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Background Audio<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt282140)</ept>.","pos":[1828,1931]},{"content":"Detecting the platform your app is running on","pos":[1936,1981]},{"content":"The way of thinking about app-targeting changes with Windows 10.","pos":[1984,2048]},{"content":"The new conceptual model is that an app targets the Universal Windows Platform (UWP) and runs across all Windows devices.","pos":[2049,2170]},{"content":"It can then opt to light up features that are exclusive to particular device families.","pos":[2171,2257]},{"content":"If needed, the app also has the option to limit itself to targeting one or more device families specifically.","pos":[2258,2367]},{"content":"For more info on what device families are—and how to decide which device family to target—see <bpt id=\"p1\">[</bpt>Guide to UWP apps<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn894631)</ept>.","pos":[2368,2540]},{"content":"If you have code in your Universal 8.1 app that detects what operating system it is running on, then you may need to change that depending on the reason for the logic.","pos":[2542,2709]},{"content":"If the app is passing the value through, and not acting on it, then you may want to continue to collect the operating system info.","pos":[2710,2840]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>   We recommend that you not use operating system or device family to detect the presence of features.","pos":[2842,2952]},{"content":"Identifying the current operating system or device family is usually not the best way to determine whether a particular operating system or device family feature is present.","pos":[2953,3126]},{"content":"Rather than detecting the operating system or device family (and version number), test for the presence of the feature itself (see <bpt id=\"p1\">[</bpt>Conditional compilation, and adaptive code<ept id=\"p1\">](w8x-to-uwp-porting-to-a-uwp-project.md#reviewing-conditional-compilation)</ept>).","pos":[3127,3378]},{"content":"If you must require a particular operating system or device family, be sure to use it as a minimum supported version, rather than design the test for that one version.","pos":[3379,3546]},{"content":"To tailor your app's UI to different devices, there are several techniques that we recommend.","pos":[3551,3644]},{"content":"Continue to use auto-sized elements and dynamic layout panels as you always have.","pos":[3645,3726]},{"content":"In your XAML markup, continue to use sizes in effective pixels (formerly view pixels) so that your UI adapts to different resolutions and scale factors (see <bpt id=\"p1\">[</bpt>Effective pixels, viewing distance, and scale factors<ept id=\"p1\">](w8x-to-uwp-porting-xaml-and-ui.md#effective-pixels)</ept>.).","pos":[3727,3994]},{"content":"And use Visual State Manager's adaptive triggers and setters to adapt your UI to the window size (see <bpt id=\"p1\">[</bpt>Guide to UWP apps<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn894631)</ept>.).","pos":[3995,4177]},{"content":"However, if you have a scenario where it is unavoidable to detect the device family, then you can do that.","pos":[4179,4285]},{"content":"In this example, we use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>AnalyticsVersionInfo<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn960165)</ept> class to navigate to a page tailored for the mobile device family where appropriate, and we make sure to fall back to a default page otherwise.","pos":[4286,4542]},{"content":"Your app can also determine the device family that it is running on from the resource selection factors that are in effect.","pos":[4782,4905]},{"content":"The example below shows how to do this imperatively, and the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ResourceContext.QualifierValues<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br206071)</ept> topic describes the more typical use case for the class in loading device family-specific resources based on the device family factor.","pos":[4906,5197]},{"pos":[5442,5571],"content":"Also, see <bpt id=\"p1\">[</bpt>Conditional compilation, and adaptive code<ept id=\"p1\">](w8x-to-uwp-porting-to-a-uwp-project.md#reviewing-conditional-compilation)</ept>."},{"content":"Location","pos":[5576,5584]},{"content":"When an app that declares the Location capability in its app package manifest runs on Windows 10, the system will prompt the end-user for consent.","pos":[5587,5733]},{"content":"This is true whether the app is a Windows Phone Store app or a Windows 10 app.","pos":[5734,5812]},{"content":"So, if your app displays its own custom consent prompt, or if it provides an on-off toggle, then you will want to remove that so that the end-user is only prompted once.","pos":[5813,5982]}],"content":"---\nauthor: mcleblanc\ndescription: Code that integrates with the device itself and its sensors involves input from, and output to, the user.\ntitle: Porting Windows Runtime 8.x to UWP for I/O, device, and app model'\nms.assetid: bb13fb8f-bdec-46f5-8640-57fb0dd2d85b\n---\n\n# Porting Windows Runtime 8.x to UWP for I/O, device, and app model\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n\nThe previous topic was [Porting XAML and UI](w8x-to-uwp-porting-xaml-and-ui.md).\n\nCode that integrates with the device itself and its sensors involves input from, and output to, the user. It can also involve processing data. But, this code is not generally thought of as either the UI layer *or* the data layer. This code includes integration with the vibration controller, accelerometer, gyroscope, microphone and speaker (which intersect with speech recognition and synthesis), (geo)location, and input modalities such as touch, mouse, keyboard, and pen.\n\n## Application lifecycle (process lifetime management)\n\n\nFor a Universal 8.1 app, there is a two-second \"debounce window\" of time between the app becoming inactive and the system raising the suspending event. Using this debounce window as extra time to suspend state is unsafe, and for a Universal Windows Platform (UWP) app, there is no debounce window at all; the suspension event is raised as soon as an app becomes inactive.\n\nFor more info, see [App lifecycle](https://msdn.microsoft.com/library/windows/apps/mt243287).\n\n## Background audio\n\n\nFor the [**MediaElement.AudioCategory**](https://msdn.microsoft.com/library/windows/apps/br227352) property, **ForegroundOnlyMedia** and **BackgroundCapableMedia** are deprecated for Windows 10 apps. Use the Windows Phone Store app model instead. For more information, see [Background Audio](https://msdn.microsoft.com/library/windows/apps/mt282140).\n\n## Detecting the platform your app is running on\n\n\nThe way of thinking about app-targeting changes with Windows 10. The new conceptual model is that an app targets the Universal Windows Platform (UWP) and runs across all Windows devices. It can then opt to light up features that are exclusive to particular device families. If needed, the app also has the option to limit itself to targeting one or more device families specifically. For more info on what device families are—and how to decide which device family to target—see [Guide to UWP apps](https://msdn.microsoft.com/library/windows/apps/dn894631).\n\nIf you have code in your Universal 8.1 app that detects what operating system it is running on, then you may need to change that depending on the reason for the logic. If the app is passing the value through, and not acting on it, then you may want to continue to collect the operating system info.\n\n**Note**   We recommend that you not use operating system or device family to detect the presence of features. Identifying the current operating system or device family is usually not the best way to determine whether a particular operating system or device family feature is present. Rather than detecting the operating system or device family (and version number), test for the presence of the feature itself (see [Conditional compilation, and adaptive code](w8x-to-uwp-porting-to-a-uwp-project.md#reviewing-conditional-compilation)). If you must require a particular operating system or device family, be sure to use it as a minimum supported version, rather than design the test for that one version.\n\n \n\nTo tailor your app's UI to different devices, there are several techniques that we recommend. Continue to use auto-sized elements and dynamic layout panels as you always have. In your XAML markup, continue to use sizes in effective pixels (formerly view pixels) so that your UI adapts to different resolutions and scale factors (see [Effective pixels, viewing distance, and scale factors](w8x-to-uwp-porting-xaml-and-ui.md#effective-pixels).). And use Visual State Manager's adaptive triggers and setters to adapt your UI to the window size (see [Guide to UWP apps](https://msdn.microsoft.com/library/windows/apps/dn894631).).\n\nHowever, if you have a scenario where it is unavoidable to detect the device family, then you can do that. In this example, we use the [**AnalyticsVersionInfo**](https://msdn.microsoft.com/library/windows/apps/dn960165) class to navigate to a page tailored for the mobile device family where appropriate, and we make sure to fall back to a default page otherwise.\n\n```csharp\n   if (Windows.System.Profile.AnalyticsInfo.VersionInfo.DeviceFamily == \"Windows.Mobile\")\n        rootFrame.Navigate(typeof(MainPageMobile), e.Arguments);\n    else\n        rootFrame.Navigate(typeof(MainPage), e.Arguments);\n```\n\nYour app can also determine the device family that it is running on from the resource selection factors that are in effect. The example below shows how to do this imperatively, and the [**ResourceContext.QualifierValues**](https://msdn.microsoft.com/library/windows/apps/br206071) topic describes the more typical use case for the class in loading device family-specific resources based on the device family factor.\n\n```csharp\nvar qualifiers = Windows.ApplicationModel.Resources.Core.ResourceContext.GetForCurrentView().QualifierValues;\nstring deviceFamilyName;\nbool isDeviceFamilyNameKnown = qualifiers.TryGetValue(\"DeviceFamily\", out deviceFamilyName);\n```\n\nAlso, see [Conditional compilation, and adaptive code](w8x-to-uwp-porting-to-a-uwp-project.md#reviewing-conditional-compilation).\n\n## Location\n\n\nWhen an app that declares the Location capability in its app package manifest runs on Windows 10, the system will prompt the end-user for consent. This is true whether the app is a Windows Phone Store app or a Windows 10 app. So, if your app displays its own custom consent prompt, or if it provides an on-off toggle, then you will want to remove that so that the end-user is only prompted once.\n\n \n\n \n\n\n\n\n"}