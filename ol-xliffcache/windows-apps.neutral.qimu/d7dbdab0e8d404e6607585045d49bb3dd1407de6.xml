{"nodes":[{"content":"Declare background tasks in the application manifest","pos":[29,81]},{"content":"Enable the use of background tasks by declaring them as extensions in the app manifest.","pos":[95,182]},{"content":"Declare background tasks in the application manifest","pos":[239,291]},{"content":"Updated for UWP apps on Windows 10.","pos":[297,332]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[333,425]},{"content":"Important APIs","pos":[433,447]},{"content":"BackgroundTasks Schema","pos":[458,480]},{"content":"Windows.ApplicationModel.Background","pos":[549,584]},{"content":"Enable the use of background tasks by declaring them as extensions in the app manifest.","pos":[647,734]},{"content":"Background tasks but be declared in the app manifest or else your app will not be able to register them (an exception will be thrown).","pos":[736,870]},{"content":"Additionally, background tasks must be declared in the application manifest to pass certification.","pos":[871,969]},{"content":"This topic assumes you have a created one or more background task classes, and that your app registers each background task to run in response to at least one trigger.","pos":[971,1138]},{"content":"Add Extensions Manually","pos":[1143,1166]},{"content":"Open the application manifest (Package.appxmanifest) and go to the Application element.","pos":[1169,1256]},{"content":"Create an Extensions element (if one doesn't already exist).","pos":[1257,1317]},{"pos":[1319,1433],"content":"The following snippet is taken from the <bpt id=\"p1\">[</bpt>background task sample<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=618666)</ept>:"},{"content":"Add a Background Task Extension","pos":[1951,1982]},{"content":"Declare your first background task.","pos":[1985,2020]},{"content":"Copy this code into the Extensions element (you will add attributes in the following steps).","pos":[2022,2114]},{"pos":[2347,2504],"content":"Change the EntryPoint attribute to have the same string used by your code as the entry point when registering your background task (<bpt id=\"p1\">**</bpt>namespace.classname<ept id=\"p1\">**</ept>)."},{"content":"In this example, the entry point is ExampleBackgroundTaskNameSpace.ExampleBackgroundTaskClassName:","pos":[2510,2608]},{"content":"Change the list of Task Type attribute to indicate the type of task registration used with this background task.","pos":[2913,3025]},{"content":"If the background task is registered with multiple trigger types, add additional Task elements and Type attributes for each one.","pos":[3026,3154]},{"pos":[3160,3422],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  Make sure to list each of the trigger types you're using, or the background task will not register with the undeclared trigger types (the <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>Register<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/br224772)</ept> method will fail and throw an exception)."},{"content":"This snippet example indicates the use of system event triggers and push notifications:","pos":[3428,3515]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  Normally, an app will run in a special process called \"BackgroundTaskHost.exe\".","pos":[3848,3937]},{"content":"It is possible to add an Executable element to the Extension element, allowing the background task to run in the context of the app.","pos":[3938,4070]},{"content":"Only use the Executable element with background tasks that require it, such as the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ControlChannelTrigger<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh701032)</ept>.","pos":[4071,4240]},{"content":"Add Additional Background Task Extensions","pos":[4249,4290]},{"content":"Repeat step 2 for each additional background task class registered by your app.","pos":[4293,4372]},{"content":"The following example is the complete Application element from the <bpt id=\"p1\">[</bpt>background task sample<ept id=\"p1\">]( http://go.microsoft.com/fwlink/p/?linkid=227509)</ept>.","pos":[4374,4516]},{"content":"This shows the use of 2 background task classes with a total of 3 trigger types.","pos":[4517,4597]},{"content":"Copy the Extensions section of this example, and modify it as needed, to declare background tasks in your application manifest.","pos":[4598,4725]},{"content":"Related topics","pos":[6172,6186]},{"content":"Debug a background task","pos":[6191,6214]},{"content":"Register a background task","pos":[6247,6273]},{"content":"Guidelines for background tasks","pos":[6309,6340]}],"content":"---\nauthor: TylerMSFT\ntitle: Declare background tasks in the application manifest\ndescription: Enable the use of background tasks by declaring them as extensions in the app manifest.\nms.assetid: 6B4DD3F8-3C24-4692-9084-40999A37A200\n---\n\n# Declare background tasks in the application manifest\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n\n**Important APIs**\n\n-   [**BackgroundTasks Schema**](https://msdn.microsoft.com/library/windows/apps/br224794)\n-   [**Windows.ApplicationModel.Background**](https://msdn.microsoft.com/library/windows/apps/br224847)\n\nEnable the use of background tasks by declaring them as extensions in the app manifest.\n\nBackground tasks but be declared in the app manifest or else your app will not be able to register them (an exception will be thrown). Additionally, background tasks must be declared in the application manifest to pass certification.\n\nThis topic assumes you have a created one or more background task classes, and that your app registers each background task to run in response to at least one trigger.\n\n## Add Extensions Manually\n\n\nOpen the application manifest (Package.appxmanifest) and go to the Application element. Create an Extensions element (if one doesn't already exist).\n\nThe following snippet is taken from the [background task sample](http://go.microsoft.com/fwlink/p/?LinkId=618666):\n\n```xml\n<Application Id=\"App\"\n   ...\n   <Extensions>\n     <Extension Category=\"windows.backgroundTasks\" EntryPoint=\"Tasks.SampleBackgroundTask\">\n       <BackgroundTasks>\n         <Task Type=\"systemEvent\" />\n         <Task Type=\"timer\" />\n       </BackgroundTasks>\n     </Extension>\n     <Extension Category=\"windows.backgroundTasks\" EntryPoint=\"Tasks.ServicingComplete\">\n       <BackgroundTasks>\n         <Task Type=\"systemEvent\"/>\n       </BackgroundTasks>\n     </Extension>\n   </Extensions>\n </Application>\n```\n\n## Add a Background Task Extension\n\n\nDeclare your first background task.\n\nCopy this code into the Extensions element (you will add attributes in the following steps).\n\n```xml\n      <Extensions>\n        <Extension Category=\"windows.backgroundTasks\" EntryPoint=\"\">\n          <BackgroundTasks>\n            <Task Type=\"\" />\n          </BackgroundTasks>\n        </Extension>\n      </Extensions>\n```\n\n1.  Change the EntryPoint attribute to have the same string used by your code as the entry point when registering your background task (**namespace.classname**).\n\n    In this example, the entry point is ExampleBackgroundTaskNameSpace.ExampleBackgroundTaskClassName:\n\n    ```xml\n          <Extensions>\n            <Extension Category=\"windows.backgroundTasks\" EntryPoint=\"Tasks.ExampleBackgroundTaskClassName\">\n              <BackgroundTasks>\n                <Task Type=\"\" />\n              </BackgroundTasks>\n            </Extension>\n          </Extensions>\n    ```\n\n2.  Change the list of Task Type attribute to indicate the type of task registration used with this background task. If the background task is registered with multiple trigger types, add additional Task elements and Type attributes for each one.\n\n    **Note**  Make sure to list each of the trigger types you're using, or the background task will not register with the undeclared trigger types (the [**Register**](https://msdn.microsoft.com/library/windows/apps/br224772) method will fail and throw an exception).\n\n    This snippet example indicates the use of system event triggers and push notifications:\n\n    ```xml\n                <Extension Category=\"windows.backgroundTasks\" EntryPoint=\"Tasks.BackgroundTaskClass\">\n                  <BackgroundTasks>\n                    <Task Type=\"systemEvent\" />\n                    <Task Type=\"pushNotification\" />\n                  </BackgroundTasks>\n                </Extension>\n    ```\n\n    > **Note**  Normally, an app will run in a special process called \"BackgroundTaskHost.exe\". It is possible to add an Executable element to the Extension element, allowing the background task to run in the context of the app. Only use the Executable element with background tasks that require it, such as the [**ControlChannelTrigger**](https://msdn.microsoft.com/library/windows/apps/hh701032).    \n\n## Add Additional Background Task Extensions\n\n\nRepeat step 2 for each additional background task class registered by your app.\n\nThe following example is the complete Application element from the [background task sample]( http://go.microsoft.com/fwlink/p/?linkid=227509). This shows the use of 2 background task classes with a total of 3 trigger types. Copy the Extensions section of this example, and modify it as needed, to declare background tasks in your application manifest.\n\n```xml\n<Applications>\n    <Application Id=\"App\"\n      Executable=\"$targetnametoken$.exe\"\n      EntryPoint=\"BackgroundTask.App\">\n        <uap:VisualElements\n          DisplayName=\"BackgroundTask\"\n          Square150x150Logo=\"Assets\\StoreLogo-sdk.png\"\n          Square44x44Logo=\"Assets\\SmallTile-sdk.png\"\n          Description=\"BackgroundTask\"\n\n          BackgroundColor=\"#00b2f0\">\n          <uap:LockScreen Notification=\"badgeAndTileText\" BadgeLogo=\"Assets\\smalltile-Windows-sdk.png\" />\n            <uap:SplashScreen Image=\"Assets\\Splash-sdk.png\" />\n            <uap:DefaultTile DefaultSize=\"square150x150Logo\" Wide310x150Logo=\"Assets\\tile-sdk.png\" >\n                <uap:ShowNameOnTiles>\n                    <uap:ShowOn Tile=\"square150x150Logo\" />\n                    <uap:ShowOn Tile=\"wide310x150Logo\" />\n                </uap:ShowNameOnTiles>\n            </uap:DefaultTile>\n        </uap:VisualElements>\n\n      <Extensions>\n        <Extension Category=\"windows.backgroundTasks\" EntryPoint=\"Tasks.SampleBackgroundTask\">\n          <BackgroundTasks>\n            <Task Type=\"systemEvent\" />\n            <Task Type=\"timer\" />\n          </BackgroundTasks>\n        </Extension>\n        <Extension Category=\"windows.backgroundTasks\" EntryPoint=\"Tasks.ServicingComplete\">\n          <BackgroundTasks>\n            <Task Type=\"systemEvent\"/>\n          </BackgroundTasks>\n        </Extension>\n      </Extensions>\n    </Application>\n</Applications>\n```\n\n## Related topics\n\n* [Debug a background task](debug-a-background-task.md)\n* [Register a background task](register-a-background-task.md)\n* [Guidelines for background tasks](guidelines-for-background-tasks.md)\n"}