{"nodes":[{"content":"Learn how to catch AdControl errors in your app.","pos":[86,134]},{"content":"Error handling in JavaScript walkthrough","pos":[142,182]},{"content":"Error Handling in JavaScript Walkthrough","pos":[191,231]},{"content":"Updated for UWP apps on Windows 10.","pos":[237,272]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[273,365]},{"pos":[370,533],"content":"This topic demonstrates how to catch <bpt id=\"p1\">[</bpt>AdControl<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/microsoft.advertising.winrt.ui.adcontrol.aspx)</ept> errors in your app."},{"content":"These examples assume that you have a JavaScript/HTML app that contains an <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept>.","pos":[535,624]},{"content":"For step-by-step instructions that demonstrate how to add an <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept> to your app, see <bpt id=\"p2\">[</bpt>AdControl in HTML 5 and Javascript<ept id=\"p2\">](adcontrol-in-html-5-and-javascript.md)</ept>.","pos":[625,793]},{"content":"For a complete sample project that demonstrates how to add banner ads to a JavaScript/HTML app, see the <bpt id=\"p1\">[</bpt>advertising samples on GitHub<ept id=\"p1\">](http://aka.ms/githubads)</ept>.","pos":[794,955]},{"content":"In the default.html file, add a value for the <bpt id=\"p1\">**</bpt>onErrorOccurred<ept id=\"p1\">**</ept> event where you define the <bpt id=\"p2\">**</bpt>data-win-options<ept id=\"p2\">**</ept> in the <bpt id=\"p3\">**</bpt>div<ept id=\"p3\">**</ept> for the <bpt id=\"p4\">**</bpt>AdControl<ept id=\"p4\">**</ept>.","pos":[961,1112]},{"content":"Find the following code in the default.html file.","pos":[1113,1162]},{"pos":[1483,1559],"content":"Following the <bpt id=\"p1\">**</bpt>adUnitId<ept id=\"p1\">**</ept>, add the value for the <bpt id=\"p2\">**</bpt>onErrorOccurred<ept id=\"p2\">**</ept> event."},{"pos":[1622,1664],"content":"Here is the complete code for the <bpt id=\"p1\">**</bpt>div<ept id=\"p1\">**</ept>."},{"content":"Create a <bpt id=\"p1\">**</bpt>div<ept id=\"p1\">**</ept> that will display text so you can see the messages being generated.","pos":[2015,2099]},{"content":"To do this, add the following code after the <bpt id=\"p1\">**</bpt>div<ept id=\"p1\">**</ept> for <bpt id=\"p2\">**</bpt>myAd<ept id=\"p2\">**</ept>.","pos":[2100,2166]},{"content":"Create an <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept> that will trigger an error event.","pos":[2403,2460]},{"content":"There can only be one application id for all <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept> objects in an app.","pos":[2461,2538]},{"content":"So creating an additional one with a different application id will trigger an error at runtime.","pos":[2539,2634]},{"content":"To do this, after the previous <bpt id=\"p1\">**</bpt>div<ept id=\"p1\">**</ept> sections you have added, add the following code to the body of the default.html page.","pos":[2635,2759]},{"content":"In the project’s default.js file, after the default initialization function, you will add the event handler for <bpt id=\"p1\">**</bpt>errorLogger<ept id=\"p1\">**</ept>.","pos":[3209,3337]},{"content":"Scroll to the end of the file and after the last semi-colon is where you will put the following code.","pos":[3338,3439]},{"content":"Build and run the file.","pos":[3823,3846]},{"content":"You will see the original ad from the sample app you built previously and text under that ad describing the error.","pos":[3848,3962]},{"content":"You will not see the ad with the id of <bpt id=\"p1\">**</bpt>liveAd<ept id=\"p1\">**</ept>.","pos":[3963,4013]},{"content":"Related topics","pos":[4018,4032]},{"content":"Advertising samples on GitHub","pos":[4037,4066]}],"content":"---\nauthor: mcleanbyron\nms.assetid: 08b4ae43-69e8-4424-b3c0-a07c93d275c3\ndescription: Learn how to catch AdControl errors in your app.\ntitle: Error handling in JavaScript walkthrough\n\n---\n\n# Error Handling in JavaScript Walkthrough\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nThis topic demonstrates how to catch [AdControl](https://msdn.microsoft.com/library/windows/apps/microsoft.advertising.winrt.ui.adcontrol.aspx) errors in your app.\n\nThese examples assume that you have a JavaScript/HTML app that contains an **AdControl**. For step-by-step instructions that demonstrate how to add an **AdControl** to your app, see [AdControl in HTML 5 and Javascript](adcontrol-in-html-5-and-javascript.md). For a complete sample project that demonstrates how to add banner ads to a JavaScript/HTML app, see the [advertising samples on GitHub](http://aka.ms/githubads).\n\n1.  In the default.html file, add a value for the **onErrorOccurred** event where you define the **data-win-options** in the **div** for the **AdControl**. Find the following code in the default.html file.\n\n    ``` syntax\n    <div id=\"myAd\" style=\"position: absolute; top: 53px; left: 0px; width: 300px; height: 250px; z-index: 1\"\n         data-win-control=\"MicrosoftNSJS.Advertising.AdControl\"\n         data-win-options=\"{applicationId: '3f83fe91-d6be-434d-a0ae-7351c5a997f1', adUnitId: '10865270'}\">\n    </div>\n    ```\n\n    Following the **adUnitId**, add the value for the **onErrorOccurred** event.\n\n    ``` syntax\n    onErrorOccurred: errorLogger\n    ```\n\n    Here is the complete code for the **div**.\n\n    ``` syntax\n    <div id=\"myAd\" style=\"position: absolute; top: 53px; left: 0px; width: 300px; height: 250px; z-index: 1\"\n         data-win-control=\"MicrosoftNSJS.Advertising.AdControl\"\n         data-win-options=\"{applicationId: '3f83fe91-d6be-434d-a0ae-7351c5a997f1', adUnitId: '10865270', onErrorOccurred: errorLogger}\">\n    </div>\n    ```\n\n2.  Create a **div** that will display text so you can see the messages being generated. To do this, add the following code after the **div** for **myAd**.\n\n    ``` syntax\n    <div style=\"position:absolute; width:100%; height:130px; top:300px; left:0px\">\n        <b>Ad Events</b><br />\n        <div id=\"adEvents\" style=\"width:100%; height:110px; overflow:auto\"></div>\n    </div>\n    ```\n\n3.  Create an **AdControl** that will trigger an error event. There can only be one application id for all **AdControl** objects in an app. So creating an additional one with a different application id will trigger an error at runtime. To do this, after the previous **div** sections you have added, add the following code to the body of the default.html page.\n\n    ``` syntax\n    <!-- since only one applicationId can be used, the following ad control will fire an error event -->\n    <div id=\"liveAd\" style=\"position: absolute; top:500px; left:0px; width:480px; height:80px\"\n        data-win-control=\"MicrosoftNSJS.Advertising.AdControl\"\n        data-win-options=\"{applicationId: '00000000-0000-0000-0000-000000000000',\n        adUnitId: '10865270', onErrorOccurred: errorLogger }\" >\n    </div>\n    ```\n\n4.  In the project’s default.js file, after the default initialization function, you will add the event handler for **errorLogger**. Scroll to the end of the file and after the last semi-colon is where you will put the following code.\n\n    ``` syntax\n    WinJS.Utilities.markSupportedForProcessing(\n    window.errorLogger = function (sender, evt) {\n        adEvents.innerHTML = (new Date()).toLocaleTimeString() + \": \" +\n        sender.element.id + \" error: \" + evt.errorMessage + \" error code: \" +\n        evt.errorCode + \"<br>\" + adEvents.innerHTML;\n        console.log(\"errorhandler hit. \\n\");\n    });\n    ```\n\n5.  Build and run the file.\n\nYou will see the original ad from the sample app you built previously and text under that ad describing the error. You will not see the ad with the id of **liveAd**.\n\n## Related topics\n\n* [Advertising samples on GitHub](http://aka.ms/githubads)\n\n \n"}