{"nodes":[{"content":"In this walkthrough, you will create and run your first experiment with A/B testing.","pos":[37,121]},{"content":"Create and run your first experiment with A/B testing","pos":[129,182]},{"content":"Create and run your first experiment with A/B testing","pos":[239,292]},{"content":"In this walkthrough, you will:","pos":[294,324]},{"content":"Create an experiment on the Windows Dev Center dashboard that tests whether changing the background color of an app button successfully increases the number of button clicks.","pos":[327,501]},{"content":"Create an app that retrieves variation settings from Dev Center, uses this data to change the background color of a button, and logs view and conversion event data to Dev Center.","pos":[504,682]},{"content":"Run the app to gather experiment data.","pos":[685,723]},{"content":"Review the experiment results on the Dev Center dashboard, choose a variation to enable for all users of the app, and complete the experiment.","pos":[726,868]},{"pos":[870,1002],"content":"For an overview of A/B testing with Dev Center, see <bpt id=\"p1\">[</bpt>Run app experiments with A/B testing<ept id=\"p1\">](run-app-experiments-with-a-b-testing.md)</ept>."},{"content":"Prerequisites","pos":[1007,1020]},{"pos":[1022,1238],"content":"To follow this walkthrough, you must have a Windows Dev Center account and you must configure your development computer as described in <bpt id=\"p1\">[</bpt>Run app experiments with A/B testing<ept id=\"p1\">](run-app-experiments-with-a-b-testing.md)</ept>."},{"content":"Create the experiment in Windows Dev Center","pos":[1243,1286]},{"pos":[1291,1363],"content":"Sign in to the <bpt id=\"p1\">[</bpt>Dev Center dashboard<ept id=\"p1\">](https://dev.windows.com/overview)</ept>."},{"content":"If you already have an app in Dev Center that you want to use to create an experiment, under <bpt id=\"p1\">**</bpt>Your apps<ept id=\"p1\">**</ept>, select the app.","pos":[1367,1490]},{"content":"If you do not yet have an app in your dashboard, <bpt id=\"p1\">[</bpt>create a new app by reserving a name<ept id=\"p1\">](../publish/create-your-app-by-reserving-a-name.md)</ept> and then select that app in your dashboard.","pos":[1491,1673]},{"pos":[1677,1755],"content":"In the navigation pane, click <bpt id=\"p1\">**</bpt>Services<ept id=\"p1\">**</ept> and then click <bpt id=\"p2\">**</bpt>Experimentation<ept id=\"p2\">**</ept>."},{"content":"In the <bpt id=\"p1\">**</bpt>API keys<ept id=\"p1\">**</ept> section, select <bpt id=\"p2\">**</bpt>New API key<ept id=\"p2\">**</ept> to generate a new API key, and enter the name <bpt id=\"p3\">**</bpt>My First Experiment<ept id=\"p3\">**</ept> for the API key.","pos":[1759,1897]},{"content":"You will use this API key in the next section of this walkthrough.","pos":[1898,1964]},{"content":"In the <bpt id=\"p1\">**</bpt>Experiments<ept id=\"p1\">**</ept> section, click <bpt id=\"p2\">**</bpt>New experiment<ept id=\"p2\">**</ept>.","pos":[1968,2025]},{"content":"In the <bpt id=\"p1\">**</bpt>Experiment name<ept id=\"p1\">**</ept> field, type the name <bpt id=\"p2\">**</bpt>Optimize Button Clicks<ept id=\"p2\">**</ept>.","pos":[2026,2101]},{"content":"In the <bpt id=\"p1\">**</bpt>View event name<ept id=\"p1\">**</ept> field, type the name <bpt id=\"p2\">**</bpt>userViewedButton<ept id=\"p2\">**</ept>.","pos":[2105,2174]},{"content":"Later in this walkthrough, you will add code that logs this view event when the main page for your app is initialized and the button is visible to the user.","pos":[2175,2331]},{"pos":[2335,2410],"content":"In the <bpt id=\"p1\">**</bpt>Goals and conversion events<ept id=\"p1\">**</ept> section, enter the following values:"},{"pos":[2415,2475],"content":"In the <bpt id=\"p1\">**</bpt>Goal name<ept id=\"p1\">**</ept> field, type <bpt id=\"p2\">**</bpt>Increase Button Clicks<ept id=\"p2\">**</ept>."},{"content":"In the <bpt id=\"p1\">**</bpt>Conversion event name<ept id=\"p1\">**</ept> field, type the name <bpt id=\"p2\">**</bpt>userClickedButton<ept id=\"p2\">**</ept>.","pos":[2480,2556]},{"content":"Later in this walkthrough, you will add code that logs this conversion event in the click event handler for the button.","pos":[2557,2676]},{"pos":[2681,2729],"content":"In the <bpt id=\"p1\">**</bpt>Objective<ept id=\"p1\">**</ept> field, choose <bpt id=\"p2\">**</bpt>Maximize<ept id=\"p2\">**</ept>."},{"content":"In the <bpt id=\"p1\">**</bpt>Variations and settings<ept id=\"p1\">**</ept> section, click <bpt id=\"p2\">**</bpt>Add setting<ept id=\"p2\">**</ept> three times.","pos":[2733,2811]},{"content":"You should now have four rows of empty settings.","pos":[2812,2860]},{"pos":[2865,3032],"content":"In the first row, type <bpt id=\"p1\">**</bpt>buttonText<ept id=\"p1\">**</ept> for the setting name, type <bpt id=\"p2\">**</bpt>Grey Button<ept id=\"p2\">**</ept> in the <bpt id=\"p3\">**</bpt>Variation A<ept id=\"p3\">**</ept> column, and type <bpt id=\"p4\">**</bpt>Blue Button<ept id=\"p4\">**</ept> in the <bpt id=\"p5\">**</bpt>Variation B<ept id=\"p5\">**</ept> column."},{"pos":[3037,3178],"content":"In the second row, type <bpt id=\"p1\">**</bpt>r<ept id=\"p1\">**</ept> for the setting name, type <bpt id=\"p2\">**</bpt>128<ept id=\"p2\">**</ept> in the <bpt id=\"p3\">**</bpt>Variation A<ept id=\"p3\">**</ept> column, and type <bpt id=\"p4\">**</bpt>1<ept id=\"p4\">**</ept> in the <bpt id=\"p5\">**</bpt>Variation B<ept id=\"p5\">**</ept> column."},{"pos":[3183,3323],"content":"In the third row, type <bpt id=\"p1\">**</bpt>g<ept id=\"p1\">**</ept> for the setting name, type <bpt id=\"p2\">**</bpt>128<ept id=\"p2\">**</ept> in the <bpt id=\"p3\">**</bpt>Variation A<ept id=\"p3\">**</ept> column, and type <bpt id=\"p4\">**</bpt>1<ept id=\"p4\">**</ept> in the <bpt id=\"p5\">**</bpt>Variation B<ept id=\"p5\">**</ept> column."},{"pos":[3328,3471],"content":"In the fourth row, type <bpt id=\"p1\">**</bpt>b<ept id=\"p1\">**</ept> for the setting name, type <bpt id=\"p2\">**</bpt>128<ept id=\"p2\">**</ept> in the <bpt id=\"p3\">**</bpt>Variation A<ept id=\"p3\">**</ept> column, and type <bpt id=\"p4\">**</bpt>255<ept id=\"p4\">**</ept> in the <bpt id=\"p5\">**</bpt>Variation B<ept id=\"p5\">**</ept> column."},{"pos":[3477,3602],"content":"Confirm that the <bpt id=\"p1\">**</bpt>Distribute equally<ept id=\"p1\">**</ept> check box is selected so that the variations will be distributed equally to your app."},{"pos":[3607,3650],"content":"Click <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept> and then click <bpt id=\"p2\">**</bpt>Activate<ept id=\"p2\">**</ept>."},{"content":"<bpt id=\"p1\">**</bpt>Important<ept id=\"p1\">**</ept>  After you activate an experiment, you can no longer modify the experiment parameters unless it is a test experiment (you clicked the <bpt id=\"p2\">**</bpt>Test experiment<ept id=\"p2\">**</ept> check box when you created the experiment).","pos":[3654,3865]},{"content":"Typically, we recommend that you code the experiment in your app before activating your experiment.","pos":[3866,3965]},{"content":"For simplicity, in this walkthrough you can activate the experiment now.","pos":[3966,4038]},{"content":"Code the experiment in your app","pos":[4043,4074]},{"content":"In Visual Studio 2015, create a new Universal Windows Platform project using Visual C#.","pos":[4079,4166]},{"content":"Name the project <bpt id=\"p1\">**</bpt>SampleExperiment<ept id=\"p1\">**</ept>.","pos":[4167,4205]},{"pos":[4209,4313],"content":"In Solution Explorer, expand your project node, right-click <bpt id=\"p1\">**</bpt>References<ept id=\"p1\">**</ept>, and click <bpt id=\"p2\">**</bpt>Add Reference<ept id=\"p2\">**</ept>."},{"pos":[4317,4397],"content":"In <bpt id=\"p1\">**</bpt>Reference Manager<ept id=\"p1\">**</ept>, expand <bpt id=\"p2\">**</bpt>Universal Windows<ept id=\"p2\">**</ept> and click <bpt id=\"p3\">**</bpt>Extensions<ept id=\"p3\">**</ept>."},{"pos":[4401,4503],"content":"In the list of SDKs, select the check box next to <bpt id=\"p1\">**</bpt>Microsoft Store Engagement SDK<ept id=\"p1\">**</ept> and click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"pos":[4507,4610],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, double-click MainPage.xaml to open the designer for the main page in the app."},{"pos":[4614,4661],"content":"Drag a <bpt id=\"p1\">**</bpt>Button<ept id=\"p1\">**</ept> from <bpt id=\"p2\">**</bpt>Toolbox<ept id=\"p2\">**</ept> to the page."},{"pos":[4665,4776],"content":"Double-click the button on the designer to open the code file and add an event handler for the <bpt id=\"p1\">**</bpt>Click<ept id=\"p1\">**</ept> event."},{"content":"Replace the entire contents of the code file with the following code.","pos":[4782,4851]},{"content":"In the following line of code, assign the <bpt id=\"p1\">*</bpt>apiKey<ept id=\"p1\">*</ept> variable to the API key you obtained from the Dev Center dashboard in the previous section.","pos":[8148,8290]},{"content":"The API key shown below is for example purposes only.","pos":[8291,8344]},{"content":"Save the code file and build the project.","pos":[8427,8468]},{"content":"Run the app to gather experiment data","pos":[8473,8510]},{"pos":[8515,8584],"content":"Run the <bpt id=\"p1\">**</bpt>SampleExperiment<ept id=\"p1\">**</ept> app you created in the previous section."},{"content":"Confirm that you see either a grey or blue button.","pos":[8588,8638]},{"content":"Click the button and then close the app.","pos":[8639,8679]},{"content":"Repeat the above steps several times on the same computer to confirm that your app shows the same button color.","pos":[8683,8794]},{"content":"Review the results and complete the experiment","pos":[8799,8845]},{"content":"Wait at least several hours after completing the previous section, and then follow these steps to review the results of your experiment and complete the experiment.","pos":[8847,9011]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept> As soon as you activate an experiment, Dev Center immediately starts collecting data from any apps that are instrumented to log data for your experiment.","pos":[9015,9177]},{"content":"However, it can take several hours for experiment data to appear in the dashboard.","pos":[9178,9260]},{"pos":[9265,9332],"content":"In Dev Center, return to the <bpt id=\"p1\">**</bpt>Experimentation<ept id=\"p1\">**</ept> page for your app."},{"pos":[9336,9476],"content":"In the <bpt id=\"p1\">**</bpt>Experiments<ept id=\"p1\">**</ept> section, click the <bpt id=\"p2\">**</bpt>Active<ept id=\"p2\">**</ept> filter and then click <bpt id=\"p3\">**</bpt>Optimize Button Clicks<ept id=\"p3\">**</ept> to go to the page for this experiment."},{"content":"Confirm that the results shown in the <bpt id=\"p1\">**</bpt>Results summary<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Results details<ept id=\"p2\">**</ept> sections matches what you expect to see.","pos":[9480,9602]},{"content":"For more details about these sections, see <bpt id=\"p1\">[</bpt>Manage your experiment in the Dev Center dashboard<ept id=\"p1\">](manage-your-experiment.md#review-the-results-of-your-experiment)</ept>.","pos":[9603,9764]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept> Dev Center reports only the first conversion event for each user in a 24-hour time period.","pos":[9769,9868]},{"content":"If a user triggers multiple conversion events in your app within a 24-hour period, only the first conversion event is reported.","pos":[9869,9996]},{"content":"This is intended to help prevent a single user with many conversion events from skewing the experiment results for a sample group of users.","pos":[9997,10136]},{"content":"Now you are ready to end the experiment.","pos":[10141,10181]},{"content":"In the <bpt id=\"p1\">**</bpt>Results summary<ept id=\"p1\">**</ept> section, in the <bpt id=\"p2\">**</bpt>Variation B<ept id=\"p2\">**</ept> column, click <bpt id=\"p3\">**</bpt>Switch<ept id=\"p3\">**</ept>.","pos":[10182,10266]},{"content":"This switches all users of your app to the blue button.","pos":[10267,10322]},{"pos":[10326,10386],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to confirm that you want to end the experiment."},{"pos":[10390,10459],"content":"Run the <bpt id=\"p1\">**</bpt>SampleExperiment<ept id=\"p1\">**</ept> app you created in the previous section."},{"content":"Confirm that you see a blue button.","pos":[10463,10498]},{"content":"Note that it may take up to two minutes for your app to receive an updated variation assignment.","pos":[10499,10595]},{"content":"Related topics","pos":[10600,10614]},{"content":"Define your experiment in the Dev Center dashboard","pos":[10621,10671]},{"content":"Code your app for experimentation","pos":[10733,10766]},{"content":"Manage your experiment in the Dev Center dashboard","pos":[10810,10860]},{"content":"Run app experiments with A/B testing","pos":[10894,10930]}],"content":"---\nauthor: mcleanbyron\nDescription: In this walkthrough, you will create and run your first experiment with A/B testing.\ntitle: Create and run your first experiment with A/B testing\nms.assetid: 16A2B129-14E1-4C68-86E8-52F1BE58F256\n---\n\n# Create and run your first experiment with A/B testing\n\nIn this walkthrough, you will:\n* Create an experiment on the Windows Dev Center dashboard that tests whether changing the background color of an app button successfully increases the number of button clicks.\n* Create an app that retrieves variation settings from Dev Center, uses this data to change the background color of a button, and logs view and conversion event data to Dev Center.\n* Run the app to gather experiment data.\n* Review the experiment results on the Dev Center dashboard, choose a variation to enable for all users of the app, and complete the experiment.\n\nFor an overview of A/B testing with Dev Center, see [Run app experiments with A/B testing](run-app-experiments-with-a-b-testing.md).\n\n## Prerequisites\n\nTo follow this walkthrough, you must have a Windows Dev Center account and you must configure your development computer as described in [Run app experiments with A/B testing](run-app-experiments-with-a-b-testing.md).\n\n## Create the experiment in Windows Dev Center\n\n1. Sign in to the [Dev Center dashboard](https://dev.windows.com/overview).\n2. If you already have an app in Dev Center that you want to use to create an experiment, under **Your apps**, select the app. If you do not yet have an app in your dashboard, [create a new app by reserving a name](../publish/create-your-app-by-reserving-a-name.md) and then select that app in your dashboard.\n3. In the navigation pane, click **Services** and then click **Experimentation**.\n4. In the **API keys** section, select **New API key** to generate a new API key, and enter the name **My First Experiment** for the API key. You will use this API key in the next section of this walkthrough.\n5. In the **Experiments** section, click **New experiment**. In the **Experiment name** field, type the name **Optimize Button Clicks**.\n6. In the **View event name** field, type the name **userViewedButton**. Later in this walkthrough, you will add code that logs this view event when the main page for your app is initialized and the button is visible to the user.\n7. In the **Goals and conversion events** section, enter the following values:\n  * In the **Goal name** field, type **Increase Button Clicks**.\n  * In the **Conversion event name** field, type the name **userClickedButton**. Later in this walkthrough, you will add code that logs this conversion event in the click event handler for the button.\n  * In the **Objective** field, choose **Maximize**.\n8. In the **Variations and settings** section, click **Add setting** three times. You should now have four rows of empty settings.\n  * In the first row, type **buttonText** for the setting name, type **Grey Button** in the **Variation A** column, and type **Blue Button** in the **Variation B** column.\n  * In the second row, type **r** for the setting name, type **128** in the **Variation A** column, and type **1** in the **Variation B** column.\n  * In the third row, type **g** for the setting name, type **128** in the **Variation A** column, and type **1** in the **Variation B** column.\n  * In the fourth row, type **b** for the setting name, type **128** in the **Variation A** column, and type **255** in the **Variation B** column.  \n9. Confirm that the **Distribute equally** check box is selected so that the variations will be distributed equally to your app.\n10. Click **Save** and then click **Activate**.\n\n> **Important**  After you activate an experiment, you can no longer modify the experiment parameters unless it is a test experiment (you clicked the **Test experiment** check box when you created the experiment). Typically, we recommend that you code the experiment in your app before activating your experiment. For simplicity, in this walkthrough you can activate the experiment now.\n\n## Code the experiment in your app\n\n1. In Visual Studio 2015, create a new Universal Windows Platform project using Visual C#. Name the project **SampleExperiment**.\n2. In Solution Explorer, expand your project node, right-click **References**, and click **Add Reference**.\n3. In **Reference Manager**, expand **Universal Windows** and click **Extensions**.\n4. In the list of SDKs, select the check box next to **Microsoft Store Engagement SDK** and click **OK**.\n5. In **Solution Explorer**, double-click MainPage.xaml to open the designer for the main page in the app.\n6. Drag a **Button** from **Toolbox** to the page.\n7. Double-click the button on the designer to open the code file and add an event handler for the **Click** event.  \n8. Replace the entire contents of the code file with the following code.\n\n  ```CSharp\n  using System;\n  using Windows.UI.Xaml;\n  using Windows.UI.Xaml.Controls;\n  using Windows.UI.Xaml.Media;\n  using System.Threading.Tasks;\n  using Windows.UI;\n  using Windows.UI.Core;\n\n  // Namespace for A/B testing.\n  using Microsoft.Services.Store.Engagement;\n\n  namespace SampleExperiment\n  {  \n    public sealed partial class MainPage : Page\n    {\n        private readonly ExperimentClient experiment;\n        private ExperimentVariation variation;\n\n        // Assign this variable to your API key from Dev Center. The API key\n        // shown below is for example purposes only.\n        private string apiKey = \"F48AC670-4472-4387-AB7D-D65B095153FB\";    \n\n        public MainPage()\n        {\n            this.InitializeComponent();\n\n            // Initialize the ExperimentClient for A/B testing.\n            experiment = new ExperimentClient(apiKey);\n\n            // Because this call is not awaited, execution of the current method\n            // continues before the call is completed.\n            #pragma warning disable CS4014\n            Initialize();\n            #pragma warning restore CS4014\n        }\n\n        private async Task Initialize()\n        {\n            // Get the current cached variation assignment for the experiment.\n            ExperimentVariationResult result = await experiment.GetVariationAsync();\n            variation = result.Variation;\n\n            // Check whether the cached variation assignment needs to be refreshed.\n            // If so, then refresh it.\n            if (result.ErrorCode != EngagementErrorCode.Success || result.Variation.NeedsRefresh)\n            {\n                result = await experiment.RefreshVariationAsync();\n\n                // If the call succeeds, use the new result. Otherwise, use the cached value.\n                if (result.ErrorCode == EngagementErrorCode.Success)\n                {\n                    variation = result.Variation;\n                }\n            }\n\n            // Get settings named \"buttonText\", \"r\", \"g\", and \"b\" from the variation\n            // assignment. If no variation assignment is available, the settings default\n            // to \"Grey button\" for the button text and grey RGB value for the button color.\n            var buttonText = variation.GetString(\"buttonText\", \"Grey Button\");\n            var r = (byte)variation.GetInteger(\"r\", 128);\n            var g = (byte)variation.GetInteger(\"g\", 128);\n            var b = (byte)variation.GetInteger(\"b\", 128);\n\n            // Assign button text and color.\n            await button.Dispatcher.RunAsync(\n                CoreDispatcherPriority.Normal,\n                () =>\n                {\n                    button.Background = new SolidColorBrush(Color.FromArgb(255, r, g, b));\n                    button.Content = buttonText;\n                    button.Visibility = Visibility.Visible;\n                });\n\n            // Log the view event named \"userViewedButton\" to Dev Center.\n            StoreServicesCustomEvents.Log(\"userViewedButton\", variation);\n        }\n\n        private void button_Click(object sender, RoutedEventArgs e)\n        {\n            // Log the conversion event named \"userClickedButton\" to Dev Center.\n            StoreServicesCustomEvents.Log(\"userClickedButton\", variation);\n        }\n     }\n  }\n  ```\n9. In the following line of code, assign the *apiKey* variable to the API key you obtained from the Dev Center dashboard in the previous section. The API key shown below is for example purposes only.\n```CSharp\nprivate string apiKey = \"F48AC670-4472-4387-AB7D-D65B095153FB\";\n```\n10. Save the code file and build the project.\n\n## Run the app to gather experiment data\n\n1. Run the **SampleExperiment** app you created in the previous section.\n2. Confirm that you see either a grey or blue button. Click the button and then close the app.\n3. Repeat the above steps several times on the same computer to confirm that your app shows the same button color.\n\n## Review the results and complete the experiment\n\nWait at least several hours after completing the previous section, and then follow these steps to review the results of your experiment and complete the experiment.\n\n> **Note** As soon as you activate an experiment, Dev Center immediately starts collecting data from any apps that are instrumented to log data for your experiment. However, it can take several hours for experiment data to appear in the dashboard.\n\n1. In Dev Center, return to the **Experimentation** page for your app.\n2. In the **Experiments** section, click the **Active** filter and then click **Optimize Button Clicks** to go to the page for this experiment.\n3. Confirm that the results shown in the **Results summary** and **Results details** sections matches what you expect to see. For more details about these sections, see [Manage your experiment in the Dev Center dashboard](manage-your-experiment.md#review-the-results-of-your-experiment).\n\n  >**Note** Dev Center reports only the first conversion event for each user in a 24-hour time period. If a user triggers multiple conversion events in your app within a 24-hour period, only the first conversion event is reported. This is intended to help prevent a single user with many conversion events from skewing the experiment results for a sample group of users.\n\n4. Now you are ready to end the experiment. In the **Results summary** section, in the **Variation B** column, click **Switch**. This switches all users of your app to the blue button.\n5. Click **OK** to confirm that you want to end the experiment.\n6. Run the **SampleExperiment** app you created in the previous section.\n7. Confirm that you see a blue button. Note that it may take up to two minutes for your app to receive an updated variation assignment.\n\n## Related topics\n\n  * [Define your experiment in the Dev Center dashboard](define-your-experiment-in-the-dev-center-dashboard.md)\n  * [Code your app for experimentation](code-your-experiment-in-your-app.md)\n  * [Manage your experiment in the Dev Center dashboard](manage-your-experiment.md)\n  * [Run app experiments with A/B testing](run-app-experiments-with-a-b-testing.md)\n"}