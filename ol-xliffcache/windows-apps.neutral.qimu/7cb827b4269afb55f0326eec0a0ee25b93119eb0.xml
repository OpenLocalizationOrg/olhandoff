{"nodes":[{"content":"Learn how to catch AdControl errors in your app.","pos":[86,134]},{"content":"Error handling in XAML/C# walkthrough","pos":[142,179]},{"content":"Error handling in XAML/C# walkthrough","pos":[188,225]},{"content":"Updated for UWP apps on Windows 10.","pos":[231,266]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[267,359]},{"pos":[364,527],"content":"This topic demonstrates how to catch <bpt id=\"p1\">[</bpt>AdControl<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/microsoft.advertising.winrt.ui.adcontrol.aspx)</ept> errors in your app."},{"content":"These examples assume that you have a XAML/C# app that contains an <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept>.","pos":[529,610]},{"content":"For step-by-step instructions that demonstrate how to add an <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept> to your app, see <bpt id=\"p2\">[</bpt>AdControl in XAML and .NET<ept id=\"p2\">](adcontrol-in-xaml-and--net.md)</ept>.","pos":[611,763]},{"content":"For a complete sample project that demonstrates how to add banner ads to a XAML app using C# and C++, see the <bpt id=\"p1\">[</bpt>advertising samples on GitHub<ept id=\"p1\">](http://aka.ms/githubads)</ept>.","pos":[764,931]},{"content":"In your MainPage.xaml file, locate the definition for the <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept>.","pos":[937,1009]},{"content":"That code looks like this.","pos":[1010,1036]},{"content":"After the <bpt id=\"p1\">**</bpt>Width<ept id=\"p1\">**</ept> property, but before the closing tag, assign a name of an error event handler to the <bpt id=\"p2\">[</bpt>ErrorOccurred<ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/microsoft.advertising.winrt.ui.adcontrol.erroroccurred.aspx)</ept> event.","pos":[1305,1541]},{"content":"In this walkthrough, the name of the error event handler is <bpt id=\"p1\">**</bpt>OnAdError<ept id=\"p1\">**</ept>.","pos":[1542,1616]},{"pos":[1676,1746],"content":"The complete XAML code that defines the <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept> looks like this."},{"content":"To generate an error at runtime, create a second <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept> with a different application ID.","pos":[2046,2141]},{"content":"Because all <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept> objects in an app must use the same application ID, creating an additional <bpt id=\"p2\">**</bpt>AdControl<ept id=\"p2\">**</ept> with a different application id will throw an error.","pos":[2142,2309]},{"pos":[2315,2558],"content":"Define a second <bpt id=\"p1\">**</bpt>AdControl<ept id=\"p1\">**</ept> in MainPage.xaml just after the first <bpt id=\"p2\">**</bpt>AdControl<ept id=\"p2\">**</ept>, and set the <bpt id=\"p3\">[</bpt>ApplicationId<ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/microsoft.advertising.winrt.ui.adcontrol.applicationid.aspx)</ept> property to zero (“0”)."},{"content":"In MainPage.xaml.cs, add the following <bpt id=\"p1\">**</bpt>OnAdError<ept id=\"p1\">**</ept> event handler to the <bpt id=\"p2\">**</bpt>MainPage<ept id=\"p2\">**</ept> class.","pos":[2817,2910]},{"content":"This event handler writes information to the Visual Studio <bpt id=\"p1\">**</bpt>Output<ept id=\"p1\">**</ept> window.","pos":[2911,2988]},{"content":"Build and run the project.","pos":[3244,3270]},{"pos":[3272,3388],"content":"After the app is running, you will see a message similar to the one below in the <bpt id=\"p1\">**</bpt>Output<ept id=\"p1\">**</ept> window of Visual Studio."},{"content":"Related topics","pos":[3620,3634]},{"content":"Advertising samples on GitHub","pos":[3639,3668]}],"content":"---\nauthor: mcleanbyron\nms.assetid: cf0d2709-21a1-4d56-9341-d4897e405f5d\ndescription: Learn how to catch AdControl errors in your app.\ntitle: Error handling in XAML/C# walkthrough\n\n---\n\n# Error handling in XAML/C# walkthrough\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nThis topic demonstrates how to catch [AdControl](https://msdn.microsoft.com/library/windows/apps/microsoft.advertising.winrt.ui.adcontrol.aspx) errors in your app.\n\nThese examples assume that you have a XAML/C# app that contains an **AdControl**. For step-by-step instructions that demonstrate how to add an **AdControl** to your app, see [AdControl in XAML and .NET](adcontrol-in-xaml-and--net.md). For a complete sample project that demonstrates how to add banner ads to a XAML app using C# and C++, see the [advertising samples on GitHub](http://aka.ms/githubads).\n\n1.  In your MainPage.xaml file, locate the definition for the **AdControl**. That code looks like this.\n\n    ``` syntax\n    <UI:AdControl\n       ApplicationId=\"3f83fe91-d6be-434d-a0ae-7351c5a997f1\"\n       AdUnitId=\"10865270\"\n       HorizontalAlignment=\"Left\"\n       Height=\"250\"\n       Margin=\"10,10,0,0\"\n       VerticalAlignment=\"Top\"\n       Width=\"300\" />\n    ```\n\n2.   After the **Width** property, but before the closing tag, assign a name of an error event handler to the [ErrorOccurred](https://msdn.microsoft.com/library/windows/apps/microsoft.advertising.winrt.ui.adcontrol.erroroccurred.aspx) event. In this walkthrough, the name of the error event handler is **OnAdError**.\n\n    ``` syntax\n    ErrorOccurred=\"OnAdError\"\n    ```\n\n    The complete XAML code that defines the **AdControl** looks like this.\n\n    ``` syntax\n    <UI:AdControl\n       ApplicationId=\"3f83fe91-d6be-434d-a0ae-7351c5a997f1\"\n       AdUnitId=\"10865270\"\n       HorizontalAlignment=\"Left\"\n       Height=\"250\"\n       Margin=\"10,10,0,0\"\n       VerticalAlignment=\"Top\"\n       Width=\"300\"\n       ErrorOccurred=\"OnAdError\"/>\n    ```\n\n2.  To generate an error at runtime, create a second **AdControl** with a different application ID. Because all **AdControl** objects in an app must use the same application ID, creating an additional **AdControl** with a different application id will throw an error.\n\n    Define a second **AdControl** in MainPage.xaml just after the first **AdControl**, and set the [ApplicationId](https://msdn.microsoft.com/library/windows/apps/microsoft.advertising.winrt.ui.adcontrol.applicationid.aspx) property to zero (“0”).\n\n    ``` syntax\n    <UI:AdControl\n      ApplicationId=\"0\"\n      AdUnitId=\"10865270\"\n      HorizontalAlignment=\"Left\"\n      Height=\"250\"\n      Margin=\"10,265,0,0\"\n      VerticalAlignment=\"Top\"\n      Width=\"300\"\n      ErrorOccurred=\"OnAdError\" />\n    ```\n\n3.  In MainPage.xaml.cs, add the following **OnAdError** event handler to the **MainPage** class. This event handler writes information to the Visual Studio **Output** window.\n\n    ``` syntax\n    private void OnAdError(object sender, AdErrorEventArgs e)\n    {\n        System.Diagnostics.Debug.WriteLine(\"AdControl error (\" + ((AdControl)sender).Name + \"): \" + e.Error + \" ErrorCode: \" + e.ErrorCode.ToString());\n    }\n    ```\n\n4.  Build and run the project.\n\nAfter the app is running, you will see a message similar to the one below in the **Output** window of Visual Studio.\n\n``` syntax\nAdControl error (): MicrosoftAdvertising.Shared.AdException: all ad requests must use the same application ID within a single application (0, d25517cb-12d4-4699-8bdc-52040c712cab) ErrorCode: ClientConfiguration\n```\n\n## Related topics\n\n* [Advertising samples on GitHub](http://aka.ms/githubads)\n\n \n"}