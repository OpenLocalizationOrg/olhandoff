{"nodes":[{"content":"This article describes how to send a local tile notification to a primary tile and a secondary tile using adaptive tile templates.","pos":[34,164]},{"content":"Send a local tile notification","pos":[172,202]},{"content":"Send a local tile notification","pos":[291,321]},{"content":"Primary app tiles in Windows 10 are defined in your app manifest, while secondary tiles are programmatically created and defined by your app code.","pos":[327,473]},{"content":"This article describes how to send a local tile notification to a primary tile and a secondary tile using adaptive tile templates.","pos":[474,604]},{"content":"(A local notification is one that's sent from app code as opposed to one that's pushed or pulled from a web server.)","pos":[605,721]},{"content":"default tile and tile with notification","pos":[725,764]},{"pos":[801,986],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>   Learn about <bpt id=\"p2\">[</bpt>creating adaptive tiles<ept id=\"p2\">](tiles-and-notifications-create-adaptive-tiles.md)</ept> and <bpt id=\"p3\">[</bpt>adaptive tile template schema<ept id=\"p3\">](tiles-and-notifications-adaptive-tiles-schema.md)</ept>."},{"pos":[1126,1151],"content":"Install the NuGet package"},{"pos":[1154,1370],"content":"We recommend installing the <bpt id=\"p1\">[</bpt>NotificationsExtensions NuGet package<ept id=\"p1\">](https://www.nuget.org/packages/NotificationsExtensions.Win10/)</ept>, which simplifies things by generating tile payloads with objects instead of raw XML."},{"content":"The inline code examples in this article are for C# with the <bpt id=\"p1\">[</bpt>NotificationsExtensions<ept id=\"p1\">](https://github.com/WindowsNotifications/NotificationsExtensions/wiki)</ept> NuGet package installed.","pos":[1372,1553]},{"content":"(If you'd prefer to create your own XML, you can find code examples without <bpt id=\"p1\">[</bpt>NotificationsExtensions<ept id=\"p1\">](https://github.com/WindowsNotifications/NotificationsExtensions/wiki)</ept> toward the end of the article.)","pos":[1554,1757]},{"pos":[1897,1923],"content":"Add namespace declarations"},{"content":"To access the tile APIs, include the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.UI.Notifications<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br208661)</ept> namespace.","pos":[1926,2062]},{"content":"We also recommend including the <bpt id=\"p1\">**</bpt>NotificationsExtensions.Tiles<ept id=\"p1\">**</ept> namespace so that you can take advantage of our tile helper APIs (you must install the <bpt id=\"p2\">[</bpt>NotificationsExtensions<ept id=\"p2\">](https://github.com/WindowsNotifications/NotificationsExtensions/wiki)</ept> NuGet package to access these APIs).","pos":[2063,2348]},{"pos":[2614,2645],"content":"Create the notification content"},{"content":"In Windows 10, tile payloads are defined using adaptive tile templates, which allow you to create custom visual layouts for your notifications.","pos":[2648,2791]},{"content":"(To learn what's possible with adaptive tiles, see the <bpt id=\"p1\">[</bpt>Create adaptive tiles<ept id=\"p1\">](tiles-and-notifications-create-adaptive-tiles.md)</ept> and <bpt id=\"p2\">[</bpt>Adaptive tile templates<ept id=\"p2\">](tiles-and-notifications-adaptive-tiles-schema.md)</ept> articles.)","pos":[2792,3011]},{"content":"This code example creates adaptive tile content for medium and wide tiles.","pos":[3013,3087]},{"content":"The notification content looks like the following when displayed on a medium tile:","pos":[4851,4933]},{"content":"notification content on a medium tile","pos":[4937,4974]},{"pos":[5140,5163],"content":"Create the notification"},{"content":"Once you have your notification content, you'll need to create a new <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>TileNotification<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br208616)</ept>.","pos":[5166,5316]},{"content":"The <bpt id=\"p1\">**</bpt>TileNotification<ept id=\"p1\">**</ept> constructor takes a Windows Runtime <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>XmlDocument<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/br208620)</ept> object, which you can obtain from the <bpt id=\"p4\">**</bpt>TileContent.GetXml<ept id=\"p4\">**</ept> method if you're using <bpt id=\"p5\">[</bpt>NotificationsExtensions<ept id=\"p5\">](https://github.com/WindowsNotifications/NotificationsExtensions/wiki)</ept>.","pos":[5317,5634]},{"content":"This code example creates a notification for a new tile.","pos":[5636,5692]},{"pos":[6016,6070],"content":"Set an expiration time for the notification (optional)"},{"content":"By default, local tile and badge notifications don't expire, while push, periodic, and scheduled notifications expire after three days.","pos":[6073,6208]},{"content":"Because tile content shouldn't persist longer than necessary, it's a best practice to set an expiration time that makes sense for your app, especially on local tile and badge notifications.","pos":[6209,6398]},{"content":"This code example creates a notification that expires and will be removed from the tile after ten minutes.","pos":[6400,6506]},{"pos":[6754,6775],"content":"Send the notification"},{"content":"Although locally sending a tile notification is simple, sending the notification to a primary or secondary tile is a bit different.","pos":[6778,6909]},{"content":"Primary tile","pos":[6913,6925]},{"content":"To send a notification to a primary tile, use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>TileUpdateManager<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br208622)</ept> to create a tile updater for the primary tile, and send the notification by calling \"Update\".","pos":[6929,7154]},{"content":"Regardless of whether it's visible, your app's primary tile always exists, so you can send notifications to it even when it's not pinned.","pos":[7155,7292]},{"content":"If the user pins your primary tile later, the notifications that you sent will appear then.","pos":[7293,7384]},{"content":"This code example sends a notification to a primary tile.","pos":[7386,7443]},{"content":"Secondary tile","pos":[7658,7672]},{"content":"To send a notification to a secondary tile, first make sure that the secondary tile exists.","pos":[7676,7767]},{"content":"If you try to create a tile updater for a secondary tile that doesn't exist (for example, if the user unpinned the secondary tile), an exception will be thrown.","pos":[7768,7928]},{"content":"You can use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SecondaryTile.Exists<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242205)</ept>(tileId) to discover if your secondary tile is pinned, and then create a tile updater for the secondary tile and send the notification.","pos":[7929,8160]},{"content":"This code example sends a notification to a secondary tile.","pos":[8162,8221]},{"content":"default tile and tile with notification","pos":[8500,8539]},{"pos":[8762,8804],"content":"Clear notifications on the tile (optional)"},{"content":"In most cases, you should clear a notification once the user has interacted with that content.","pos":[8807,8901]},{"content":"For example, when the user launches your app, you might want to clear all the notifications from the tile.","pos":[8902,9008]},{"content":"If your notifications are time-bound, we recommend that you set an expiration time on the notification instead of explicitly clearing the notification.","pos":[9009,9160]},{"content":"This code example clears the tile notification.","pos":[9162,9209]},{"content":"For a tile with the notification queue enabled and notifications in the queue, calling the Clear method empties the queue.","pos":[9323,9445]},{"content":"You can't, however, clear a notification via your app's server; only the local app code can clear notifications.","pos":[9446,9558]},{"content":"Periodic or push notifications can only add new notifications or replace existing notifications.","pos":[9560,9656]},{"content":"A local call to the Clear method will clear the tile whether or not the notifications themselves came via push, periodic, or local.","pos":[9657,9788]},{"content":"Scheduled notifications that haven't yet appeared are not cleared by this method.","pos":[9789,9870]},{"content":"tile with notification and tile after being cleared","pos":[9874,9925]},{"pos":[10052,10062],"content":"Next steps"},{"content":"Using the notification queue","pos":[10067,10095]},{"pos":[10099,10289],"content":"Now that you have done your first tile update, you can expand the functionality of the tile by enabling a <bpt id=\"p1\">[</bpt>notification queue<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/hh868234)</ept>."},{"content":"Other notification delivery methods","pos":[10293,10328]},{"content":"This article shows you how to send the tile update as a notification.","pos":[10332,10401]},{"content":"To explore other methods of notification delivery, including scheduled, periodic, and push, see <bpt id=\"p1\">[</bpt>Delivering notifications<ept id=\"p1\">](tiles-and-notifications-choosing-a-notification-delivery-method.md)</ept>.","pos":[10402,10593]},{"content":"XmlEncode delivery method","pos":[10597,10622]},{"pos":[10626,10800],"content":"If you're not using <bpt id=\"p1\">[</bpt>NotificationsExtensions<ept id=\"p1\">](https://github.com/WindowsNotifications/NotificationsExtensions/wiki)</ept>, this notification delivery method is another alternative."},{"pos":[11324,11369],"content":"Code examples without NotificationsExtensions"},{"content":"If you prefer to work with raw XML instead of the <bpt id=\"p1\">[</bpt>NotificationsExtensions<ept id=\"p1\">](https://github.com/WindowsNotifications/NotificationsExtensions/wiki)</ept> NuGet package, use these alternate code examples to first three examples provided in this article.","pos":[11372,11616]},{"content":"The rest of the code examples can be used either with <bpt id=\"p1\">[</bpt>NotificationsExtensions<ept id=\"p1\">](https://github.com/WindowsNotifications/NotificationsExtensions/wiki)</ept> or with raw XML.","pos":[11617,11783]},{"content":"Add namespace declarations","pos":[11785,11811]},{"content":"Create the notification content","pos":[11882,11913]},{"content":"Create the notification","pos":[12802,12825]},{"pos":[13055,13069],"content":"Related topics"},{"content":"Create adaptive tiles","pos":[13075,13096]},{"content":"Adaptive tile templates: schema and documentation","pos":[13151,13200]},{"content":"NotificationsExtensions.Win10 (NuGet package)","pos":[13255,13300]},{"content":"NotificationsExtensions on GitHub","pos":[13368,13401]},{"content":"Full code sample on GitHub","pos":[13476,13502]},{"content":"Windows.UI.Notifications namespace","pos":[13586,13620]},{"content":"How to use the notification queue (XAML)","pos":[13685,13725]},{"content":"Delivering notifications","pos":[13793,13817]}],"content":"---\nauthor: mijacobs\nDescription: This article describes how to send a local tile notification to a primary tile and a secondary tile using adaptive tile templates.\ntitle: Send a local tile notification\nms.assetid: D34B0514-AEC6-4C41-B318-F0985B51AF8A\nlabel: TBD\ntemplate: detail.hbs\n---\n\n# Send a local tile notification\n\n\n\n\n\nPrimary app tiles in Windows 10 are defined in your app manifest, while secondary tiles are programmatically created and defined by your app code. This article describes how to send a local tile notification to a primary tile and a secondary tile using adaptive tile templates. (A local notification is one that's sent from app code as opposed to one that's pushed or pulled from a web server.)\n\n![default tile and tile with notification](images/sending-local-tile-01.png)\n\n**Note**   Learn about [creating adaptive tiles](tiles-and-notifications-create-adaptive-tiles.md) and [adaptive tile template schema](tiles-and-notifications-adaptive-tiles-schema.md).\n\n \n\n## <span id=\"Install_the_NuGet_package\"></span><span id=\"install_the_nuget_package\"></span><span id=\"INSTALL_THE_NUGET_PACKAGE\"></span>Install the NuGet package\n\n\nWe recommend installing the [NotificationsExtensions NuGet package](https://www.nuget.org/packages/NotificationsExtensions.Win10/), which simplifies things by generating tile payloads with objects instead of raw XML.\n\nThe inline code examples in this article are for C# with the [NotificationsExtensions](https://github.com/WindowsNotifications/NotificationsExtensions/wiki) NuGet package installed. (If you'd prefer to create your own XML, you can find code examples without [NotificationsExtensions](https://github.com/WindowsNotifications/NotificationsExtensions/wiki) toward the end of the article.)\n\n## <span id=\"Add_namespace_declarations\"></span><span id=\"add_namespace_declarations\"></span><span id=\"ADD_NAMESPACE_DECLARATIONS\"></span>Add namespace declarations\n\n\nTo access the tile APIs, include the [**Windows.UI.Notifications**](https://msdn.microsoft.com/library/windows/apps/br208661) namespace. We also recommend including the **NotificationsExtensions.Tiles** namespace so that you can take advantage of our tile helper APIs (you must install the [NotificationsExtensions](https://github.com/WindowsNotifications/NotificationsExtensions/wiki) NuGet package to access these APIs).\n\n```\nusing Windows.UI.Notifications;\nusing NotificationsExtensions.Tiles; // NotificationsExtensions.Win10\n```\n\n## <span id=\"Create_the_notification_content\"></span><span id=\"create_the_notification_content\"></span><span id=\"CREATE_THE_NOTIFICATION_CONTENT\"></span>Create the notification content\n\n\nIn Windows 10, tile payloads are defined using adaptive tile templates, which allow you to create custom visual layouts for your notifications. (To learn what's possible with adaptive tiles, see the [Create adaptive tiles](tiles-and-notifications-create-adaptive-tiles.md) and [Adaptive tile templates](tiles-and-notifications-adaptive-tiles-schema.md) articles.)\n\nThis code example creates adaptive tile content for medium and wide tiles.\n\n```\n// In a real app, these would be initialized with actual data\nstring from = \"Jennifer Parker\";\nstring subject = \"Photos from our trip\";\nstring body = \"Check out these awesome photos I took while in New Zealand!\";\n \n \n// Construct the tile content\nTileContent content = new TileContent()\n{\n    Visual = new TileVisual()\n    {\n        TileMedium = new TileBinding()\n        {\n            Content = new TileBindingContentAdaptive()\n            {\n                Children =\n                {\n                    new TileText()\n                    {\n                        Text = from\n                    },\n \n                    new TileText()\n                    {\n                        Text = subject,\n                        Style = TileTextStyle.CaptionSubtle\n                    },\n \n                    new TileText()\n                    {\n                        Text = body,\n                        Style = TileTextStyle.CaptionSubtle\n                    }\n                }\n            }\n        },\n \n        TileWide = new TileBinding()\n        {\n            Content = new TileBindingContentAdaptive()\n            {\n                Children =\n                {\n                    new TileText()\n                    {\n                        Text = from,\n                        Style = TileTextStyle.Subtitle\n                    },\n \n                    new TileText()\n                    {\n                        Text = subject,\n                        Style = TileTextStyle.CaptionSubtle\n                    },\n \n                    new TileText()\n                    {\n                        Text = body,\n                        Style = TileTextStyle.CaptionSubtle\n                    }\n                }\n            }\n        }\n    }\n};\n```\n\nThe notification content looks like the following when displayed on a medium tile:\n\n![notification content on a medium tile](images/sending-local-tile-02.png)\n\n## <span id=\"Create_the_notification\"></span><span id=\"create_the_notification\"></span><span id=\"CREATE_THE_NOTIFICATION\"></span>Create the notification\n\n\nOnce you have your notification content, you'll need to create a new [**TileNotification**](https://msdn.microsoft.com/library/windows/apps/br208616). The **TileNotification** constructor takes a Windows Runtime [**XmlDocument**](https://msdn.microsoft.com/library/windows/apps/br208620) object, which you can obtain from the **TileContent.GetXml** method if you're using [NotificationsExtensions](https://github.com/WindowsNotifications/NotificationsExtensions/wiki).\n\nThis code example creates a notification for a new tile.\n\n```\n// Create the tile notification\nvar notification = new TileNotification(content.GetXml());\n```\n\n## <span id=\"Set_an_expiration_time_for_the_notification__optional_\"></span><span id=\"set_an_expiration_time_for_the_notification__optional_\"></span><span id=\"SET_AN_EXPIRATION_TIME_FOR_THE_NOTIFICATION__OPTIONAL_\"></span>Set an expiration time for the notification (optional)\n\n\nBy default, local tile and badge notifications don't expire, while push, periodic, and scheduled notifications expire after three days. Because tile content shouldn't persist longer than necessary, it's a best practice to set an expiration time that makes sense for your app, especially on local tile and badge notifications.\n\nThis code example creates a notification that expires and will be removed from the tile after ten minutes.\n\n```\ntileNotification.ExpirationTime = DateTimeOffset.UtcNow.AddMinutes(10);</code></pre></td>\n</tr>\n</tbody>\n</table>\n```\n\n## <span id=\"Send_the_notification\"></span><span id=\"send_the_notification\"></span><span id=\"SEND_THE_NOTIFICATION\"></span>Send the notification\n\n\nAlthough locally sending a tile notification is simple, sending the notification to a primary or secondary tile is a bit different.\n\n**Primary tile**\n\nTo send a notification to a primary tile, use the [**TileUpdateManager**](https://msdn.microsoft.com/library/windows/apps/br208622) to create a tile updater for the primary tile, and send the notification by calling \"Update\". Regardless of whether it's visible, your app's primary tile always exists, so you can send notifications to it even when it's not pinned. If the user pins your primary tile later, the notifications that you sent will appear then.\n\nThis code example sends a notification to a primary tile.\n\n<span codelanguage=\"\"></span>\n```\n<colgroup>\n<col width=\"100%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n// And send the notification\nTileUpdateManager.CreateTileUpdaterForApplication().Update(notification);\n```\n\n**Secondary tile**\n\nTo send a notification to a secondary tile, first make sure that the secondary tile exists. If you try to create a tile updater for a secondary tile that doesn't exist (for example, if the user unpinned the secondary tile), an exception will be thrown. You can use [**SecondaryTile.Exists**](https://msdn.microsoft.com/library/windows/apps/br242205)(tileId) to discover if your secondary tile is pinned, and then create a tile updater for the secondary tile and send the notification.\n\nThis code example sends a notification to a secondary tile.\n\n```\n// If the secondary tile is pinned\nif (SecondaryTile.Exists(\"MySecondaryTile\"))\n{\n    // Get its updater\n    var updater = TileUpdateManager.CreateTileUpdaterForSecondaryTile(\"MySecondaryTile\");\n \n    // And send the notification\n    updater.Update(notification);\n}\n```\n\n![default tile and tile with notification](images/sending-local-tile-01.png)\n\n## <span id=\"Clear_notifications_on_the_tile__optional_\"></span><span id=\"clear_notifications_on_the_tile__optional_\"></span><span id=\"CLEAR_NOTIFICATIONS_ON_THE_TILE__OPTIONAL_\"></span>Clear notifications on the tile (optional)\n\n\nIn most cases, you should clear a notification once the user has interacted with that content. For example, when the user launches your app, you might want to clear all the notifications from the tile. If your notifications are time-bound, we recommend that you set an expiration time on the notification instead of explicitly clearing the notification.\n\nThis code example clears the tile notification.\n\n```\nTileUpdateManager.CreateTileUpdaterForApplication().Clear();</code></pre></td>\n</tr>\n</tbody>\n</table>\n```\n\nFor a tile with the notification queue enabled and notifications in the queue, calling the Clear method empties the queue. You can't, however, clear a notification via your app's server; only the local app code can clear notifications.\n\nPeriodic or push notifications can only add new notifications or replace existing notifications. A local call to the Clear method will clear the tile whether or not the notifications themselves came via push, periodic, or local. Scheduled notifications that haven't yet appeared are not cleared by this method.\n\n![tile with notification and tile after being cleared](images/sending-local-tile-03.png)\n\n## <span id=\"Next_steps\"></span><span id=\"next_steps\"></span><span id=\"NEXT_STEPS\"></span>Next steps\n\n\n**Using the notification queue**\n\nNow that you have done your first tile update, you can expand the functionality of the tile by enabling a [notification queue](https://msdn.microsoft.com/library/windows/apps/xaml/hh868234).\n\n**Other notification delivery methods**\n\nThis article shows you how to send the tile update as a notification. To explore other methods of notification delivery, including scheduled, periodic, and push, see [Delivering notifications](tiles-and-notifications-choosing-a-notification-delivery-method.md).\n\n**XmlEncode delivery method**\n\nIf you're not using [NotificationsExtensions](https://github.com/WindowsNotifications/NotificationsExtensions/wiki), this notification delivery method is another alternative.\n\n<span codelanguage=\"\"></span>\n```\n<colgroup>\n<col width=\"100%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\npublic string XmlEncode(string text)\n{\n    StringBuilder builder = new StringBuilder();\n    using (var writer = XmlWriter.Create(builder))\n    {\n        writer.WriteString(text);\n    }\n\n    return builder.ToString();\n}\n```\n\n## <span id=\"Code_examples_without_NotificationsExtensions\"></span><span id=\"code_examples_without_notificationsextensions\"></span><span id=\"CODE_EXAMPLES_WITHOUT_NOTIFICATIONSEXTENSIONS\"></span>Code examples without NotificationsExtensions\n\n\nIf you prefer to work with raw XML instead of the [NotificationsExtensions](https://github.com/WindowsNotifications/NotificationsExtensions/wiki) NuGet package, use these alternate code examples to first three examples provided in this article. The rest of the code examples can be used either with [NotificationsExtensions](https://github.com/WindowsNotifications/NotificationsExtensions/wiki) or with raw XML.\n\nAdd namespace declarations\n\n```\nusing Windows.UI.Notifications;\nusing Windows.Data.Xml.Dom;\n```\n\nCreate the notification content\n\n```\n// In a real app, these would be initialized with actual data\nstring from = \"Jennifer Parker\";\nstring subject = \"Photos from our trip\";\nstring body = \"Check out these awesome photos I took while in New Zealand!\";\n \n \n// TODO - all values need to be XML escaped\n \n \n// Construct the tile content as a string\nstring content = $@\"\n<tile>\n    <visual>\n \n        <binding template=&#39;TileMedium&#39;>\n            <text>{from}</text>\n            <text hint-style=&#39;captionSubtle&#39;>{subject}</text>\n            <text hint-style=&#39;captionSubtle&#39;>{body}</text>\n        </binding>\n \n        <binding template=&#39;TileWide&#39;>\n            <text hint-style=&#39;subtitle&#39;>{from}</text>\n            <text hint-style=&#39;captionSubtle&#39;>{subject}</text>\n            <text hint-style=&#39;captionSubtle&#39;>{body}</text>\n        </binding>\n \n    </visual>\n</tile>\";\n```\n\nCreate the notification\n\n```\n// Load the string into an XmlDocument\nXmlDocument doc = new XmlDocument();\ndoc.LoadXml(content);\n \n// Then create the tile notification\nvar notification = new TileNotification(doc);\n```\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n* [Create adaptive tiles](tiles-and-notifications-create-adaptive-tiles.md)\n* [Adaptive tile templates: schema and documentation](tiles-and-notifications-adaptive-tiles-schema.md)\n* [NotificationsExtensions.Win10 (NuGet package)](https://www.nuget.org/packages/NotificationsExtensions.Win10/)\n* [NotificationsExtensions on GitHub](https://github.com/WindowsNotifications/NotificationsExtensions/wiki)\n* [Full code sample on GitHub](https://github.com/WindowsNotifications/quickstart-sending-local-tile-win10)\n* [**Windows.UI.Notifications namespace**](https://msdn.microsoft.com/library/windows/apps/br208661)\n* [How to use the notification queue (XAML)](https://msdn.microsoft.com/library/windows/apps/xaml/hh868234)\n* [Delivering notifications](tiles-and-notifications-choosing-a-notification-delivery-method.md)\n \n\n \n\n\n\n\n"}