{"nodes":[{"content":"Build Universal Windows Platform (UWP) apps that support custom interactions from pen and stylus devices, including digital ink for natural writing and drawing experiences.","pos":[47,219]},{"content":"Pen and stylus interactions in UWP apps","pos":[227,266]},{"content":"Pen and stylus interactions in UWP apps","pos":[464,503]},{"pos":[505,739],"content":"Optimize your Universal Windows Platform (UWP) app for pen input to provide both standard <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>pointer device<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br225633)</ept> functionality and the best Windows Ink experience for your users."},{"content":"Note: This topic focuses on the Windows Ink platform.","pos":[743,796]},{"content":"See <bpt id=\"p1\">[</bpt>Handle pointer input<ept id=\"p1\">](handle-pointer-input.md)</ept> for general pointer input handling (similar to mouse, touch, and touchpad).","pos":[797,924]},{"content":"touchpad","pos":[928,936]},{"content":"Important APIs","pos":[978,992]},{"content":"Windows.Devices.Input","pos":[1003,1024]},{"content":"Windows.UI.Input.Inking","pos":[1093,1116]},{"content":"Windows.UI.Input.Inking.Core","pos":[1185,1213]},{"content":"The Windows Ink platform, together with a pen device, provides a natural way to create digital handwritten notes, drawings, and annotations.","pos":[1276,1416]},{"content":"The platform supports capturing digitizer input as ink data, generating ink data, managing ink data, rendering ink data as ink strokes on the output device, and converting ink to text through handwriting recognition.","pos":[1417,1633]},{"content":"In addition to capturing the basic position and movement of the pen as the user writes or draws, your app can also track and collect the varying amounts of pressure used throughout a stroke.","pos":[1635,1825]},{"content":"This information, along with settings for pen tip shape, size, and rotation, ink color, and purpose (plain ink, erasing, highlighting, and selecting), enables you to provide user experiences that closely resemble writing or drawing on paper with a pen, pencil, or brush.","pos":[1826,2096]},{"pos":[2098,2223],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  Your app can also support ink input from other pointer-based devices, including touch digitizers and mouse devices."},{"content":"The ink platform is very flexible.","pos":[2226,2260]},{"content":"It is designed to support various levels of functionality, depending on your requirements.","pos":[2261,2351]},{"content":"There are three components to the ink platform:","pos":[2353,2400]},{"pos":[2406,2613],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> - A XAML UI platform control that, by default, receives and displays all input from a pen as either an ink stroke or an erase stroke."},{"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn922011)</ept> - A code-behind object, instantiated along with an <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkCanvas<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> control (exposed through the <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>InkCanvas.InkPresenter<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept> property).","pos":[2619,2947]},{"content":"This object provides all default inking functionality exposed by the <bpt id=\"p1\">**</bpt>InkCanvas<ept id=\"p1\">**</ept>, along with a comprehensive set of APIs for additional customization and personalization.","pos":[2948,3120]},{"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>IInkD2DRenderer<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/mt147263)</ept> - Enables the rendering of ink strokes onto the designated Direct2D device context of a Universal Windows app, instead of the default <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkCanvas<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> control.","pos":[3126,3409]},{"content":"This enables full customization of the inking experience.","pos":[3410,3467]},{"pos":[3528,3555],"content":"Basic inking with InkCanvas"},{"pos":[3558,3697],"content":"For basic inking functionality, just place an <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> anywhere on a page."},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> supports ink input only from a pen.","pos":[3699,3812]},{"content":"The input is either rendered as an ink stroke using default settings for color and thickness, or treated as a stroke eraser (when input is from an eraser tip or the pen tip modified with an erase button).","pos":[3813,4017]},{"pos":[4019,4141],"content":"In this example, an <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> overlays a background image."},{"pos":[4780,4924],"content":"This series of images shows how pen input is rendered by this <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> control."},{"content":"The blank InkCanvas with a background image","pos":[4930,4973]},{"content":"The InkCanvas with ink strokes","pos":[5009,5039]},{"content":"The InkCanvas with one stroke erased","pos":[5075,5111]},{"pos":[5166,5274],"content":"The blank <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> with a background image."},{"pos":[5277,5372],"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> with ink strokes."},{"pos":[5375,5537],"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> with one stroke erased (note how erase operates on an entire stroke, not a portion)."},{"pos":[5541,5789],"content":"The inking functionality supported by the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> control is provided by a code-behind object called the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkPresenter<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn922011)</ept>."},{"content":"For basic inking, you don't have to concern yourself with the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn922011)</ept>.","pos":[5791,5930]},{"content":"However, to customize and configure inking behavior on the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept>, you must access its corresponding <bpt id=\"p3\">**</bpt>InkPresenter<ept id=\"p3\">**</ept> object.","pos":[5931,6123]},{"pos":[6190,6227],"content":"Basic customization with InkPresenter"},{"pos":[6230,6425],"content":"An <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn922011)</ept> object is instantiated with each <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkCanvas<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> control."},{"content":"Along with providing all default inking behaviors of its corresponding <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> control, the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkPresenter<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn922011)</ept> provides a comprehensive set of APIs for additional stroke customization.","pos":[6427,6735]},{"content":"This includes stroke properties, supported input device types, and whether input is processed by the object or passed to the app.","pos":[6736,6865]},{"content":"Note","pos":[6869,6873]},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn922011)</ept> cannot be instantiated directly.","pos":[6878,6991]},{"content":"Instead, it is accessed through the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept> property of the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkCanvas<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept>.","pos":[6992,7195]},{"content":"Here, we configure the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept> to interpret input data from both pen and mouse as ink strokes.","pos":[7200,7363]},{"content":"We also set some initial ink stroke attributes used for rendering strokes to the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept>.","pos":[7364,7519]},{"content":"Ink stroke attributes can be set dynamically to accommodate user preferences or app requirements.","pos":[8120,8217]},{"content":"Here, we let a user choose from a list of ink colors.","pos":[8219,8272]},{"content":"We then handle changes to the selected color and update the ink stroke attributes accordingly.","pos":[9425,9519]},{"pos":[10364,10509],"content":"These images shows how pen input is processed and customized by the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept>."},{"content":"the inkcanvas with default black ink strokes","pos":[10515,10559]},{"content":"the inkcanvas with user selected red ink strokes","pos":[10602,10650]},{"pos":[10706,10815],"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> with default black ink strokes."},{"pos":[10818,10931],"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> with user selected red ink strokes."},{"pos":[10938,11192],"content":"To provide functionality beyond inking and erasing, such as stroke selection, your app must identify specific input for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept> to pass through unprocessed for handling by your app."},{"pos":[11257,11299],"content":"Pass-through input for advanced processing"},{"content":"By default, <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept> processes all input as either an ink stroke or an erase stroke.","pos":[11302,11454]},{"content":"This includes input modified by a secondary hardware affordance such as a pen barrel button, a right mouse button, or similar.","pos":[11455,11581]},{"content":"When using these secondary affordances, users typically expect some additional functionality or a modified behavior.","pos":[11583,11699]},{"content":"In some cases, you might need to expose basic ink functionality for pens without secondary affordances (functionality not usually associated with the pen tip), other input device types, or additional functionality, or modified behavior, based on a user selection in your app's UI.","pos":[11701,11981]},{"content":"To support this, <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept> can be configured to leave specific input unprocessed.","pos":[11983,12131]},{"content":"This unprocessed input is then passed through to your app for processing.","pos":[12132,12205]},{"content":"The following code example steps through how to enable stroke selection when input is modified with a pen barrel button (or right mouse button).","pos":[12207,12351]},{"content":"For this example, we use the MainPage.xaml and MainPage.xaml.cs files to host all code.","pos":[12353,12440]},{"content":"First, we set up the UI in MainPage.xaml.","pos":[12446,12487]},{"content":"Here, we add a canvas (below the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept>) to draw the selection stroke.","pos":[12493,12630]},{"content":"Using a separate layer to draw the selection stroke leaves the <bpt id=\"p1\">**</bpt>InkCanvas<ept id=\"p1\">**</ept> and its content untouched.","pos":[12631,12734]},{"content":"the blank inkcanvas with an underlying selection canvas","pos":[12742,12797]},{"content":"In MainPage.xaml.cs, we declare a couple of global variables for keeping references to aspects of the selection UI.","pos":[13679,13794]},{"content":"Specifically, the selection lasso stroke and the bounding rectangle that highlights the selected strokes.","pos":[13795,13900]},{"pos":[14039,14354],"content":"Next, we configure the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkPresenter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept> to interpret input data from both pen and mouse as ink strokes, and set some initial ink stroke attributes used for rendering strokes to the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkCanvas<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept>."},{"content":"Most importantly, we use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InputProcessingConfiguration<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn948764)</ept> property of the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkPresenter<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept> to indicate that any modified input should be processed by the app.","pos":[14360,14642]},{"content":"Modified input is specified by assigning <bpt id=\"p1\">**</bpt>InputProcessingConfiguration.RightDragAction<ept id=\"p1\">**</ept> a value of <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>InkInputRightDragAction.LeaveUnprocessed<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/dn948760)</ept>.","pos":[14643,14849]},{"content":"We then assign listeners for the unprocessed <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>PointerPressed<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn914712)</ept>, <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>PointerMoved<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn914711)</ept>, and <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>PointerReleased<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/dn914713)</ept> events passed through by the <bpt id=\"p7\">[</bpt><bpt id=\"p8\">**</bpt>InkPresenter<ept id=\"p8\">**</ept><ept id=\"p7\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept>.","pos":[14855,15248]},{"content":"All selection functionality is implemented in the handlers for these events.","pos":[15249,15325]},{"content":"Finally, we assign listeners for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>StrokeStarted<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn914702)</ept> and <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>StrokesErased<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn948767)</ept> events of the <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>InkPresenter<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept>.","pos":[15331,15619]},{"content":"We use the handlers for these events to clean up the selection UI if a new stroke is started or an existing stroke is erased.","pos":[15620,15745]},{"content":"the inkcanvas with default black ink strokes","pos":[15753,15797]},{"pos":[17762,18154],"content":"We then define handlers for the unprocessed <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>PointerPressed<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn914712)</ept>, <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>PointerMoved<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn914711)</ept>, and <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>PointerReleased<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/dn914713)</ept> events passed through by the <bpt id=\"p7\">[</bpt><bpt id=\"p8\">**</bpt>InkPresenter<ept id=\"p8\">**</ept><ept id=\"p7\">](https://msdn.microsoft.com/library/windows/apps/dn899081)</ept>."},{"content":"All selection functionality is implemented in these handlers, including the lasso stroke and the bounding rectangle.","pos":[18160,18276]},{"content":"the selection lasso","pos":[18284,18303]},{"content":"To conclude the PointerReleased event handler, we clear the selection layer of all content (the lasso stroke) and then draw a single bounding rectangle around the ink strokes encompassed by the lasso area.","pos":[19798,20003]},{"content":"the selection bounding rect","pos":[20011,20038]},{"pos":[21114,21330],"content":"Finally, we define handlers for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>StrokeStarted<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn914702)</ept> and <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>StrokesErased<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn948767)</ept> InkPresenter events."},{"content":"These both just call the same cleanup function to clear the current selection whenever a new stroke is detected.","pos":[21336,21448]},{"content":"Here's the function to remove all selection UI from the selection canvas when a new stroke is started or an existing stroke is erased.","pos":[21830,21964]},{"pos":[22537,22557],"content":"Custom ink rendering"},{"content":"By default, ink input is processed on a low-latency background thread and rendered \"wet\" as it is drawn.","pos":[22560,22664]},{"content":"When the stroke is completed (pen or finger lifted, or mouse button released), the stroke is processed on the UI thread and rendered \"dry\" to the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>InkCanvas<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> layer (above the application content and replacing the wet ink).","pos":[22665,22949]},{"content":"The ink platform enables you to override this behavior and completely customize the inking experience by custom drying the ink input.","pos":[22951,23084]},{"pos":[23086,23391],"content":"Custom drying requires an <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>IInkD2DRenderer<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/mt147263)</ept> object to manage the ink input and render it to the Direct2D device context of your Universal Windows app, instead of the default <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkCanvas<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> control."},{"content":"By calling <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ActivateCustomDrying<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn922012)</ept> (before the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>InkCanvas<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn858535)</ept> is loaded), an app creates an <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>InkSynchronizer<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/dn903979)</ept> object to customize how an ink stroke is rendered dry to a <bpt id=\"p7\">[</bpt><bpt id=\"p8\">**</bpt>SurfaceImageSource<ept id=\"p8\">**</ept><ept id=\"p7\">](https://msdn.microsoft.com/library/windows/apps/hh702041)</ept> or <bpt id=\"p9\">[</bpt><bpt id=\"p10\">**</bpt>VirtualSurfaceImageSource<ept id=\"p10\">**</ept><ept id=\"p9\">](https://msdn.microsoft.com/library/windows/apps/hh702050)</ept>.","pos":[23393,23920]},{"content":"For example, an ink stroke could be rasterized and integrated into application content instead of as a separate <bpt id=\"p1\">**</bpt>InkCanvas<ept id=\"p1\">**</ept> layer.","pos":[23921,24053]},{"pos":[24055,24176],"content":"For a full example of this functionality, see the <bpt id=\"p1\">[</bpt>Complex ink sample<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkID=620314)</ept> ."},{"content":"Other articles in this section","pos":[24182,24212]},{"content":"Topic","pos":[24330,24335]},{"content":"Description","pos":[24358,24369]},{"content":"Recognize ink strokes","pos":[24436,24457]},{"content":"Convert ink strokes to text using handwriting recognition, or to shapes using custom recognition.","pos":[24512,24609]},{"content":"Store and retrieve ink strokes","pos":[24664,24694]},{"content":"Store ink stroke data in a Graphics Interchange Format (GIF) file using embedded Ink Serialized Format (ISF) metadata.","pos":[24747,24865]},{"pos":[24940,24956],"content":"Related articles"},{"content":"Handle pointer input","pos":[24962,24982]},{"content":"Identify input devices","pos":[25012,25034]},{"content":"Samples","pos":[25066,25073]},{"content":"Ink sample","pos":[25079,25089]},{"content":"Simple ink sample","pos":[25143,25160]},{"content":"Complex ink sample","pos":[25214,25232]},{"content":"Basic input sample","pos":[25286,25304]},{"content":"Low latency input sample","pos":[25358,25382]},{"content":"User interaction mode sample","pos":[25436,25464]},{"content":"Focus visuals sample","pos":[25518,25538]},{"content":"Archive Samples","pos":[25592,25607]},{"content":"Input: Device capabilities sample","pos":[25613,25646]},{"content":"Input: XAML user input events sample","pos":[25700,25736]},{"content":"XAML scrolling, panning, and zooming sample","pos":[25790,25833]},{"content":"Input: Gestures and manipulations with GestureRecognizer","pos":[25887,25943]}],"content":"---\nauthor: Karl-Bridge-Microsoft\nDescription: Build Universal Windows Platform (UWP) apps that support custom interactions from pen and stylus devices, including digital ink for natural writing and drawing experiences.\ntitle: Pen and stylus interactions in UWP apps\nms.assetid: 3DA4F2D2-5405-42A1-9ED9-3A87BCD84C43\nlabel: Pen and stylus interactions in UWP apps\ntemplate: detail.hbs\nkeyword: Windows Ink, Windows Inking, DirectInk, InkPresenter, InkCanvas\n---\n\n# Pen and stylus interactions in UWP apps\n\nOptimize your Universal Windows Platform (UWP) app for pen input to provide both standard [**pointer device**](https://msdn.microsoft.com/library/windows/apps/br225633) functionality and the best Windows Ink experience for your users.\n\n> Note: This topic focuses on the Windows Ink platform. See [Handle pointer input](handle-pointer-input.md) for general pointer input handling (similar to mouse, touch, and touchpad).\n\n![touchpad](images/input-patterns/input-pen.jpg)\n\n**Important APIs**\n\n-   [**Windows.Devices.Input**](https://msdn.microsoft.com/library/windows/apps/br225648)\n-   [**Windows.UI.Input.Inking**](https://msdn.microsoft.com/library/windows/apps/br208524)\n-   [**Windows.UI.Input.Inking.Core**](https://msdn.microsoft.com/library/windows/apps/dn958452)\n\nThe Windows Ink platform, together with a pen device, provides a natural way to create digital handwritten notes, drawings, and annotations. The platform supports capturing digitizer input as ink data, generating ink data, managing ink data, rendering ink data as ink strokes on the output device, and converting ink to text through handwriting recognition.\n\nIn addition to capturing the basic position and movement of the pen as the user writes or draws, your app can also track and collect the varying amounts of pressure used throughout a stroke. This information, along with settings for pen tip shape, size, and rotation, ink color, and purpose (plain ink, erasing, highlighting, and selecting), enables you to provide user experiences that closely resemble writing or drawing on paper with a pen, pencil, or brush.\n\n**Note**  Your app can also support ink input from other pointer-based devices, including touch digitizers and mouse devices. \n\nThe ink platform is very flexible. It is designed to support various levels of functionality, depending on your requirements.\n\nThere are three components to the ink platform:\n\n-   [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) - A XAML UI platform control that, by default, receives and displays all input from a pen as either an ink stroke or an erase stroke.\n\n-   [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn922011) - A code-behind object, instantiated along with an [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) control (exposed through the [**InkCanvas.InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081) property). This object provides all default inking functionality exposed by the **InkCanvas**, along with a comprehensive set of APIs for additional customization and personalization.\n\n-   [**IInkD2DRenderer**](https://msdn.microsoft.com/library/mt147263) - Enables the rendering of ink strokes onto the designated Direct2D device context of a Universal Windows app, instead of the default [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) control. This enables full customization of the inking experience.\n\n## <span id=\"inkcanvas\"></span><span id=\"INKCANVAS\"></span>Basic inking with InkCanvas\n\n\nFor basic inking functionality, just place an [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) anywhere on a page.\n\nThe [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) supports ink input only from a pen. The input is either rendered as an ink stroke using default settings for color and thickness, or treated as a stroke eraser (when input is from an eraser tip or the pen tip modified with an erase button).\n\nIn this example, an [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) overlays a background image.\n\n```XAML\n<Grid Background=\"{ThemeResource ApplicationPageBackgroundThemeBrush}\">\n    <Grid.RowDefinitions>\n        <RowDefinition Height=\"Auto\"/>\n        <RowDefinition Height=\"*\"/>\n    </Grid.RowDefinitions>\n    <StackPanel x:Name=\"HeaderPanel\" Orientation=\"Horizontal\" Grid.Row=\"0\">\n        <TextBlock x:Name=\"Header\" \n                   Text=\"Basic ink sample\" \n                   Style=\"{ThemeResource HeaderTextBlockStyle}\" \n                   Margin=\"10,0,0,0\" />            \n    </StackPanel>\n    <Grid Grid.Row=\"1\">\n        <Image Source=\"Assets\\StoreLogo.png\" />\n        <InkCanvas x:Name=\"inkCanvas\" />\n    </Grid>\n</Grid>\n```\n\nThis series of images shows how pen input is rendered by this [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) control.\n\n| ![The blank InkCanvas with a background image](images/ink_basic_1_small.png) | ![The InkCanvas with ink strokes](images/ink_basic_2_small.png) | ![The InkCanvas with one stroke erased](images/ink_basic_3_small.png) |\n| --- | --- | ---|\n| The blank [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) with a background image. | The [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) with ink strokes. | The [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) with one stroke erased (note how erase operates on an entire stroke, not a portion). |\n\nThe inking functionality supported by the [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) control is provided by a code-behind object called the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn922011).\n\nFor basic inking, you don't have to concern yourself with the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn922011). However, to customize and configure inking behavior on the [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535), you must access its corresponding **InkPresenter** object.\n\n## <span id=\"inkpresenter\"></span><span id=\"INKPRESENTER\"></span>Basic customization with InkPresenter\n\n\nAn [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn922011) object is instantiated with each [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) control.\n\nAlong with providing all default inking behaviors of its corresponding [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) control, the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn922011) provides a comprehensive set of APIs for additional stroke customization. This includes stroke properties, supported input device types, and whether input is processed by the object or passed to the app.\n\n**Note**  \nThe [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn922011) cannot be instantiated directly. Instead, it is accessed through the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081) property of the [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535).\n\n \n\nHere, we configure the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081) to interpret input data from both pen and mouse as ink strokes. We also set some initial ink stroke attributes used for rendering strokes to the [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535).\n\n```CSharp\npublic MainPage()\n{\n    this.InitializeComponent();\n\n    // Set supported inking device types.\n    inkCanvas.InkPresenter.InputDeviceTypes = \n        Windows.UI.Core.CoreInputDeviceTypes.Mouse | \n        Windows.UI.Core.CoreInputDeviceTypes.Pen;\n\n    // Set initial ink stroke attributes.\n    InkDrawingAttributes drawingAttributes = new InkDrawingAttributes();\n    drawingAttributes.Color = Windows.UI.Colors.Black;\n    drawingAttributes.IgnorePressure = false;\n    drawingAttributes.FitToCurve = true;\n    inkCanvas.InkPresenter.UpdateDefaultDrawingAttributes(drawingAttributes);\n}\n```\n\nInk stroke attributes can be set dynamically to accommodate user preferences or app requirements.\n\nHere, we let a user choose from a list of ink colors.\n\n```XAML\n<Grid Background=\"{ThemeResource ApplicationPageBackgroundThemeBrush}\">\n    <Grid.RowDefinitions>\n        <RowDefinition Height=\"Auto\"/>\n        <RowDefinition Height=\"*\"/>\n    </Grid.RowDefinitions>\n    <StackPanel x:Name=\"HeaderPanel\" Orientation=\"Horizontal\" Grid.Row=\"0\">\n        <TextBlock x:Name=\"Header\" \n                   Text=\"Basic ink customization sample\" \n                   VerticalAlignment=\"Center\"\n                   Style=\"{ThemeResource HeaderTextBlockStyle}\" \n                   Margin=\"10,0,0,0\" />\n        <TextBlock Text=\"Color:\"\n                   Style=\"{StaticResource SubheaderTextBlockStyle}\"\n                   VerticalAlignment=\"Center\"\n                   Margin=\"50,0,10,0\"/>\n        <ComboBox x:Name=\"PenColor\"\n                  VerticalAlignment=\"Center\"\n                  SelectedIndex=\"0\"\n                  SelectionChanged=\"OnPenColorChanged\">\n            <ComboBoxItem Content=\"Black\"/>\n            <ComboBoxItem Content=\"Red\"/>\n        </ComboBox>\n    </StackPanel>\n    <Grid Grid.Row=\"1\">\n        <Image Source=\"Assets\\StoreLogo.png\" />\n        <InkCanvas x:Name=\"inkCanvas\" />\n    </Grid>\n</Grid>\n```\n\nWe then handle changes to the selected color and update the ink stroke attributes accordingly.\n\n```CSharp\n// Update ink stroke color for new strokes.\nprivate void OnPenColorChanged(object sender, SelectionChangedEventArgs e)\n{\n    if (inkCanvas != null)\n    {\n        InkDrawingAttributes drawingAttributes = \n            inkCanvas.InkPresenter.CopyDefaultDrawingAttributes();\n\n        string value = ((ComboBoxItem)PenColor.SelectedItem).Content.ToString();\n\n        switch (value)\n        {\n            case \"Black\":\n                drawingAttributes.Color = Windows.UI.Colors.Black;\n                break;\n            case \"Red\":\n                drawingAttributes.Color = Windows.UI.Colors.Red;\n                break;\n            default:\n                drawingAttributes.Color = Windows.UI.Colors.Black;\n                break;\n        };\n\n        inkCanvas.InkPresenter.UpdateDefaultDrawingAttributes(drawingAttributes);\n    }\n}\n```\n\nThese images shows how pen input is processed and customized by the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081).\n\n| ![the inkcanvas with default black ink strokes](images/ink-basic-custom-1-small.png) | ![the inkcanvas with user selected red ink strokes](images/ink-basic-custom-2-small.png) |\n| --- | -- |\n| The [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) with default black ink strokes. | The [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) with user selected red ink strokes. |\n\n \n\nTo provide functionality beyond inking and erasing, such as stroke selection, your app must identify specific input for the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081) to pass through unprocessed for handling by your app.\n\n## <span id=\"passthrough\"></span><span id=\"PASSTHROUGH\"></span>Pass-through input for advanced processing\n\n\nBy default, [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081) processes all input as either an ink stroke or an erase stroke. This includes input modified by a secondary hardware affordance such as a pen barrel button, a right mouse button, or similar.\n\nWhen using these secondary affordances, users typically expect some additional functionality or a modified behavior.\n\nIn some cases, you might need to expose basic ink functionality for pens without secondary affordances (functionality not usually associated with the pen tip), other input device types, or additional functionality, or modified behavior, based on a user selection in your app's UI.\n\nTo support this, [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081) can be configured to leave specific input unprocessed. This unprocessed input is then passed through to your app for processing.\n\nThe following code example steps through how to enable stroke selection when input is modified with a pen barrel button (or right mouse button).\n\nFor this example, we use the MainPage.xaml and MainPage.xaml.cs files to host all code.\n\n1.  First, we set up the UI in MainPage.xaml.\n\n    Here, we add a canvas (below the [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535)) to draw the selection stroke. Using a separate layer to draw the selection stroke leaves the **InkCanvas** and its content untouched.\n\n    ![the blank inkcanvas with an underlying selection canvas](images/ink-unprocessed-1-small.png)\n```    XAML\n<Grid Background=\"{ThemeResource ApplicationPageBackgroundThemeBrush}\">\n        <Grid.RowDefinitions>\n            <RowDefinition Height=\"Auto\"/>\n            <RowDefinition Height=\"*\"/>\n        </Grid.RowDefinitions>\n        <StackPanel x:Name=\"HeaderPanel\" Orientation=\"Horizontal\" Grid.Row=\"0\">\n            <TextBlock x:Name=\"Header\" \n                       Text=\"Advanced ink customization sample\" \n                       VerticalAlignment=\"Center\"\n                       Style=\"{ThemeResource HeaderTextBlockStyle}\" \n                       Margin=\"10,0,0,0\" />\n        </StackPanel>\n        <Grid Grid.Row=\"1\">\n            <!-- Canvas for displaying selection UI. -->\n            <Canvas x:Name=\"selectionCanvas\"/>\n            <!-- Inking area -->\n            <InkCanvas x:Name=\"inkCanvas\"/>\n        </Grid>\n    </Grid>\n```\n\n2.  In MainPage.xaml.cs, we declare a couple of global variables for keeping references to aspects of the selection UI. Specifically, the selection lasso stroke and the bounding rectangle that highlights the selected strokes.\n```    CSharp\n// Stroke selection tool.\n    private Polyline lasso;\n    // Stroke selection area.\n    private Rect boundingRect;\n```\n\n3.  Next, we configure the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081) to interpret input data from both pen and mouse as ink strokes, and set some initial ink stroke attributes used for rendering strokes to the [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535).\n\n    Most importantly, we use the [**InputProcessingConfiguration**](https://msdn.microsoft.com/library/windows/apps/dn948764) property of the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081) to indicate that any modified input should be processed by the app. Modified input is specified by assigning **InputProcessingConfiguration.RightDragAction** a value of [**InkInputRightDragAction.LeaveUnprocessed**](https://msdn.microsoft.com/library/windows/apps/dn948760).\n\n    We then assign listeners for the unprocessed [**PointerPressed**](https://msdn.microsoft.com/library/windows/apps/dn914712), [**PointerMoved**](https://msdn.microsoft.com/library/windows/apps/dn914711), and [**PointerReleased**](https://msdn.microsoft.com/library/windows/apps/dn914713) events passed through by the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081). All selection functionality is implemented in the handlers for these events.\n\n    Finally, we assign listeners for the [**StrokeStarted**](https://msdn.microsoft.com/library/windows/apps/dn914702) and [**StrokesErased**](https://msdn.microsoft.com/library/windows/apps/dn948767) events of the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081). We use the handlers for these events to clean up the selection UI if a new stroke is started or an existing stroke is erased.\n\n    ![the inkcanvas with default black ink strokes](images/ink-unprocessed-2-small.png)\n```    CSharp\npublic MainPage()\n    {\n        this.InitializeComponent();\n\n        // Set supported inking device types.\n        inkCanvas.InkPresenter.InputDeviceTypes =\n            Windows.UI.Core.CoreInputDeviceTypes.Mouse |\n            Windows.UI.Core.CoreInputDeviceTypes.Pen;\n\n        // Set initial ink stroke attributes.\n        InkDrawingAttributes drawingAttributes = new InkDrawingAttributes();\n        drawingAttributes.Color = Windows.UI.Colors.Black;\n        drawingAttributes.IgnorePressure = false;\n        drawingAttributes.FitToCurve = true;\n        inkCanvas.InkPresenter.UpdateDefaultDrawingAttributes(drawingAttributes);\n\n        // By default, the InkPresenter processes input modified by \n        // a secondary affordance (pen barrel button, right mouse \n        // button, or similar) as ink.\n        // To pass through modified input to the app for custom processing \n        // on the app UI thread instead of the background ink thread, set \n        // InputProcessingConfiguration.RightDragAction to LeaveUnprocessed.\n        inkCanvas.InkPresenter.InputProcessingConfiguration.RightDragAction = \n            InkInputRightDragAction.LeaveUnprocessed;\n\n        // Listen for unprocessed pointer events from modified input.\n        // The input is used to provide selection functionality.\n        inkCanvas.InkPresenter.UnprocessedInput.PointerPressed += \n            UnprocessedInput_PointerPressed;\n        inkCanvas.InkPresenter.UnprocessedInput.PointerMoved += \n            UnprocessedInput_PointerMoved;\n        inkCanvas.InkPresenter.UnprocessedInput.PointerReleased += \n            UnprocessedInput_PointerReleased;\n\n        // Listen for new ink or erase strokes to clean up selection UI.\n        inkCanvas.InkPresenter.StrokeInput.StrokeStarted += \n            StrokeInput_StrokeStarted;\n        inkCanvas.InkPresenter.StrokesErased += \n            InkPresenter_StrokesErased;\n    }\n```\n\n4.  We then define handlers for the unprocessed [**PointerPressed**](https://msdn.microsoft.com/library/windows/apps/dn914712), [**PointerMoved**](https://msdn.microsoft.com/library/windows/apps/dn914711), and [**PointerReleased**](https://msdn.microsoft.com/library/windows/apps/dn914713) events passed through by the [**InkPresenter**](https://msdn.microsoft.com/library/windows/apps/dn899081).\n\n    All selection functionality is implemented in these handlers, including the lasso stroke and the bounding rectangle.\n\n    ![the selection lasso](images/ink-unprocessed-3-small.png)\n```    CSharp\n// Handle unprocessed pointer events from modifed input.\n    // The input is used to provide selection functionality.\n    // Selection UI is drawn on a canvas under the InkCanvas.\n    private void UnprocessedInput_PointerPressed(\n        InkUnprocessedInput sender, PointerEventArgs args)\n    {\n        // Initialize a selection lasso.\n        lasso = new Polyline()\n        {\n            Stroke = new SolidColorBrush(Windows.UI.Colors.Blue),\n            StrokeThickness = 1,\n            StrokeDashArray = new DoubleCollection() { 5, 2 },\n        };\n\n        lasso.Points.Add(args.CurrentPoint.RawPosition);\n\n        selectionCanvas.Children.Add(lasso);\n    }\n\n    private void UnprocessedInput_PointerMoved(\n        InkUnprocessedInput sender, PointerEventArgs args)\n    {\n        // Add a point to the lasso Polyline object.\n        lasso.Points.Add(args.CurrentPoint.RawPosition);\n    }\n\n    private void UnprocessedInput_PointerReleased(\n        InkUnprocessedInput sender, PointerEventArgs args)\n    {\n        // Add the final point to the Polyline object and \n        // select strokes within the lasso area.\n        // Draw a bounding box on the selection canvas \n        // around the selected ink strokes.\n        lasso.Points.Add(args.CurrentPoint.RawPosition);\n\n        boundingRect = \n            inkCanvas.InkPresenter.StrokeContainer.SelectWithPolyLine(\n                lasso.Points);\n\n        DrawBoundingRect();\n    }\n```\n\n5.  To conclude the PointerReleased event handler, we clear the selection layer of all content (the lasso stroke) and then draw a single bounding rectangle around the ink strokes encompassed by the lasso area.\n\n    ![the selection bounding rect](images/ink-unprocessed-4-small.png)\n```    CSharp\n// Draw a bounding rectangle, on the selection canvas, encompassing \n    // all ink strokes within the lasso area.\n    private void DrawBoundingRect()\n    {\n        // Clear all existing content from the selection canvas.\n        selectionCanvas.Children.Clear();\n\n        // Draw a bounding rectangle only if there are ink strokes \n        // within the lasso area.\n        if (!((boundingRect.Width == 0) || \n            (boundingRect.Height == 0) || \n            boundingRect.IsEmpty))\n        {\n            var rectangle = new Rectangle()\n            {\n                Stroke = new SolidColorBrush(Windows.UI.Colors.Blue),\n                StrokeThickness = 1,\n                StrokeDashArray = new DoubleCollection() { 5, 2 },\n                Width = boundingRect.Width,\n                Height = boundingRect.Height\n            };\n\n            Canvas.SetLeft(rectangle, boundingRect.X);\n            Canvas.SetTop(rectangle, boundingRect.Y);\n\n            selectionCanvas.Children.Add(rectangle);\n        }\n    }\n```\n\n6.  Finally, we define handlers for the [**StrokeStarted**](https://msdn.microsoft.com/library/windows/apps/dn914702) and [**StrokesErased**](https://msdn.microsoft.com/library/windows/apps/dn948767) InkPresenter events.\n\n    These both just call the same cleanup function to clear the current selection whenever a new stroke is detected.\n```    CSharp\n// Handle new ink or erase strokes to clean up selection UI.\n    private void StrokeInput_StrokeStarted(\n        InkStrokeInput sender, Windows.UI.Core.PointerEventArgs args)\n    {\n        ClearSelection();\n    }\n\n    private void InkPresenter_StrokesErased(\n        InkPresenter sender, InkStrokesErasedEventArgs args)\n    {\n        ClearSelection();\n    }\n```\n\n7.  Here's the function to remove all selection UI from the selection canvas when a new stroke is started or an existing stroke is erased.\n```    CSharp\n// Clean up selection UI.\n    private void ClearSelection()\n    {\n        var strokes = inkCanvas.InkPresenter.StrokeContainer.GetStrokes();\n        foreach (var stroke in strokes)\n        {\n            stroke.Selected = false;\n        }\n        ClearDrawnBoundingRect();\n    }\n\n    private void ClearDrawnBoundingRect()\n    {\n        if (selectionCanvas.Children.Any())\n        {\n            selectionCanvas.Children.Clear();\n            boundingRect = Rect.Empty;\n        }\n    }\n```\n\n## <span id=\"iinkd2drenderer\"></span><span id=\"IINKD2DRENDERER\"></span>Custom ink rendering\n\n\nBy default, ink input is processed on a low-latency background thread and rendered \"wet\" as it is drawn. When the stroke is completed (pen or finger lifted, or mouse button released), the stroke is processed on the UI thread and rendered \"dry\" to the [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) layer (above the application content and replacing the wet ink).\n\nThe ink platform enables you to override this behavior and completely customize the inking experience by custom drying the ink input.\n\nCustom drying requires an [**IInkD2DRenderer**](https://msdn.microsoft.com/library/mt147263) object to manage the ink input and render it to the Direct2D device context of your Universal Windows app, instead of the default [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) control.\n\nBy calling [**ActivateCustomDrying**](https://msdn.microsoft.com/library/windows/apps/dn922012) (before the [**InkCanvas**](https://msdn.microsoft.com/library/windows/apps/dn858535) is loaded), an app creates an [**InkSynchronizer**](https://msdn.microsoft.com/library/windows/apps/dn903979) object to customize how an ink stroke is rendered dry to a [**SurfaceImageSource**](https://msdn.microsoft.com/library/windows/apps/hh702041) or [**VirtualSurfaceImageSource**](https://msdn.microsoft.com/library/windows/apps/hh702050). For example, an ink stroke could be rasterized and integrated into application content instead of as a separate **InkCanvas** layer.\n\nFor a full example of this functionality, see the [Complex ink sample](http://go.microsoft.com/fwlink/p/?LinkID=620314) .\n\n\n## Other articles in this section \n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Topic</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>[Recognize ink strokes](convert-ink-to-text.md)</p></td>\n<td align=\"left\"><p>Convert ink strokes to text using handwriting recognition, or to shapes using custom recognition.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>[Store and retrieve ink strokes](save-and-load-ink.md)</p></td>\n<td align=\"left\"><p>Store ink stroke data in a Graphics Interchange Format (GIF) file using embedded Ink Serialized Format (ISF) metadata.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n\n## <span id=\"related_topics\"></span>Related articles\n\n\n* [Handle pointer input](handle-pointer-input.md)\n* [Identify input devices](identify-input-devices.md)\n\n**Samples**\n* [Ink sample](http://go.microsoft.com/fwlink/p/?LinkID=620308)\n* [Simple ink sample](http://go.microsoft.com/fwlink/p/?LinkID=620312)\n* [Complex ink sample](http://go.microsoft.com/fwlink/p/?LinkID=620314)\n* [Basic input sample](http://go.microsoft.com/fwlink/p/?LinkID=620302)\n* [Low latency input sample](http://go.microsoft.com/fwlink/p/?LinkID=620304)\n* [User interaction mode sample](http://go.microsoft.com/fwlink/p/?LinkID=619894)\n* [Focus visuals sample](http://go.microsoft.com/fwlink/p/?LinkID=619895)\n\n**Archive Samples**\n* [Input: Device capabilities sample](http://go.microsoft.com/fwlink/p/?linkid=231530)\n* [Input: XAML user input events sample](http://go.microsoft.com/fwlink/p/?linkid=226855)\n* [XAML scrolling, panning, and zooming sample](http://go.microsoft.com/fwlink/p/?linkid=251717)\n* [Input: Gestures and manipulations with GestureRecognizer](http://go.microsoft.com/fwlink/p/?LinkID=231605)\n \n\n \n\n\n\n\n"}