{"nodes":[{"content":"If your app offers a large in-app product catalog, you can optionally follow the process described in this topic to help manage your catalog.","pos":[86,227]},{"content":"Manage a large catalog of in-app products","pos":[235,276]},{"content":"Manage a large catalog of in-app products","pos":[284,325]},{"content":"Updated for UWP apps on Windows 10.","pos":[331,366]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>","pos":[367,459]},{"content":"If your app offers a large in-app product catalog, you can optionally follow the process described in this topic to help manage your catalog.","pos":[464,605]},{"content":"You will create a handful of product entries for specific price tiers, with each one able to represent hundreds of products within a catalog.","pos":[606,747]},{"content":"To enable this capability, use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>RequestProductPurchaseAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn263382)</ept> method overload that specifies an app-defined offer associated with an in-app product listed in the Store.","pos":[749,982]},{"content":"In addition to specifying an offer and product association during the call, your app should also pass a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ProductPurchaseDisplayProperties<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn263384)</ept> object that contains the large catalog offer details.","pos":[983,1237]},{"content":"If these details are not provided, the details for the listed product will be used instead.","pos":[1238,1329]},{"content":"The Store will only use the <bpt id=\"p1\">*</bpt>offerId<ept id=\"p1\">*</ept> from the purchase request in the resulting <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>PurchaseResults<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/dn263392)</ept>.","pos":[1331,1492]},{"content":"This process does not directly modify the information originally provided when <bpt id=\"p1\">[</bpt>listing the in-app product in the Store<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt148551)</ept>.","pos":[1493,1672]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  Starting with Windows 10, the Store has no limit to the number of product listings per developer account.","pos":[1674,1789]},{"content":"In previous releases, the Store has a limit of 200 product listings per developer account, and the process described in this topic can be used to work around that limitation.","pos":[1790,1964]},{"content":"Prerequisites","pos":[1969,1982]},{"content":"This topic covers Store support for the representation of multiple in-app offers using a single in-app product listed in the Store.","pos":[1988,2119]},{"content":"If you are unfamiliar with in-app purchases please review <bpt id=\"p1\">[</bpt>Enable in-app product purchases<ept id=\"p1\">](enable-in-app-product-purchases.md)</ept> to learn about license information, and how to properly list your in-app purchase in the Store.","pos":[2120,2343]},{"content":"When you code and test new in-app offers for the first time, you must use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CurrentAppSimulator<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh779766)</ept> object instead of the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>CurrentApp<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/hh779765)</ept> object.","pos":[2348,2614]},{"content":"This way you can verify your license logic using simulated calls to the license server instead of calling the live server.","pos":[2615,2737]},{"content":"To do this, you need to customize the file named \"WindowsStoreProxy.xml\" in %userprofile%<ph id=\"ph1\">\\\\</ph>AppData<ph id=\"ph2\">\\\\</ph>local<ph id=\"ph3\">\\\\</ph>packages<ph id=\"ph4\">\\\\&amp;lt;</ph>package name<ph id=\"ph5\">&amp;gt;\\\\</ph>LocalState<ph id=\"ph6\">\\\\</ph>Microsoft<ph id=\"ph7\">\\\\</ph>Windows Store<ph id=\"ph8\">\\\\</ph>ApiData.","pos":[2738,2923]},{"content":"The Microsoft Visual Studio simulator creates this file when you run your app for the first timeâ€”or you can also load a custom one at runtime.","pos":[2924,3066]},{"content":"For more info, see <bpt id=\"p1\">**</bpt>CurrentAppSimulator<ept id=\"p1\">**</ept>.","pos":[3067,3110]},{"content":"This topic also references code examples provided in the <bpt id=\"p1\">[</bpt>Store sample<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkID=627610)</ept>.","pos":[3115,3236]},{"content":"This sample is a great way to get hands-on experience with the different monetization options provided for Universal Windows Platform (UWP) apps.","pos":[3237,3382]},{"content":"Make the purchase request for the in-app product","pos":[3387,3435]},{"content":"The purchase request for a specific product within a large catalog is handled in much the same way as any other purchase request within an app.","pos":[3437,3580]},{"content":"When your app calls the new <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>RequestProductPurchaseAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn263382)</ept> method overload, your app provides both an <bpt id=\"p3\">*</bpt>OfferId<ept id=\"p3\">*</ept> and a <bpt id=\"p4\">[</bpt><bpt id=\"p5\">**</bpt>ProductPurchaseDisplayProperties<ept id=\"p5\">**</ept><ept id=\"p4\">](https://msdn.microsoft.com/library/windows/apps/dn263390)</ept> object populated with the name of the in-app product.","pos":[3581,3910]},{"content":"Report fulfillment of the in-app offer","pos":[5172,5210]},{"content":"Your app will need to report product fulfillment to the Store as soon as the offer has been fulfilled locally.","pos":[5212,5322]},{"content":"In a large catalog scenario, if your app does not report offer fulfillment, the user will be unable to purchase any in-app offers using that same Store product listing.","pos":[5323,5491]},{"content":"As mentioned earlier, the Store only uses provided offer info to populate the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>PurchaseResults<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn263392)</ept>, and does not create a persistent association between a large catalog offer and Store product listing.","pos":[5493,5753]},{"content":"As a result you need to track user entitlement for products, and provide product-specific context (such as the name of the item being purchased or details about it) to the user outside of the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>RequestProductPurchaseAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn263382)</ept> operation.","pos":[5754,6048]},{"content":"The following code demonstrates the fulfillment call, and a UI messaging pattern in which the specific offer info is inserted.","pos":[6050,6176]},{"content":"In the absence of that specific product info, the example uses info from the product <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ListingInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br225163)</ept>.","pos":[6177,6345]},{"content":"Related topics","pos":[7809,7823]},{"content":"Enable in-app product purchases","pos":[7828,7859]},{"content":"Enable consumable in-app product purchases","pos":[7900,7942]},{"content":"Store sample (demonstrates trials and in-app purchases)","pos":[7994,8049]},{"content":"RequestProductPurchaseAsync","pos":[8105,8132]},{"content":"ProductPurchaseDisplayProperties","pos":[8199,8231]}],"content":"---\nauthor: mcleanbyron\nms.assetid: 5E722AFF-539D-456E-8C4A-ADE90CF7674A\ndescription: If your app offers a large in-app product catalog, you can optionally follow the process described in this topic to help manage your catalog.\ntitle: Manage a large catalog of in-app products\n---\n\n# Manage a large catalog of in-app products\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nIf your app offers a large in-app product catalog, you can optionally follow the process described in this topic to help manage your catalog. You will create a handful of product entries for specific price tiers, with each one able to represent hundreds of products within a catalog.\n\nTo enable this capability, use the [**RequestProductPurchaseAsync**](https://msdn.microsoft.com/library/windows/apps/dn263382) method overload that specifies an app-defined offer associated with an in-app product listed in the Store. In addition to specifying an offer and product association during the call, your app should also pass a [**ProductPurchaseDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/dn263384) object that contains the large catalog offer details. If these details are not provided, the details for the listed product will be used instead.\n\nThe Store will only use the *offerId* from the purchase request in the resulting [**PurchaseResults**](https://msdn.microsoft.com/library/windows/apps/dn263392). This process does not directly modify the information originally provided when [listing the in-app product in the Store](https://msdn.microsoft.com/library/windows/apps/mt148551).\n\n**Note**  Starting with Windows 10, the Store has no limit to the number of product listings per developer account. In previous releases, the Store has a limit of 200 product listings per developer account, and the process described in this topic can be used to work around that limitation.\n\n## Prerequisites\n\n-   This topic covers Store support for the representation of multiple in-app offers using a single in-app product listed in the Store. If you are unfamiliar with in-app purchases please review [Enable in-app product purchases](enable-in-app-product-purchases.md) to learn about license information, and how to properly list your in-app purchase in the Store.\n-   When you code and test new in-app offers for the first time, you must use the [**CurrentAppSimulator**](https://msdn.microsoft.com/library/windows/apps/hh779766) object instead of the [**CurrentApp**](https://msdn.microsoft.com/library/windows/apps/hh779765) object. This way you can verify your license logic using simulated calls to the license server instead of calling the live server. To do this, you need to customize the file named \"WindowsStoreProxy.xml\" in %userprofile%\\\\AppData\\\\local\\\\packages\\\\&lt;package name&gt;\\\\LocalState\\\\Microsoft\\\\Windows Store\\\\ApiData. The Microsoft Visual Studio simulator creates this file when you run your app for the first timeâ€”or you can also load a custom one at runtime. For more info, see **CurrentAppSimulator**.\n-   This topic also references code examples provided in the [Store sample](http://go.microsoft.com/fwlink/p/?LinkID=627610). This sample is a great way to get hands-on experience with the different monetization options provided for Universal Windows Platform (UWP) apps.\n\n## Make the purchase request for the in-app product\n\nThe purchase request for a specific product within a large catalog is handled in much the same way as any other purchase request within an app. When your app calls the new [**RequestProductPurchaseAsync**](https://msdn.microsoft.com/library/windows/apps/dn263382) method overload, your app provides both an *OfferId* and a [**ProductPurchaseDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/dn263390) object populated with the name of the in-app product.\n\n```CSharp\nstring offerId = \"1234\";\nstring displayPropertiesName = \"MusicOffer1\";\nvar displayProperties = new ProductPurchaseDisplayProperties(displayPropertiesName);\n\ntry\n{\n    PurchaseResults purchaseResults = await CurrentAppSimulator.RequestProductPurchaseAsync(\"product1\", offerId, displayProperties);\n    switch (purchaseResults.Status)\n    {\n        case ProductPurchaseStatus.Succeeded:\n            // Grant the user their purchase here, and then pass the product ID and transaction ID to currentAppSimulator.reportConsumableFulfillment\n            // To indicate local fulfillment to the Windows Store.\n            break;\n        case ProductPurchaseStatus.NotFulfilled:\n            // First check for unfulfilled purchases and grant any unfulfilled purchases from an earlier transaction.\n            // Once products are fulfilled pass the product ID and transaction ID to currentAppSimulator.reportConsumableFulfillment\n            // To indicate local fulfillment to the Windows Store.\n            break;\n        case ProductPurchaseStatus.NotPurchased:\n            // Notify user that the purchase was not completed due to cancellation or error.\n            break;\n    }\n}\ncatch (Exception)\n{\n    //Notify the user of the purchase error.\n}\n```\n\n## Report fulfillment of the in-app offer\n\nYour app will need to report product fulfillment to the Store as soon as the offer has been fulfilled locally. In a large catalog scenario, if your app does not report offer fulfillment, the user will be unable to purchase any in-app offers using that same Store product listing.\n\nAs mentioned earlier, the Store only uses provided offer info to populate the [**PurchaseResults**](https://msdn.microsoft.com/library/windows/apps/dn263392), and does not create a persistent association between a large catalog offer and Store product listing. As a result you need to track user entitlement for products, and provide product-specific context (such as the name of the item being purchased or details about it) to the user outside of the [**RequestProductPurchaseAsync**](https://msdn.microsoft.com/library/windows/apps/dn263382) operation.\n\nThe following code demonstrates the fulfillment call, and a UI messaging pattern in which the specific offer info is inserted. In the absence of that specific product info, the example uses info from the product [**ListingInformation**](https://msdn.microsoft.com/library/windows/apps/br225163).\n\n```CSharp\nstring offerId = \"1234\";\nproduct1ListingName = product1.Name;\nstring displayPropertiesName = \"MusicOffer1\";\n\nif (String.IsNullOrEmpty(displayPropertiesName))\n{\n    displayPropertiesName = product1ListingName;\n}\nvar offerIdMsg = \" with offer id \" + offerId;\nif (String.IsNullOrEmpty(offerId))\n{\n    offerIdMsg = \" with no offer id\";\n}\n\nFulfillmentResult result = await CurrentAppSimulator.ReportConsumableFulfillmentAsync(productId, transactionId);\nswitch (result)\n{\n    case FulfillmentResult.Succeeded:\n        Log(\"You bought and fulfilled \" + displayPropertiesName + offerIdMsg, NotifyType.StatusMessage);\n        break;\n    case FulfillmentResult.NothingToFulfill:\n        Log(\"There is no purchased product 1 to fulfill.\", NotifyType.StatusMessage);\n        break;\n    case FulfillmentResult.PurchasePending:\n        Log(\"You bought product 1. The purchase is pending so we cannot fulfill the product.\", NotifyType.StatusMessage);\n        break;\n    case FulfillmentResult.PurchaseReverted:\n        Log(\"You bought product 1. But your purchase has been reverted.\", NotifyType.StatusMessage);\n        // Since the user' s purchase was revoked, they got their money back.\n        // You may want to revoke the user' s access to the consumable content that was granted.\n        break;\n    case FulfillmentResult.ServerError:\n        Log(\"You bought product 1. There was an error when fulfilling.\", NotifyType.StatusMessage);\n        break;\n}\n```\n\n## Related topics\n\n* [Enable in-app product purchases](enable-in-app-product-purchases.md)\n* [Enable consumable in-app product purchases](enable-consumable-in-app-product-purchases.md)\n* [Store sample (demonstrates trials and in-app purchases)](http://go.microsoft.com/fwlink/p/?LinkID=627610)\n* [**RequestProductPurchaseAsync**](https://msdn.microsoft.com/library/windows/apps/dn263382)\n* [**ProductPurchaseDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/dn263384)\n"}